const __vite__fileDeps=["assets/YouTube-CDL9PNPm.js","assets/index-BEzWJCG4.js","assets/index-CGlhJv2e.css","assets/SoundCloud-D8U_nBgA.js","assets/Vimeo-BujsnKOP.js","assets/Mux-CM_KOxK9.js","assets/Facebook-C1JErYdk.js","assets/Streamable-Cb2BiZFk.js","assets/Wistia-CnrIbLzL.js","assets/Twitch-W_Cn_ku_.js","assets/DailyMotion-DRjWz57S.js","assets/Mixcloud-BoHfuS7a.js","assets/Vidyard-pM3O2eZB.js","assets/Kaltura-CNCSVMFh.js","assets/FilePlayer-BYiASDK5.js","assets/Preview-DOWQeFSv.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var Oo=Object.defineProperty;var Io=(A,$,B)=>$ in A?Oo(A,$,{enumerable:!0,configurable:!0,writable:!0,value:B}):A[$]=B;var Fn=(A,$,B)=>(Io(A,typeof $!="symbol"?$+"":$,B),B),vi=(A,$,B)=>{if(!$.has(A))throw TypeError("Cannot "+B)};var U=(A,$,B)=>(vi(A,$,"read from private field"),B?B.call(A):$.get(A)),Oe=(A,$,B)=>{if($.has(A))throw TypeError("Cannot add the same private member more than once");$ instanceof WeakSet?$.add(A):$.set(A,B)},it=(A,$,B,R)=>(vi(A,$,"write to private field"),R?R.call(A,B):$.set(A,B),B);var Mr=(A,$,B,R)=>({set _(O){it(A,$,O,B)},get _(){return U(A,$,R)}}),Ge=(A,$,B)=>(vi(A,$,"access private method"),B);import{r as reactExports,j as jsxRuntimeExports,f as axios,M as Modal,i as getAugmentedNamespace,k as reactDomExports,d as useNavigate,l as FullCalendar,n as index,o as index$1,p as index$2,_ as __vitePreload,q as propTypesExports,t as commonjsGlobal,g as getDefaultExportFromCjs,v as useParams,c as useAuth}from"./index-BEzWJCG4.js";import{C as CourseLessons}from"./CourseLessons-C4xM5Goo.js";const CertificateModal=({enrollmentId:A,isVisible:$,onClose:B})=>{const[R,O]=reactExports.useState(null),[H,W]=reactExports.useState(!1),[pe,ce]=reactExports.useState(null);if(reactExports.useEffect(()=>{$&&A&&(async()=>{W(!0),ce(null);try{const ve=sessionStorage.getItem("token");if(!ve)throw new Error("User not authenticated.");const he=await axios.get(`https://knowvara.com/api/api/enrollments/${A}/certificate`,{headers:{Authorization:`Bearer ${ve}`}});O(he.data.certificateURL)}catch(ve){console.error("Error fetching certificate URL:",ve),ce("Failed to retrieve certificate.")}finally{W(!1)}})()},[$,A]),!$)return null;const ue=G=>G.startsWith("http://")||G.startsWith("https://")?G:`/content/${G.startsWith("/")?G.slice(1):G}`;return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-md",children:H?jsxRuntimeExports.jsx("p",{children:"Loading certificate information..."}):pe?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-red-500",children:pe}),jsxRuntimeExports.jsx("button",{onClick:B,className:"mt-4 bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Close"})]}):R?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"mb-4",children:"Congratulations! You have received a certificate by successfully completing this course. Would you like to view the certificate now?"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end space-x-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{const G=ue(R);window.open(G,"_blank"),B()},className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Yes"}),jsxRuntimeExports.jsx("button",{onClick:B,className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"No"})]})]}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-red-500",children:"Certificate URL is not available."}),jsxRuntimeExports.jsx("button",{onClick:B,className:"mt-4 bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Close"})]})})})},useCertificate=({enrollmentId:A})=>{const[$,B]=reactExports.useState(!1),R=reactExports.useCallback(H=>{typeof H=="string"&&H.includes("certificate")&&B(!0)},[]);return{Certificate:jsxRuntimeExports.jsx(CertificateModal,{enrollmentId:A,isVisible:$,onClose:()=>B(!1)}),handleSaveResponse:R}},SCORMPlayer=({lessonId:A,enrollmentId:$,userId:B,onLessonStatusChange:R})=>{const[O,H]=reactExports.useState(null),[W,pe]=reactExports.useState(!0),ce=reactExports.useRef({}),ue=reactExports.useRef(void 0),G=reactExports.useRef("0"),ve=reactExports.useRef(!1),{Certificate:he,handleSaveResponse:oe}=useCertificate({enrollmentId:parseInt($,10)});reactExports.useEffect(()=>{(async()=>{var re;pe(!0);const V=sessionStorage.getItem("token");if(!V){console.error("No token found, user is not authenticated."),pe(!1);return}try{const se=(await axios.get(`https://knowvara.com/api/api/lessons/${A}/${$}`,{headers:{Authorization:`Bearer ${V}`}})).data;H(se),se.suspendData?(ce.current={"cmi.core.lesson_status":se.status||"incomplete","cmi.core.score.raw":((re=se.score)==null?void 0:re.toString())||"","cmi.core.session_time":se.timeSpent||"","cmi.suspend_data":se.suspendData||"","cmi.core.student_name":"Brian"},ue.current=ce.current["cmi.core.lesson_status"]):R(A,"incomplete");const fe={LMSInitialize:()=>(G.current="0",ve.current=!0,console.log("LMSInitialize called"),"true"),LMSFinish:()=>(console.log("LMSFinish called"),ae(),"true"),LMSGetValue:Y=>ve.current?(console.log(`LMSGetValue called with key: ${Y}`),ce.current[Y]||""):(G.current="301",""),LMSSetValue:(Y,ee)=>{if(console.log(`LMSSetValue called with key: ${Y}, value: ${ee}`),Y==="cmi.core.lesson_status"){const Ee=ce.current[Y];Ee!==ee&&(console.log(`Lesson status changed from ${Ee} to ${ee}`),R(A,ee),ue.current=ee)}return ce.current={...ce.current,[Y]:ee},"true"},LMSCommit:()=>(console.log("LMSCommit called"),ae(),"true"),LMSGetLastError:()=>G.current,LMSGetErrorString:Y=>"No error",LMSGetDiagnostic:Y=>"No diagnostic information available"};window.API=fe}catch(ie){console.error("Error fetching lesson:",ie)}finally{pe(!1)}})()},[A,$]);const ae=async()=>{console.log("Saving SCORM data:",ce.current);const J=sessionStorage.getItem("token");if(!J){console.error("No token found, user is not authenticated.");return}try{const V=await axios.post("https://knowvara.com/api/api/lessons/scorm/save",{lessonId:A,enrollmentId:$,userId:B,scormData:ce.current},{headers:{Authorization:`Bearer ${J}`}});oe(V.data),console.log("SCORM data saved successfully.")}catch(V){console.error("Error saving SCORM data:",V)}};return W?jsxRuntimeExports.jsx("div",{children:"Loading..."}):O?jsxRuntimeExports.jsxs("div",{className:"scorm-player-container",children:[he," ",O&&jsxRuntimeExports.jsx("iframe",{src:O.contentPath,title:"SCORM Course",className:"scorm-player"})]}):jsxRuntimeExports.jsx("div",{children:"No lesson found"})},VideoPlayer=({lessonId:A,enrollmentId:$,userId:B,onLessonStatusChange:R})=>{const O=reactExports.useRef(null),[H,W]=reactExports.useState(0),[pe,ce]=reactExports.useState(null),[ue,G]=reactExports.useState(!1),{Certificate:ve,handleSaveResponse:he}=useCertificate({enrollmentId:parseInt($,10)}),oe=re=>{const ie=Math.floor(re/3600),se=Math.floor(re%3600/60),fe=(re%60).toFixed(2),Y=String(ie).padStart(2,"0"),ee=String(se).padStart(2,"0"),Ee=Number(fe).toFixed(2).padStart(5,"0");return`${Y}:${ee}:${Ee}`};reactExports.useEffect(()=>{if(!A||!$||!B){console.error("Missing required parameters.");return}const re=async()=>{const fe=sessionStorage.getItem("token");if(!fe){console.error("No token found, user is not authenticated.");return}try{const ee=(await axios.get(`https://knowvara.com/api/api/lessons/${A}/${$}`,{headers:{Authorization:`Bearer ${fe}`}})).data;ce(ee.contentPath),ie(A,$,B)}catch(Y){console.error("Error fetching lesson details:",Y)}},ie=async(fe,Y,ee)=>{const Ee=sessionStorage.getItem("token");if(!Ee){console.error("No token found, user is not authenticated.");return}try{const be=await axios.post("https://knowvara.com/api/api/lessons/scorm/save",{lessonId:fe,enrollmentId:Y,userId:ee,scormData:{"cmi.core.lesson_status":"incomplete","cmi.core.session_time":"00:00:00.00"}},{headers:{Authorization:`Bearer ${Ee}`}});he(be.data),R(fe,"incomplete")}catch(be){console.error("Error initializing lesson status:",be)}};re();const se=window.setInterval(()=>{W(fe=>fe+1)},1e3);return()=>{window.clearInterval(se)}},[A,$,B]),reactExports.useEffect(()=>{O.current&&(O.current.load(),O.current.play())},[pe]);const ae=()=>{if(O.current){const re=O.current.currentTime,ie=O.current.duration;re>=ie-5&&!ue&&V()}},J=()=>{ue||V()},V=async()=>{if(!A||!$||!B||ue)return;G(!0);const re=sessionStorage.getItem("token");if(!re){console.error("No token found, user is not authenticated.");return}const ie=oe(H);try{await axios.post("https://knowvara.com/api/api/lessons/scorm/save",{lessonId:A,enrollmentId:$,userId:B,scormData:{"cmi.core.lesson_status":"completed","cmi.core.session_time":ie}},{headers:{Authorization:`Bearer ${re}`}}),R(A,"completed")}catch(se){console.error("Error saving lesson status:",se)}};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full w-full",children:[ve," ",pe?jsxRuntimeExports.jsx("div",{className:"flex-grow flex items-center justify-center p-2 h-full lg:h-auto",children:jsxRuntimeExports.jsxs("video",{ref:O,className:"w-full h-full object-contain lg:object-cover lg:h-full",controls:!0,autoPlay:!0,onTimeUpdate:ae,onEnded:J,children:[jsxRuntimeExports.jsx("source",{src:pe,type:"video/mp4"}),"Your browser does not support the video tag."]})}):jsxRuntimeExports.jsx("div",{className:"flex-grow flex items-center justify-center",children:jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"Loading video..."})})]})},AudioPlayer=({audioUrl:A})=>{const $=reactExports.useRef(null);return reactExports.useEffect(()=>{const B=$.current;if(B){B.pause(),B.currentTime=0,B.src=A,B.load();const R=B.play();R!==void 0&&R.catch(O=>{console.error("Autoplay was prevented:",O)})}return()=>{B&&B.pause()}},[A]),jsxRuntimeExports.jsx("div",{className:"audio-player-container p-0 m-0 w-full",children:jsxRuntimeExports.jsxs("audio",{ref:$,controls:!0,className:"w-full opacity-70 h-10",children:[jsxRuntimeExports.jsx("source",{src:A,type:"audio/mpeg"}),"Your browser does not support the audio element."]})})},parseScormTime=A=>{const[$,B,R]=A.split(":").map(Number);return $*3600+B*60+R},templates={textOnly:{title:"Text Only",layout:[{field:"content",width:"full"}],contentClass:"lesson-player-content",imageClass:""},imageRightHalf:{title:"Image Right Half",layout:[{field:"content",width:"half"},{field:"image",width:"half"}],contentClass:"lesson-player-content",imageClass:"lesson-player-image"},imageLeftHalf:{title:"Image Left Half",layout:[{field:"image",width:"half"},{field:"content",width:"half"}],contentClass:"lesson-player-content",imageClass:"lesson-player-image"},imageBottom:{title:"Image Bottom",layout:[{field:"content",width:"full"},{field:"image",width:"full"}],contentClass:"lesson-player-content",imageClass:"lesson-player-image-bottom"},imageTop:{title:"Image Top",layout:[{field:"image",width:"full"},{field:"content",width:"full"}],contentClass:"lesson-player-content",imageClass:"lesson-player-image-top"},imageOnly:{title:"Image Only",layout:[{field:"image",width:"full"}],contentClass:"",imageClass:"lesson-player-image-only"}},LessonPlayer=({lessonId:A,enrollmentId:$,userId:B,onLessonStatusChange:R})=>{const[O,H]=reactExports.useState([]),[W,pe]=reactExports.useState(0),[ce,ue]=reactExports.useState(!1),[G,ve]=reactExports.useState(!1),[he,oe]=reactExports.useState(null),[ae,J]=reactExports.useState(null),[V,re]=reactExports.useState(0),[ie,se]=reactExports.useState(!1),[fe,Y]=reactExports.useState(75),[ee,Ee]=reactExports.useState(0),[be,te]=reactExports.useState(0),[ge,de]=reactExports.useState(!1),[Ae,Fe]=reactExports.useState(!1),[ye,Te]=reactExports.useState(null),[Ue,Be]=reactExports.useState(null),[Ce,Qe]=reactExports.useState(""),[at,ft]=reactExports.useState(!1),[_t,xe]=reactExports.useState(!1),[q,ne]=reactExports.useState(null),[X,le]=reactExports.useState(""),{Certificate:me,handleSaveResponse:Se}=useCertificate({enrollmentId:parseInt($,10)}),[Pe,Le]=reactExports.useState(!1),Ke=reactExports.useRef(!1),Ve=reactExports.useRef({"cmi.core.lesson_status":"incomplete","cmi.core.score.raw":"","cmi.core.session_time":"00:00:00","cmi.suspend_data":"","cmi.core.student_name":"Brian"}),rt=We=>{const Ie=Math.floor(We/3600).toString().padStart(2,"0"),Re=Math.floor(We%3600/60).toString().padStart(2,"0"),ht=(We%60).toString().padStart(2,"0");return`${Ie}:${Re}:${ht}`},lt=async()=>{const We=rt(V);Ve.current["cmi.core.session_time"]=We;const Ie=sessionStorage.getItem("token");if(!Ie){console.error("No token found, user is not authenticated.");return}try{const Re=await axios.post("https://knowvara.com/api/api/lessons/scorm/save",{lessonId:A,enrollmentId:$,userId:B,scormData:Ve.current},{headers:{Authorization:`Bearer ${Ie}`}});return Se(Re.data),Re.data}catch(Re){return console.error("Error saving SCORM data:",Re),null}},gt=async We=>{let Ie=0;ae?Ie=Math.floor((new Date().getTime()-ae.getTime())/1e3):console.warn("sessionStartTime is not set.");const Re=V+Ie;Ve.current["cmi.core.session_time"]=rt(Re),re(Re),W===O.length-1?ie?await Mt():Ve.current["cmi.core.lesson_status"]="completed":Ve.current["cmi.suspend_data"]=We.toString(),pe(We),J(new Date),dt(),lt().catch(ct=>{console.error("Error saving SCORM data asynchronously:",ct)})},dt=()=>{Te(null),Be(null),Qe(""),ft(!1),xe(!1),ne(null),le(""),ie&&de(!1)},pt=()=>{W<O.length-1?gt(W+1):ie?Fe(!0):st()},vt=()=>{W>0&&gt(W-1)};reactExports.useEffect(()=>{H([]),pe(0),ue(!1),ve(!1),oe(null),J(null),re(0),se(!1),Y(75),Ee(0),te(0),de(!1),Fe(!1),Te(null),Be(null),Qe(""),ft(!1),xe(!1),ne(null),le(""),Le(!1),Ke.current=!1,Ve.current={"cmi.core.lesson_status":"incomplete","cmi.core.score.raw":"","cmi.core.session_time":"00:00:00","cmi.suspend_data":"","cmi.core.student_name":"Brian"}},[A]),reactExports.useEffect(()=>{const We=async()=>{var ht;try{const ct=sessionStorage.getItem("token");if(!ct){console.error("No token found, user is not authenticated.");return}const an=await axios.get(`https://knowvara.com/api/api/pages/${A}`,{headers:{Authorization:`Bearer ${ct}`}});H(an.data.pages);const Ye=(await axios.get(`https://knowvara.com/api/api/lessons/lesson/${A}`,{headers:{Authorization:`Bearer ${ct}`}})).data;if(se(!!Ye.scored),Y(Ye.masteryScore||75),an.data.pages.length>0&&!ce){const xt=await Ie();if(xt&&xt.suspendData){Ve.current={"cmi.core.lesson_status":xt.status||"incomplete","cmi.core.score.raw":((ht=xt.score)==null?void 0:ht.toString())||"","cmi.core.session_time":xt.timeSpent||"00:00:00","cmi.suspend_data":xt.suspendData||"","cmi.core.student_name":"Brian"},oe(xt.suspendData);const Nt=xt.timeSpent?parseScormTime(xt.timeSpent):0;re(Nt),J(new Date),R(A,Ve.current["cmi.core.lesson_status"]),ve(!0)}else await Re(A,$,B),J(new Date);ue(!0)}}catch(ct){console.error("Error fetching lesson pages or properties:",ct)}},Ie=async()=>{const ht=sessionStorage.getItem("token");if(!ht)return console.error("No token found, user is not authenticated."),null;try{return(await axios.get(`https://knowvara.com/api/api/lessons/${A}/${$}`,{headers:{Authorization:`Bearer ${ht}`}})).data}catch(ct){return console.error("Error fetching SCORM data:",ct),null}},Re=async(ht,ct,an)=>{const _n=sessionStorage.getItem("token");if(!_n){console.error("No token found, user is not authenticated.");return}try{await axios.post("https://knowvara.com/api/api/lessons/scorm/save",{lessonId:ht,enrollmentId:ct,userId:an,scormData:Ve.current},{headers:{Authorization:`Bearer ${_n}`}}),R(ht,"incomplete")}catch(Ye){console.error("Error initializing lesson status:",Ye)}};We()},[A,$,B,R,ce]),reactExports.useEffect(()=>()=>{if(ae){const We=Math.floor((new Date().getTime()-ae.getTime())/1e3);re(Ie=>Ie+We)}},[W,ae]);const mt=()=>{he&&(pe(Number(he)),J(new Date),ve(!1))},Mt=async()=>{const We=ee+be,Ie=We>0?ee/We*100:0,Re=Ie>=fe;Ve.current["cmi.core.score.raw"]=Ie.toFixed(2),Ve.current["cmi.core.lesson_status"]=Re?"passed":"failed"},st=async()=>{!A||!$||!B||Ke.current||(Ke.current=!0,Ve.current["cmi.core.lesson_status"]="completed",await lt(),R(A,"completed"))};reactExports.useEffect(()=>{Ae&&(async()=>(await Mt(),await lt(),R(A,Ve.current["cmi.core.lesson_status"])))()},[Ae]),reactExports.useEffect(()=>{const We=W===O.length-1;!ie&&We&&!Ke.current&&st()},[W,ie,O.length]);const Xe=We=>{const Ie=templates[We.Template].layout;return jsxRuntimeExports.jsx("div",{className:"flex space-x-4",children:Ie.map((Re,ht)=>jsxRuntimeExports.jsx("div",{className:`mb-4 ${Re.width==="half"?"w-1/2":"w-full"} px-2`,children:Re.field==="content"?jsxRuntimeExports.jsx("div",{className:`mb-4 ${templates[We.Template].contentClass}`,dangerouslySetInnerHTML:{__html:We.PageContent}}):Re.field==="image"?jsxRuntimeExports.jsx("div",{className:templates[We.Template].imageClass,children:jsxRuntimeExports.jsx("img",{src:We.ImageURL,alt:"Page Image",className:"w-full"})}):null},ht))})},qe=We=>{if(!Dt)return;const Ie=Dt.QuestionType;Ie==="Multiple Choice"||Ie==="True or False"?(Be(We),ft(!0)):Ie==="Multiple Answer"&&(ye?ye.includes(We)?Te(ye.filter(Re=>Re!==We)):Te([...ye,We]):Te([We]),ft(ye?ye.length>0:!0))},ut=We=>{Qe(We.target.value);const Ie=Dt==null?void 0:Dt.QuestionType;(Ie==="Text Entry"||Ie==="AI Graded Response")&&ft(We.target.value.trim()!=="")},Pt=async()=>{if(!Dt)return;const We=Dt.QuestionType;let Ie=!1;if(We==="AI Graded Response"&&Le(!0),We==="Multiple Choice")Ie=Ue===Dt.CorrectOption;else if(We==="Multiple Answer"){const Re=Dt.CorrectOptions?Dt.CorrectOptions.split(",").map(Number):[];if(ye){const ht=new Set(ye),ct=new Set(Re);Ie=ht.size===ct.size&&[...ht].every(an=>ct.has(an))}}else if(We==="True or False")Ie=(Ue===1?"True":"False")===Dt.TrueFalseAnswer;else if(We==="Text Entry")Ie=Dt.TextEntryAnswer?Ce.trim().toLowerCase()===Dt.TextEntryAnswer.trim().toLowerCase():!1;else if(We==="AI Graded Response")try{const Re=await axios.post("https://knowvara.com/api/api/pages/gradeAIResponse",{pageId:Dt.Id,userResponse:Ce,lessonId:A}),{isCorrect:ht,explanation:ct}=Re.data;Ie=ht,le(ct)}catch(Re){console.error("Error grading AI response:",Re),le("There was an error processing your response. Please try again.")}finally{Le(!1)}Ie?Ee(Re=>Re+1):te(Re=>Re+1),ne(Ie),de(!0),xe(!0)},At=()=>{xe(!1),pt()},Ut=We=>{const Ie=We.QuestionType;if(!Ie)return null;const Re=[We.Option1,We.Option2,We.Option3,We.Option4].filter(ht=>ht!=null&&ht.trim()!=="");return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"flex space-x-4",children:templates[We.Template].layout.map((ht,ct)=>jsxRuntimeExports.jsx("div",{className:`mb-4 ${ht.width==="half"?"w-1/2":"w-full"} px-2`,children:ht.field==="content"?jsxRuntimeExports.jsxs("div",{className:templates[We.Template].contentClass,children:[jsxRuntimeExports.jsx("div",{dangerouslySetInnerHTML:{__html:We.PageContent},className:"mb-6 ml-1"}),Ie==="Multiple Choice"&&jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center space-y-2 w-full",children:Re.map((an,_n)=>jsxRuntimeExports.jsx("button",{onClick:()=>qe(_n+1),className:`w-full max-w-2xl py-3 px-4 border rounded-lg text-lg ${Ue===_n+1?"bg-blue-500 text-white shadow-lg":"bg-white text-black shadow-sm hover:bg-gray-200"}`,children:an},_n))}),Ie==="Multiple Answer"&&jsxRuntimeExports.jsx("div",{className:"flex flex-col items-center justify-center space-y-2 w-full",children:Re.map((an,_n)=>{const Ye=_n+1,xt=ye?ye.includes(Ye):!1;return jsxRuntimeExports.jsx("button",{onClick:()=>qe(Ye),className:`w-full max-w-2xl py-3 px-4 border rounded-lg text-lg ${xt?"bg-blue-500 text-white shadow-lg":"bg-white text-black shadow-sm hover:bg-gray-200"}`,children:an},_n)})}),Ie==="True or False"&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2 w-full",children:[jsxRuntimeExports.jsx("button",{onClick:()=>qe(1),className:`w-full max-w-2xl py-3 px-4 border rounded-lg text-lg ${Ue===1?"bg-blue-500 text-white shadow-lg":"bg-white text-black shadow-sm hover:bg-gray-200"}`,children:"True"}),jsxRuntimeExports.jsx("button",{onClick:()=>qe(2),className:`w-full max-w-2xl py-3 px-4 border rounded-lg text-lg ${Ue===2?"bg-blue-500 text-white shadow-lg":"bg-white text-black shadow-sm hover:bg-gray-200"}`,children:"False"})]}),Ie==="Text Entry"&&jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("input",{type:"text",value:Ce,onChange:ut,placeholder:"Enter your answer",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring focus:border-blue-300"})}),Ie==="AI Graded Response"&&jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("textarea",{value:Ce,onChange:ut,placeholder:"Enter your response here...",className:"w-full h-32 p-3 border rounded-md focus:outline-none focus:ring focus:border-blue-300",disabled:Pe})})]}):ht.field==="image"?jsxRuntimeExports.jsx("div",{className:templates[We.Template].imageClass,children:jsxRuntimeExports.jsx("img",{src:We.ImageURL,alt:"Page Image",className:"w-full"})}):null},ct))}),jsxRuntimeExports.jsx("div",{className:"text-right mt-1 pr-2",children:jsxRuntimeExports.jsx("button",{onClick:Pt,disabled:!at||ie&&ge||Pe,className:`py-2 px-4 rounded ${!at||ie&&ge||Pe?"bg-gray-300 text-gray-700 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,children:"Submit Question"})}),Pe&&Ie==="AI Graded Response"&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center mt-4 space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),jsxRuntimeExports.jsx("span",{children:"Grading your response now. Please wait a moment..."})]}),_t&&jsxRuntimeExports.jsxs(Modal,{title:q?"Correct!":"Incorrect",onClose:()=>xe(!1),onConfirm:At,singleButton:ie,children:[q?"Congratulations! Your answer is correct.":"Sorry, your answer is incorrect.",X&&jsxRuntimeExports.jsx("p",{className:"mt-2",children:X})]})]})},Xt=We=>We.Type==="question"&&We.QuestionType?Ut(We):Xe(We);if(Ae){const We=ee+be,Ie=We>0?ee/We*100:0,Re=Ie>=fe;return jsxRuntimeExports.jsxs("div",{className:"lesson-player-container bg-indigo-100 min-h-screen",children:[me," ",jsxRuntimeExports.jsx("div",{className:"lesson-player-title pt-2",children:jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Lesson Results"})}),jsxRuntimeExports.jsxs("div",{className:"lesson-player-content-container p-6 pt-12 flex flex-col items-center",children:[Re?jsxRuntimeExports.jsx("div",{className:"text-green-600 text-2xl mt-8",children:"Congratulations! You have passed this lesson."}):jsxRuntimeExports.jsx("div",{className:"text-red-600 text-2xl mt-8",children:"Unfortunately you have not passed this lesson."}),jsxRuntimeExports.jsxs("div",{className:"text-xl ml-4 pt-8",children:["Your Score: ",Ie.toFixed(2),"%"]}),jsxRuntimeExports.jsxs("div",{className:"text-lg ml-4",children:["Required Score: ",fe.toFixed(2),"%"]})]})]})}if(O.length===0)return jsxRuntimeExports.jsx("div",{children:"Loading lesson pages..."});const Dt=O[W],Kt=Dt.Type==="question"&&Dt.QuestionType,en=W===O.length-1,Vt=!(ie&&(Kt||Ae)),ln=()=>ie?en&&!Kt?!0:W<O.length-1&&!Kt:W<O.length-1;return jsxRuntimeExports.jsxs("div",{className:"lesson-player-container bg-indigo-100 min-h-screen",children:[me," ",G&&jsxRuntimeExports.jsx(Modal,{title:"Resume Lesson",onClose:()=>ve(!1),onConfirm:mt,singleButton:!1,children:jsxRuntimeExports.jsx("p",{children:"Would you like to return to where you left off?"})}),jsxRuntimeExports.jsx("div",{className:"lesson-player-title pt-2",children:jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold mb-4",children:Dt.Title||"Untitled Page"})}),jsxRuntimeExports.jsx("div",{className:"lesson-player-content-container p-6",children:Xt(Dt)}),Vt&&jsxRuntimeExports.jsxs("div",{className:"lesson-player-nav subnav-gradient flex items-center justify-between p-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:W>0?jsxRuntimeExports.jsx("button",{onClick:vt,className:"bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Back"}):jsxRuntimeExports.jsx("div",{})}),Dt.AudioURL&&jsxRuntimeExports.jsx("div",{className:"audio-player-container flex justify-center flex-1",children:jsxRuntimeExports.jsx(AudioPlayer,{audioUrl:Dt.AudioURL})}),jsxRuntimeExports.jsx("div",{className:"flex-1 text-right",children:ln()&&jsxRuntimeExports.jsx("button",{onClick:pt,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Next"})})]}),_t&&jsxRuntimeExports.jsxs(Modal,{title:q?"Correct!":"Incorrect",onClose:()=>xe(!1),onConfirm:At,singleButton:ie,children:[q?"Congratulations! Your answer is correct.":"Sorry, your answer is incorrect.",X&&jsxRuntimeExports.jsx("p",{className:"mt-2",children:X})]})]})};var lib$i={exports:{}},core_min={};function commonjsRequire(A){throw new Error('Could not dynamically require "'+A+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function($,B){module.exports=$.pdfjsLib=B()})(globalThis,()=>(()=>{var __webpack_modules__=[,(A,$)=>{var ln;Object.defineProperty($,"__esModule",{value:!0}),$.VerbosityLevel=$.Util=$.UnknownErrorException=$.UnexpectedResponseException=$.TextRenderingMode=$.RenderingIntentFlag=$.PromiseCapability=$.PermissionFlag=$.PasswordResponses=$.PasswordException=$.PageActionEventType=$.OPS=$.MissingPDFException=$.MAX_IMAGE_SIZE_TO_CACHE=$.LINE_FACTOR=$.LINE_DESCENT_FACTOR=$.InvalidPDFException=$.ImageKind=$.IDENTITY_MATRIX=$.FormatError=$.FeatureTest=$.FONT_IDENTITY_MATRIX=$.DocumentActionEventType=$.CMapCompressionType=$.BaseException=$.BASELINE_FACTOR=$.AnnotationType=$.AnnotationReplyType=$.AnnotationPrefix=$.AnnotationMode=$.AnnotationFlag=$.AnnotationFieldFlag=$.AnnotationEditorType=$.AnnotationEditorPrefix=$.AnnotationEditorParamsType=$.AnnotationBorderStyleType=$.AnnotationActionEventType=$.AbortException=void 0,$.assert=Qe,$.bytesToString=Le,$.createValidAbsoluteUrl=ft,$.getModificationDate=At,$.getUuid=en,$.getVerbosityLevel=Te,$.info=Ue,$.isArrayBuffer=ut,$.isArrayEqual=Pt,$.isNodeJS=void 0,$.normalizeUnicode=Kt,$.objectFromMap=lt,$.objectSize=rt,$.setVerbosityLevel=ye,$.shadow=_t,$.string32=Ve,$.stringToBytes=Ke,$.stringToPDFString=st,$.stringToUTF8String=Xe,$.unreachable=Ce,$.utf8StringToString=qe,$.warn=Be;const B=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");$.isNodeJS=B;const R=[1,0,0,1,0,0];$.IDENTITY_MATRIX=R;const O=[.001,0,0,.001,0,0];$.FONT_IDENTITY_MATRIX=O;const H=1e7;$.MAX_IMAGE_SIZE_TO_CACHE=H;const W=1.35;$.LINE_FACTOR=W;const pe=.35;$.LINE_DESCENT_FACTOR=pe;const ce=pe/W;$.BASELINE_FACTOR=ce;const ue={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};$.RenderingIntentFlag=ue;const G={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};$.AnnotationMode=G;const ve="pdfjs_internal_editor_";$.AnnotationEditorPrefix=ve;const he={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};$.AnnotationEditorType=he;const oe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};$.AnnotationEditorParamsType=oe;const ae={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};$.PermissionFlag=ae;const J={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};$.TextRenderingMode=J;const V={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};$.ImageKind=V;const re={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};$.AnnotationType=re;const ie={GROUP:"Group",REPLY:"R"};$.AnnotationReplyType=ie;const se={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};$.AnnotationFlag=se;const fe={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};$.AnnotationFieldFlag=fe;const Y={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};$.AnnotationBorderStyleType=Y;const ee={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};$.AnnotationActionEventType=ee;const Ee={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};$.DocumentActionEventType=Ee;const be={O:"PageOpen",C:"PageClose"};$.PageActionEventType=be;const te={ERRORS:0,WARNINGS:1,INFOS:5};$.VerbosityLevel=te;const ge={NONE:0,BINARY:1};$.CMapCompressionType=ge;const de={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};$.OPS=de;const Ae={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};$.PasswordResponses=Ae;let Fe=te.WARNINGS;function ye(We){Number.isInteger(We)&&(Fe=We)}function Te(){return Fe}function Ue(We){Fe>=te.INFOS&&console.log(`Info: ${We}`)}function Be(We){Fe>=te.WARNINGS&&console.log(`Warning: ${We}`)}function Ce(We){throw new Error(We)}function Qe(We,Ie){We||Ce(Ie)}function at(We){switch(We==null?void 0:We.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ft(We,Ie=null,Re=null){if(!We)return null;try{if(Re&&typeof We=="string"){if(Re.addDefaultProtocol&&We.startsWith("www.")){const ct=We.match(/\./g);(ct==null?void 0:ct.length)>=2&&(We=`http://${We}`)}if(Re.tryConvertEncoding)try{We=Xe(We)}catch{}}const ht=Ie?new URL(We,Ie):new URL(We);if(at(ht))return ht}catch{}return null}function _t(We,Ie,Re,ht=!1){return Object.defineProperty(We,Ie,{value:Re,enumerable:!ht,configurable:!0,writable:!1}),Re}const xe=function(){function Ie(Re,ht){this.constructor===Ie&&Ce("Cannot initialize BaseException."),this.message=Re,this.name=ht}return Ie.prototype=new Error,Ie.constructor=Ie,Ie}();$.BaseException=xe;class q extends xe{constructor(Ie,Re){super(Ie,"PasswordException"),this.code=Re}}$.PasswordException=q;class ne extends xe{constructor(Ie,Re){super(Ie,"UnknownErrorException"),this.details=Re}}$.UnknownErrorException=ne;class X extends xe{constructor(Ie){super(Ie,"InvalidPDFException")}}$.InvalidPDFException=X;class le extends xe{constructor(Ie){super(Ie,"MissingPDFException")}}$.MissingPDFException=le;class me extends xe{constructor(Ie,Re){super(Ie,"UnexpectedResponseException"),this.status=Re}}$.UnexpectedResponseException=me;class Se extends xe{constructor(Ie){super(Ie,"FormatError")}}$.FormatError=Se;class Pe extends xe{constructor(Ie){super(Ie,"AbortException")}}$.AbortException=Pe;function Le(We){(typeof We!="object"||(We==null?void 0:We.length)===void 0)&&Ce("Invalid argument for bytesToString");const Ie=We.length,Re=8192;if(Ie<Re)return String.fromCharCode.apply(null,We);const ht=[];for(let ct=0;ct<Ie;ct+=Re){const an=Math.min(ct+Re,Ie),_n=We.subarray(ct,an);ht.push(String.fromCharCode.apply(null,_n))}return ht.join("")}function Ke(We){typeof We!="string"&&Ce("Invalid argument for stringToBytes");const Ie=We.length,Re=new Uint8Array(Ie);for(let ht=0;ht<Ie;++ht)Re[ht]=We.charCodeAt(ht)&255;return Re}function Ve(We){return String.fromCharCode(We>>24&255,We>>16&255,We>>8&255,We&255)}function rt(We){return Object.keys(We).length}function lt(We){const Ie=Object.create(null);for(const[Re,ht]of We)Ie[Re]=ht;return Ie}function gt(){const We=new Uint8Array(4);return We[0]=1,new Uint32Array(We.buffer,0,1)[0]===1}function dt(){try{return new Function(""),!0}catch{return!1}}class pt{static get isLittleEndian(){return _t(this,"isLittleEndian",gt())}static get isEvalSupported(){return _t(this,"isEvalSupported",dt())}static get isOffscreenCanvasSupported(){return _t(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?_t(this,"platform",{isWin:!1,isMac:!1}):_t(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Ie,Re;return _t(this,"isCSSRoundSupported",(Re=(Ie=globalThis.CSS)==null?void 0:Ie.supports)==null?void 0:Re.call(Ie,"width: round(1.5px, 1px)"))}}$.FeatureTest=pt;const vt=[...Array(256).keys()].map(We=>We.toString(16).padStart(2,"0"));class mt{static makeHexColor(Ie,Re,ht){return`#${vt[Ie]}${vt[Re]}${vt[ht]}`}static scaleMinMax(Ie,Re){let ht;Ie[0]?(Ie[0]<0&&(ht=Re[0],Re[0]=Re[1],Re[1]=ht),Re[0]*=Ie[0],Re[1]*=Ie[0],Ie[3]<0&&(ht=Re[2],Re[2]=Re[3],Re[3]=ht),Re[2]*=Ie[3],Re[3]*=Ie[3]):(ht=Re[0],Re[0]=Re[2],Re[2]=ht,ht=Re[1],Re[1]=Re[3],Re[3]=ht,Ie[1]<0&&(ht=Re[2],Re[2]=Re[3],Re[3]=ht),Re[2]*=Ie[1],Re[3]*=Ie[1],Ie[2]<0&&(ht=Re[0],Re[0]=Re[1],Re[1]=ht),Re[0]*=Ie[2],Re[1]*=Ie[2]),Re[0]+=Ie[4],Re[1]+=Ie[4],Re[2]+=Ie[5],Re[3]+=Ie[5]}static transform(Ie,Re){return[Ie[0]*Re[0]+Ie[2]*Re[1],Ie[1]*Re[0]+Ie[3]*Re[1],Ie[0]*Re[2]+Ie[2]*Re[3],Ie[1]*Re[2]+Ie[3]*Re[3],Ie[0]*Re[4]+Ie[2]*Re[5]+Ie[4],Ie[1]*Re[4]+Ie[3]*Re[5]+Ie[5]]}static applyTransform(Ie,Re){const ht=Ie[0]*Re[0]+Ie[1]*Re[2]+Re[4],ct=Ie[0]*Re[1]+Ie[1]*Re[3]+Re[5];return[ht,ct]}static applyInverseTransform(Ie,Re){const ht=Re[0]*Re[3]-Re[1]*Re[2],ct=(Ie[0]*Re[3]-Ie[1]*Re[2]+Re[2]*Re[5]-Re[4]*Re[3])/ht,an=(-Ie[0]*Re[1]+Ie[1]*Re[0]+Re[4]*Re[1]-Re[5]*Re[0])/ht;return[ct,an]}static getAxialAlignedBoundingBox(Ie,Re){const ht=this.applyTransform(Ie,Re),ct=this.applyTransform(Ie.slice(2,4),Re),an=this.applyTransform([Ie[0],Ie[3]],Re),_n=this.applyTransform([Ie[2],Ie[1]],Re);return[Math.min(ht[0],ct[0],an[0],_n[0]),Math.min(ht[1],ct[1],an[1],_n[1]),Math.max(ht[0],ct[0],an[0],_n[0]),Math.max(ht[1],ct[1],an[1],_n[1])]}static inverseTransform(Ie){const Re=Ie[0]*Ie[3]-Ie[1]*Ie[2];return[Ie[3]/Re,-Ie[1]/Re,-Ie[2]/Re,Ie[0]/Re,(Ie[2]*Ie[5]-Ie[4]*Ie[3])/Re,(Ie[4]*Ie[1]-Ie[5]*Ie[0])/Re]}static singularValueDecompose2dScale(Ie){const Re=[Ie[0],Ie[2],Ie[1],Ie[3]],ht=Ie[0]*Re[0]+Ie[1]*Re[2],ct=Ie[0]*Re[1]+Ie[1]*Re[3],an=Ie[2]*Re[0]+Ie[3]*Re[2],_n=Ie[2]*Re[1]+Ie[3]*Re[3],Ye=(ht+_n)/2,xt=Math.sqrt((ht+_n)**2-4*(ht*_n-an*ct))/2,Nt=Ye+xt||1,$t=Ye-xt||1;return[Math.sqrt(Nt),Math.sqrt($t)]}static normalizeRect(Ie){const Re=Ie.slice(0);return Ie[0]>Ie[2]&&(Re[0]=Ie[2],Re[2]=Ie[0]),Ie[1]>Ie[3]&&(Re[1]=Ie[3],Re[3]=Ie[1]),Re}static intersect(Ie,Re){const ht=Math.max(Math.min(Ie[0],Ie[2]),Math.min(Re[0],Re[2])),ct=Math.min(Math.max(Ie[0],Ie[2]),Math.max(Re[0],Re[2]));if(ht>ct)return null;const an=Math.max(Math.min(Ie[1],Ie[3]),Math.min(Re[1],Re[3])),_n=Math.min(Math.max(Ie[1],Ie[3]),Math.max(Re[1],Re[3]));return an>_n?null:[ht,an,ct,_n]}static bezierBoundingBox(Ie,Re,ht,ct,an,_n,Ye,xt){const Nt=[],$t=[[],[]];let Bt,Ht,En,wt,pn,jt,$e,K;for(let Ze=0;Ze<2;++Ze){if(Ze===0?(Ht=6*Ie-12*ht+6*an,Bt=-3*Ie+9*ht-9*an+3*Ye,En=3*ht-3*Ie):(Ht=6*Re-12*ct+6*_n,Bt=-3*Re+9*ct-9*_n+3*xt,En=3*ct-3*Re),Math.abs(Bt)<1e-12){if(Math.abs(Ht)<1e-12)continue;wt=-En/Ht,0<wt&&wt<1&&Nt.push(wt);continue}$e=Ht*Ht-4*En*Bt,K=Math.sqrt($e),!($e<0)&&(pn=(-Ht+K)/(2*Bt),0<pn&&pn<1&&Nt.push(pn),jt=(-Ht-K)/(2*Bt),0<jt&&jt<1&&Nt.push(jt))}let we=Nt.length,Me;const ze=we;for(;we--;)wt=Nt[we],Me=1-wt,$t[0][we]=Me*Me*Me*Ie+3*Me*Me*wt*ht+3*Me*wt*wt*an+wt*wt*wt*Ye,$t[1][we]=Me*Me*Me*Re+3*Me*Me*wt*ct+3*Me*wt*wt*_n+wt*wt*wt*xt;return $t[0][ze]=Ie,$t[1][ze]=Re,$t[0][ze+1]=Ye,$t[1][ze+1]=xt,$t[0].length=$t[1].length=ze+2,[Math.min(...$t[0]),Math.min(...$t[1]),Math.max(...$t[0]),Math.max(...$t[1])]}}$.Util=mt;const Mt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function st(We){if(We[0]>="ï"){let Re;if(We[0]==="þ"&&We[1]==="ÿ"?Re="utf-16be":We[0]==="ÿ"&&We[1]==="þ"?Re="utf-16le":We[0]==="ï"&&We[1]==="»"&&We[2]==="¿"&&(Re="utf-8"),Re)try{const ht=new TextDecoder(Re,{fatal:!0}),ct=Ke(We);return ht.decode(ct)}catch(ht){Be(`stringToPDFString: "${ht}".`)}}const Ie=[];for(let Re=0,ht=We.length;Re<ht;Re++){const ct=Mt[We.charCodeAt(Re)];Ie.push(ct?String.fromCharCode(ct):We.charAt(Re))}return Ie.join("")}function Xe(We){return decodeURIComponent(escape(We))}function qe(We){return unescape(encodeURIComponent(We))}function ut(We){return typeof We=="object"&&(We==null?void 0:We.byteLength)!==void 0}function Pt(We,Ie){if(We.length!==Ie.length)return!1;for(let Re=0,ht=We.length;Re<ht;Re++)if(We[Re]!==Ie[Re])return!1;return!0}function At(We=new Date){return[We.getUTCFullYear().toString(),(We.getUTCMonth()+1).toString().padStart(2,"0"),We.getUTCDate().toString().padStart(2,"0"),We.getUTCHours().toString().padStart(2,"0"),We.getUTCMinutes().toString().padStart(2,"0"),We.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ut{constructor(){Oe(this,ln,!1);this.promise=new Promise((Ie,Re)=>{this.resolve=ht=>{it(this,ln,!0),Ie(ht)},this.reject=ht=>{it(this,ln,!0),Re(ht)}})}get settled(){return U(this,ln)}}ln=new WeakMap,$.PromiseCapability=Ut;let Xt=null,Dt=null;function Kt(We){return Xt||(Xt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Dt=new Map([["ﬅ","ſt"]])),We.replaceAll(Xt,(Ie,Re,ht)=>Re?Re.normalize("NFKC"):Dt.get(ht))}function en(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const We=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(We);else for(let Ie=0;Ie<32;Ie++)We[Ie]=Math.floor(Math.random()*255);return Le(We)}const Vt="pdfjs_internal_id_";$.AnnotationPrefix=Vt},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var A,B,R,O,xr,W,Wr,ce,ue,G,ve,he,oe,ae,J,V,Gr,ie,se,bi,Y,ee;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(be){if(typeof be=="string"||be instanceof URL?be={url:be}:(0,_util.isArrayBuffer)(be)&&(be={data:be}),typeof be!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!be.url&&!be.data&&!be.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const te=new PDFDocumentLoadingTask,{docId:ge}=te,de=be.url?getUrlProp(be.url):null,Ae=be.data?getDataProp(be.data):null,Fe=be.httpHeaders||null,ye=be.withCredentials===!0,Te=be.password??null,Ue=be.range instanceof PDFDataRangeTransport?be.range:null,Be=Number.isInteger(be.rangeChunkSize)&&be.rangeChunkSize>0?be.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Ce=be.worker instanceof PDFWorker?be.worker:null;const Qe=be.verbosity,at=typeof be.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(be.docBaseUrl)?be.docBaseUrl:null,ft=typeof be.cMapUrl=="string"?be.cMapUrl:null,_t=be.cMapPacked!==!1,xe=be.CMapReaderFactory||DefaultCMapReaderFactory,q=typeof be.standardFontDataUrl=="string"?be.standardFontDataUrl:null,ne=be.StandardFontDataFactory||DefaultStandardFontDataFactory,X=be.stopAtErrors!==!0,le=Number.isInteger(be.maxImageSize)&&be.maxImageSize>-1?be.maxImageSize:-1,me=be.isEvalSupported!==!1,Se=typeof be.isOffscreenCanvasSupported=="boolean"?be.isOffscreenCanvasSupported:!_util.isNodeJS,Pe=Number.isInteger(be.canvasMaxAreaInBytes)?be.canvasMaxAreaInBytes:-1,Le=typeof be.disableFontFace=="boolean"?be.disableFontFace:_util.isNodeJS,Ke=be.fontExtraProperties===!0,Ve=be.enableXfa===!0,rt=be.ownerDocument||globalThis.document,lt=be.disableRange===!0,gt=be.disableStream===!0,dt=be.disableAutoFetch===!0,pt=be.pdfBug===!0,vt=Ue?Ue.length:be.length??NaN,mt=typeof be.useSystemFonts=="boolean"?be.useSystemFonts:!_util.isNodeJS&&!Le,Mt=typeof be.useWorkerFetch=="boolean"?be.useWorkerFetch:xe===_display_utils.DOMCMapReaderFactory&&ne===_display_utils.DOMStandardFontDataFactory&&ft&&q&&(0,_display_utils.isValidFetchUrl)(ft,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(q,document.baseURI),st=be.canvasFactory||new DefaultCanvasFactory({ownerDocument:rt}),Xe=be.filterFactory||new DefaultFilterFactory({docId:ge,ownerDocument:rt}),qe=null;(0,_util.setVerbosityLevel)(Qe);const ut={canvasFactory:st,filterFactory:Xe};if(Mt||(ut.cMapReaderFactory=new xe({baseUrl:ft,isCompressed:_t}),ut.standardFontDataFactory=new ne({baseUrl:q})),!Ce){const Ut={verbosity:Qe,port:_worker_options.GlobalWorkerOptions.workerPort};Ce=Ut.port?PDFWorker.fromPort(Ut):new PDFWorker(Ut),te._worker=Ce}const Pt={docId:ge,apiVersion:"3.11.174",data:Ae,password:Te,disableAutoFetch:dt,rangeChunkSize:Be,length:vt,docBaseUrl:at,enableXfa:Ve,evaluatorOptions:{maxImageSize:le,disableFontFace:Le,ignoreErrors:X,isEvalSupported:me,isOffscreenCanvasSupported:Se,canvasMaxAreaInBytes:Pe,fontExtraProperties:Ke,useSystemFonts:mt,cMapUrl:Mt?ft:null,standardFontDataUrl:Mt?q:null}},At={ignoreErrors:X,isEvalSupported:me,disableFontFace:Le,fontExtraProperties:Ke,enableXfa:Ve,ownerDocument:rt,disableAutoFetch:dt,pdfBug:pt,styleElement:qe};return Ce.promise.then(function(){if(te.destroyed)throw new Error("Loading aborted");const Ut=_fetchDocument(Ce,Pt),Xt=new Promise(function(Dt){let Kt;Ue?Kt=new _transport_stream.PDFDataTransportStream({length:vt,initialData:Ue.initialData,progressiveDone:Ue.progressiveDone,contentDispositionFilename:Ue.contentDispositionFilename,disableRange:lt,disableStream:gt},Ue):Ae||(Kt=(Vt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Vt):(0,_display_utils.isValidFetchUrl)(Vt.url)?new _displayFetch_stream.PDFFetchStream(Vt):new _displayNetwork.PDFNetworkStream(Vt))({url:de,length:vt,httpHeaders:Fe,withCredentials:ye,rangeChunkSize:Be,disableRange:lt,disableStream:gt})),Dt(Kt)});return Promise.all([Ut,Xt]).then(function([Dt,Kt]){if(te.destroyed)throw new Error("Loading aborted");const en=new _message_handler.MessageHandler(ge,Dt,Ce.port),Vt=new WorkerTransport(en,te,Kt,At,ut);te._transport=Vt,en.send("Ready",null)})}).catch(te._capability.reject),te}async function _fetchDocument(be,te){if(be.destroyed)throw new Error("Worker was destroyed");const ge=await be.messageHandler.sendWithPromise("GetDocRequest",te,te.data?[te.data.buffer]:null);if(be.destroyed)throw new Error("Worker was destroyed");return ge}function getUrlProp(be){if(be instanceof URL)return be.href;try{return new URL(be,window.location).href}catch{if(_util.isNodeJS&&typeof be=="string")return be}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(be){if(_util.isNodeJS&&typeof Buffer<"u"&&be instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(be instanceof Uint8Array&&be.byteLength===be.buffer.byteLength)return be;if(typeof be=="string")return(0,_util.stringToBytes)(be);if(typeof be=="object"&&!isNaN(be==null?void 0:be.length)||(0,_util.isArrayBuffer)(be))return new Uint8Array(be);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const $=class ${constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Mr($,A)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var te,ge,de;this.destroyed=!0;try{(te=this._worker)!=null&&te.port&&(this._worker._pendingDestroy=!0),await((ge=this._transport)==null?void 0:ge.destroy())}catch(Ae){throw(de=this._worker)!=null&&de.port&&delete this._worker._pendingDestroy,Ae}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};A=new WeakMap,Oe($,A,0);let PDFDocumentLoadingTask=$;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(te,ge,de=!1,Ae=null){this.length=te,this.initialData=ge,this.progressiveDone=de,this.contentDispositionFilename=Ae,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(te){this._rangeListeners.push(te)}addProgressListener(te){this._progressListeners.push(te)}addProgressiveReadListener(te){this._progressiveReadListeners.push(te)}addProgressiveDoneListener(te){this._progressiveDoneListeners.push(te)}onDataRange(te,ge){for(const de of this._rangeListeners)de(te,ge)}onDataProgress(te,ge){this._readyCapability.promise.then(()=>{for(const de of this._progressListeners)de(te,ge)})}onDataProgressiveRead(te){this._readyCapability.promise.then(()=>{for(const ge of this._progressiveReadListeners)ge(te)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const te of this._progressiveDoneListeners)te()})}transportReady(){this._readyCapability.resolve()}requestDataRange(te,ge){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(te,ge){this._pdfInfo=te,this._transport=ge,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(de=>{if(!de)return de;const Ae=[];for(const Fe in de)Ae.push(...de[Fe]);return Ae}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(te){return this._transport.getPage(te)}getPageIndex(te){return this._transport.getPageIndex(te)}getDestinations(){return this._transport.getDestinations()}getDestination(te){return this._transport.getDestination(te)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(te=!1){return this._transport.startCleanup(te||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(te,ge,de,Ae=!1){Oe(this,O);Oe(this,W);Oe(this,B,null);Oe(this,R,!1);this._pageIndex=te,this._pageInfo=ge,this._transport=de,this._stats=Ae?new _display_utils.StatTimer:null,this._pdfBug=Ae,this.commonObjs=de.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:te,rotation:ge=this.rotate,offsetX:de=0,offsetY:Ae=0,dontFlip:Fe=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:te,rotation:ge,offsetX:de,offsetY:Ae,dontFlip:Fe})}getAnnotations({intent:te="display"}={}){const ge=this._transport.getRenderingIntent(te);return this._transport.getAnnotations(this._pageIndex,ge.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var te;return((te=this._transport._htmlForXfa)==null?void 0:te.children[this._pageIndex])||null}render({canvasContext:te,viewport:ge,intent:de="display",annotationMode:Ae=_util.AnnotationMode.ENABLE,transform:Fe=null,background:ye=null,optionalContentConfigPromise:Te=null,annotationCanvasMap:Ue=null,pageColors:Be=null,printAnnotationStorage:Ce=null}){var ne,X;(ne=this._stats)==null||ne.time("Overall");const Qe=this._transport.getRenderingIntent(de,Ae,Ce);it(this,R,!1),Ge(this,W,Wr).call(this),Te||(Te=this._transport.getOptionalContentConfig());let at=this._intentStates.get(Qe.cacheKey);at||(at=Object.create(null),this._intentStates.set(Qe.cacheKey,at)),at.streamReaderCancelTimeout&&(clearTimeout(at.streamReaderCancelTimeout),at.streamReaderCancelTimeout=null);const ft=!!(Qe.renderingIntent&_util.RenderingIntentFlag.PRINT);at.displayReadyCapability||(at.displayReadyCapability=new _util.PromiseCapability,at.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(X=this._stats)==null||X.time("Page Request"),this._pumpOperatorList(Qe));const _t=le=>{var me,Se;at.renderTasks.delete(xe),(this._maybeCleanupAfterRender||ft)&&it(this,R,!0),Ge(this,O,xr).call(this,!ft),le?(xe.capability.reject(le),this._abortOperatorList({intentState:at,reason:le instanceof Error?le:new Error(le)})):xe.capability.resolve(),(me=this._stats)==null||me.timeEnd("Rendering"),(Se=this._stats)==null||Se.timeEnd("Overall")},xe=new InternalRenderTask({callback:_t,params:{canvasContext:te,viewport:ge,transform:Fe,background:ye},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Ue,operatorList:at.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!ft,pdfBug:this._pdfBug,pageColors:Be});(at.renderTasks||(at.renderTasks=new Set)).add(xe);const q=xe.task;return Promise.all([at.displayReadyCapability.promise,Te]).then(([le,me])=>{var Se;if(this.destroyed){_t();return}(Se=this._stats)==null||Se.time("Rendering"),xe.initializeGraphics({transparency:le,optionalContentConfig:me}),xe.operatorListChanged()}).catch(_t),q}getOperatorList({intent:te="display",annotationMode:ge=_util.AnnotationMode.ENABLE,printAnnotationStorage:de=null}={}){var Ue;function Ae(){ye.operatorList.lastChunk&&(ye.opListReadCapability.resolve(ye.operatorList),ye.renderTasks.delete(Te))}const Fe=this._transport.getRenderingIntent(te,ge,de,!0);let ye=this._intentStates.get(Fe.cacheKey);ye||(ye=Object.create(null),this._intentStates.set(Fe.cacheKey,ye));let Te;return ye.opListReadCapability||(Te=Object.create(null),Te.operatorListChanged=Ae,ye.opListReadCapability=new _util.PromiseCapability,(ye.renderTasks||(ye.renderTasks=new Set)).add(Te),ye.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Ue=this._stats)==null||Ue.time("Page Request"),this._pumpOperatorList(Fe)),ye.opListReadCapability.promise}streamTextContent({includeMarkedContent:te=!1,disableNormalization:ge=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:te===!0,disableNormalization:ge===!0},{highWaterMark:100,size(Ae){return Ae.items.length}})}getTextContent(te={}){if(this._transport._htmlForXfa)return this.getXfa().then(de=>_xfa_text.XfaText.textContent(de));const ge=this.streamTextContent(te);return new Promise(function(de,Ae){function Fe(){ye.read().then(function({value:Ue,done:Be}){if(Be){de(Te);return}Object.assign(Te.styles,Ue.styles),Te.items.push(...Ue.items),Fe()},Ae)}const ye=ge.getReader(),Te={items:[],styles:Object.create(null)};Fe()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const te=[];for(const ge of this._intentStates.values())if(this._abortOperatorList({intentState:ge,reason:new Error("Page was destroyed."),force:!0}),!ge.opListReadCapability)for(const de of ge.renderTasks)te.push(de.completed),de.cancel();return this.objs.clear(),it(this,R,!1),Ge(this,W,Wr).call(this),Promise.all(te)}cleanup(te=!1){it(this,R,!0);const ge=Ge(this,O,xr).call(this,!1);return te&&ge&&this._stats&&(this._stats=new _display_utils.StatTimer),ge}_startRenderPage(te,ge){var Ae,Fe;const de=this._intentStates.get(ge);de&&((Ae=this._stats)==null||Ae.timeEnd("Page Request"),(Fe=de.displayReadyCapability)==null||Fe.resolve(te))}_renderPageChunk(te,ge){for(let de=0,Ae=te.length;de<Ae;de++)ge.operatorList.fnArray.push(te.fnArray[de]),ge.operatorList.argsArray.push(te.argsArray[de]);ge.operatorList.lastChunk=te.lastChunk,ge.operatorList.separateAnnots=te.separateAnnots;for(const de of ge.renderTasks)de.operatorListChanged();te.lastChunk&&Ge(this,O,xr).call(this,!0)}_pumpOperatorList({renderingIntent:te,cacheKey:ge,annotationStorageSerializable:de}){const{map:Ae,transfers:Fe}=de,Te=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:te,cacheKey:ge,annotationStorage:Ae},Fe).getReader(),Ue=this._intentStates.get(ge);Ue.streamReader=Te;const Be=()=>{Te.read().then(({value:Ce,done:Qe})=>{if(Qe){Ue.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Ce,Ue),Be())},Ce=>{if(Ue.streamReader=null,!this._transport.destroyed){if(Ue.operatorList){Ue.operatorList.lastChunk=!0;for(const Qe of Ue.renderTasks)Qe.operatorListChanged();Ge(this,O,xr).call(this,!0)}if(Ue.displayReadyCapability)Ue.displayReadyCapability.reject(Ce);else if(Ue.opListReadCapability)Ue.opListReadCapability.reject(Ce);else throw Ce}})};Be()}_abortOperatorList({intentState:te,reason:ge,force:de=!1}){if(te.streamReader){if(te.streamReaderCancelTimeout&&(clearTimeout(te.streamReaderCancelTimeout),te.streamReaderCancelTimeout=null),!de){if(te.renderTasks.size>0)return;if(ge instanceof _display_utils.RenderingCancelledException){let Ae=RENDERING_CANCELLED_TIMEOUT;ge.extraDelay>0&&ge.extraDelay<1e3&&(Ae+=ge.extraDelay),te.streamReaderCancelTimeout=setTimeout(()=>{te.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:te,reason:ge,force:!0})},Ae);return}}if(te.streamReader.cancel(new _util.AbortException(ge.message)).catch(()=>{}),te.streamReader=null,!this._transport.destroyed){for(const[Ae,Fe]of this._intentStates)if(Fe===te){this._intentStates.delete(Ae);break}this.cleanup()}}}get stats(){return this._stats}}B=new WeakMap,R=new WeakMap,O=new WeakSet,xr=function(te=!1){if(Ge(this,W,Wr).call(this),!U(this,R)||this.destroyed)return!1;if(te)return it(this,B,setTimeout(()=>{it(this,B,null),Ge(this,O,xr).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:ge,operatorList:de}of this._intentStates.values())if(ge.size>0||!de.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),it(this,R,!1),!0},W=new WeakSet,Wr=function(){U(this,B)&&(clearTimeout(U(this,B)),it(this,B,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Oe(this,ce,new Set);Oe(this,ue,Promise.resolve())}postMessage(te,ge){const de={data:structuredClone(te,ge?{transfer:ge}:null)};U(this,ue).then(()=>{for(const Ae of U(this,ce))Ae.call(this,de)})}addEventListener(te,ge){U(this,ce).add(ge)}removeEventListener(te,ge){U(this,ce).delete(ge)}terminate(){U(this,ce).clear()}}ce=new WeakMap,ue=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const be=(G=document==null?void 0:document.currentScript)==null?void 0:G.src;be&&(PDFWorkerUtil.fallbackWorkerSrc=be.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(be,te){let ge;try{if(ge=new URL(be),!ge.origin||ge.origin==="null")return!1}catch{return!1}const de=new URL(te,ge);return ge.origin===de.origin},PDFWorkerUtil.createCDNWrapper=function(be){const te=`importScripts("${be}");`;return URL.createObjectURL(new Blob([te]))}}const _PDFWorker=class _PDFWorker{constructor({name:be=null,port:te=null,verbosity:ge=(0,_util.getVerbosityLevel)()}={}){var de;if(this.name=be,this.destroyed=!1,this.verbosity=ge,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,te){if((de=U(_PDFWorker,ve))!=null&&de.has(te))throw new Error("Cannot use more than one PDFWorker per port.");(U(_PDFWorker,ve)||it(_PDFWorker,ve,new WeakMap)).set(te,this),this._initializeFromPort(te);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(be){this._port=be,this._messageHandler=new _message_handler.MessageHandler("main","worker",be),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:be}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,be)||(be=PDFWorkerUtil.createCDNWrapper(new URL(be,window.location).href));const te=new Worker(be),ge=new _message_handler.MessageHandler("main","worker",te),de=()=>{te.removeEventListener("error",Ae),ge.destroy(),te.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Ae=()=>{this._webWorker||de()};te.addEventListener("error",Ae),ge.on("test",ye=>{if(te.removeEventListener("error",Ae),this.destroyed){de();return}ye?(this._messageHandler=ge,this._port=te,this._webWorker=te,this._readyCapability.resolve(),ge.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),ge.destroy(),te.terminate())}),ge.on("ready",ye=>{if(te.removeEventListener("error",Ae),this.destroyed){de();return}try{Fe()}catch{this._setupFakeWorker()}});const Fe=()=>{const ye=new Uint8Array;ge.send("test",ye,[ye.buffer])};Fe();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(be=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const te=new LoopbackPort;this._port=te;const ge=`fake${PDFWorkerUtil.fakeWorkerId++}`,de=new _message_handler.MessageHandler(ge+"_worker",ge,te);be.setup(de,te);const Ae=new _message_handler.MessageHandler(ge,ge+"_worker",te);this._messageHandler=Ae,this._readyCapability.resolve(),Ae.send("configure",{verbosity:this.verbosity})}).catch(be=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${be.message}".`))})}destroy(){var be;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(be=U(_PDFWorker,ve))==null||be.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(be){var ge;if(!(be!=null&&be.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const te=(ge=U(this,ve))==null?void 0:ge.get(be.port);if(te){if(te._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return te}return new _PDFWorker(be)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var be;try{return((be=globalThis.pdfjsWorker)==null?void 0:be.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};ve=new WeakMap,Oe(_PDFWorker,ve,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(te,ge,de,Ae,Fe){Oe(this,V);Oe(this,he,new Map);Oe(this,oe,new Map);Oe(this,ae,new Map);Oe(this,J,null);this.messageHandler=te,this.loadingTask=ge,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Ae.ownerDocument,styleElement:Ae.styleElement}),this._params=Ae,this.canvasFactory=Fe.canvasFactory,this.filterFactory=Fe.filterFactory,this.cMapReaderFactory=Fe.cMapReaderFactory,this.standardFontDataFactory=Fe.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=de,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(te,ge=_util.AnnotationMode.ENABLE,de=null,Ae=!1){let Fe=_util.RenderingIntentFlag.DISPLAY,ye=_annotation_storage.SerializableEmpty;switch(te){case"any":Fe=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Fe=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${te}`)}switch(ge){case _util.AnnotationMode.DISABLE:Fe+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Fe+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Fe+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,ye=(Fe&_util.RenderingIntentFlag.PRINT&&de instanceof _annotation_storage.PrintAnnotationStorage?de:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${ge}`)}return Ae&&(Fe+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Fe,cacheKey:`${Fe}_${ye.hash}`,annotationStorageSerializable:ye}}destroy(){var de;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(de=U(this,J))==null||de.reject(new Error("Worker was destroyed during onPassword callback"));const te=[];for(const Ae of U(this,oe).values())te.push(Ae._destroy());U(this,oe).clear(),U(this,ae).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const ge=this.messageHandler.sendWithPromise("Terminate",null);return te.push(ge),Promise.all(te).then(()=>{var Ae;this.commonObjs.clear(),this.fontLoader.clear(),U(this,he).clear(),this.filterFactory.destroy(),(Ae=this._networkStream)==null||Ae.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:te,loadingTask:ge}=this;te.on("GetReader",(de,Ae)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Fe=>{this._lastProgress={loaded:Fe.loaded,total:Fe.total}},Ae.onPull=()=>{this._fullReader.read().then(function({value:Fe,done:ye}){if(ye){Ae.close();return}(0,_util.assert)(Fe instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Ae.enqueue(new Uint8Array(Fe),1,[Fe])}).catch(Fe=>{Ae.error(Fe)})},Ae.onCancel=Fe=>{this._fullReader.cancel(Fe),Ae.ready.catch(ye=>{if(!this.destroyed)throw ye})}}),te.on("ReaderHeadersReady",de=>{const Ae=new _util.PromiseCapability,Fe=this._fullReader;return Fe.headersReady.then(()=>{var ye;(!Fe.isStreamingSupported||!Fe.isRangeSupported)&&(this._lastProgress&&((ye=ge.onProgress)==null||ye.call(ge,this._lastProgress)),Fe.onProgress=Te=>{var Ue;(Ue=ge.onProgress)==null||Ue.call(ge,{loaded:Te.loaded,total:Te.total})}),Ae.resolve({isStreamingSupported:Fe.isStreamingSupported,isRangeSupported:Fe.isRangeSupported,contentLength:Fe.contentLength})},Ae.reject),Ae.promise}),te.on("GetRangeReader",(de,Ae)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Fe=this._networkStream.getRangeReader(de.begin,de.end);if(!Fe){Ae.close();return}Ae.onPull=()=>{Fe.read().then(function({value:ye,done:Te}){if(Te){Ae.close();return}(0,_util.assert)(ye instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Ae.enqueue(new Uint8Array(ye),1,[ye])}).catch(ye=>{Ae.error(ye)})},Ae.onCancel=ye=>{Fe.cancel(ye),Ae.ready.catch(Te=>{if(!this.destroyed)throw Te})}}),te.on("GetDoc",({pdfInfo:de})=>{this._numPages=de.numPages,this._htmlForXfa=de.htmlForXfa,delete de.htmlForXfa,ge._capability.resolve(new PDFDocumentProxy(de,this))}),te.on("DocException",function(de){let Ae;switch(de.name){case"PasswordException":Ae=new _util.PasswordException(de.message,de.code);break;case"InvalidPDFException":Ae=new _util.InvalidPDFException(de.message);break;case"MissingPDFException":Ae=new _util.MissingPDFException(de.message);break;case"UnexpectedResponseException":Ae=new _util.UnexpectedResponseException(de.message,de.status);break;case"UnknownErrorException":Ae=new _util.UnknownErrorException(de.message,de.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}ge._capability.reject(Ae)}),te.on("PasswordRequest",de=>{if(it(this,J,new _util.PromiseCapability),ge.onPassword){const Ae=Fe=>{Fe instanceof Error?U(this,J).reject(Fe):U(this,J).resolve({password:Fe})};try{ge.onPassword(Ae,de.code)}catch(Fe){U(this,J).reject(Fe)}}else U(this,J).reject(new _util.PasswordException(de.message,de.code));return U(this,J).promise}),te.on("DataLoaded",de=>{var Ae;(Ae=ge.onProgress)==null||Ae.call(ge,{loaded:de.length,total:de.length}),this.downloadInfoCapability.resolve(de)}),te.on("StartRenderPage",de=>{if(this.destroyed)return;U(this,oe).get(de.pageIndex)._startRenderPage(de.transparency,de.cacheKey)}),te.on("commonobj",([de,Ae,Fe])=>{var ye;if(!this.destroyed&&!this.commonObjs.has(de))switch(Ae){case"Font":const Te=this._params;if("error"in Fe){const Ce=Fe.error;(0,_util.warn)(`Error during font loading: ${Ce}`),this.commonObjs.resolve(de,Ce);break}const Ue=Te.pdfBug&&((ye=globalThis.FontInspector)!=null&&ye.enabled)?(Ce,Qe)=>globalThis.FontInspector.fontAdded(Ce,Qe):null,Be=new _font_loader.FontFaceObject(Fe,{isEvalSupported:Te.isEvalSupported,disableFontFace:Te.disableFontFace,ignoreErrors:Te.ignoreErrors,inspectFont:Ue});this.fontLoader.bind(Be).catch(Ce=>te.sendWithPromise("FontFallback",{id:de})).finally(()=>{!Te.fontExtraProperties&&Be.data&&(Be.data=null),this.commonObjs.resolve(de,Be)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(de,Fe);break;default:throw new Error(`Got unknown common object type ${Ae}`)}}),te.on("obj",([de,Ae,Fe,ye])=>{var Ue;if(this.destroyed)return;const Te=U(this,oe).get(Ae);if(!Te.objs.has(de))switch(Fe){case"Image":if(Te.objs.resolve(de,ye),ye){let Be;if(ye.bitmap){const{width:Ce,height:Qe}=ye;Be=Ce*Qe*4}else Be=((Ue=ye.data)==null?void 0:Ue.length)||0;Be>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Te._maybeCleanupAfterRender=!0)}break;case"Pattern":Te.objs.resolve(de,ye);break;default:throw new Error(`Got unknown object type ${Fe}`)}}),te.on("DocProgress",de=>{var Ae;this.destroyed||(Ae=ge.onProgress)==null||Ae.call(ge,{loaded:de.loaded,total:de.total})}),te.on("FetchBuiltInCMap",de=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(de):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),te.on("FetchStandardFontData",de=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(de):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var de;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:te,transfers:ge}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:te,filename:((de=this._fullReader)==null?void 0:de.filename)??null},ge).finally(()=>{this.annotationStorage.resetModified()})}getPage(te){if(!Number.isInteger(te)||te<=0||te>this._numPages)return Promise.reject(new Error("Invalid page request."));const ge=te-1,de=U(this,ae).get(ge);if(de)return de;const Ae=this.messageHandler.sendWithPromise("GetPage",{pageIndex:ge}).then(Fe=>{if(this.destroyed)throw new Error("Transport destroyed");const ye=new PDFPageProxy(ge,Fe,this,this._params.pdfBug);return U(this,oe).set(ge,ye),ye});return U(this,ae).set(ge,Ae),Ae}getPageIndex(te){return typeof te!="object"||te===null||!Number.isInteger(te.num)||te.num<0||!Number.isInteger(te.gen)||te.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:te.num,gen:te.gen})}getAnnotations(te,ge){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:te,intent:ge})}getFieldObjects(){return Ge(this,V,Gr).call(this,"GetFieldObjects")}hasJSActions(){return Ge(this,V,Gr).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(te){return typeof te!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:te})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Ge(this,V,Gr).call(this,"GetDocJSActions")}getPageJSActions(te){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:te})}getStructTree(te){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:te})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(te=>new _optional_content_config.OptionalContentConfig(te))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const te="GetMetadata",ge=U(this,he).get(te);if(ge)return ge;const de=this.messageHandler.sendWithPromise(te,null).then(Ae=>{var Fe,ye;return{info:Ae[0],metadata:Ae[1]?new _metadata.Metadata(Ae[1]):null,contentDispositionFilename:((Fe=this._fullReader)==null?void 0:Fe.filename)??null,contentLength:((ye=this._fullReader)==null?void 0:ye.contentLength)??null}});return U(this,he).set(te,de),de}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(te=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const ge of U(this,oe).values())if(!ge.cleanup())throw new Error(`startCleanup: Page ${ge.pageNumber} is currently rendering.`);this.commonObjs.clear(),te||this.fontLoader.clear(),U(this,he).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:te,enableXfa:ge}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:te,enableXfa:ge})}}he=new WeakMap,oe=new WeakMap,ae=new WeakMap,J=new WeakMap,V=new WeakSet,Gr=function(te,ge=null){const de=U(this,he).get(te);if(de)return de;const Ae=this.messageHandler.sendWithPromise(te,ge);return U(this,he).set(te,Ae),Ae};class PDFObjects{constructor(){Oe(this,se);Oe(this,ie,Object.create(null))}get(te,ge=null){if(ge){const Ae=Ge(this,se,bi).call(this,te);return Ae.capability.promise.then(()=>ge(Ae.data)),null}const de=U(this,ie)[te];if(!(de!=null&&de.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${te}.`);return de.data}has(te){const ge=U(this,ie)[te];return(ge==null?void 0:ge.capability.settled)||!1}resolve(te,ge=null){const de=Ge(this,se,bi).call(this,te);de.data=ge,de.capability.resolve()}clear(){var te;for(const ge in U(this,ie)){const{data:de}=U(this,ie)[ge];(te=de==null?void 0:de.bitmap)==null||te.close()}it(this,ie,Object.create(null))}}ie=new WeakMap,se=new WeakSet,bi=function(te){var ge;return(ge=U(this,ie))[te]||(ge[te]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(te){Oe(this,Y,null);it(this,Y,te),this.onContinue=null}get promise(){return U(this,Y).capability.promise}cancel(te=0){U(this,Y).cancel(null,te)}get separateAnnots(){const{separateAnnots:te}=U(this,Y).operatorList;if(!te)return!1;const{annotationCanvasMap:ge}=U(this,Y);return te.form||te.canvas&&(ge==null?void 0:ge.size)>0}}Y=new WeakMap,exports.RenderTask=RenderTask;const Ee=class Ee{constructor({callback:te,params:ge,objs:de,commonObjs:Ae,annotationCanvasMap:Fe,operatorList:ye,pageIndex:Te,canvasFactory:Ue,filterFactory:Be,useRequestAnimationFrame:Ce=!1,pdfBug:Qe=!1,pageColors:at=null}){this.callback=te,this.params=ge,this.objs=de,this.commonObjs=Ae,this.annotationCanvasMap=Fe,this.operatorListIdx=null,this.operatorList=ye,this._pageIndex=Te,this.canvasFactory=Ue,this.filterFactory=Be,this._pdfBug=Qe,this.pageColors=at,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Ce===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=ge.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:te=!1,optionalContentConfig:ge}){var Te,Ue;if(this.cancelled)return;if(this._canvas){if(U(Ee,ee).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");U(Ee,ee).add(this._canvas)}this._pdfBug&&((Te=globalThis.StepperManager)!=null&&Te.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:de,viewport:Ae,transform:Fe,background:ye}=this.params;this.gfx=new _canvas.CanvasGraphics(de,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:ge},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Fe,viewport:Ae,transparency:te,background:ye}),this.operatorListIdx=0,this.graphicsReady=!0,(Ue=this.graphicsReadyCallback)==null||Ue.call(this)}cancel(te=null,ge=0){var de;this.running=!1,this.cancelled=!0,(de=this.gfx)==null||de.endDrawing(),U(Ee,ee).delete(this._canvas),this.callback(te||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,ge))}operatorListChanged(){var te;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(te=this.stepper)==null||te.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),U(Ee,ee).delete(this._canvas),this.callback())))}};ee=new WeakMap,Oe(Ee,ee,new WeakSet);let InternalRenderTask=Ee;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(A,$,B)=>{var ue,G,ve,ga,oe;Object.defineProperty($,"__esModule",{value:!0}),$.SerializableEmpty=$.PrintAnnotationStorage=$.AnnotationStorage=void 0;var R=B(1),O=B(4),H=B(8);const W=Object.freeze({map:null,hash:"",transfers:void 0});$.SerializableEmpty=W;class pe{constructor(){Oe(this,ve);Oe(this,ue,!1);Oe(this,G,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(J,V){const re=U(this,G).get(J);return re===void 0?V:Object.assign(V,re)}getRawValue(J){return U(this,G).get(J)}remove(J){if(U(this,G).delete(J),U(this,G).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const V of U(this,G).values())if(V instanceof O.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(J,V){const re=U(this,G).get(J);let ie=!1;if(re!==void 0)for(const[se,fe]of Object.entries(V))re[se]!==fe&&(ie=!0,re[se]=fe);else ie=!0,U(this,G).set(J,V);ie&&Ge(this,ve,ga).call(this),V instanceof O.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(V.constructor._type)}has(J){return U(this,G).has(J)}getAll(){return U(this,G).size>0?(0,R.objectFromMap)(U(this,G)):null}setAll(J){for(const[V,re]of Object.entries(J))this.setValue(V,re)}get size(){return U(this,G).size}resetModified(){U(this,ue)&&(it(this,ue,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new ce(this)}get serializable(){if(U(this,G).size===0)return W;const J=new Map,V=new H.MurmurHash3_64,re=[],ie=Object.create(null);let se=!1;for(const[fe,Y]of U(this,G)){const ee=Y instanceof O.AnnotationEditor?Y.serialize(!1,ie):Y;ee&&(J.set(fe,ee),V.update(`${fe}:${JSON.stringify(ee)}`),se||(se=!!ee.bitmap))}if(se)for(const fe of J.values())fe.bitmap&&re.push(fe.bitmap);return J.size>0?{map:J,hash:V.hexdigest(),transfers:re}:W}}ue=new WeakMap,G=new WeakMap,ve=new WeakSet,ga=function(){U(this,ue)||(it(this,ue,!0),typeof this.onSetModified=="function"&&this.onSetModified())},$.AnnotationStorage=pe;class ce extends pe{constructor(V){super();Oe(this,oe,void 0);const{map:re,hash:ie,transfers:se}=V.serializable,fe=structuredClone(re,se?{transfer:se}:null);it(this,oe,{map:fe,hash:ie,transfers:se})}get print(){(0,R.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return U(this,oe)}}oe=new WeakMap,$.PrintAnnotationStorage=ce},(A,$,B)=>{var ce,ue,G,ve,he,oe,ae,J,V,re,ie,se,fe,Y,ee,_i,be,yi,ge,Ei,Ae,Si,ye,va,Ue,ba,Ce,_a,at,xi,_t,ya;Object.defineProperty($,"__esModule",{value:!0}),$.AnnotationEditor=void 0;var R=B(5),O=B(1),H=B(6);const q=class q{constructor(X){Oe(this,ee);Oe(this,be);Oe(this,Ae);Oe(this,ye);Oe(this,Ue);Oe(this,Ce);Oe(this,at);Oe(this,_t);Oe(this,ce,"");Oe(this,ue,!1);Oe(this,G,null);Oe(this,ve,null);Oe(this,he,null);Oe(this,oe,!1);Oe(this,ae,null);Oe(this,J,this.focusin.bind(this));Oe(this,V,this.focusout.bind(this));Oe(this,re,!1);Oe(this,ie,!1);Oe(this,se,!1);Fn(this,"_initialOptions",Object.create(null));Fn(this,"_uiManager",null);Fn(this,"_focusEventsAllowed",!0);Fn(this,"_l10nPromise",null);Oe(this,fe,!1);Oe(this,Y,q._zIndex++);this.constructor===q&&(0,O.unreachable)("Cannot initialize AnnotationEditor."),this.parent=X.parent,this.id=X.id,this.width=this.height=null,this.pageIndex=X.parent.pageIndex,this.name=X.name,this.div=null,this._uiManager=X.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=X.isCentered,this._structTreeParentId=null;const{rotation:le,rawDims:{pageWidth:me,pageHeight:Se,pageX:Pe,pageY:Le}}=this.parent.viewport;this.rotation=le,this.pageRotation=(360+le-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[me,Se],this.pageTranslation=[Pe,Le];const[Ke,Ve]=this.parentDimensions;this.x=X.x/Ke,this.y=X.y/Ve,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,O.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(X){const le=new pe({id:X.parent.getNextId(),parent:X.parent,uiManager:X._uiManager});le.annotationElementId=X.annotationElementId,le.deleted=!0,le._uiManager.addToAnnotationStorage(le)}static initialize(X,le=null){if(q._l10nPromise||(q._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(Se=>[Se,X.get(Se)]))),le!=null&&le.strings)for(const Se of le.strings)q._l10nPromise.set(Se,X.get(Se));if(q._borderLineWidth!==-1)return;const me=getComputedStyle(document.documentElement);q._borderLineWidth=parseFloat(me.getPropertyValue("--outline-width"))||0}static updateDefaultParams(X,le){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(X){return!1}static paste(X,le){(0,O.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return U(this,fe)}set _isDraggable(X){var le;it(this,fe,X),(le=this.div)==null||le.classList.toggle("draggable",X)}center(){const[X,le]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*le/(X*2),this.y+=this.width*X/(le*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*le/(X*2),this.y-=this.width*X/(le*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(X){this._uiManager.addCommands(X)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=U(this,Y)}setParent(X){X!==null&&(this.pageIndex=X.pageIndex,this.pageDimensions=X.pageDimensions),this.parent=X}focusin(X){this._focusEventsAllowed&&(U(this,re)?it(this,re,!1):this.parent.setSelected(this))}focusout(X){var me;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const le=X.relatedTarget;le!=null&&le.closest(`#${this.id}`)||(X.preventDefault(),(me=this.parent)!=null&&me.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(X,le,me,Se){const[Pe,Le]=this.parentDimensions;[me,Se]=this.screenToPageTranslation(me,Se),this.x=(X+me)/Pe,this.y=(le+Se)/Le,this.fixAndSetPosition()}translate(X,le){Ge(this,ee,_i).call(this,this.parentDimensions,X,le)}translateInPage(X,le){Ge(this,ee,_i).call(this,this.pageDimensions,X,le),this.div.scrollIntoView({block:"nearest"})}drag(X,le){const[me,Se]=this.parentDimensions;if(this.x+=X/me,this.y+=le/Se,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:rt,y:lt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,rt,lt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Pe,y:Le}=this;const[Ke,Ve]=Ge(this,be,yi).call(this);Pe+=Ke,Le+=Ve,this.div.style.left=`${(100*Pe).toFixed(2)}%`,this.div.style.top=`${(100*Le).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[X,le]=this.pageDimensions;let{x:me,y:Se,width:Pe,height:Le}=this;switch(Pe*=X,Le*=le,me*=X,Se*=le,this.rotation){case 0:me=Math.max(0,Math.min(X-Pe,me)),Se=Math.max(0,Math.min(le-Le,Se));break;case 90:me=Math.max(0,Math.min(X-Le,me)),Se=Math.min(le,Math.max(Pe,Se));break;case 180:me=Math.min(X,Math.max(Pe,me)),Se=Math.min(le,Math.max(Le,Se));break;case 270:me=Math.min(X,Math.max(Le,me)),Se=Math.max(0,Math.min(le-Pe,Se));break}this.x=me/=X,this.y=Se/=le;const[Ke,Ve]=Ge(this,be,yi).call(this);me+=Ke,Se+=Ve;const{style:rt}=this.div;rt.left=`${(100*me).toFixed(2)}%`,rt.top=`${(100*Se).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(X,le){var me;return Ge(me=q,ge,Ei).call(me,X,le,this.parentRotation)}pageTranslationToScreen(X,le){var me;return Ge(me=q,ge,Ei).call(me,X,le,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:X,pageDimensions:[le,me]}=this,Se=le*X,Pe=me*X;return O.FeatureTest.isCSSRoundSupported?[Math.round(Se),Math.round(Pe)]:[Se,Pe]}setDims(X,le){var Pe;const[me,Se]=this.parentDimensions;this.div.style.width=`${(100*X/me).toFixed(2)}%`,U(this,oe)||(this.div.style.height=`${(100*le/Se).toFixed(2)}%`),(Pe=U(this,G))==null||Pe.classList.toggle("small",X<q.SMALL_EDITOR_SIZE||le<q.SMALL_EDITOR_SIZE)}fixDims(){const{style:X}=this.div,{height:le,width:me}=X,Se=me.endsWith("%"),Pe=!U(this,oe)&&le.endsWith("%");if(Se&&Pe)return;const[Le,Ke]=this.parentDimensions;Se||(X.width=`${(100*parseFloat(me)/Le).toFixed(2)}%`),!U(this,oe)&&!Pe&&(X.height=`${(100*parseFloat(le)/Ke).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(U(this,G))return;const X=it(this,G,document.createElement("button"));X.className="altText";const le=await q._l10nPromise.get("editor_alt_text_button_label");X.textContent=le,X.setAttribute("aria-label",le),X.tabIndex="0",X.addEventListener("contextmenu",H.noContextMenu),X.addEventListener("pointerdown",me=>me.stopPropagation()),X.addEventListener("click",me=>{me.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),X.addEventListener("keydown",me=>{me.target===X&&me.key==="Enter"&&(me.preventDefault(),this._uiManager.editAltText(this))}),Ge(this,at,xi).call(this),this.div.append(X),q.SMALL_EDITOR_SIZE||(q.SMALL_EDITOR_SIZE=Math.min(128,Math.round(X.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:U(this,ce),decorative:U(this,ue)}}set altTextData({altText:X,decorative:le}){U(this,ce)===X&&U(this,ue)===le||(it(this,ce,X),it(this,ue,le),Ge(this,at,xi).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",U(this,J)),this.div.addEventListener("focusout",U(this,V));const[X,le]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*le/X).toFixed(2)}%`,this.div.style.maxHeight=`${(100*X/le).toFixed(2)}%`);const[me,Se]=this.getInitialTranslation();return this.translate(me,Se),(0,R.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(X){const{isMac:le}=O.FeatureTest.platform;if(X.button!==0||X.ctrlKey&&le){X.preventDefault();return}it(this,re,!0),Ge(this,_t,ya).call(this,X)}moveInDOM(){var X;(X=this.parent)==null||X.moveEditorInDOM(this)}_setParentAndPosition(X,le,me){X.changeParent(this),this.x=le,this.y=me,this.fixAndSetPosition()}getRect(X,le){const me=this.parentScale,[Se,Pe]=this.pageDimensions,[Le,Ke]=this.pageTranslation,Ve=X/me,rt=le/me,lt=this.x*Se,gt=this.y*Pe,dt=this.width*Se,pt=this.height*Pe;switch(this.rotation){case 0:return[lt+Ve+Le,Pe-gt-rt-pt+Ke,lt+Ve+dt+Le,Pe-gt-rt+Ke];case 90:return[lt+rt+Le,Pe-gt+Ve+Ke,lt+rt+pt+Le,Pe-gt+Ve+dt+Ke];case 180:return[lt-Ve-dt+Le,Pe-gt+rt+Ke,lt-Ve+Le,Pe-gt+rt+pt+Ke];case 270:return[lt-rt-pt+Le,Pe-gt-Ve-dt+Ke,lt-rt+Le,Pe-gt-Ve+Ke];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(X,le){const[me,Se,Pe,Le]=X,Ke=Pe-me,Ve=Le-Se;switch(this.rotation){case 0:return[me,le-Le,Ke,Ve];case 90:return[me,le-Se,Ve,Ke];case 180:return[Pe,le-Se,Ke,Ve];case 270:return[Pe,le-Le,Ve,Ke];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){it(this,se,!0)}disableEditMode(){it(this,se,!1)}isInEditMode(){return U(this,se)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var X,le;(X=this.div)==null||X.addEventListener("focusin",U(this,J)),(le=this.div)==null||le.addEventListener("focusout",U(this,V))}serialize(X=!1,le=null){(0,O.unreachable)("An editor must be serializable")}static deserialize(X,le,me){const Se=new this.prototype.constructor({parent:le,id:le.getNextId(),uiManager:me});Se.rotation=X.rotation;const[Pe,Le]=Se.pageDimensions,[Ke,Ve,rt,lt]=Se.getRectInCurrentCoords(X.rect,Le);return Se.x=Ke/Pe,Se.y=Ve/Le,Se.width=rt/Pe,Se.height=lt/Le,Se}remove(){var X;this.div.removeEventListener("focusin",U(this,J)),this.div.removeEventListener("focusout",U(this,V)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(X=U(this,G))==null||X.remove(),it(this,G,null),it(this,ve,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Ge(this,ye,va).call(this),U(this,ae).classList.remove("hidden"))}select(){var X;this.makeResizable(),(X=this.div)==null||X.classList.add("selectedEditor")}unselect(){var X,le,me;(X=U(this,ae))==null||X.classList.add("hidden"),(le=this.div)==null||le.classList.remove("selectedEditor"),(me=this.div)!=null&&me.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(X,le){}disableEditing(){U(this,G)&&(U(this,G).hidden=!0)}enableEditing(){U(this,G)&&(U(this,G).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return U(this,ie)}set isEditing(X){it(this,ie,X),this.parent&&(X?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(X,le){it(this,oe,!0);const me=X/le,{style:Se}=this.div;Se.aspectRatio=me,Se.height="auto"}static get MIN_SIZE(){return 16}};ce=new WeakMap,ue=new WeakMap,G=new WeakMap,ve=new WeakMap,he=new WeakMap,oe=new WeakMap,ae=new WeakMap,J=new WeakMap,V=new WeakMap,re=new WeakMap,ie=new WeakMap,se=new WeakMap,fe=new WeakMap,Y=new WeakMap,ee=new WeakSet,_i=function([X,le],me,Se){[me,Se]=this.screenToPageTranslation(me,Se),this.x+=me/X,this.y+=Se/le,this.fixAndSetPosition()},be=new WeakSet,yi=function(){const[X,le]=this.parentDimensions,{_borderLineWidth:me}=q,Se=me/X,Pe=me/le;switch(this.rotation){case 90:return[-Se,Pe];case 180:return[Se,Pe];case 270:return[Se,-Pe];default:return[-Se,-Pe]}},ge=new WeakSet,Ei=function(X,le,me){switch(me){case 90:return[le,-X];case 180:return[-X,-le];case 270:return[-le,X];default:return[X,le]}},Ae=new WeakSet,Si=function(X){switch(X){case 90:{const[le,me]=this.pageDimensions;return[0,-le/me,me/le,0]}case 180:return[-1,0,0,-1];case 270:{const[le,me]=this.pageDimensions;return[0,le/me,-me/le,0]}default:return[1,0,0,1]}},ye=new WeakSet,va=function(){if(U(this,ae))return;it(this,ae,document.createElement("div")),U(this,ae).classList.add("resizers");const X=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||X.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const le of X){const me=document.createElement("div");U(this,ae).append(me),me.classList.add("resizer",le),me.addEventListener("pointerdown",Ge(this,Ue,ba).bind(this,le)),me.addEventListener("contextmenu",H.noContextMenu)}this.div.prepend(U(this,ae))},Ue=new WeakSet,ba=function(X,le){le.preventDefault();const{isMac:me}=O.FeatureTest.platform;if(le.button!==0||le.ctrlKey&&me)return;const Se=Ge(this,Ce,_a).bind(this,X),Pe=this._isDraggable;this._isDraggable=!1;const Le={passive:!0,capture:!0};window.addEventListener("pointermove",Se,Le);const Ke=this.x,Ve=this.y,rt=this.width,lt=this.height,gt=this.parent.div.style.cursor,dt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(le.target).cursor;const pt=()=>{this._isDraggable=Pe,window.removeEventListener("pointerup",pt),window.removeEventListener("blur",pt),window.removeEventListener("pointermove",Se,Le),this.parent.div.style.cursor=gt,this.div.style.cursor=dt;const vt=this.x,mt=this.y,Mt=this.width,st=this.height;vt===Ke&&mt===Ve&&Mt===rt&&st===lt||this.addCommands({cmd:()=>{this.width=Mt,this.height=st,this.x=vt,this.y=mt;const[Xe,qe]=this.parentDimensions;this.setDims(Xe*Mt,qe*st),this.fixAndSetPosition()},undo:()=>{this.width=rt,this.height=lt,this.x=Ke,this.y=Ve;const[Xe,qe]=this.parentDimensions;this.setDims(Xe*rt,qe*lt),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",pt),window.addEventListener("blur",pt)},Ce=new WeakSet,_a=function(X,le){const[me,Se]=this.parentDimensions,Pe=this.x,Le=this.y,Ke=this.width,Ve=this.height,rt=q.MIN_SIZE/me,lt=q.MIN_SIZE/Se,gt=ht=>Math.round(ht*1e4)/1e4,dt=Ge(this,Ae,Si).call(this,this.rotation),pt=(ht,ct)=>[dt[0]*ht+dt[2]*ct,dt[1]*ht+dt[3]*ct],vt=Ge(this,Ae,Si).call(this,360-this.rotation),mt=(ht,ct)=>[vt[0]*ht+vt[2]*ct,vt[1]*ht+vt[3]*ct];let Mt,st,Xe=!1,qe=!1;switch(X){case"topLeft":Xe=!0,Mt=(ht,ct)=>[0,0],st=(ht,ct)=>[ht,ct];break;case"topMiddle":Mt=(ht,ct)=>[ht/2,0],st=(ht,ct)=>[ht/2,ct];break;case"topRight":Xe=!0,Mt=(ht,ct)=>[ht,0],st=(ht,ct)=>[0,ct];break;case"middleRight":qe=!0,Mt=(ht,ct)=>[ht,ct/2],st=(ht,ct)=>[0,ct/2];break;case"bottomRight":Xe=!0,Mt=(ht,ct)=>[ht,ct],st=(ht,ct)=>[0,0];break;case"bottomMiddle":Mt=(ht,ct)=>[ht/2,ct],st=(ht,ct)=>[ht/2,0];break;case"bottomLeft":Xe=!0,Mt=(ht,ct)=>[0,ct],st=(ht,ct)=>[ht,0];break;case"middleLeft":qe=!0,Mt=(ht,ct)=>[0,ct/2],st=(ht,ct)=>[ht,ct/2];break}const ut=Mt(Ke,Ve),Pt=st(Ke,Ve);let At=pt(...Pt);const Ut=gt(Pe+At[0]),Xt=gt(Le+At[1]);let Dt=1,Kt=1,[en,Vt]=this.screenToPageTranslation(le.movementX,le.movementY);if([en,Vt]=mt(en/me,Vt/Se),Xe){const ht=Math.hypot(Ke,Ve);Dt=Kt=Math.max(Math.min(Math.hypot(Pt[0]-ut[0]-en,Pt[1]-ut[1]-Vt)/ht,1/Ke,1/Ve),rt/Ke,lt/Ve)}else qe?Dt=Math.max(rt,Math.min(1,Math.abs(Pt[0]-ut[0]-en)))/Ke:Kt=Math.max(lt,Math.min(1,Math.abs(Pt[1]-ut[1]-Vt)))/Ve;const ln=gt(Ke*Dt),We=gt(Ve*Kt);At=pt(...st(ln,We));const Ie=Ut-At[0],Re=Xt-At[1];this.width=ln,this.height=We,this.x=Ie,this.y=Re,this.setDims(me*ln,Se*We),this.fixAndSetPosition()},at=new WeakSet,xi=async function(){var me;const X=U(this,G);if(!X)return;if(!U(this,ce)&&!U(this,ue)){X.classList.remove("done"),(me=U(this,ve))==null||me.remove();return}q._l10nPromise.get("editor_alt_text_edit_button_label").then(Se=>{X.setAttribute("aria-label",Se)});let le=U(this,ve);if(!le){it(this,ve,le=document.createElement("span")),le.className="tooltip",le.setAttribute("role","tooltip");const Se=le.id=`alt-text-tooltip-${this.id}`;X.setAttribute("aria-describedby",Se);const Pe=100;X.addEventListener("mouseenter",()=>{it(this,he,setTimeout(()=>{it(this,he,null),U(this,ve).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},Pe))}),X.addEventListener("mouseleave",()=>{var Le;clearTimeout(U(this,he)),it(this,he,null),(Le=U(this,ve))==null||Le.classList.remove("show")})}X.classList.add("done"),le.innerText=U(this,ue)?await q._l10nPromise.get("editor_alt_text_decorative_tooltip"):U(this,ce),le.parentNode||X.append(le)},_t=new WeakSet,ya=function(X){if(!this._isDraggable)return;const le=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let me,Se;le&&(me={passive:!0,capture:!0},Se=Le=>{const[Ke,Ve]=this.screenToPageTranslation(Le.movementX,Le.movementY);this._uiManager.dragSelectedEditors(Ke,Ve)},window.addEventListener("pointermove",Se,me));const Pe=()=>{if(window.removeEventListener("pointerup",Pe),window.removeEventListener("blur",Pe),le&&window.removeEventListener("pointermove",Se,me),it(this,re,!1),!this._uiManager.endDragSession()){const{isMac:Le}=O.FeatureTest.platform;X.ctrlKey&&!Le||X.shiftKey||X.metaKey&&Le?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",Pe),window.addEventListener("blur",Pe)},Oe(q,ge),Fn(q,"_borderLineWidth",-1),Fn(q,"_colorManager",new R.ColorManager),Fn(q,"_zIndex",1),Fn(q,"SMALL_EDITOR_SIZE",0);let W=q;$.AnnotationEditor=W;class pe extends W{constructor(X){super(X),this.annotationElementId=X.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(A,$,B)=>{var oe,ae,J,V,re,wi,fe,Y,ee,Ee,be,Ea,de,Ae,Fe,ye,Te,Ue,Be,Ce,Qe,at,ft,_t,xe,q,ne,X,le,me,Se,Pe,Le,Ke,Ve,rt,lt,gt,dt,pt,vt,mt,Mt,st,Xe,qe,ut,Sa,At,Ai,Xt,Pi,Kt,qr,Vt,Ci,We,ki,Re,or,ct,Tr,_n,xa,xt,wa,$t,$i,Ht,Rr,wt,Mi;Object.defineProperty($,"__esModule",{value:!0}),$.KeyboardManager=$.CommandManager=$.ColorManager=$.AnnotationEditorUIManager=void 0,$.bindEvents=H,$.opacityToHex=W;var R=B(1),O=B(6);function H($e,K,we){for(const Me of we)K.addEventListener(Me,$e[Me].bind($e))}function W($e){return Math.round(Math.min(255,Math.max(1,255*$e))).toString(16).padStart(2,"0")}class pe{constructor(){Oe(this,oe,0)}getId(){return`${R.AnnotationEditorPrefix}${Mr(this,oe)._++}`}}oe=new WeakMap;const se=class se{constructor(){Oe(this,re);Oe(this,ae,(0,R.getUuid)());Oe(this,J,0);Oe(this,V,null)}static get _isSVGFittingCanvas(){const K='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',Me=new OffscreenCanvas(1,3).getContext("2d"),ze=new Image;ze.src=K;const Ze=ze.decode().then(()=>(Me.drawImage(ze,0,0,1,1,0,0,1,3),new Uint32Array(Me.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,R.shadow)(this,"_isSVGFittingCanvas",Ze)}async getFromFile(K){const{lastModified:we,name:Me,size:ze,type:Ze}=K;return Ge(this,re,wi).call(this,`${we}_${Me}_${ze}_${Ze}`,K)}async getFromUrl(K){return Ge(this,re,wi).call(this,K,K)}async getFromId(K){U(this,V)||it(this,V,new Map);const we=U(this,V).get(K);return we?we.bitmap?(we.refCounter+=1,we):we.file?this.getFromFile(we.file):this.getFromUrl(we.url):null}getSvgUrl(K){const we=U(this,V).get(K);return we!=null&&we.isSvg?we.svgUrl:null}deleteId(K){U(this,V)||it(this,V,new Map);const we=U(this,V).get(K);we&&(we.refCounter-=1,we.refCounter===0&&(we.bitmap=null))}isValidId(K){return K.startsWith(`image_${U(this,ae)}_`)}};ae=new WeakMap,J=new WeakMap,V=new WeakMap,re=new WeakSet,wi=async function(K,we){U(this,V)||it(this,V,new Map);let Me=U(this,V).get(K);if(Me===null)return null;if(Me!=null&&Me.bitmap)return Me.refCounter+=1,Me;try{Me||(Me={bitmap:null,id:`image_${U(this,ae)}_${Mr(this,J)._++}`,refCounter:0,isSvg:!1});let ze;if(typeof we=="string"){Me.url=we;const Ze=await fetch(we);if(!Ze.ok)throw new Error(Ze.statusText);ze=await Ze.blob()}else ze=Me.file=we;if(ze.type==="image/svg+xml"){const Ze=se._isSVGFittingCanvas,ot=new FileReader,Et=new Image,Lt=new Promise((Tt,nn)=>{Et.onload=()=>{Me.bitmap=Et,Me.isSvg=!0,Tt()},ot.onload=async()=>{const It=Me.svgUrl=ot.result;Et.src=await Ze?`${It}#svgView(preserveAspectRatio(none))`:It},Et.onerror=ot.onerror=nn});ot.readAsDataURL(ze),await Lt}else Me.bitmap=await createImageBitmap(ze);Me.refCounter=1}catch(ze){console.error(ze),Me=null}return U(this,V).set(K,Me),Me&&U(this,V).set(Me.id,Me),Me};let ce=se;class ue{constructor(K=128){Oe(this,fe,[]);Oe(this,Y,!1);Oe(this,ee,void 0);Oe(this,Ee,-1);it(this,ee,K)}add({cmd:K,undo:we,mustExec:Me,type:ze=NaN,overwriteIfSameType:Ze=!1,keepUndo:ot=!1}){if(Me&&K(),U(this,Y))return;const Et={cmd:K,undo:we,type:ze};if(U(this,Ee)===-1){U(this,fe).length>0&&(U(this,fe).length=0),it(this,Ee,0),U(this,fe).push(Et);return}if(Ze&&U(this,fe)[U(this,Ee)].type===ze){ot&&(Et.undo=U(this,fe)[U(this,Ee)].undo),U(this,fe)[U(this,Ee)]=Et;return}const Lt=U(this,Ee)+1;Lt===U(this,ee)?U(this,fe).splice(0,1):(it(this,Ee,Lt),Lt<U(this,fe).length&&U(this,fe).splice(Lt)),U(this,fe).push(Et)}undo(){U(this,Ee)!==-1&&(it(this,Y,!0),U(this,fe)[U(this,Ee)].undo(),it(this,Y,!1),it(this,Ee,U(this,Ee)-1))}redo(){U(this,Ee)<U(this,fe).length-1&&(it(this,Ee,U(this,Ee)+1),it(this,Y,!0),U(this,fe)[U(this,Ee)].cmd(),it(this,Y,!1))}hasSomethingToUndo(){return U(this,Ee)!==-1}hasSomethingToRedo(){return U(this,Ee)<U(this,fe).length-1}destroy(){it(this,fe,null)}}fe=new WeakMap,Y=new WeakMap,ee=new WeakMap,Ee=new WeakMap,$.CommandManager=ue;class G{constructor(K){Oe(this,be);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:we}=R.FeatureTest.platform;for(const[Me,ze,Ze={}]of K)for(const ot of Me){const Et=ot.startsWith("mac+");we&&Et?(this.callbacks.set(ot.slice(4),{callback:ze,options:Ze}),this.allKeys.add(ot.split("+").at(-1))):!we&&!Et&&(this.callbacks.set(ot,{callback:ze,options:Ze}),this.allKeys.add(ot.split("+").at(-1)))}}exec(K,we){if(!this.allKeys.has(we.key))return;const Me=this.callbacks.get(Ge(this,be,Ea).call(this,we));if(!Me)return;const{callback:ze,options:{bubbles:Ze=!1,args:ot=[],checker:Et=null}}=Me;Et&&!Et(K,we)||(ze.bind(K,...ot)(),Ze||(we.stopPropagation(),we.preventDefault()))}}be=new WeakSet,Ea=function(K){K.altKey&&this.buffer.push("alt"),K.ctrlKey&&this.buffer.push("ctrl"),K.metaKey&&this.buffer.push("meta"),K.shiftKey&&this.buffer.push("shift"),this.buffer.push(K.key);const we=this.buffer.join("+");return this.buffer.length=0,we},$.KeyboardManager=G;const ge=class ge{get _colors(){const K=new Map([["CanvasText",null],["Canvas",null]]);return(0,O.getColorValues)(K),(0,R.shadow)(this,"_colors",K)}convert(K){const we=(0,O.getRGB)(K);if(!window.matchMedia("(forced-colors: active)").matches)return we;for(const[Me,ze]of this._colors)if(ze.every((Ze,ot)=>Ze===we[ot]))return ge._colorsMapping.get(Me);return we}getHexCode(K){const we=this._colors.get(K);return we?R.Util.makeHexColor(...we):K}};Fn(ge,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let ve=ge;$.ColorManager=ve;const jt=class jt{constructor(K,we,Me,ze,Ze,ot){Oe(this,ut);Oe(this,At);Oe(this,Xt);Oe(this,Kt);Oe(this,Vt);Oe(this,We);Oe(this,Re);Oe(this,ct);Oe(this,_n);Oe(this,xt);Oe(this,$t);Oe(this,Ht);Oe(this,wt);Oe(this,de,null);Oe(this,Ae,new Map);Oe(this,Fe,new Map);Oe(this,ye,null);Oe(this,Te,null);Oe(this,Ue,new ue);Oe(this,Be,0);Oe(this,Ce,new Set);Oe(this,Qe,null);Oe(this,at,null);Oe(this,ft,new Set);Oe(this,_t,null);Oe(this,xe,new pe);Oe(this,q,!1);Oe(this,ne,!1);Oe(this,X,null);Oe(this,le,R.AnnotationEditorType.NONE);Oe(this,me,new Set);Oe(this,Se,null);Oe(this,Pe,this.blur.bind(this));Oe(this,Le,this.focus.bind(this));Oe(this,Ke,this.copy.bind(this));Oe(this,Ve,this.cut.bind(this));Oe(this,rt,this.paste.bind(this));Oe(this,lt,this.keydown.bind(this));Oe(this,gt,this.onEditingAction.bind(this));Oe(this,dt,this.onPageChanging.bind(this));Oe(this,pt,this.onScaleChanging.bind(this));Oe(this,vt,this.onRotationChanging.bind(this));Oe(this,mt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Oe(this,Mt,[0,0]);Oe(this,st,null);Oe(this,Xe,null);Oe(this,qe,null);it(this,Xe,K),it(this,qe,we),it(this,ye,Me),this._eventBus=ze,this._eventBus._on("editingaction",U(this,gt)),this._eventBus._on("pagechanging",U(this,dt)),this._eventBus._on("scalechanging",U(this,pt)),this._eventBus._on("rotationchanging",U(this,vt)),it(this,Te,Ze.annotationStorage),it(this,_t,Ze.filterFactory),it(this,Se,ot),this.viewParameters={realScale:O.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const K=jt.prototype,we=Ze=>{const{activeElement:ot}=document;return ot&&U(Ze,Xe).contains(ot)&&Ze.hasSomethingToControl()},Me=this.TRANSLATE_SMALL,ze=this.TRANSLATE_BIG;return(0,R.shadow)(this,"_keyboardManager",new G([[["ctrl+a","mac+meta+a"],K.selectAll],[["ctrl+z","mac+meta+z"],K.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],K.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],K.delete],[["Escape","mac+Escape"],K.unselectAll],[["ArrowLeft","mac+ArrowLeft"],K.translateSelectedEditors,{args:[-Me,0],checker:we}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],K.translateSelectedEditors,{args:[-ze,0],checker:we}],[["ArrowRight","mac+ArrowRight"],K.translateSelectedEditors,{args:[Me,0],checker:we}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],K.translateSelectedEditors,{args:[ze,0],checker:we}],[["ArrowUp","mac+ArrowUp"],K.translateSelectedEditors,{args:[0,-Me],checker:we}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],K.translateSelectedEditors,{args:[0,-ze],checker:we}],[["ArrowDown","mac+ArrowDown"],K.translateSelectedEditors,{args:[0,Me],checker:we}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],K.translateSelectedEditors,{args:[0,ze],checker:we}]]))}destroy(){Ge(this,Kt,qr).call(this),Ge(this,At,Ai).call(this),this._eventBus._off("editingaction",U(this,gt)),this._eventBus._off("pagechanging",U(this,dt)),this._eventBus._off("scalechanging",U(this,pt)),this._eventBus._off("rotationchanging",U(this,vt));for(const K of U(this,Fe).values())K.destroy();U(this,Fe).clear(),U(this,Ae).clear(),U(this,ft).clear(),it(this,de,null),U(this,me).clear(),U(this,Ue).destroy(),U(this,ye).destroy()}get hcmFilter(){return(0,R.shadow)(this,"hcmFilter",U(this,Se)?U(this,_t).addHCMFilter(U(this,Se).foreground,U(this,Se).background):"none")}get direction(){return(0,R.shadow)(this,"direction",getComputedStyle(U(this,Xe)).direction)}editAltText(K){var we;(we=U(this,ye))==null||we.editAltText(this,K)}onPageChanging({pageNumber:K}){it(this,Be,K-1)}focusMainContainer(){U(this,Xe).focus()}findParent(K,we){for(const Me of U(this,Fe).values()){const{x:ze,y:Ze,width:ot,height:Et}=Me.div.getBoundingClientRect();if(K>=ze&&K<=ze+ot&&we>=Ze&&we<=Ze+Et)return Me}return null}disableUserSelect(K=!1){U(this,qe).classList.toggle("noUserSelect",K)}addShouldRescale(K){U(this,ft).add(K)}removeShouldRescale(K){U(this,ft).delete(K)}onScaleChanging({scale:K}){this.commitOrRemove(),this.viewParameters.realScale=K*O.PixelsPerInch.PDF_TO_CSS_UNITS;for(const we of U(this,ft))we.onScaleChanging()}onRotationChanging({pagesRotation:K}){this.commitOrRemove(),this.viewParameters.rotation=K}addToAnnotationStorage(K){!K.isEmpty()&&U(this,Te)&&!U(this,Te).has(K.id)&&U(this,Te).setValue(K.id,K)}blur(){if(!this.hasSelection)return;const{activeElement:K}=document;for(const we of U(this,me))if(we.div.contains(K)){it(this,X,[we,K]),we._focusEventsAllowed=!1;break}}focus(){if(!U(this,X))return;const[K,we]=U(this,X);it(this,X,null),we.addEventListener("focusin",()=>{K._focusEventsAllowed=!0},{once:!0}),we.focus()}addEditListeners(){Ge(this,Xt,Pi).call(this),Ge(this,Vt,Ci).call(this)}removeEditListeners(){Ge(this,Kt,qr).call(this),Ge(this,We,ki).call(this)}copy(K){var Me;if(K.preventDefault(),(Me=U(this,de))==null||Me.commitOrRemove(),!this.hasSelection)return;const we=[];for(const ze of U(this,me)){const Ze=ze.serialize(!0);Ze&&we.push(Ze)}we.length!==0&&K.clipboardData.setData("application/pdfjs",JSON.stringify(we))}cut(K){this.copy(K),this.delete()}paste(K){K.preventDefault();const{clipboardData:we}=K;for(const Ze of we.items)for(const ot of U(this,at))if(ot.isHandlingMimeForPasting(Ze.type)){ot.paste(Ze,this.currentLayer);return}let Me=we.getData("application/pdfjs");if(!Me)return;try{Me=JSON.parse(Me)}catch(Ze){(0,R.warn)(`paste: "${Ze.message}".`);return}if(!Array.isArray(Me))return;this.unselectAll();const ze=this.currentLayer;try{const Ze=[];for(const Lt of Me){const Tt=ze.deserialize(Lt);if(!Tt)return;Ze.push(Tt)}const ot=()=>{for(const Lt of Ze)Ge(this,$t,$i).call(this,Lt);Ge(this,wt,Mi).call(this,Ze)},Et=()=>{for(const Lt of Ze)Lt.remove()};this.addCommands({cmd:ot,undo:Et,mustExec:!0})}catch(Ze){(0,R.warn)(`paste: "${Ze.message}".`)}}keydown(K){var we;(we=this.getActive())!=null&&we.shouldGetKeyboardEvents()||jt._keyboardManager.exec(this,K)}onEditingAction(K){["undo","redo","delete","selectAll"].includes(K.name)&&this[K.name]()}setEditingState(K){K?(Ge(this,ut,Sa).call(this),Ge(this,Xt,Pi).call(this),Ge(this,Vt,Ci).call(this),Ge(this,Re,or).call(this,{isEditing:U(this,le)!==R.AnnotationEditorType.NONE,isEmpty:Ge(this,Ht,Rr).call(this),hasSomethingToUndo:U(this,Ue).hasSomethingToUndo(),hasSomethingToRedo:U(this,Ue).hasSomethingToRedo(),hasSelectedEditor:!1})):(Ge(this,At,Ai).call(this),Ge(this,Kt,qr).call(this),Ge(this,We,ki).call(this),Ge(this,Re,or).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(K){if(!U(this,at)){it(this,at,K);for(const we of U(this,at))Ge(this,ct,Tr).call(this,we.defaultPropertiesToUpdate)}}getId(){return U(this,xe).getId()}get currentLayer(){return U(this,Fe).get(U(this,Be))}getLayer(K){return U(this,Fe).get(K)}get currentPageIndex(){return U(this,Be)}addLayer(K){U(this,Fe).set(K.pageIndex,K),U(this,q)?K.enable():K.disable()}removeLayer(K){U(this,Fe).delete(K.pageIndex)}updateMode(K,we=null){if(U(this,le)!==K){if(it(this,le,K),K===R.AnnotationEditorType.NONE){this.setEditingState(!1),Ge(this,xt,wa).call(this);return}this.setEditingState(!0),Ge(this,_n,xa).call(this),this.unselectAll();for(const Me of U(this,Fe).values())Me.updateMode(K);if(we){for(const Me of U(this,Ae).values())if(Me.annotationElementId===we){this.setSelected(Me),Me.enterInEditMode();break}}}}updateToolbar(K){K!==U(this,le)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:K})}updateParams(K,we){if(U(this,at)){if(K===R.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(K);return}for(const Me of U(this,me))Me.updateParams(K,we);for(const Me of U(this,at))Me.updateDefaultParams(K,we)}}enableWaiting(K=!1){if(U(this,ne)!==K){it(this,ne,K);for(const we of U(this,Fe).values())K?we.disableClick():we.enableClick(),we.div.classList.toggle("waiting",K)}}getEditors(K){const we=[];for(const Me of U(this,Ae).values())Me.pageIndex===K&&we.push(Me);return we}getEditor(K){return U(this,Ae).get(K)}addEditor(K){U(this,Ae).set(K.id,K)}removeEditor(K){var we;U(this,Ae).delete(K.id),this.unselect(K),(!K.annotationElementId||!U(this,Ce).has(K.annotationElementId))&&((we=U(this,Te))==null||we.remove(K.id))}addDeletedAnnotationElement(K){U(this,Ce).add(K.annotationElementId),K.deleted=!0}isDeletedAnnotationElement(K){return U(this,Ce).has(K)}removeDeletedAnnotationElement(K){U(this,Ce).delete(K.annotationElementId),K.deleted=!1}setActiveEditor(K){U(this,de)!==K&&(it(this,de,K),K&&Ge(this,ct,Tr).call(this,K.propertiesToUpdate))}toggleSelected(K){if(U(this,me).has(K)){U(this,me).delete(K),K.unselect(),Ge(this,Re,or).call(this,{hasSelectedEditor:this.hasSelection});return}U(this,me).add(K),K.select(),Ge(this,ct,Tr).call(this,K.propertiesToUpdate),Ge(this,Re,or).call(this,{hasSelectedEditor:!0})}setSelected(K){for(const we of U(this,me))we!==K&&we.unselect();U(this,me).clear(),U(this,me).add(K),K.select(),Ge(this,ct,Tr).call(this,K.propertiesToUpdate),Ge(this,Re,or).call(this,{hasSelectedEditor:!0})}isSelected(K){return U(this,me).has(K)}unselect(K){K.unselect(),U(this,me).delete(K),Ge(this,Re,or).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return U(this,me).size!==0}undo(){U(this,Ue).undo(),Ge(this,Re,or).call(this,{hasSomethingToUndo:U(this,Ue).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Ge(this,Ht,Rr).call(this)})}redo(){U(this,Ue).redo(),Ge(this,Re,or).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:U(this,Ue).hasSomethingToRedo(),isEmpty:Ge(this,Ht,Rr).call(this)})}addCommands(K){U(this,Ue).add(K),Ge(this,Re,or).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Ge(this,Ht,Rr).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const K=[...U(this,me)],we=()=>{for(const ze of K)ze.remove()},Me=()=>{for(const ze of K)Ge(this,$t,$i).call(this,ze)};this.addCommands({cmd:we,undo:Me,mustExec:!0})}commitOrRemove(){var K;(K=U(this,de))==null||K.commitOrRemove()}hasSomethingToControl(){return U(this,de)||this.hasSelection}selectAll(){for(const K of U(this,me))K.commit();Ge(this,wt,Mi).call(this,U(this,Ae).values())}unselectAll(){if(U(this,de)){U(this,de).commitOrRemove();return}if(this.hasSelection){for(const K of U(this,me))K.unselect();U(this,me).clear(),Ge(this,Re,or).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(K,we,Me=!1){if(Me||this.commitOrRemove(),!this.hasSelection)return;U(this,Mt)[0]+=K,U(this,Mt)[1]+=we;const[ze,Ze]=U(this,Mt),ot=[...U(this,me)],Et=1e3;U(this,st)&&clearTimeout(U(this,st)),it(this,st,setTimeout(()=>{it(this,st,null),U(this,Mt)[0]=U(this,Mt)[1]=0,this.addCommands({cmd:()=>{for(const Lt of ot)U(this,Ae).has(Lt.id)&&Lt.translateInPage(ze,Ze)},undo:()=>{for(const Lt of ot)U(this,Ae).has(Lt.id)&&Lt.translateInPage(-ze,-Ze)},mustExec:!1})},Et));for(const Lt of ot)Lt.translateInPage(K,we)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),it(this,Qe,new Map);for(const K of U(this,me))U(this,Qe).set(K,{savedX:K.x,savedY:K.y,savedPageIndex:K.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!U(this,Qe))return!1;this.disableUserSelect(!1);const K=U(this,Qe);it(this,Qe,null);let we=!1;for(const[{x:ze,y:Ze,pageIndex:ot},Et]of K)Et.newX=ze,Et.newY=Ze,Et.newPageIndex=ot,we||(we=ze!==Et.savedX||Ze!==Et.savedY||ot!==Et.savedPageIndex);if(!we)return!1;const Me=(ze,Ze,ot,Et)=>{if(U(this,Ae).has(ze.id)){const Lt=U(this,Fe).get(Et);Lt?ze._setParentAndPosition(Lt,Ze,ot):(ze.pageIndex=Et,ze.x=Ze,ze.y=ot)}};return this.addCommands({cmd:()=>{for(const[ze,{newX:Ze,newY:ot,newPageIndex:Et}]of K)Me(ze,Ze,ot,Et)},undo:()=>{for(const[ze,{savedX:Ze,savedY:ot,savedPageIndex:Et}]of K)Me(ze,Ze,ot,Et)},mustExec:!0}),!0}dragSelectedEditors(K,we){if(U(this,Qe))for(const Me of U(this,Qe).keys())Me.drag(K,we)}rebuild(K){if(K.parent===null){const we=this.getLayer(K.pageIndex);we?(we.changeParent(K),we.addOrRebuild(K)):(this.addEditor(K),this.addToAnnotationStorage(K),K.rebuild())}else K.parent.addOrRebuild(K)}isActive(K){return U(this,de)===K}getActive(){return U(this,de)}getMode(){return U(this,le)}get imageManager(){return(0,R.shadow)(this,"imageManager",new ce)}};de=new WeakMap,Ae=new WeakMap,Fe=new WeakMap,ye=new WeakMap,Te=new WeakMap,Ue=new WeakMap,Be=new WeakMap,Ce=new WeakMap,Qe=new WeakMap,at=new WeakMap,ft=new WeakMap,_t=new WeakMap,xe=new WeakMap,q=new WeakMap,ne=new WeakMap,X=new WeakMap,le=new WeakMap,me=new WeakMap,Se=new WeakMap,Pe=new WeakMap,Le=new WeakMap,Ke=new WeakMap,Ve=new WeakMap,rt=new WeakMap,lt=new WeakMap,gt=new WeakMap,dt=new WeakMap,pt=new WeakMap,vt=new WeakMap,mt=new WeakMap,Mt=new WeakMap,st=new WeakMap,Xe=new WeakMap,qe=new WeakMap,ut=new WeakSet,Sa=function(){window.addEventListener("focus",U(this,Le)),window.addEventListener("blur",U(this,Pe))},At=new WeakSet,Ai=function(){window.removeEventListener("focus",U(this,Le)),window.removeEventListener("blur",U(this,Pe))},Xt=new WeakSet,Pi=function(){window.addEventListener("keydown",U(this,lt),{capture:!0})},Kt=new WeakSet,qr=function(){window.removeEventListener("keydown",U(this,lt),{capture:!0})},Vt=new WeakSet,Ci=function(){document.addEventListener("copy",U(this,Ke)),document.addEventListener("cut",U(this,Ve)),document.addEventListener("paste",U(this,rt))},We=new WeakSet,ki=function(){document.removeEventListener("copy",U(this,Ke)),document.removeEventListener("cut",U(this,Ve)),document.removeEventListener("paste",U(this,rt))},Re=new WeakSet,or=function(K){Object.entries(K).some(([Me,ze])=>U(this,mt)[Me]!==ze)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(U(this,mt),K)})},ct=new WeakSet,Tr=function(K){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:K})},_n=new WeakSet,xa=function(){if(!U(this,q)){it(this,q,!0);for(const K of U(this,Fe).values())K.enable()}},xt=new WeakSet,wa=function(){if(this.unselectAll(),U(this,q)){it(this,q,!1);for(const K of U(this,Fe).values())K.disable()}},$t=new WeakSet,$i=function(K){const we=U(this,Fe).get(K.pageIndex);we?we.addOrRebuild(K):this.addEditor(K)},Ht=new WeakSet,Rr=function(){if(U(this,Ae).size===0)return!0;if(U(this,Ae).size===1)for(const K of U(this,Ae).values())return K.isEmpty();return!1},wt=new WeakSet,Mi=function(K){U(this,me).clear();for(const we of K)we.isEmpty()||(U(this,me).add(we),we.select());Ge(this,Re,or).call(this,{hasSelectedEditor:!0})},Fn(jt,"TRANSLATE_SMALL",1),Fn(jt,"TRANSLATE_BIG",10);let he=jt;$.AnnotationEditorUIManager=he},(A,$,B)=>{var Be,Ce,Qe,at,ft,_t,xe,q,ne,X,le,me,wr,Pe,Ar,Ke,Ti,rt,Xr,gt,Kr,pt,Lr,mt,Or;Object.defineProperty($,"__esModule",{value:!0}),$.StatTimer=$.RenderingCancelledException=$.PixelsPerInch=$.PageViewport=$.PDFDateString=$.DOMStandardFontDataFactory=$.DOMSVGFactory=$.DOMFilterFactory=$.DOMCanvasFactory=$.DOMCMapReaderFactory=void 0,$.deprecated=Ee,$.getColorValues=Ae,$.getCurrentTransform=Fe,$.getCurrentTransformInverse=ye,$.getFilenameFromUrl=re,$.getPdfFilenameFromUrl=ie,$.getRGB=de,$.getXfaPageViewport=ge,$.isDataScheme=J,$.isPdfFile=V,$.isValidFetchUrl=fe,$.loadScript=ee,$.noContextMenu=Y,$.setLayerDimensions=Te;var R=B(7),O=B(1);const H="http://www.w3.org/2000/svg",Ue=class Ue{};Fn(Ue,"CSS",96),Fn(Ue,"PDF",72),Fn(Ue,"PDF_TO_CSS_UNITS",Ue.CSS/Ue.PDF);let W=Ue;$.PixelsPerInch=W;class pe extends R.BaseFilterFactory{constructor({docId:qe,ownerDocument:ut=globalThis.document}={}){super();Oe(this,me);Oe(this,Pe);Oe(this,Ke);Oe(this,rt);Oe(this,gt);Oe(this,pt);Oe(this,mt);Oe(this,Be,void 0);Oe(this,Ce,void 0);Oe(this,Qe,void 0);Oe(this,at,void 0);Oe(this,ft,void 0);Oe(this,_t,void 0);Oe(this,xe,void 0);Oe(this,q,void 0);Oe(this,ne,void 0);Oe(this,X,void 0);Oe(this,le,0);it(this,Qe,qe),it(this,at,ut)}addFilter(qe){if(!qe)return"none";let ut=U(this,me,wr).get(qe);if(ut)return ut;let Pt,At,Ut,Xt;if(qe.length===1){const Vt=qe[0],ln=new Array(256);for(let We=0;We<256;We++)ln[We]=Vt[We]/255;Xt=Pt=At=Ut=ln.join(",")}else{const[Vt,ln,We]=qe,Ie=new Array(256),Re=new Array(256),ht=new Array(256);for(let ct=0;ct<256;ct++)Ie[ct]=Vt[ct]/255,Re[ct]=ln[ct]/255,ht[ct]=We[ct]/255;Pt=Ie.join(","),At=Re.join(","),Ut=ht.join(","),Xt=`${Pt}${At}${Ut}`}if(ut=U(this,me,wr).get(Xt),ut)return U(this,me,wr).set(qe,ut),ut;const Dt=`g_${U(this,Qe)}_transfer_map_${Mr(this,le)._++}`,Kt=`url(#${Dt})`;U(this,me,wr).set(qe,Kt),U(this,me,wr).set(Xt,Kt);const en=Ge(this,rt,Xr).call(this,Dt);return Ge(this,pt,Lr).call(this,Pt,At,Ut,en),Kt}addHCMFilter(qe,ut){var ln;const Pt=`${qe}-${ut}`;if(U(this,_t)===Pt)return U(this,xe);if(it(this,_t,Pt),it(this,xe,"none"),(ln=U(this,ft))==null||ln.remove(),!qe||!ut)return U(this,xe);const At=Ge(this,mt,Or).call(this,qe);qe=O.Util.makeHexColor(...At);const Ut=Ge(this,mt,Or).call(this,ut);if(ut=O.Util.makeHexColor(...Ut),U(this,Pe,Ar).style.color="",qe==="#000000"&&ut==="#ffffff"||qe===ut)return U(this,xe);const Xt=new Array(256);for(let We=0;We<=255;We++){const Ie=We/255;Xt[We]=Ie<=.03928?Ie/12.92:((Ie+.055)/1.055)**2.4}const Dt=Xt.join(","),Kt=`g_${U(this,Qe)}_hcm_filter`,en=it(this,q,Ge(this,rt,Xr).call(this,Kt));Ge(this,pt,Lr).call(this,Dt,Dt,Dt,en),Ge(this,Ke,Ti).call(this,en);const Vt=(We,Ie)=>{const Re=At[We]/255,ht=Ut[We]/255,ct=new Array(Ie+1);for(let an=0;an<=Ie;an++)ct[an]=Re+an/Ie*(ht-Re);return ct.join(",")};return Ge(this,pt,Lr).call(this,Vt(0,5),Vt(1,5),Vt(2,5),en),it(this,xe,`url(#${Kt})`),U(this,xe)}addHighlightHCMFilter(qe,ut,Pt,At){var ht;const Ut=`${qe}-${ut}-${Pt}-${At}`;if(U(this,ne)===Ut)return U(this,X);if(it(this,ne,Ut),it(this,X,"none"),(ht=U(this,q))==null||ht.remove(),!qe||!ut)return U(this,X);const[Xt,Dt]=[qe,ut].map(Ge(this,mt,Or).bind(this));let Kt=Math.round(.2126*Xt[0]+.7152*Xt[1]+.0722*Xt[2]),en=Math.round(.2126*Dt[0]+.7152*Dt[1]+.0722*Dt[2]),[Vt,ln]=[Pt,At].map(Ge(this,mt,Or).bind(this));en<Kt&&([Kt,en,Vt,ln]=[en,Kt,ln,Vt]),U(this,Pe,Ar).style.color="";const We=(ct,an,_n)=>{const Ye=new Array(256),xt=(en-Kt)/_n,Nt=ct/255,$t=(an-ct)/(255*_n);let Bt=0;for(let Ht=0;Ht<=_n;Ht++){const En=Math.round(Kt+Ht*xt),wt=Nt+Ht*$t;for(let pn=Bt;pn<=En;pn++)Ye[pn]=wt;Bt=En+1}for(let Ht=Bt;Ht<256;Ht++)Ye[Ht]=Ye[Bt-1];return Ye.join(",")},Ie=`g_${U(this,Qe)}_hcm_highlight_filter`,Re=it(this,q,Ge(this,rt,Xr).call(this,Ie));return Ge(this,Ke,Ti).call(this,Re),Ge(this,pt,Lr).call(this,We(Vt[0],ln[0],5),We(Vt[1],ln[1],5),We(Vt[2],ln[2],5),Re),it(this,X,`url(#${Ie})`),U(this,X)}destroy(qe=!1){qe&&(U(this,xe)||U(this,X))||(U(this,Ce)&&(U(this,Ce).parentNode.parentNode.remove(),it(this,Ce,null)),U(this,Be)&&(U(this,Be).clear(),it(this,Be,null)),it(this,le,0))}}Be=new WeakMap,Ce=new WeakMap,Qe=new WeakMap,at=new WeakMap,ft=new WeakMap,_t=new WeakMap,xe=new WeakMap,q=new WeakMap,ne=new WeakMap,X=new WeakMap,le=new WeakMap,me=new WeakSet,wr=function(){return U(this,Be)||it(this,Be,new Map)},Pe=new WeakSet,Ar=function(){if(!U(this,Ce)){const qe=U(this,at).createElement("div"),{style:ut}=qe;ut.visibility="hidden",ut.contain="strict",ut.width=ut.height=0,ut.position="absolute",ut.top=ut.left=0,ut.zIndex=-1;const Pt=U(this,at).createElementNS(H,"svg");Pt.setAttribute("width",0),Pt.setAttribute("height",0),it(this,Ce,U(this,at).createElementNS(H,"defs")),qe.append(Pt),Pt.append(U(this,Ce)),U(this,at).body.append(qe)}return U(this,Ce)},Ke=new WeakSet,Ti=function(qe){const ut=U(this,at).createElementNS(H,"feColorMatrix");ut.setAttribute("type","matrix"),ut.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),qe.append(ut)},rt=new WeakSet,Xr=function(qe){const ut=U(this,at).createElementNS(H,"filter");return ut.setAttribute("color-interpolation-filters","sRGB"),ut.setAttribute("id",qe),U(this,Pe,Ar).append(ut),ut},gt=new WeakSet,Kr=function(qe,ut,Pt){const At=U(this,at).createElementNS(H,ut);At.setAttribute("type","discrete"),At.setAttribute("tableValues",Pt),qe.append(At)},pt=new WeakSet,Lr=function(qe,ut,Pt,At){const Ut=U(this,at).createElementNS(H,"feComponentTransfer");At.append(Ut),Ge(this,gt,Kr).call(this,Ut,"feFuncR",qe),Ge(this,gt,Kr).call(this,Ut,"feFuncG",ut),Ge(this,gt,Kr).call(this,Ut,"feFuncB",Pt)},mt=new WeakSet,Or=function(qe){return U(this,Pe,Ar).style.color=qe,de(getComputedStyle(U(this,Pe,Ar)).getPropertyValue("color"))},$.DOMFilterFactory=pe;class ce extends R.BaseCanvasFactory{constructor({ownerDocument:Xe=globalThis.document}={}){super(),this._document=Xe}_createCanvas(Xe,qe){const ut=this._document.createElement("canvas");return ut.width=Xe,ut.height=qe,ut}}$.DOMCanvasFactory=ce;async function ue(st,Xe=!1){if(fe(st,document.baseURI)){const qe=await fetch(st);if(!qe.ok)throw new Error(qe.statusText);return Xe?new Uint8Array(await qe.arrayBuffer()):(0,O.stringToBytes)(await qe.text())}return new Promise((qe,ut)=>{const Pt=new XMLHttpRequest;Pt.open("GET",st,!0),Xe&&(Pt.responseType="arraybuffer"),Pt.onreadystatechange=()=>{if(Pt.readyState===XMLHttpRequest.DONE){if(Pt.status===200||Pt.status===0){let At;if(Xe&&Pt.response?At=new Uint8Array(Pt.response):!Xe&&Pt.responseText&&(At=(0,O.stringToBytes)(Pt.responseText)),At){qe(At);return}}ut(new Error(Pt.statusText))}},Pt.send(null)})}class G extends R.BaseCMapReaderFactory{_fetchData(Xe,qe){return ue(Xe,this.isCompressed).then(ut=>({cMapData:ut,compressionType:qe}))}}$.DOMCMapReaderFactory=G;class ve extends R.BaseStandardFontDataFactory{_fetchData(Xe){return ue(Xe,!0)}}$.DOMStandardFontDataFactory=ve;class he extends R.BaseSVGFactory{_createSVG(Xe){return document.createElementNS(H,Xe)}}$.DOMSVGFactory=he;class oe{constructor({viewBox:Xe,scale:qe,rotation:ut,offsetX:Pt=0,offsetY:At=0,dontFlip:Ut=!1}){this.viewBox=Xe,this.scale=qe,this.rotation=ut,this.offsetX=Pt,this.offsetY=At;const Xt=(Xe[2]+Xe[0])/2,Dt=(Xe[3]+Xe[1])/2;let Kt,en,Vt,ln;switch(ut%=360,ut<0&&(ut+=360),ut){case 180:Kt=-1,en=0,Vt=0,ln=1;break;case 90:Kt=0,en=1,Vt=1,ln=0;break;case 270:Kt=0,en=-1,Vt=-1,ln=0;break;case 0:Kt=1,en=0,Vt=0,ln=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Ut&&(Vt=-Vt,ln=-ln);let We,Ie,Re,ht;Kt===0?(We=Math.abs(Dt-Xe[1])*qe+Pt,Ie=Math.abs(Xt-Xe[0])*qe+At,Re=(Xe[3]-Xe[1])*qe,ht=(Xe[2]-Xe[0])*qe):(We=Math.abs(Xt-Xe[0])*qe+Pt,Ie=Math.abs(Dt-Xe[1])*qe+At,Re=(Xe[2]-Xe[0])*qe,ht=(Xe[3]-Xe[1])*qe),this.transform=[Kt*qe,en*qe,Vt*qe,ln*qe,We-Kt*qe*Xt-Vt*qe*Dt,Ie-en*qe*Xt-ln*qe*Dt],this.width=Re,this.height=ht}get rawDims(){const{viewBox:Xe}=this;return(0,O.shadow)(this,"rawDims",{pageWidth:Xe[2]-Xe[0],pageHeight:Xe[3]-Xe[1],pageX:Xe[0],pageY:Xe[1]})}clone({scale:Xe=this.scale,rotation:qe=this.rotation,offsetX:ut=this.offsetX,offsetY:Pt=this.offsetY,dontFlip:At=!1}={}){return new oe({viewBox:this.viewBox.slice(),scale:Xe,rotation:qe,offsetX:ut,offsetY:Pt,dontFlip:At})}convertToViewportPoint(Xe,qe){return O.Util.applyTransform([Xe,qe],this.transform)}convertToViewportRectangle(Xe){const qe=O.Util.applyTransform([Xe[0],Xe[1]],this.transform),ut=O.Util.applyTransform([Xe[2],Xe[3]],this.transform);return[qe[0],qe[1],ut[0],ut[1]]}convertToPdfPoint(Xe,qe){return O.Util.applyInverseTransform([Xe,qe],this.transform)}}$.PageViewport=oe;class ae extends O.BaseException{constructor(Xe,qe=0){super(Xe,"RenderingCancelledException"),this.extraDelay=qe}}$.RenderingCancelledException=ae;function J(st){const Xe=st.length;let qe=0;for(;qe<Xe&&st[qe].trim()==="";)qe++;return st.substring(qe,qe+5).toLowerCase()==="data:"}function V(st){return typeof st=="string"&&/\.pdf$/i.test(st)}function re(st,Xe=!1){return Xe||([st]=st.split(/[#?]/,1)),st.substring(st.lastIndexOf("/")+1)}function ie(st,Xe="document.pdf"){if(typeof st!="string")return Xe;if(J(st))return(0,O.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Xe;const qe=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,ut=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Pt=qe.exec(st);let At=ut.exec(Pt[1])||ut.exec(Pt[2])||ut.exec(Pt[3]);if(At&&(At=At[0],At.includes("%")))try{At=ut.exec(decodeURIComponent(At))[0]}catch{}return At||Xe}class se{constructor(){Fn(this,"started",Object.create(null));Fn(this,"times",[])}time(Xe){Xe in this.started&&(0,O.warn)(`Timer is already running for ${Xe}`),this.started[Xe]=Date.now()}timeEnd(Xe){Xe in this.started||(0,O.warn)(`Timer has not been started for ${Xe}`),this.times.push({name:Xe,start:this.started[Xe],end:Date.now()}),delete this.started[Xe]}toString(){const Xe=[];let qe=0;for(const{name:ut}of this.times)qe=Math.max(ut.length,qe);for(const{name:ut,start:Pt,end:At}of this.times)Xe.push(`${ut.padEnd(qe)} ${At-Pt}ms
`);return Xe.join("")}}$.StatTimer=se;function fe(st,Xe){try{const{protocol:qe}=Xe?new URL(st,Xe):new URL(st);return qe==="http:"||qe==="https:"}catch{return!1}}function Y(st){st.preventDefault()}function ee(st,Xe=!1){return new Promise((qe,ut)=>{const Pt=document.createElement("script");Pt.src=st,Pt.onload=function(At){Xe&&Pt.remove(),qe(At)},Pt.onerror=function(){ut(new Error(`Cannot load script at: ${Pt.src}`))},(document.head||document.documentElement).append(Pt)})}function Ee(st){console.log("Deprecated API usage: "+st)}let be;class te{static toDateObject(Xe){if(!Xe||typeof Xe!="string")return null;be||(be=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const qe=be.exec(Xe);if(!qe)return null;const ut=parseInt(qe[1],10);let Pt=parseInt(qe[2],10);Pt=Pt>=1&&Pt<=12?Pt-1:0;let At=parseInt(qe[3],10);At=At>=1&&At<=31?At:1;let Ut=parseInt(qe[4],10);Ut=Ut>=0&&Ut<=23?Ut:0;let Xt=parseInt(qe[5],10);Xt=Xt>=0&&Xt<=59?Xt:0;let Dt=parseInt(qe[6],10);Dt=Dt>=0&&Dt<=59?Dt:0;const Kt=qe[7]||"Z";let en=parseInt(qe[8],10);en=en>=0&&en<=23?en:0;let Vt=parseInt(qe[9],10)||0;return Vt=Vt>=0&&Vt<=59?Vt:0,Kt==="-"?(Ut+=en,Xt+=Vt):Kt==="+"&&(Ut-=en,Xt-=Vt),new Date(Date.UTC(ut,Pt,At,Ut,Xt,Dt))}}$.PDFDateString=te;function ge(st,{scale:Xe=1,rotation:qe=0}){const{width:ut,height:Pt}=st.attributes.style,At=[0,0,parseInt(ut),parseInt(Pt)];return new oe({viewBox:At,scale:Xe,rotation:qe})}function de(st){if(st.startsWith("#")){const Xe=parseInt(st.slice(1),16);return[(Xe&16711680)>>16,(Xe&65280)>>8,Xe&255]}return st.startsWith("rgb(")?st.slice(4,-1).split(",").map(Xe=>parseInt(Xe)):st.startsWith("rgba(")?st.slice(5,-1).split(",").map(Xe=>parseInt(Xe)).slice(0,3):((0,O.warn)(`Not a valid color format: "${st}"`),[0,0,0])}function Ae(st){const Xe=document.createElement("span");Xe.style.visibility="hidden",document.body.append(Xe);for(const qe of st.keys()){Xe.style.color=qe;const ut=window.getComputedStyle(Xe).color;st.set(qe,de(ut))}Xe.remove()}function Fe(st){const{a:Xe,b:qe,c:ut,d:Pt,e:At,f:Ut}=st.getTransform();return[Xe,qe,ut,Pt,At,Ut]}function ye(st){const{a:Xe,b:qe,c:ut,d:Pt,e:At,f:Ut}=st.getTransform().invertSelf();return[Xe,qe,ut,Pt,At,Ut]}function Te(st,Xe,qe=!1,ut=!0){if(Xe instanceof oe){const{pageWidth:Pt,pageHeight:At}=Xe.rawDims,{style:Ut}=st,Xt=O.FeatureTest.isCSSRoundSupported,Dt=`var(--scale-factor) * ${Pt}px`,Kt=`var(--scale-factor) * ${At}px`,en=Xt?`round(${Dt}, 1px)`:`calc(${Dt})`,Vt=Xt?`round(${Kt}, 1px)`:`calc(${Kt})`;!qe||Xe.rotation%180===0?(Ut.width=en,Ut.height=Vt):(Ut.width=Vt,Ut.height=en)}ut&&st.setAttribute("data-main-rotation",Xe.rotation)}},(A,$,B)=>{Object.defineProperty($,"__esModule",{value:!0}),$.BaseStandardFontDataFactory=$.BaseSVGFactory=$.BaseFilterFactory=$.BaseCanvasFactory=$.BaseCMapReaderFactory=void 0;var R=B(1);class O{constructor(){this.constructor===O&&(0,R.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(G){return"none"}addHCMFilter(G,ve){return"none"}addHighlightHCMFilter(G,ve,he,oe){return"none"}destroy(G=!1){}}$.BaseFilterFactory=O;class H{constructor(){this.constructor===H&&(0,R.unreachable)("Cannot initialize BaseCanvasFactory.")}create(G,ve){if(G<=0||ve<=0)throw new Error("Invalid canvas size");const he=this._createCanvas(G,ve);return{canvas:he,context:he.getContext("2d")}}reset(G,ve,he){if(!G.canvas)throw new Error("Canvas is not specified");if(ve<=0||he<=0)throw new Error("Invalid canvas size");G.canvas.width=ve,G.canvas.height=he}destroy(G){if(!G.canvas)throw new Error("Canvas is not specified");G.canvas.width=0,G.canvas.height=0,G.canvas=null,G.context=null}_createCanvas(G,ve){(0,R.unreachable)("Abstract method `_createCanvas` called.")}}$.BaseCanvasFactory=H;class W{constructor({baseUrl:G=null,isCompressed:ve=!0}){this.constructor===W&&(0,R.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=G,this.isCompressed=ve}async fetch({name:G}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!G)throw new Error("CMap name must be specified.");const ve=this.baseUrl+G+(this.isCompressed?".bcmap":""),he=this.isCompressed?R.CMapCompressionType.BINARY:R.CMapCompressionType.NONE;return this._fetchData(ve,he).catch(oe=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${ve}`)})}_fetchData(G,ve){(0,R.unreachable)("Abstract method `_fetchData` called.")}}$.BaseCMapReaderFactory=W;class pe{constructor({baseUrl:G=null}){this.constructor===pe&&(0,R.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=G}async fetch({filename:G}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!G)throw new Error("Font filename must be specified.");const ve=`${this.baseUrl}${G}`;return this._fetchData(ve).catch(he=>{throw new Error(`Unable to load font data at: ${ve}`)})}_fetchData(G){(0,R.unreachable)("Abstract method `_fetchData` called.")}}$.BaseStandardFontDataFactory=pe;class ce{constructor(){this.constructor===ce&&(0,R.unreachable)("Cannot initialize BaseSVGFactory.")}create(G,ve,he=!1){if(G<=0||ve<=0)throw new Error("Invalid SVG dimensions");const oe=this._createSVG("svg:svg");return oe.setAttribute("version","1.1"),he||(oe.setAttribute("width",`${G}px`),oe.setAttribute("height",`${ve}px`)),oe.setAttribute("preserveAspectRatio","none"),oe.setAttribute("viewBox",`0 0 ${G} ${ve}`),oe}createElement(G){if(typeof G!="string")throw new Error("Invalid SVG element type");return this._createSVG(G)}_createSVG(G){(0,R.unreachable)("Abstract method `_createSVG` called.")}}$.BaseSVGFactory=ce},(A,$,B)=>{Object.defineProperty($,"__esModule",{value:!0}),$.MurmurHash3_64=void 0;var R=B(1);const O=3285377520,H=4294901760,W=65535;class pe{constructor(ue){this.h1=ue?ue&4294967295:O,this.h2=ue?ue&4294967295:O}update(ue){let G,ve;if(typeof ue=="string"){G=new Uint8Array(ue.length*2),ve=0;for(let Ee=0,be=ue.length;Ee<be;Ee++){const te=ue.charCodeAt(Ee);te<=255?G[ve++]=te:(G[ve++]=te>>>8,G[ve++]=te&255)}}else if((0,R.isArrayBuffer)(ue))G=ue.slice(),ve=G.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const he=ve>>2,oe=ve-he*4,ae=new Uint32Array(G.buffer,0,he);let J=0,V=0,re=this.h1,ie=this.h2;const se=3432918353,fe=461845907,Y=se&W,ee=fe&W;for(let Ee=0;Ee<he;Ee++)Ee&1?(J=ae[Ee],J=J*se&H|J*Y&W,J=J<<15|J>>>17,J=J*fe&H|J*ee&W,re^=J,re=re<<13|re>>>19,re=re*5+3864292196):(V=ae[Ee],V=V*se&H|V*Y&W,V=V<<15|V>>>17,V=V*fe&H|V*ee&W,ie^=V,ie=ie<<13|ie>>>19,ie=ie*5+3864292196);switch(J=0,oe){case 3:J^=G[he*4+2]<<16;case 2:J^=G[he*4+1]<<8;case 1:J^=G[he*4],J=J*se&H|J*Y&W,J=J<<15|J>>>17,J=J*fe&H|J*ee&W,he&1?re^=J:ie^=J}this.h1=re,this.h2=ie}hexdigest(){let ue=this.h1,G=this.h2;return ue^=G>>>1,ue=ue*3981806797&H|ue*36045&W,G=G*4283543511&H|((G<<16|ue>>>16)*2950163797&H)>>>16,ue^=G>>>1,ue=ue*444984403&H|ue*60499&W,G=G*3301882366&H|((G<<16|ue>>>16)*3120437893&H)>>>16,ue^=G>>>1,(ue>>>0).toString(16).padStart(8,"0")+(G>>>0).toString(16).padStart(8,"0")}}$.MurmurHash3_64=pe},(A,$,B)=>{var W;Object.defineProperty($,"__esModule",{value:!0}),$.FontLoader=$.FontFaceObject=void 0;var R=B(1);class O{constructor({ownerDocument:ce=globalThis.document,styleElement:ue=null}){Oe(this,W,new Set);this._document=ce,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(ce){this.nativeFontFaces.add(ce),this._document.fonts.add(ce)}removeNativeFontFace(ce){this.nativeFontFaces.delete(ce),this._document.fonts.delete(ce)}insertRule(ce){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const ue=this.styleElement.sheet;ue.insertRule(ce,ue.cssRules.length)}clear(){for(const ce of this.nativeFontFaces)this._document.fonts.delete(ce);this.nativeFontFaces.clear(),U(this,W).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(ce){if(!(!ce||U(this,W).has(ce.loadedName))){if((0,R.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:ue,src:G,style:ve}=ce,he=new FontFace(ue,G,ve);this.addNativeFontFace(he);try{await he.load(),U(this,W).add(ue)}catch{(0,R.warn)(`Cannot load system font: ${ce.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(he)}return}(0,R.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(ce){if(ce.attached||ce.missingFile&&!ce.systemFontInfo)return;if(ce.attached=!0,ce.systemFontInfo){await this.loadSystemFont(ce.systemFontInfo);return}if(this.isFontLoadingAPISupported){const G=ce.createNativeFontFace();if(G){this.addNativeFontFace(G);try{await G.loaded}catch(ve){throw(0,R.warn)(`Failed to load font '${G.family}': '${ve}'.`),ce.disableFontFace=!0,ve}}return}const ue=ce.createFontFaceRule();if(ue){if(this.insertRule(ue),this.isSyncFontLoadingSupported)return;await new Promise(G=>{const ve=this._queueLoadingCallback(G);this._prepareFontLoadEvent(ce,ve)})}}get isFontLoadingAPISupported(){var ue;const ce=!!((ue=this._document)!=null&&ue.fonts);return(0,R.shadow)(this,"isFontLoadingAPISupported",ce)}get isSyncFontLoadingSupported(){let ce=!1;return(R.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(ce=!0),(0,R.shadow)(this,"isSyncFontLoadingSupported",ce)}_queueLoadingCallback(ce){function ue(){for((0,R.assert)(!ve.done,"completeRequest() cannot be called twice."),ve.done=!0;G.length>0&&G[0].done;){const he=G.shift();setTimeout(he.callback,0)}}const{loadingRequests:G}=this,ve={done:!1,complete:ue,callback:ce};return G.push(ve),ve}get _loadTestFont(){const ce=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,R.shadow)(this,"_loadTestFont",ce)}_prepareFontLoadEvent(ce,ue){function G(de,Ae){return de.charCodeAt(Ae)<<24|de.charCodeAt(Ae+1)<<16|de.charCodeAt(Ae+2)<<8|de.charCodeAt(Ae+3)&255}function ve(de,Ae,Fe,ye){const Te=de.substring(0,Ae),Ue=de.substring(Ae+Fe);return Te+ye+Ue}let he,oe;const ae=this._document.createElement("canvas");ae.width=1,ae.height=1;const J=ae.getContext("2d");let V=0;function re(de,Ae){if(++V>30){(0,R.warn)("Load test font never loaded."),Ae();return}if(J.font="30px "+de,J.fillText(".",0,20),J.getImageData(0,0,1,1).data[3]>0){Ae();return}setTimeout(re.bind(null,de,Ae))}const ie=`lt${Date.now()}${this.loadTestFontId++}`;let se=this._loadTestFont;se=ve(se,976,ie.length,ie);const Y=16,ee=1482184792;let Ee=G(se,Y);for(he=0,oe=ie.length-3;he<oe;he+=4)Ee=Ee-ee+G(ie,he)|0;he<ie.length&&(Ee=Ee-ee+G(ie+"XXX",he)|0),se=ve(se,Y,4,(0,R.string32)(Ee));const be=`url(data:font/opentype;base64,${btoa(se)});`,te=`@font-face {font-family:"${ie}";src:${be}}`;this.insertRule(te);const ge=this._document.createElement("div");ge.style.visibility="hidden",ge.style.width=ge.style.height="10px",ge.style.position="absolute",ge.style.top=ge.style.left="0px";for(const de of[ce.loadedName,ie]){const Ae=this._document.createElement("span");Ae.textContent="Hi",Ae.style.fontFamily=de,ge.append(Ae)}this._document.body.append(ge),re(ie,()=>{ge.remove(),ue.complete()})}}W=new WeakMap,$.FontLoader=O;class H{constructor(ce,{isEvalSupported:ue=!0,disableFontFace:G=!1,ignoreErrors:ve=!1,inspectFont:he=null}){this.compiledGlyphs=Object.create(null);for(const oe in ce)this[oe]=ce[oe];this.isEvalSupported=ue!==!1,this.disableFontFace=G===!0,this.ignoreErrors=ve===!0,this._inspectFont=he}createNativeFontFace(){var ue;if(!this.data||this.disableFontFace)return null;let ce;if(!this.cssFontInfo)ce=new FontFace(this.loadedName,this.data,{});else{const G={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(G.style=`oblique ${this.cssFontInfo.italicAngle}deg`),ce=new FontFace(this.cssFontInfo.fontFamily,this.data,G)}return(ue=this._inspectFont)==null||ue.call(this,this),ce}createFontFaceRule(){var ve;if(!this.data||this.disableFontFace)return null;const ce=(0,R.bytesToString)(this.data),ue=`url(data:${this.mimetype};base64,${btoa(ce)});`;let G;if(!this.cssFontInfo)G=`@font-face {font-family:"${this.loadedName}";src:${ue}}`;else{let he=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(he+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),G=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${he}src:${ue}}`}return(ve=this._inspectFont)==null||ve.call(this,this,ue),G}getPathGenerator(ce,ue){if(this.compiledGlyphs[ue]!==void 0)return this.compiledGlyphs[ue];let G;try{G=ce.get(this.loadedName+"_path_"+ue)}catch(ve){if(!this.ignoreErrors)throw ve;return(0,R.warn)(`getPathGenerator - ignoring character: "${ve}".`),this.compiledGlyphs[ue]=function(he,oe){}}if(this.isEvalSupported&&R.FeatureTest.isEvalSupported){const ve=[];for(const he of G){const oe=he.args!==void 0?he.args.join(","):"";ve.push("c.",he.cmd,"(",oe,`);
`)}return this.compiledGlyphs[ue]=new Function("c","size",ve.join(""))}return this.compiledGlyphs[ue]=function(ve,he){for(const oe of G)oe.cmd==="scale"&&(oe.args=[he,-he]),ve[oe.cmd].apply(ve,oe.args)}}}$.FontFaceObject=H},(A,$,B)=>{Object.defineProperty($,"__esModule",{value:!0}),$.NodeStandardFontDataFactory=$.NodeFilterFactory=$.NodeCanvasFactory=$.NodeCMapReaderFactory=void 0;var R=B(7);B(1);const O=function(ue){return new Promise((G,ve)=>{require$$5.readFile(ue,(oe,ae)=>{if(oe||!ae){ve(new Error(oe));return}G(new Uint8Array(ae))})})};class H extends R.BaseFilterFactory{}$.NodeFilterFactory=H;class W extends R.BaseCanvasFactory{_createCanvas(G,ve){return require$$5.createCanvas(G,ve)}}$.NodeCanvasFactory=W;class pe extends R.BaseCMapReaderFactory{_fetchData(G,ve){return O(G).then(he=>({cMapData:he,compressionType:ve}))}}$.NodeCMapReaderFactory=pe;class ce extends R.BaseStandardFontDataFactory{_fetchData(G){return O(G)}}$.NodeStandardFontDataFactory=ce},(A,$,B)=>{var Ce,Ri,at,Li;Object.defineProperty($,"__esModule",{value:!0}),$.CanvasGraphics=void 0;var R=B(1),O=B(6),H=B(12),W=B(13);const pe=16,ce=100,ue=4096,G=15,ve=10,he=1e3,oe=16;function ae(xe,q){if(xe._removeMirroring)throw new Error("Context is already forwarding operations.");xe.__originalSave=xe.save,xe.__originalRestore=xe.restore,xe.__originalRotate=xe.rotate,xe.__originalScale=xe.scale,xe.__originalTranslate=xe.translate,xe.__originalTransform=xe.transform,xe.__originalSetTransform=xe.setTransform,xe.__originalResetTransform=xe.resetTransform,xe.__originalClip=xe.clip,xe.__originalMoveTo=xe.moveTo,xe.__originalLineTo=xe.lineTo,xe.__originalBezierCurveTo=xe.bezierCurveTo,xe.__originalRect=xe.rect,xe.__originalClosePath=xe.closePath,xe.__originalBeginPath=xe.beginPath,xe._removeMirroring=()=>{xe.save=xe.__originalSave,xe.restore=xe.__originalRestore,xe.rotate=xe.__originalRotate,xe.scale=xe.__originalScale,xe.translate=xe.__originalTranslate,xe.transform=xe.__originalTransform,xe.setTransform=xe.__originalSetTransform,xe.resetTransform=xe.__originalResetTransform,xe.clip=xe.__originalClip,xe.moveTo=xe.__originalMoveTo,xe.lineTo=xe.__originalLineTo,xe.bezierCurveTo=xe.__originalBezierCurveTo,xe.rect=xe.__originalRect,xe.closePath=xe.__originalClosePath,xe.beginPath=xe.__originalBeginPath,delete xe._removeMirroring},xe.save=function(){q.save(),this.__originalSave()},xe.restore=function(){q.restore(),this.__originalRestore()},xe.translate=function(X,le){q.translate(X,le),this.__originalTranslate(X,le)},xe.scale=function(X,le){q.scale(X,le),this.__originalScale(X,le)},xe.transform=function(X,le,me,Se,Pe,Le){q.transform(X,le,me,Se,Pe,Le),this.__originalTransform(X,le,me,Se,Pe,Le)},xe.setTransform=function(X,le,me,Se,Pe,Le){q.setTransform(X,le,me,Se,Pe,Le),this.__originalSetTransform(X,le,me,Se,Pe,Le)},xe.resetTransform=function(){q.resetTransform(),this.__originalResetTransform()},xe.rotate=function(X){q.rotate(X),this.__originalRotate(X)},xe.clip=function(X){q.clip(X),this.__originalClip(X)},xe.moveTo=function(ne,X){q.moveTo(ne,X),this.__originalMoveTo(ne,X)},xe.lineTo=function(ne,X){q.lineTo(ne,X),this.__originalLineTo(ne,X)},xe.bezierCurveTo=function(ne,X,le,me,Se,Pe){q.bezierCurveTo(ne,X,le,me,Se,Pe),this.__originalBezierCurveTo(ne,X,le,me,Se,Pe)},xe.rect=function(ne,X,le,me){q.rect(ne,X,le,me),this.__originalRect(ne,X,le,me)},xe.closePath=function(){q.closePath(),this.__originalClosePath()},xe.beginPath=function(){q.beginPath(),this.__originalBeginPath()}}class J{constructor(q){this.canvasFactory=q,this.cache=Object.create(null)}getCanvas(q,ne,X){let le;return this.cache[q]!==void 0?(le=this.cache[q],this.canvasFactory.reset(le,ne,X)):(le=this.canvasFactory.create(ne,X),this.cache[q]=le),le}delete(q){delete this.cache[q]}clear(){for(const q in this.cache){const ne=this.cache[q];this.canvasFactory.destroy(ne),delete this.cache[q]}}}function V(xe,q,ne,X,le,me,Se,Pe,Le,Ke){const[Ve,rt,lt,gt,dt,pt]=(0,O.getCurrentTransform)(xe);if(rt===0&&lt===0){const Mt=Se*Ve+dt,st=Math.round(Mt),Xe=Pe*gt+pt,qe=Math.round(Xe),ut=(Se+Le)*Ve+dt,Pt=Math.abs(Math.round(ut)-st)||1,At=(Pe+Ke)*gt+pt,Ut=Math.abs(Math.round(At)-qe)||1;return xe.setTransform(Math.sign(Ve),0,0,Math.sign(gt),st,qe),xe.drawImage(q,ne,X,le,me,0,0,Pt,Ut),xe.setTransform(Ve,rt,lt,gt,dt,pt),[Pt,Ut]}if(Ve===0&&gt===0){const Mt=Pe*lt+dt,st=Math.round(Mt),Xe=Se*rt+pt,qe=Math.round(Xe),ut=(Pe+Ke)*lt+dt,Pt=Math.abs(Math.round(ut)-st)||1,At=(Se+Le)*rt+pt,Ut=Math.abs(Math.round(At)-qe)||1;return xe.setTransform(0,Math.sign(rt),Math.sign(lt),0,st,qe),xe.drawImage(q,ne,X,le,me,0,0,Ut,Pt),xe.setTransform(Ve,rt,lt,gt,dt,pt),[Ut,Pt]}xe.drawImage(q,ne,X,le,me,Se,Pe,Le,Ke);const vt=Math.hypot(Ve,rt),mt=Math.hypot(lt,gt);return[vt*Le,mt*Ke]}function re(xe){const{width:q,height:ne}=xe;if(q>he||ne>he)return null;const X=1e3,le=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),me=q+1;let Se=new Uint8Array(me*(ne+1)),Pe,Le,Ke;const Ve=q+7&-8;let rt=new Uint8Array(Ve*ne),lt=0;for(const mt of xe.data){let Mt=128;for(;Mt>0;)rt[lt++]=mt&Mt?0:255,Mt>>=1}let gt=0;for(lt=0,rt[lt]!==0&&(Se[0]=1,++gt),Le=1;Le<q;Le++)rt[lt]!==rt[lt+1]&&(Se[Le]=rt[lt]?2:1,++gt),lt++;for(rt[lt]!==0&&(Se[Le]=2,++gt),Pe=1;Pe<ne;Pe++){lt=Pe*Ve,Ke=Pe*me,rt[lt-Ve]!==rt[lt]&&(Se[Ke]=rt[lt]?1:8,++gt);let mt=(rt[lt]?4:0)+(rt[lt-Ve]?8:0);for(Le=1;Le<q;Le++)mt=(mt>>2)+(rt[lt+1]?4:0)+(rt[lt-Ve+1]?8:0),le[mt]&&(Se[Ke+Le]=le[mt],++gt),lt++;if(rt[lt-Ve]!==rt[lt]&&(Se[Ke+Le]=rt[lt]?2:4,++gt),gt>X)return null}for(lt=Ve*(ne-1),Ke=Pe*me,rt[lt]!==0&&(Se[Ke]=8,++gt),Le=1;Le<q;Le++)rt[lt]!==rt[lt+1]&&(Se[Ke+Le]=rt[lt]?4:8,++gt),lt++;if(rt[lt]!==0&&(Se[Ke+Le]=4,++gt),gt>X)return null;const dt=new Int32Array([0,me,-1,0,-me,0,0,0,1]),pt=new Path2D;for(Pe=0;gt&&Pe<=ne;Pe++){let mt=Pe*me;const Mt=mt+q;for(;mt<Mt&&!Se[mt];)mt++;if(mt===Mt)continue;pt.moveTo(mt%me,Pe);const st=mt;let Xe=Se[mt];do{const qe=dt[Xe];do mt+=qe;while(!Se[mt]);const ut=Se[mt];ut!==5&&ut!==10?(Xe=ut,Se[mt]=0):(Xe=ut&51*Xe>>4,Se[mt]&=Xe>>2|Xe<<2),pt.lineTo(mt%me,mt/me|0),Se[mt]||--gt}while(st!==mt);--Pe}return rt=null,Se=null,function(mt){mt.save(),mt.scale(1/q,-1/ne),mt.translate(0,-ne),mt.fill(pt),mt.beginPath(),mt.restore()}}class ie{constructor(q,ne){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=R.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=R.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=R.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,q,ne])}clone(){const q=Object.create(this);return q.clipBox=this.clipBox.slice(),q}setCurrentPoint(q,ne){this.x=q,this.y=ne}updatePathMinMax(q,ne,X){[ne,X]=R.Util.applyTransform([ne,X],q),this.minX=Math.min(this.minX,ne),this.minY=Math.min(this.minY,X),this.maxX=Math.max(this.maxX,ne),this.maxY=Math.max(this.maxY,X)}updateRectMinMax(q,ne){const X=R.Util.applyTransform(ne,q),le=R.Util.applyTransform(ne.slice(2),q);this.minX=Math.min(this.minX,X[0],le[0]),this.minY=Math.min(this.minY,X[1],le[1]),this.maxX=Math.max(this.maxX,X[0],le[0]),this.maxY=Math.max(this.maxY,X[1],le[1])}updateScalingPathMinMax(q,ne){R.Util.scaleMinMax(q,ne),this.minX=Math.min(this.minX,ne[0]),this.maxX=Math.max(this.maxX,ne[1]),this.minY=Math.min(this.minY,ne[2]),this.maxY=Math.max(this.maxY,ne[3])}updateCurvePathMinMax(q,ne,X,le,me,Se,Pe,Le,Ke,Ve){const rt=R.Util.bezierBoundingBox(ne,X,le,me,Se,Pe,Le,Ke);if(Ve){Ve[0]=Math.min(Ve[0],rt[0],rt[2]),Ve[1]=Math.max(Ve[1],rt[0],rt[2]),Ve[2]=Math.min(Ve[2],rt[1],rt[3]),Ve[3]=Math.max(Ve[3],rt[1],rt[3]);return}this.updateRectMinMax(q,rt)}getPathBoundingBox(q=H.PathType.FILL,ne=null){const X=[this.minX,this.minY,this.maxX,this.maxY];if(q===H.PathType.STROKE){ne||(0,R.unreachable)("Stroke bounding box must include transform.");const le=R.Util.singularValueDecompose2dScale(ne),me=le[0]*this.lineWidth/2,Se=le[1]*this.lineWidth/2;X[0]-=me,X[1]-=Se,X[2]+=me,X[3]+=Se}return X}updateClipFromPath(){const q=R.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(q||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(q){this.clipBox=q,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(q=H.PathType.FILL,ne=null){return R.Util.intersect(this.clipBox,this.getPathBoundingBox(q,ne))}}function se(xe,q){if(typeof ImageData<"u"&&q instanceof ImageData){xe.putImageData(q,0,0);return}const ne=q.height,X=q.width,le=ne%oe,me=(ne-le)/oe,Se=le===0?me:me+1,Pe=xe.createImageData(X,oe);let Le=0,Ke;const Ve=q.data,rt=Pe.data;let lt,gt,dt,pt;if(q.kind===R.ImageKind.GRAYSCALE_1BPP){const vt=Ve.byteLength,mt=new Uint32Array(rt.buffer,0,rt.byteLength>>2),Mt=mt.length,st=X+7>>3,Xe=4294967295,qe=R.FeatureTest.isLittleEndian?4278190080:255;for(lt=0;lt<Se;lt++){for(dt=lt<me?oe:le,Ke=0,gt=0;gt<dt;gt++){const ut=vt-Le;let Pt=0;const At=ut>st?X:ut*8-7,Ut=At&-8;let Xt=0,Dt=0;for(;Pt<Ut;Pt+=8)Dt=Ve[Le++],mt[Ke++]=Dt&128?Xe:qe,mt[Ke++]=Dt&64?Xe:qe,mt[Ke++]=Dt&32?Xe:qe,mt[Ke++]=Dt&16?Xe:qe,mt[Ke++]=Dt&8?Xe:qe,mt[Ke++]=Dt&4?Xe:qe,mt[Ke++]=Dt&2?Xe:qe,mt[Ke++]=Dt&1?Xe:qe;for(;Pt<At;Pt++)Xt===0&&(Dt=Ve[Le++],Xt=128),mt[Ke++]=Dt&Xt?Xe:qe,Xt>>=1}for(;Ke<Mt;)mt[Ke++]=0;xe.putImageData(Pe,0,lt*oe)}}else if(q.kind===R.ImageKind.RGBA_32BPP){for(gt=0,pt=X*oe*4,lt=0;lt<me;lt++)rt.set(Ve.subarray(Le,Le+pt)),Le+=pt,xe.putImageData(Pe,0,gt),gt+=oe;lt<Se&&(pt=X*le*4,rt.set(Ve.subarray(Le,Le+pt)),xe.putImageData(Pe,0,gt))}else if(q.kind===R.ImageKind.RGB_24BPP)for(dt=oe,pt=X*dt,lt=0;lt<Se;lt++){for(lt>=me&&(dt=le,pt=X*dt),Ke=0,gt=pt;gt--;)rt[Ke++]=Ve[Le++],rt[Ke++]=Ve[Le++],rt[Ke++]=Ve[Le++],rt[Ke++]=255;xe.putImageData(Pe,0,lt*oe)}else throw new Error(`bad image kind: ${q.kind}`)}function fe(xe,q){if(q.bitmap){xe.drawImage(q.bitmap,0,0);return}const ne=q.height,X=q.width,le=ne%oe,me=(ne-le)/oe,Se=le===0?me:me+1,Pe=xe.createImageData(X,oe);let Le=0;const Ke=q.data,Ve=Pe.data;for(let rt=0;rt<Se;rt++){const lt=rt<me?oe:le;({srcPos:Le}=(0,W.convertBlackAndWhiteToRGBA)({src:Ke,srcPos:Le,dest:Ve,width:X,height:lt,nonBlackColor:0})),xe.putImageData(Pe,0,rt*oe)}}function Y(xe,q){const ne=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const X of ne)xe[X]!==void 0&&(q[X]=xe[X]);xe.setLineDash!==void 0&&(q.setLineDash(xe.getLineDash()),q.lineDashOffset=xe.lineDashOffset)}function ee(xe){if(xe.strokeStyle=xe.fillStyle="#000000",xe.fillRule="nonzero",xe.globalAlpha=1,xe.lineWidth=1,xe.lineCap="butt",xe.lineJoin="miter",xe.miterLimit=10,xe.globalCompositeOperation="source-over",xe.font="10px sans-serif",xe.setLineDash!==void 0&&(xe.setLineDash([]),xe.lineDashOffset=0),!R.isNodeJS){const{filter:q}=xe;q!=="none"&&q!==""&&(xe.filter="none")}}function Ee(xe,q,ne,X){const le=xe.length;for(let me=3;me<le;me+=4){const Se=xe[me];if(Se===0)xe[me-3]=q,xe[me-2]=ne,xe[me-1]=X;else if(Se<255){const Pe=255-Se;xe[me-3]=xe[me-3]*Se+q*Pe>>8,xe[me-2]=xe[me-2]*Se+ne*Pe>>8,xe[me-1]=xe[me-1]*Se+X*Pe>>8}}}function be(xe,q,ne){const X=xe.length,le=1/255;for(let me=3;me<X;me+=4){const Se=ne?ne[xe[me]]:xe[me];q[me]=q[me]*Se*le|0}}function te(xe,q,ne){const X=xe.length;for(let le=3;le<X;le+=4){const me=xe[le-3]*77+xe[le-2]*152+xe[le-1]*28;q[le]=ne?q[le]*ne[me>>8]>>8:q[le]*me>>16}}function ge(xe,q,ne,X,le,me,Se,Pe,Le,Ke,Ve){const rt=!!me,lt=rt?me[0]:0,gt=rt?me[1]:0,dt=rt?me[2]:0,pt=le==="Luminosity"?te:be,mt=Math.min(X,Math.ceil(1048576/ne));for(let Mt=0;Mt<X;Mt+=mt){const st=Math.min(mt,X-Mt),Xe=xe.getImageData(Pe-Ke,Mt+(Le-Ve),ne,st),qe=q.getImageData(Pe,Mt+Le,ne,st);rt&&Ee(Xe.data,lt,gt,dt),pt(Xe.data,qe.data,Se),q.putImageData(qe,Pe,Mt+Le)}}function de(xe,q,ne,X){const le=X[0],me=X[1],Se=X[2]-le,Pe=X[3]-me;Se===0||Pe===0||(ge(q.context,ne,Se,Pe,q.subtype,q.backdrop,q.transferMap,le,me,q.offsetX,q.offsetY),xe.save(),xe.globalAlpha=1,xe.globalCompositeOperation="source-over",xe.setTransform(1,0,0,1,0,0),xe.drawImage(ne.canvas,0,0),xe.restore())}function Ae(xe,q){const ne=R.Util.singularValueDecompose2dScale(xe);ne[0]=Math.fround(ne[0]),ne[1]=Math.fround(ne[1]);const X=Math.fround((globalThis.devicePixelRatio||1)*O.PixelsPerInch.PDF_TO_CSS_UNITS);return q!==void 0?q:ne[0]<=X||ne[1]<=X}const Fe=["butt","round","square"],ye=["miter","round","bevel"],Te={},Ue={},_t=class _t{constructor(q,ne,X,le,me,{optionalContentConfig:Se,markedContentStack:Pe=null},Le,Ke){Oe(this,Ce);Oe(this,at);this.ctx=q,this.current=new ie(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=ne,this.objs=X,this.canvasFactory=le,this.filterFactory=me,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Pe||[],this.optionalContentConfig=Se,this.cachedCanvases=new J(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Le,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=Ke,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(q,ne=null){return typeof q=="string"?q.startsWith("g_")?this.commonObjs.get(q):this.objs.get(q):ne}beginDrawing({transform:q,viewport:ne,transparency:X=!1,background:le=null}){const me=this.ctx.canvas.width,Se=this.ctx.canvas.height,Pe=this.ctx.fillStyle;if(this.ctx.fillStyle=le||"#ffffff",this.ctx.fillRect(0,0,me,Se),this.ctx.fillStyle=Pe,X){const Le=this.cachedCanvases.getCanvas("transparent",me,Se);this.compositeCtx=this.ctx,this.transparentCanvas=Le.canvas,this.ctx=Le.context,this.ctx.save(),this.ctx.transform(...(0,O.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),ee(this.ctx),q&&(this.ctx.transform(...q),this.outputScaleX=q[0],this.outputScaleY=q[0]),this.ctx.transform(...ne.transform),this.viewportScale=ne.scale,this.baseTransform=(0,O.getCurrentTransform)(this.ctx)}executeOperatorList(q,ne,X,le){const me=q.argsArray,Se=q.fnArray;let Pe=ne||0;const Le=me.length;if(Le===Pe)return Pe;const Ke=Le-Pe>ve&&typeof X=="function",Ve=Ke?Date.now()+G:0;let rt=0;const lt=this.commonObjs,gt=this.objs;let dt;for(;;){if(le!==void 0&&Pe===le.nextBreakPoint)return le.breakIt(Pe,X),Pe;if(dt=Se[Pe],dt!==R.OPS.dependency)this[dt].apply(this,me[Pe]);else for(const pt of me[Pe]){const vt=pt.startsWith("g_")?lt:gt;if(!vt.has(pt))return vt.get(pt,X),Pe}if(Pe++,Pe===Le)return Pe;if(Ke&&++rt>ve){if(Date.now()>Ve)return X(),Pe;rt=0}}}endDrawing(){Ge(this,Ce,Ri).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const q of this._cachedBitmapsMap.values()){for(const ne of q.values())typeof HTMLCanvasElement<"u"&&ne instanceof HTMLCanvasElement&&(ne.width=ne.height=0);q.clear()}this._cachedBitmapsMap.clear(),Ge(this,at,Li).call(this)}_scaleImage(q,ne){const X=q.width,le=q.height;let me=Math.max(Math.hypot(ne[0],ne[1]),1),Se=Math.max(Math.hypot(ne[2],ne[3]),1),Pe=X,Le=le,Ke="prescale1",Ve,rt;for(;me>2&&Pe>1||Se>2&&Le>1;){let lt=Pe,gt=Le;me>2&&Pe>1&&(lt=Pe>=16384?Math.floor(Pe/2)-1||1:Math.ceil(Pe/2),me/=Pe/lt),Se>2&&Le>1&&(gt=Le>=16384?Math.floor(Le/2)-1||1:Math.ceil(Le)/2,Se/=Le/gt),Ve=this.cachedCanvases.getCanvas(Ke,lt,gt),rt=Ve.context,rt.clearRect(0,0,lt,gt),rt.drawImage(q,0,0,Pe,Le,0,0,lt,gt),q=Ve.canvas,Pe=lt,Le=gt,Ke=Ke==="prescale1"?"prescale2":"prescale1"}return{img:q,paintWidth:Pe,paintHeight:Le}}_createMaskCanvas(q){const ne=this.ctx,{width:X,height:le}=q,me=this.current.fillColor,Se=this.current.patternFill,Pe=(0,O.getCurrentTransform)(ne);let Le,Ke,Ve,rt;if((q.bitmap||q.data)&&q.count>1){const Pt=q.bitmap||q.data.buffer;Ke=JSON.stringify(Se?Pe:[Pe.slice(0,4),me]),Le=this._cachedBitmapsMap.get(Pt),Le||(Le=new Map,this._cachedBitmapsMap.set(Pt,Le));const At=Le.get(Ke);if(At&&!Se){const Ut=Math.round(Math.min(Pe[0],Pe[2])+Pe[4]),Xt=Math.round(Math.min(Pe[1],Pe[3])+Pe[5]);return{canvas:At,offsetX:Ut,offsetY:Xt}}Ve=At}Ve||(rt=this.cachedCanvases.getCanvas("maskCanvas",X,le),fe(rt.context,q));let lt=R.Util.transform(Pe,[1/X,0,0,-1/le,0,0]);lt=R.Util.transform(lt,[1,0,0,1,0,-le]);const gt=R.Util.applyTransform([0,0],lt),dt=R.Util.applyTransform([X,le],lt),pt=R.Util.normalizeRect([gt[0],gt[1],dt[0],dt[1]]),vt=Math.round(pt[2]-pt[0])||1,mt=Math.round(pt[3]-pt[1])||1,Mt=this.cachedCanvases.getCanvas("fillCanvas",vt,mt),st=Mt.context,Xe=Math.min(gt[0],dt[0]),qe=Math.min(gt[1],dt[1]);st.translate(-Xe,-qe),st.transform(...lt),Ve||(Ve=this._scaleImage(rt.canvas,(0,O.getCurrentTransformInverse)(st)),Ve=Ve.img,Le&&Se&&Le.set(Ke,Ve)),st.imageSmoothingEnabled=Ae((0,O.getCurrentTransform)(st),q.interpolate),V(st,Ve,0,0,Ve.width,Ve.height,0,0,X,le),st.globalCompositeOperation="source-in";const ut=R.Util.transform((0,O.getCurrentTransformInverse)(st),[1,0,0,1,-Xe,-qe]);return st.fillStyle=Se?me.getPattern(ne,this,ut,H.PathType.FILL):me,st.fillRect(0,0,X,le),Le&&!Se&&(this.cachedCanvases.delete("fillCanvas"),Le.set(Ke,Mt.canvas)),{canvas:Mt.canvas,offsetX:Math.round(Xe),offsetY:Math.round(qe)}}setLineWidth(q){q!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=q,this.ctx.lineWidth=q}setLineCap(q){this.ctx.lineCap=Fe[q]}setLineJoin(q){this.ctx.lineJoin=ye[q]}setMiterLimit(q){this.ctx.miterLimit=q}setDash(q,ne){const X=this.ctx;X.setLineDash!==void 0&&(X.setLineDash(q),X.lineDashOffset=ne)}setRenderingIntent(q){}setFlatness(q){}setGState(q){for(const[ne,X]of q)switch(ne){case"LW":this.setLineWidth(X);break;case"LC":this.setLineCap(X);break;case"LJ":this.setLineJoin(X);break;case"ML":this.setMiterLimit(X);break;case"D":this.setDash(X[0],X[1]);break;case"RI":this.setRenderingIntent(X);break;case"FL":this.setFlatness(X);break;case"Font":this.setFont(X[0],X[1]);break;case"CA":this.current.strokeAlpha=X;break;case"ca":this.current.fillAlpha=X,this.ctx.globalAlpha=X;break;case"BM":this.ctx.globalCompositeOperation=X;break;case"SMask":this.current.activeSMask=X?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(X);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const q=this.inSMaskMode;this.current.activeSMask&&!q?this.beginSMaskMode():!this.current.activeSMask&&q&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const q=this.ctx.canvas.width,ne=this.ctx.canvas.height,X="smaskGroupAt"+this.groupLevel,le=this.cachedCanvases.getCanvas(X,q,ne);this.suspendedCtx=this.ctx,this.ctx=le.context;const me=this.ctx;me.setTransform(...(0,O.getCurrentTransform)(this.suspendedCtx)),Y(this.suspendedCtx,me),ae(me,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Y(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(q){if(!this.current.activeSMask)return;q?(q[0]=Math.floor(q[0]),q[1]=Math.floor(q[1]),q[2]=Math.ceil(q[2]),q[3]=Math.ceil(q[3])):q=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const ne=this.current.activeSMask,X=this.suspendedCtx;de(X,ne,this.ctx,q),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(Y(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const q=this.current;this.stateStack.push(q),this.current=q.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Y(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(q,ne,X,le,me,Se){this.ctx.transform(q,ne,X,le,me,Se),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(q,ne,X){const le=this.ctx,me=this.current;let Se=me.x,Pe=me.y,Le,Ke;const Ve=(0,O.getCurrentTransform)(le),rt=Ve[0]===0&&Ve[3]===0||Ve[1]===0&&Ve[2]===0,lt=rt?X.slice(0):null;for(let gt=0,dt=0,pt=q.length;gt<pt;gt++)switch(q[gt]|0){case R.OPS.rectangle:Se=ne[dt++],Pe=ne[dt++];const vt=ne[dt++],mt=ne[dt++],Mt=Se+vt,st=Pe+mt;le.moveTo(Se,Pe),vt===0||mt===0?le.lineTo(Mt,st):(le.lineTo(Mt,Pe),le.lineTo(Mt,st),le.lineTo(Se,st)),rt||me.updateRectMinMax(Ve,[Se,Pe,Mt,st]),le.closePath();break;case R.OPS.moveTo:Se=ne[dt++],Pe=ne[dt++],le.moveTo(Se,Pe),rt||me.updatePathMinMax(Ve,Se,Pe);break;case R.OPS.lineTo:Se=ne[dt++],Pe=ne[dt++],le.lineTo(Se,Pe),rt||me.updatePathMinMax(Ve,Se,Pe);break;case R.OPS.curveTo:Le=Se,Ke=Pe,Se=ne[dt+4],Pe=ne[dt+5],le.bezierCurveTo(ne[dt],ne[dt+1],ne[dt+2],ne[dt+3],Se,Pe),me.updateCurvePathMinMax(Ve,Le,Ke,ne[dt],ne[dt+1],ne[dt+2],ne[dt+3],Se,Pe,lt),dt+=6;break;case R.OPS.curveTo2:Le=Se,Ke=Pe,le.bezierCurveTo(Se,Pe,ne[dt],ne[dt+1],ne[dt+2],ne[dt+3]),me.updateCurvePathMinMax(Ve,Le,Ke,Se,Pe,ne[dt],ne[dt+1],ne[dt+2],ne[dt+3],lt),Se=ne[dt+2],Pe=ne[dt+3],dt+=4;break;case R.OPS.curveTo3:Le=Se,Ke=Pe,Se=ne[dt+2],Pe=ne[dt+3],le.bezierCurveTo(ne[dt],ne[dt+1],Se,Pe,Se,Pe),me.updateCurvePathMinMax(Ve,Le,Ke,ne[dt],ne[dt+1],Se,Pe,Se,Pe,lt),dt+=4;break;case R.OPS.closePath:le.closePath();break}rt&&me.updateScalingPathMinMax(Ve,lt),me.setCurrentPoint(Se,Pe)}closePath(){this.ctx.closePath()}stroke(q=!0){const ne=this.ctx,X=this.current.strokeColor;ne.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof X=="object"&&(X!=null&&X.getPattern)?(ne.save(),ne.strokeStyle=X.getPattern(ne,this,(0,O.getCurrentTransformInverse)(ne),H.PathType.STROKE),this.rescaleAndStroke(!1),ne.restore()):this.rescaleAndStroke(!0)),q&&this.consumePath(this.current.getClippedPathBoundingBox()),ne.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(q=!0){const ne=this.ctx,X=this.current.fillColor,le=this.current.patternFill;let me=!1;le&&(ne.save(),ne.fillStyle=X.getPattern(ne,this,(0,O.getCurrentTransformInverse)(ne),H.PathType.FILL),me=!0);const Se=this.current.getClippedPathBoundingBox();this.contentVisible&&Se!==null&&(this.pendingEOFill?(ne.fill("evenodd"),this.pendingEOFill=!1):ne.fill()),me&&ne.restore(),q&&this.consumePath(Se)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Te}eoClip(){this.pendingClip=Ue}beginText(){this.current.textMatrix=R.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const q=this.pendingTextPaths,ne=this.ctx;if(q===void 0){ne.beginPath();return}ne.save(),ne.beginPath();for(const X of q)ne.setTransform(...X.transform),ne.translate(X.x,X.y),X.addToPath(ne,X.fontSize);ne.restore(),ne.clip(),ne.beginPath(),delete this.pendingTextPaths}setCharSpacing(q){this.current.charSpacing=q}setWordSpacing(q){this.current.wordSpacing=q}setHScale(q){this.current.textHScale=q/100}setLeading(q){this.current.leading=-q}setFont(q,ne){var Ve;const X=this.commonObjs.get(q),le=this.current;if(!X)throw new Error(`Can't find font for ${q}`);if(le.fontMatrix=X.fontMatrix||R.FONT_IDENTITY_MATRIX,(le.fontMatrix[0]===0||le.fontMatrix[3]===0)&&(0,R.warn)("Invalid font matrix for font "+q),ne<0?(ne=-ne,le.fontDirection=-1):le.fontDirection=1,this.current.font=X,this.current.fontSize=ne,X.isType3Font)return;const me=X.loadedName||"sans-serif",Se=((Ve=X.systemFontInfo)==null?void 0:Ve.css)||`"${me}", ${X.fallbackName}`;let Pe="normal";X.black?Pe="900":X.bold&&(Pe="bold");const Le=X.italic?"italic":"normal";let Ke=ne;ne<pe?Ke=pe:ne>ce&&(Ke=ce),this.current.fontSizeScale=ne/Ke,this.ctx.font=`${Le} ${Pe} ${Ke}px ${Se}`}setTextRenderingMode(q){this.current.textRenderingMode=q}setTextRise(q){this.current.textRise=q}moveText(q,ne){this.current.x=this.current.lineX+=q,this.current.y=this.current.lineY+=ne}setLeadingMoveText(q,ne){this.setLeading(-ne),this.moveText(q,ne)}setTextMatrix(q,ne,X,le,me,Se){this.current.textMatrix=[q,ne,X,le,me,Se],this.current.textMatrixScale=Math.hypot(q,ne),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(q,ne,X,le){const me=this.ctx,Se=this.current,Pe=Se.font,Le=Se.textRenderingMode,Ke=Se.fontSize/Se.fontSizeScale,Ve=Le&R.TextRenderingMode.FILL_STROKE_MASK,rt=!!(Le&R.TextRenderingMode.ADD_TO_PATH_FLAG),lt=Se.patternFill&&!Pe.missingFile;let gt;(Pe.disableFontFace||rt||lt)&&(gt=Pe.getPathGenerator(this.commonObjs,q)),Pe.disableFontFace||lt?(me.save(),me.translate(ne,X),me.beginPath(),gt(me,Ke),le&&me.setTransform(...le),(Ve===R.TextRenderingMode.FILL||Ve===R.TextRenderingMode.FILL_STROKE)&&me.fill(),(Ve===R.TextRenderingMode.STROKE||Ve===R.TextRenderingMode.FILL_STROKE)&&me.stroke(),me.restore()):((Ve===R.TextRenderingMode.FILL||Ve===R.TextRenderingMode.FILL_STROKE)&&me.fillText(q,ne,X),(Ve===R.TextRenderingMode.STROKE||Ve===R.TextRenderingMode.FILL_STROKE)&&me.strokeText(q,ne,X)),rt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,O.getCurrentTransform)(me),x:ne,y:X,fontSize:Ke,addToPath:gt})}get isFontSubpixelAAEnabled(){const{context:q}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);q.scale(1.5,1),q.fillText("I",0,10);const ne=q.getImageData(0,0,10,10).data;let X=!1;for(let le=3;le<ne.length;le+=4)if(ne[le]>0&&ne[le]<255){X=!0;break}return(0,R.shadow)(this,"isFontSubpixelAAEnabled",X)}showText(q){const ne=this.current,X=ne.font;if(X.isType3Font)return this.showType3Text(q);const le=ne.fontSize;if(le===0)return;const me=this.ctx,Se=ne.fontSizeScale,Pe=ne.charSpacing,Le=ne.wordSpacing,Ke=ne.fontDirection,Ve=ne.textHScale*Ke,rt=q.length,lt=X.vertical,gt=lt?1:-1,dt=X.defaultVMetrics,pt=le*ne.fontMatrix[0],vt=ne.textRenderingMode===R.TextRenderingMode.FILL&&!X.disableFontFace&&!ne.patternFill;me.save(),me.transform(...ne.textMatrix),me.translate(ne.x,ne.y+ne.textRise),Ke>0?me.scale(Ve,-1):me.scale(Ve,1);let mt;if(ne.patternFill){me.save();const ut=ne.fillColor.getPattern(me,this,(0,O.getCurrentTransformInverse)(me),H.PathType.FILL);mt=(0,O.getCurrentTransform)(me),me.restore(),me.fillStyle=ut}let Mt=ne.lineWidth;const st=ne.textMatrixScale;if(st===0||Mt===0){const ut=ne.textRenderingMode&R.TextRenderingMode.FILL_STROKE_MASK;(ut===R.TextRenderingMode.STROKE||ut===R.TextRenderingMode.FILL_STROKE)&&(Mt=this.getSinglePixelWidth())}else Mt/=st;if(Se!==1&&(me.scale(Se,Se),Mt/=Se),me.lineWidth=Mt,X.isInvalidPDFjsFont){const ut=[];let Pt=0;for(const At of q)ut.push(At.unicode),Pt+=At.width;me.fillText(ut.join(""),0,0),ne.x+=Pt*pt*Ve,me.restore(),this.compose();return}let Xe=0,qe;for(qe=0;qe<rt;++qe){const ut=q[qe];if(typeof ut=="number"){Xe+=gt*ut*le/1e3;continue}let Pt=!1;const At=(ut.isSpace?Le:0)+Pe,Ut=ut.fontChar,Xt=ut.accent;let Dt,Kt,en=ut.width;if(lt){const ln=ut.vmetric||dt,We=-(ut.vmetric?ln[1]:en*.5)*pt,Ie=ln[2]*pt;en=ln?-ln[0]:en,Dt=We/Se,Kt=(Xe+Ie)/Se}else Dt=Xe/Se,Kt=0;if(X.remeasure&&en>0){const ln=me.measureText(Ut).width*1e3/le*Se;if(en<ln&&this.isFontSubpixelAAEnabled){const We=en/ln;Pt=!0,me.save(),me.scale(We,1),Dt/=We}else en!==ln&&(Dt+=(en-ln)/2e3*le/Se)}if(this.contentVisible&&(ut.isInFont||X.missingFile)){if(vt&&!Xt)me.fillText(Ut,Dt,Kt);else if(this.paintChar(Ut,Dt,Kt,mt),Xt){const ln=Dt+le*Xt.offset.x/Se,We=Kt-le*Xt.offset.y/Se;this.paintChar(Xt.fontChar,ln,We,mt)}}const Vt=lt?en*pt-At*Ke:en*pt+At*Ke;Xe+=Vt,Pt&&me.restore()}lt?ne.y-=Xe:ne.x+=Xe*Ve,me.restore(),this.compose()}showType3Text(q){const ne=this.ctx,X=this.current,le=X.font,me=X.fontSize,Se=X.fontDirection,Pe=le.vertical?1:-1,Le=X.charSpacing,Ke=X.wordSpacing,Ve=X.textHScale*Se,rt=X.fontMatrix||R.FONT_IDENTITY_MATRIX,lt=q.length,gt=X.textRenderingMode===R.TextRenderingMode.INVISIBLE;let dt,pt,vt,mt;if(!(gt||me===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,ne.save(),ne.transform(...X.textMatrix),ne.translate(X.x,X.y),ne.scale(Ve,Se),dt=0;dt<lt;++dt){if(pt=q[dt],typeof pt=="number"){mt=Pe*pt*me/1e3,this.ctx.translate(mt,0),X.x+=mt*Ve;continue}const Mt=(pt.isSpace?Ke:0)+Le,st=le.charProcOperatorList[pt.operatorListId];if(!st){(0,R.warn)(`Type3 character "${pt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=pt,this.save(),ne.scale(me,me),ne.transform(...rt),this.executeOperatorList(st),this.restore()),vt=R.Util.applyTransform([pt.width,0],rt)[0]*me+Mt,ne.translate(vt,0),X.x+=vt*Ve}ne.restore(),this.processingType3=null}}setCharWidth(q,ne){}setCharWidthAndBounds(q,ne,X,le,me,Se){this.ctx.rect(X,le,me-X,Se-le),this.ctx.clip(),this.endPath()}getColorN_Pattern(q){let ne;if(q[0]==="TilingPattern"){const X=q[1],le=this.baseTransform||(0,O.getCurrentTransform)(this.ctx),me={createCanvasGraphics:Se=>new _t(Se,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};ne=new H.TilingPattern(q,X,this.ctx,me,le)}else ne=this._getPattern(q[1],q[2]);return ne}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(q,ne,X){const le=R.Util.makeHexColor(q,ne,X);this.ctx.strokeStyle=le,this.current.strokeColor=le}setFillRGBColor(q,ne,X){const le=R.Util.makeHexColor(q,ne,X);this.ctx.fillStyle=le,this.current.fillColor=le,this.current.patternFill=!1}_getPattern(q,ne=null){let X;return this.cachedPatterns.has(q)?X=this.cachedPatterns.get(q):(X=(0,H.getShadingPattern)(this.getObject(q)),this.cachedPatterns.set(q,X)),ne&&(X.matrix=ne),X}shadingFill(q){if(!this.contentVisible)return;const ne=this.ctx;this.save();const X=this._getPattern(q);ne.fillStyle=X.getPattern(ne,this,(0,O.getCurrentTransformInverse)(ne),H.PathType.SHADING);const le=(0,O.getCurrentTransformInverse)(ne);if(le){const{width:me,height:Se}=ne.canvas,[Pe,Le,Ke,Ve]=R.Util.getAxialAlignedBoundingBox([0,0,me,Se],le);this.ctx.fillRect(Pe,Le,Ke-Pe,Ve-Le)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,R.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,R.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(q,ne){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(q)&&q.length===6&&this.transform(...q),this.baseTransform=(0,O.getCurrentTransform)(this.ctx),ne)){const X=ne[2]-ne[0],le=ne[3]-ne[1];this.ctx.rect(ne[0],ne[1],X,le),this.current.updateRectMinMax((0,O.getCurrentTransform)(this.ctx),ne),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(q){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const ne=this.ctx;q.isolated||(0,R.info)("TODO: Support non-isolated groups."),q.knockout&&(0,R.warn)("Knockout groups not supported.");const X=(0,O.getCurrentTransform)(ne);if(q.matrix&&ne.transform(...q.matrix),!q.bbox)throw new Error("Bounding box is required.");let le=R.Util.getAxialAlignedBoundingBox(q.bbox,(0,O.getCurrentTransform)(ne));const me=[0,0,ne.canvas.width,ne.canvas.height];le=R.Util.intersect(le,me)||[0,0,0,0];const Se=Math.floor(le[0]),Pe=Math.floor(le[1]);let Le=Math.max(Math.ceil(le[2])-Se,1),Ke=Math.max(Math.ceil(le[3])-Pe,1),Ve=1,rt=1;Le>ue&&(Ve=Le/ue,Le=ue),Ke>ue&&(rt=Ke/ue,Ke=ue),this.current.startNewPathAndClipBox([0,0,Le,Ke]);let lt="groupAt"+this.groupLevel;q.smask&&(lt+="_smask_"+this.smaskCounter++%2);const gt=this.cachedCanvases.getCanvas(lt,Le,Ke),dt=gt.context;dt.scale(1/Ve,1/rt),dt.translate(-Se,-Pe),dt.transform(...X),q.smask?this.smaskStack.push({canvas:gt.canvas,context:dt,offsetX:Se,offsetY:Pe,scaleX:Ve,scaleY:rt,subtype:q.smask.subtype,backdrop:q.smask.backdrop,transferMap:q.smask.transferMap||null,startTransformInverse:null}):(ne.setTransform(1,0,0,1,0,0),ne.translate(Se,Pe),ne.scale(Ve,rt),ne.save()),Y(ne,dt),this.ctx=dt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(ne),this.groupLevel++}endGroup(q){if(!this.contentVisible)return;this.groupLevel--;const ne=this.ctx,X=this.groupStack.pop();if(this.ctx=X,this.ctx.imageSmoothingEnabled=!1,q.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const le=(0,O.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...le);const me=R.Util.getAxialAlignedBoundingBox([0,0,ne.canvas.width,ne.canvas.height],le);this.ctx.drawImage(ne.canvas,0,0),this.ctx.restore(),this.compose(me)}}beginAnnotation(q,ne,X,le,me){if(Ge(this,Ce,Ri).call(this),ee(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(ne)&&ne.length===4){const Se=ne[2]-ne[0],Pe=ne[3]-ne[1];if(me&&this.annotationCanvasMap){X=X.slice(),X[4]-=ne[0],X[5]-=ne[1],ne=ne.slice(),ne[0]=ne[1]=0,ne[2]=Se,ne[3]=Pe;const[Le,Ke]=R.Util.singularValueDecompose2dScale((0,O.getCurrentTransform)(this.ctx)),{viewportScale:Ve}=this,rt=Math.ceil(Se*this.outputScaleX*Ve),lt=Math.ceil(Pe*this.outputScaleY*Ve);this.annotationCanvas=this.canvasFactory.create(rt,lt);const{canvas:gt,context:dt}=this.annotationCanvas;this.annotationCanvasMap.set(q,gt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=dt,this.ctx.save(),this.ctx.setTransform(Le,0,0,-Ke,0,Pe*Ke),ee(this.ctx)}else ee(this.ctx),this.ctx.rect(ne[0],ne[1],Se,Pe),this.ctx.clip(),this.endPath()}this.current=new ie(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...X),this.transform(...le)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Ge(this,at,Li).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(q){if(!this.contentVisible)return;const ne=q.count;q=this.getObject(q.data,q),q.count=ne;const X=this.ctx,le=this.processingType3;if(le&&(le.compiled===void 0&&(le.compiled=re(q)),le.compiled)){le.compiled(X);return}const me=this._createMaskCanvas(q),Se=me.canvas;X.save(),X.setTransform(1,0,0,1,0,0),X.drawImage(Se,me.offsetX,me.offsetY),X.restore(),this.compose()}paintImageMaskXObjectRepeat(q,ne,X=0,le=0,me,Se){if(!this.contentVisible)return;q=this.getObject(q.data,q);const Pe=this.ctx;Pe.save();const Le=(0,O.getCurrentTransform)(Pe);Pe.transform(ne,X,le,me,0,0);const Ke=this._createMaskCanvas(q);Pe.setTransform(1,0,0,1,Ke.offsetX-Le[4],Ke.offsetY-Le[5]);for(let Ve=0,rt=Se.length;Ve<rt;Ve+=2){const lt=R.Util.transform(Le,[ne,X,le,me,Se[Ve],Se[Ve+1]]),[gt,dt]=R.Util.applyTransform([0,0],lt);Pe.drawImage(Ke.canvas,gt,dt)}Pe.restore(),this.compose()}paintImageMaskXObjectGroup(q){if(!this.contentVisible)return;const ne=this.ctx,X=this.current.fillColor,le=this.current.patternFill;for(const me of q){const{data:Se,width:Pe,height:Le,transform:Ke}=me,Ve=this.cachedCanvases.getCanvas("maskCanvas",Pe,Le),rt=Ve.context;rt.save();const lt=this.getObject(Se,me);fe(rt,lt),rt.globalCompositeOperation="source-in",rt.fillStyle=le?X.getPattern(rt,this,(0,O.getCurrentTransformInverse)(ne),H.PathType.FILL):X,rt.fillRect(0,0,Pe,Le),rt.restore(),ne.save(),ne.transform(...Ke),ne.scale(1,-1),V(ne,Ve.canvas,0,0,Pe,Le,0,-1,1,1),ne.restore()}this.compose()}paintImageXObject(q){if(!this.contentVisible)return;const ne=this.getObject(q);if(!ne){(0,R.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(ne)}paintImageXObjectRepeat(q,ne,X,le){if(!this.contentVisible)return;const me=this.getObject(q);if(!me){(0,R.warn)("Dependent image isn't ready yet");return}const Se=me.width,Pe=me.height,Le=[];for(let Ke=0,Ve=le.length;Ke<Ve;Ke+=2)Le.push({transform:[ne,0,0,X,le[Ke],le[Ke+1]],x:0,y:0,w:Se,h:Pe});this.paintInlineImageXObjectGroup(me,Le)}applyTransferMapsToCanvas(q){return this.current.transferMaps!=="none"&&(q.filter=this.current.transferMaps,q.drawImage(q.canvas,0,0),q.filter="none"),q.canvas}applyTransferMapsToBitmap(q){if(this.current.transferMaps==="none")return q.bitmap;const{bitmap:ne,width:X,height:le}=q,me=this.cachedCanvases.getCanvas("inlineImage",X,le),Se=me.context;return Se.filter=this.current.transferMaps,Se.drawImage(ne,0,0),Se.filter="none",me.canvas}paintInlineImageXObject(q){if(!this.contentVisible)return;const ne=q.width,X=q.height,le=this.ctx;if(this.save(),!R.isNodeJS){const{filter:Pe}=le;Pe!=="none"&&Pe!==""&&(le.filter="none")}le.scale(1/ne,-1/X);let me;if(q.bitmap)me=this.applyTransferMapsToBitmap(q);else if(typeof HTMLElement=="function"&&q instanceof HTMLElement||!q.data)me=q;else{const Le=this.cachedCanvases.getCanvas("inlineImage",ne,X).context;se(Le,q),me=this.applyTransferMapsToCanvas(Le)}const Se=this._scaleImage(me,(0,O.getCurrentTransformInverse)(le));le.imageSmoothingEnabled=Ae((0,O.getCurrentTransform)(le),q.interpolate),V(le,Se.img,0,0,Se.paintWidth,Se.paintHeight,0,-X,ne,X),this.compose(),this.restore()}paintInlineImageXObjectGroup(q,ne){if(!this.contentVisible)return;const X=this.ctx;let le;if(q.bitmap)le=q.bitmap;else{const me=q.width,Se=q.height,Le=this.cachedCanvases.getCanvas("inlineImage",me,Se).context;se(Le,q),le=this.applyTransferMapsToCanvas(Le)}for(const me of ne)X.save(),X.transform(...me.transform),X.scale(1,-1),V(X,le,me.x,me.y,me.w,me.h,0,-1,1,1),X.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(q){}markPointProps(q,ne){}beginMarkedContent(q){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(q,ne){q==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(ne)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(q){const ne=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(q);const X=this.ctx;this.pendingClip&&(ne||(this.pendingClip===Ue?X.clip("evenodd"):X.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),X.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const q=(0,O.getCurrentTransform)(this.ctx);if(q[1]===0&&q[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(q[0]),Math.abs(q[3]));else{const ne=Math.abs(q[0]*q[3]-q[2]*q[1]),X=Math.hypot(q[0],q[2]),le=Math.hypot(q[1],q[3]);this._cachedGetSinglePixelWidth=Math.max(X,le)/ne}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:q}=this.current,{a:ne,b:X,c:le,d:me}=this.ctx.getTransform();let Se,Pe;if(X===0&&le===0){const Le=Math.abs(ne),Ke=Math.abs(me);if(Le===Ke)if(q===0)Se=Pe=1/Le;else{const Ve=Le*q;Se=Pe=Ve<1?1/Ve:1}else if(q===0)Se=1/Le,Pe=1/Ke;else{const Ve=Le*q,rt=Ke*q;Se=Ve<1?1/Ve:1,Pe=rt<1?1/rt:1}}else{const Le=Math.abs(ne*me-X*le),Ke=Math.hypot(ne,X),Ve=Math.hypot(le,me);if(q===0)Se=Ve/Le,Pe=Ke/Le;else{const rt=q*Le;Se=Ve>rt?Ve/rt:1,Pe=Ke>rt?Ke/rt:1}}this._cachedScaleForStroking[0]=Se,this._cachedScaleForStroking[1]=Pe}return this._cachedScaleForStroking}rescaleAndStroke(q){const{ctx:ne}=this,{lineWidth:X}=this.current,[le,me]=this.getScaleForStroking();if(ne.lineWidth=X||1,le===1&&me===1){ne.stroke();return}const Se=ne.getLineDash();if(q&&ne.save(),ne.scale(le,me),Se.length>0){const Pe=Math.max(le,me);ne.setLineDash(Se.map(Le=>Le/Pe)),ne.lineDashOffset/=Pe}ne.stroke(),q&&ne.restore()}isContentVisible(){for(let q=this.markedContentStack.length-1;q>=0;q--)if(!this.markedContentStack[q].visible)return!1;return!0}};Ce=new WeakSet,Ri=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},at=new WeakSet,Li=function(){if(this.pageColors){const q=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(q!=="none"){const ne=this.ctx.filter;this.ctx.filter=q,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=ne}}};let Be=_t;$.CanvasGraphics=Be;for(const xe in R.OPS)Be.prototype[xe]!==void 0&&(Be.prototype[R.OPS[xe]]=Be.prototype[xe])},(A,$,B)=>{Object.defineProperty($,"__esModule",{value:!0}),$.TilingPattern=$.PathType=void 0,$.getShadingPattern=oe;var R=B(1),O=B(6);const H={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};$.PathType=H;function W(re,ie){if(!ie)return;const se=ie[2]-ie[0],fe=ie[3]-ie[1],Y=new Path2D;Y.rect(ie[0],ie[1],se,fe),re.clip(Y)}class pe{constructor(){this.constructor===pe&&(0,R.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,R.unreachable)("Abstract method `getPattern` called.")}}class ce extends pe{constructor(ie){super(),this._type=ie[1],this._bbox=ie[2],this._colorStops=ie[3],this._p0=ie[4],this._p1=ie[5],this._r0=ie[6],this._r1=ie[7],this.matrix=null}_createGradient(ie){let se;this._type==="axial"?se=ie.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(se=ie.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const fe of this._colorStops)se.addColorStop(fe[0],fe[1]);return se}getPattern(ie,se,fe,Y){let ee;if(Y===H.STROKE||Y===H.FILL){const Ee=se.current.getClippedPathBoundingBox(Y,(0,O.getCurrentTransform)(ie))||[0,0,0,0],be=Math.ceil(Ee[2]-Ee[0])||1,te=Math.ceil(Ee[3]-Ee[1])||1,ge=se.cachedCanvases.getCanvas("pattern",be,te,!0),de=ge.context;de.clearRect(0,0,de.canvas.width,de.canvas.height),de.beginPath(),de.rect(0,0,de.canvas.width,de.canvas.height),de.translate(-Ee[0],-Ee[1]),fe=R.Util.transform(fe,[1,0,0,1,Ee[0],Ee[1]]),de.transform(...se.baseTransform),this.matrix&&de.transform(...this.matrix),W(de,this._bbox),de.fillStyle=this._createGradient(de),de.fill(),ee=ie.createPattern(ge.canvas,"no-repeat");const Ae=new DOMMatrix(fe);ee.setTransform(Ae)}else W(ie,this._bbox),ee=this._createGradient(ie);return ee}}function ue(re,ie,se,fe,Y,ee,Ee,be){const te=ie.coords,ge=ie.colors,de=re.data,Ae=re.width*4;let Fe;te[se+1]>te[fe+1]&&(Fe=se,se=fe,fe=Fe,Fe=ee,ee=Ee,Ee=Fe),te[fe+1]>te[Y+1]&&(Fe=fe,fe=Y,Y=Fe,Fe=Ee,Ee=be,be=Fe),te[se+1]>te[fe+1]&&(Fe=se,se=fe,fe=Fe,Fe=ee,ee=Ee,Ee=Fe);const ye=(te[se]+ie.offsetX)*ie.scaleX,Te=(te[se+1]+ie.offsetY)*ie.scaleY,Ue=(te[fe]+ie.offsetX)*ie.scaleX,Be=(te[fe+1]+ie.offsetY)*ie.scaleY,Ce=(te[Y]+ie.offsetX)*ie.scaleX,Qe=(te[Y+1]+ie.offsetY)*ie.scaleY;if(Te>=Qe)return;const at=ge[ee],ft=ge[ee+1],_t=ge[ee+2],xe=ge[Ee],q=ge[Ee+1],ne=ge[Ee+2],X=ge[be],le=ge[be+1],me=ge[be+2],Se=Math.round(Te),Pe=Math.round(Qe);let Le,Ke,Ve,rt,lt,gt,dt,pt;for(let vt=Se;vt<=Pe;vt++){if(vt<Be){const qe=vt<Te?0:(Te-vt)/(Te-Be);Le=ye-(ye-Ue)*qe,Ke=at-(at-xe)*qe,Ve=ft-(ft-q)*qe,rt=_t-(_t-ne)*qe}else{let qe;vt>Qe?qe=1:Be===Qe?qe=0:qe=(Be-vt)/(Be-Qe),Le=Ue-(Ue-Ce)*qe,Ke=xe-(xe-X)*qe,Ve=q-(q-le)*qe,rt=ne-(ne-me)*qe}let mt;vt<Te?mt=0:vt>Qe?mt=1:mt=(Te-vt)/(Te-Qe),lt=ye-(ye-Ce)*mt,gt=at-(at-X)*mt,dt=ft-(ft-le)*mt,pt=_t-(_t-me)*mt;const Mt=Math.round(Math.min(Le,lt)),st=Math.round(Math.max(Le,lt));let Xe=Ae*vt+Mt*4;for(let qe=Mt;qe<=st;qe++)mt=(Le-qe)/(Le-lt),mt<0?mt=0:mt>1&&(mt=1),de[Xe++]=Ke-(Ke-gt)*mt|0,de[Xe++]=Ve-(Ve-dt)*mt|0,de[Xe++]=rt-(rt-pt)*mt|0,de[Xe++]=255}}function G(re,ie,se){const fe=ie.coords,Y=ie.colors;let ee,Ee;switch(ie.type){case"lattice":const be=ie.verticesPerRow,te=Math.floor(fe.length/be)-1,ge=be-1;for(ee=0;ee<te;ee++){let de=ee*be;for(let Ae=0;Ae<ge;Ae++,de++)ue(re,se,fe[de],fe[de+1],fe[de+be],Y[de],Y[de+1],Y[de+be]),ue(re,se,fe[de+be+1],fe[de+1],fe[de+be],Y[de+be+1],Y[de+1],Y[de+be])}break;case"triangles":for(ee=0,Ee=fe.length;ee<Ee;ee+=3)ue(re,se,fe[ee],fe[ee+1],fe[ee+2],Y[ee],Y[ee+1],Y[ee+2]);break;default:throw new Error("illegal figure")}}class ve extends pe{constructor(ie){super(),this._coords=ie[2],this._colors=ie[3],this._figures=ie[4],this._bounds=ie[5],this._bbox=ie[7],this._background=ie[8],this.matrix=null}_createMeshCanvas(ie,se,fe){const be=Math.floor(this._bounds[0]),te=Math.floor(this._bounds[1]),ge=Math.ceil(this._bounds[2])-be,de=Math.ceil(this._bounds[3])-te,Ae=Math.min(Math.ceil(Math.abs(ge*ie[0]*1.1)),3e3),Fe=Math.min(Math.ceil(Math.abs(de*ie[1]*1.1)),3e3),ye=ge/Ae,Te=de/Fe,Ue={coords:this._coords,colors:this._colors,offsetX:-be,offsetY:-te,scaleX:1/ye,scaleY:1/Te},Be=Ae+2*2,Ce=Fe+2*2,Qe=fe.getCanvas("mesh",Be,Ce,!1),at=Qe.context,ft=at.createImageData(Ae,Fe);if(se){const xe=ft.data;for(let q=0,ne=xe.length;q<ne;q+=4)xe[q]=se[0],xe[q+1]=se[1],xe[q+2]=se[2],xe[q+3]=255}for(const xe of this._figures)G(ft,xe,Ue);return at.putImageData(ft,2,2),{canvas:Qe.canvas,offsetX:be-2*ye,offsetY:te-2*Te,scaleX:ye,scaleY:Te}}getPattern(ie,se,fe,Y){W(ie,this._bbox);let ee;if(Y===H.SHADING)ee=R.Util.singularValueDecompose2dScale((0,O.getCurrentTransform)(ie));else if(ee=R.Util.singularValueDecompose2dScale(se.baseTransform),this.matrix){const be=R.Util.singularValueDecompose2dScale(this.matrix);ee=[ee[0]*be[0],ee[1]*be[1]]}const Ee=this._createMeshCanvas(ee,Y===H.SHADING?null:this._background,se.cachedCanvases);return Y!==H.SHADING&&(ie.setTransform(...se.baseTransform),this.matrix&&ie.transform(...this.matrix)),ie.translate(Ee.offsetX,Ee.offsetY),ie.scale(Ee.scaleX,Ee.scaleY),ie.createPattern(Ee.canvas,"no-repeat")}}class he extends pe{getPattern(){return"hotpink"}}function oe(re){switch(re[0]){case"RadialAxial":return new ce(re);case"Mesh":return new ve(re);case"Dummy":return new he}throw new Error(`Unknown IR type: ${re[0]}`)}const ae={COLORED:1,UNCOLORED:2},V=class V{constructor(ie,se,fe,Y,ee){this.operatorList=ie[2],this.matrix=ie[3]||[1,0,0,1,0,0],this.bbox=ie[4],this.xstep=ie[5],this.ystep=ie[6],this.paintType=ie[7],this.tilingType=ie[8],this.color=se,this.ctx=fe,this.canvasGraphicsFactory=Y,this.baseTransform=ee}createPatternCanvas(ie){const se=this.operatorList,fe=this.bbox,Y=this.xstep,ee=this.ystep,Ee=this.paintType,be=this.tilingType,te=this.color,ge=this.canvasGraphicsFactory;(0,R.info)("TilingType: "+be);const de=fe[0],Ae=fe[1],Fe=fe[2],ye=fe[3],Te=R.Util.singularValueDecompose2dScale(this.matrix),Ue=R.Util.singularValueDecompose2dScale(this.baseTransform),Be=[Te[0]*Ue[0],Te[1]*Ue[1]],Ce=this.getSizeAndScale(Y,this.ctx.canvas.width,Be[0]),Qe=this.getSizeAndScale(ee,this.ctx.canvas.height,Be[1]),at=ie.cachedCanvases.getCanvas("pattern",Ce.size,Qe.size,!0),ft=at.context,_t=ge.createCanvasGraphics(ft);_t.groupLevel=ie.groupLevel,this.setFillAndStrokeStyleToContext(_t,Ee,te);let xe=de,q=Ae,ne=Fe,X=ye;return de<0&&(xe=0,ne+=Math.abs(de)),Ae<0&&(q=0,X+=Math.abs(Ae)),ft.translate(-(Ce.scale*xe),-(Qe.scale*q)),_t.transform(Ce.scale,0,0,Qe.scale,0,0),ft.save(),this.clipBbox(_t,xe,q,ne,X),_t.baseTransform=(0,O.getCurrentTransform)(_t.ctx),_t.executeOperatorList(se),_t.endDrawing(),{canvas:at.canvas,scaleX:Ce.scale,scaleY:Qe.scale,offsetX:xe,offsetY:q}}getSizeAndScale(ie,se,fe){ie=Math.abs(ie);const Y=Math.max(V.MAX_PATTERN_SIZE,se);let ee=Math.ceil(ie*fe);return ee>=Y?ee=Y:fe=ee/ie,{scale:fe,size:ee}}clipBbox(ie,se,fe,Y,ee){const Ee=Y-se,be=ee-fe;ie.ctx.rect(se,fe,Ee,be),ie.current.updateRectMinMax((0,O.getCurrentTransform)(ie.ctx),[se,fe,Y,ee]),ie.clip(),ie.endPath()}setFillAndStrokeStyleToContext(ie,se,fe){const Y=ie.ctx,ee=ie.current;switch(se){case ae.COLORED:const Ee=this.ctx;Y.fillStyle=Ee.fillStyle,Y.strokeStyle=Ee.strokeStyle,ee.fillColor=Ee.fillStyle,ee.strokeColor=Ee.strokeStyle;break;case ae.UNCOLORED:const be=R.Util.makeHexColor(fe[0],fe[1],fe[2]);Y.fillStyle=be,Y.strokeStyle=be,ee.fillColor=be,ee.strokeColor=be;break;default:throw new R.FormatError(`Unsupported paint type: ${se}`)}}getPattern(ie,se,fe,Y){let ee=fe;Y!==H.SHADING&&(ee=R.Util.transform(ee,se.baseTransform),this.matrix&&(ee=R.Util.transform(ee,this.matrix)));const Ee=this.createPatternCanvas(se);let be=new DOMMatrix(ee);be=be.translate(Ee.offsetX,Ee.offsetY),be=be.scale(1/Ee.scaleX,1/Ee.scaleY);const te=ie.createPattern(Ee.canvas,"repeat");return te.setTransform(be),te}};Fn(V,"MAX_PATTERN_SIZE",3e3);let J=V;$.TilingPattern=J},(A,$,B)=>{Object.defineProperty($,"__esModule",{value:!0}),$.convertBlackAndWhiteToRGBA=H,$.convertToRGBA=O,$.grayToRGBA=pe;var R=B(1);function O(ce){switch(ce.kind){case R.ImageKind.GRAYSCALE_1BPP:return H(ce);case R.ImageKind.RGB_24BPP:return W(ce)}return null}function H({src:ce,srcPos:ue=0,dest:G,width:ve,height:he,nonBlackColor:oe=4294967295,inverseDecode:ae=!1}){const J=R.FeatureTest.isLittleEndian?4278190080:255,[V,re]=ae?[oe,J]:[J,oe],ie=ve>>3,se=ve&7,fe=ce.length;G=new Uint32Array(G.buffer);let Y=0;for(let ee=0;ee<he;ee++){for(const be=ue+ie;ue<be;ue++){const te=ue<fe?ce[ue]:255;G[Y++]=te&128?re:V,G[Y++]=te&64?re:V,G[Y++]=te&32?re:V,G[Y++]=te&16?re:V,G[Y++]=te&8?re:V,G[Y++]=te&4?re:V,G[Y++]=te&2?re:V,G[Y++]=te&1?re:V}if(se===0)continue;const Ee=ue<fe?ce[ue++]:255;for(let be=0;be<se;be++)G[Y++]=Ee&1<<7-be?re:V}return{srcPos:ue,destPos:Y}}function W({src:ce,srcPos:ue=0,dest:G,destPos:ve=0,width:he,height:oe}){let ae=0;const J=ce.length>>2,V=new Uint32Array(ce.buffer,ue,J);if(R.FeatureTest.isLittleEndian){for(;ae<J-2;ae+=3,ve+=4){const re=V[ae],ie=V[ae+1],se=V[ae+2];G[ve]=re|4278190080,G[ve+1]=re>>>24|ie<<8|4278190080,G[ve+2]=ie>>>16|se<<16|4278190080,G[ve+3]=se>>>8|4278190080}for(let re=ae*4,ie=ce.length;re<ie;re+=3)G[ve++]=ce[re]|ce[re+1]<<8|ce[re+2]<<16|4278190080}else{for(;ae<J-2;ae+=3,ve+=4){const re=V[ae],ie=V[ae+1],se=V[ae+2];G[ve]=re|255,G[ve+1]=re<<24|ie>>>8|255,G[ve+2]=ie<<16|se>>>16|255,G[ve+3]=se<<8|255}for(let re=ae*4,ie=ce.length;re<ie;re+=3)G[ve++]=ce[re]<<24|ce[re+1]<<16|ce[re+2]<<8|255}return{srcPos:ue,destPos:ve}}function pe(ce,ue){if(R.FeatureTest.isLittleEndian)for(let G=0,ve=ce.length;G<ve;G++)ue[G]=ce[G]*65793|4278190080;else for(let G=0,ve=ce.length;G<ve;G++)ue[G]=ce[G]*16843008|255}},(A,$)=>{Object.defineProperty($,"__esModule",{value:!0}),$.GlobalWorkerOptions=void 0;const B=Object.create(null);$.GlobalWorkerOptions=B,B.workerPort=null,B.workerSrc=""},(A,$,B)=>{var ce,Aa,G,Pa,he,Yr;Object.defineProperty($,"__esModule",{value:!0}),$.MessageHandler=void 0;var R=B(1);const O={UNKNOWN:0,DATA:1,ERROR:2},H={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function W(ae){switch(ae instanceof Error||typeof ae=="object"&&ae!==null||(0,R.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),ae.name){case"AbortException":return new R.AbortException(ae.message);case"MissingPDFException":return new R.MissingPDFException(ae.message);case"PasswordException":return new R.PasswordException(ae.message,ae.code);case"UnexpectedResponseException":return new R.UnexpectedResponseException(ae.message,ae.status);case"UnknownErrorException":return new R.UnknownErrorException(ae.message,ae.details);default:return new R.UnknownErrorException(ae.message,ae.toString())}}class pe{constructor(J,V,re){Oe(this,ce);Oe(this,G);Oe(this,he);this.sourceName=J,this.targetName=V,this.comObj=re,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=ie=>{const se=ie.data;if(se.targetName!==this.sourceName)return;if(se.stream){Ge(this,G,Pa).call(this,se);return}if(se.callback){const Y=se.callbackId,ee=this.callbackCapabilities[Y];if(!ee)throw new Error(`Cannot resolve callback ${Y}`);if(delete this.callbackCapabilities[Y],se.callback===O.DATA)ee.resolve(se.data);else if(se.callback===O.ERROR)ee.reject(W(se.reason));else throw new Error("Unexpected callback case");return}const fe=this.actionHandler[se.action];if(!fe)throw new Error(`Unknown action from worker: ${se.action}`);if(se.callbackId){const Y=this.sourceName,ee=se.sourceName;new Promise(function(Ee){Ee(fe(se.data))}).then(function(Ee){re.postMessage({sourceName:Y,targetName:ee,callback:O.DATA,callbackId:se.callbackId,data:Ee})},function(Ee){re.postMessage({sourceName:Y,targetName:ee,callback:O.ERROR,callbackId:se.callbackId,reason:W(Ee)})});return}if(se.streamId){Ge(this,ce,Aa).call(this,se);return}fe(se.data)},re.addEventListener("message",this._onComObjOnMessage)}on(J,V){const re=this.actionHandler;if(re[J])throw new Error(`There is already an actionName called "${J}"`);re[J]=V}send(J,V,re){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:J,data:V},re)}sendWithPromise(J,V,re){const ie=this.callbackId++,se=new R.PromiseCapability;this.callbackCapabilities[ie]=se;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:J,callbackId:ie,data:V},re)}catch(fe){se.reject(fe)}return se.promise}sendWithStream(J,V,re,ie){const se=this.streamId++,fe=this.sourceName,Y=this.targetName,ee=this.comObj;return new ReadableStream({start:Ee=>{const be=new R.PromiseCapability;return this.streamControllers[se]={controller:Ee,startCall:be,pullCall:null,cancelCall:null,isClosed:!1},ee.postMessage({sourceName:fe,targetName:Y,action:J,streamId:se,data:V,desiredSize:Ee.desiredSize},ie),be.promise},pull:Ee=>{const be=new R.PromiseCapability;return this.streamControllers[se].pullCall=be,ee.postMessage({sourceName:fe,targetName:Y,stream:H.PULL,streamId:se,desiredSize:Ee.desiredSize}),be.promise},cancel:Ee=>{(0,R.assert)(Ee instanceof Error,"cancel must have a valid reason");const be=new R.PromiseCapability;return this.streamControllers[se].cancelCall=be,this.streamControllers[se].isClosed=!0,ee.postMessage({sourceName:fe,targetName:Y,stream:H.CANCEL,streamId:se,reason:W(Ee)}),be.promise}},re)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}ce=new WeakSet,Aa=function(J){const V=J.streamId,re=this.sourceName,ie=J.sourceName,se=this.comObj,fe=this,Y=this.actionHandler[J.action],ee={enqueue(Ee,be=1,te){if(this.isCancelled)return;const ge=this.desiredSize;this.desiredSize-=be,ge>0&&this.desiredSize<=0&&(this.sinkCapability=new R.PromiseCapability,this.ready=this.sinkCapability.promise),se.postMessage({sourceName:re,targetName:ie,stream:H.ENQUEUE,streamId:V,chunk:Ee},te)},close(){this.isCancelled||(this.isCancelled=!0,se.postMessage({sourceName:re,targetName:ie,stream:H.CLOSE,streamId:V}),delete fe.streamSinks[V])},error(Ee){(0,R.assert)(Ee instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,se.postMessage({sourceName:re,targetName:ie,stream:H.ERROR,streamId:V,reason:W(Ee)}))},sinkCapability:new R.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:J.desiredSize,ready:null};ee.sinkCapability.resolve(),ee.ready=ee.sinkCapability.promise,this.streamSinks[V]=ee,new Promise(function(Ee){Ee(Y(J.data,ee))}).then(function(){se.postMessage({sourceName:re,targetName:ie,stream:H.START_COMPLETE,streamId:V,success:!0})},function(Ee){se.postMessage({sourceName:re,targetName:ie,stream:H.START_COMPLETE,streamId:V,reason:W(Ee)})})},G=new WeakSet,Pa=function(J){const V=J.streamId,re=this.sourceName,ie=J.sourceName,se=this.comObj,fe=this.streamControllers[V],Y=this.streamSinks[V];switch(J.stream){case H.START_COMPLETE:J.success?fe.startCall.resolve():fe.startCall.reject(W(J.reason));break;case H.PULL_COMPLETE:J.success?fe.pullCall.resolve():fe.pullCall.reject(W(J.reason));break;case H.PULL:if(!Y){se.postMessage({sourceName:re,targetName:ie,stream:H.PULL_COMPLETE,streamId:V,success:!0});break}Y.desiredSize<=0&&J.desiredSize>0&&Y.sinkCapability.resolve(),Y.desiredSize=J.desiredSize,new Promise(function(ee){var Ee;ee((Ee=Y.onPull)==null?void 0:Ee.call(Y))}).then(function(){se.postMessage({sourceName:re,targetName:ie,stream:H.PULL_COMPLETE,streamId:V,success:!0})},function(ee){se.postMessage({sourceName:re,targetName:ie,stream:H.PULL_COMPLETE,streamId:V,reason:W(ee)})});break;case H.ENQUEUE:if((0,R.assert)(fe,"enqueue should have stream controller"),fe.isClosed)break;fe.controller.enqueue(J.chunk);break;case H.CLOSE:if((0,R.assert)(fe,"close should have stream controller"),fe.isClosed)break;fe.isClosed=!0,fe.controller.close(),Ge(this,he,Yr).call(this,fe,V);break;case H.ERROR:(0,R.assert)(fe,"error should have stream controller"),fe.controller.error(W(J.reason)),Ge(this,he,Yr).call(this,fe,V);break;case H.CANCEL_COMPLETE:J.success?fe.cancelCall.resolve():fe.cancelCall.reject(W(J.reason)),Ge(this,he,Yr).call(this,fe,V);break;case H.CANCEL:if(!Y)break;new Promise(function(ee){var Ee;ee((Ee=Y.onCancel)==null?void 0:Ee.call(Y,W(J.reason)))}).then(function(){se.postMessage({sourceName:re,targetName:ie,stream:H.CANCEL_COMPLETE,streamId:V,success:!0})},function(ee){se.postMessage({sourceName:re,targetName:ie,stream:H.CANCEL_COMPLETE,streamId:V,reason:W(ee)})}),Y.sinkCapability.reject(W(J.reason)),Y.isCancelled=!0,delete this.streamSinks[V];break;default:throw new Error("Unexpected stream case")}},he=new WeakSet,Yr=async function(J,V){var re,ie,se;await Promise.allSettled([(re=J.startCall)==null?void 0:re.promise,(ie=J.pullCall)==null?void 0:ie.promise,(se=J.cancelCall)==null?void 0:se.promise]),delete this.streamControllers[V]},$.MessageHandler=pe},(A,$,B)=>{var H,W;Object.defineProperty($,"__esModule",{value:!0}),$.Metadata=void 0;var R=B(1);class O{constructor({parsedData:ce,rawData:ue}){Oe(this,H,void 0);Oe(this,W,void 0);it(this,H,ce),it(this,W,ue)}getRaw(){return U(this,W)}get(ce){return U(this,H).get(ce)??null}getAll(){return(0,R.objectFromMap)(U(this,H))}has(ce){return U(this,H).has(ce)}}H=new WeakMap,W=new WeakMap,$.Metadata=O},(A,$,B)=>{var ce,ue,G,ve,he,oe,Oi;Object.defineProperty($,"__esModule",{value:!0}),$.OptionalContentConfig=void 0;var R=B(1),O=B(8);const H=Symbol("INTERNAL");class W{constructor(V,re){Oe(this,ce,!0);this.name=V,this.intent=re}get visible(){return U(this,ce)}_setVisible(V,re){V!==H&&(0,R.unreachable)("Internal method `_setVisible` called."),it(this,ce,re)}}ce=new WeakMap;class pe{constructor(V){Oe(this,oe);Oe(this,ue,null);Oe(this,G,new Map);Oe(this,ve,null);Oe(this,he,null);if(this.name=null,this.creator=null,V!==null){this.name=V.name,this.creator=V.creator,it(this,he,V.order);for(const re of V.groups)U(this,G).set(re.id,new W(re.name,re.intent));if(V.baseState==="OFF")for(const re of U(this,G).values())re._setVisible(H,!1);for(const re of V.on)U(this,G).get(re)._setVisible(H,!0);for(const re of V.off)U(this,G).get(re)._setVisible(H,!1);it(this,ve,this.getHash())}}isVisible(V){if(U(this,G).size===0)return!0;if(!V)return(0,R.warn)("Optional content group not defined."),!0;if(V.type==="OCG")return U(this,G).has(V.id)?U(this,G).get(V.id).visible:((0,R.warn)(`Optional content group not found: ${V.id}`),!0);if(V.type==="OCMD"){if(V.expression)return Ge(this,oe,Oi).call(this,V.expression);if(!V.policy||V.policy==="AnyOn"){for(const re of V.ids){if(!U(this,G).has(re))return(0,R.warn)(`Optional content group not found: ${re}`),!0;if(U(this,G).get(re).visible)return!0}return!1}else if(V.policy==="AllOn"){for(const re of V.ids){if(!U(this,G).has(re))return(0,R.warn)(`Optional content group not found: ${re}`),!0;if(!U(this,G).get(re).visible)return!1}return!0}else if(V.policy==="AnyOff"){for(const re of V.ids){if(!U(this,G).has(re))return(0,R.warn)(`Optional content group not found: ${re}`),!0;if(!U(this,G).get(re).visible)return!0}return!1}else if(V.policy==="AllOff"){for(const re of V.ids){if(!U(this,G).has(re))return(0,R.warn)(`Optional content group not found: ${re}`),!0;if(U(this,G).get(re).visible)return!1}return!0}return(0,R.warn)(`Unknown optional content policy ${V.policy}.`),!0}return(0,R.warn)(`Unknown group type ${V.type}.`),!0}setVisibility(V,re=!0){if(!U(this,G).has(V)){(0,R.warn)(`Optional content group not found: ${V}`);return}U(this,G).get(V)._setVisible(H,!!re),it(this,ue,null)}get hasInitialVisibility(){return U(this,ve)===null||this.getHash()===U(this,ve)}getOrder(){return U(this,G).size?U(this,he)?U(this,he).slice():[...U(this,G).keys()]:null}getGroups(){return U(this,G).size>0?(0,R.objectFromMap)(U(this,G)):null}getGroup(V){return U(this,G).get(V)||null}getHash(){if(U(this,ue)!==null)return U(this,ue);const V=new O.MurmurHash3_64;for(const[re,ie]of U(this,G))V.update(`${re}:${ie.visible}`);return it(this,ue,V.hexdigest())}}ue=new WeakMap,G=new WeakMap,ve=new WeakMap,he=new WeakMap,oe=new WeakSet,Oi=function(V){const re=V.length;if(re<2)return!0;const ie=V[0];for(let se=1;se<re;se++){const fe=V[se];let Y;if(Array.isArray(fe))Y=Ge(this,oe,Oi).call(this,fe);else if(U(this,G).has(fe))Y=U(this,G).get(fe).visible;else return(0,R.warn)(`Optional content group not found: ${fe}`),!0;switch(ie){case"And":if(!Y)return!1;break;case"Or":if(Y)return!0;break;case"Not":return!Y;default:return!0}}return ie==="And"},$.OptionalContentConfig=pe},(A,$,B)=>{Object.defineProperty($,"__esModule",{value:!0}),$.PDFDataTransportStream=void 0;var R=B(1),O=B(6);class H{constructor({length:ue,initialData:G,progressiveDone:ve=!1,contentDispositionFilename:he=null,disableRange:oe=!1,disableStream:ae=!1},J){if((0,R.assert)(J,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=ve,this._contentDispositionFilename=he,(G==null?void 0:G.length)>0){const V=G instanceof Uint8Array&&G.byteLength===G.buffer.byteLength?G.buffer:new Uint8Array(G).buffer;this._queuedChunks.push(V)}this._pdfDataRangeTransport=J,this._isStreamingSupported=!ae,this._isRangeSupported=!oe,this._contentLength=ue,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((V,re)=>{this._onReceiveData({begin:V,chunk:re})}),this._pdfDataRangeTransport.addProgressListener((V,re)=>{this._onProgress({loaded:V,total:re})}),this._pdfDataRangeTransport.addProgressiveReadListener(V=>{this._onReceiveData({chunk:V})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:ue,chunk:G}){const ve=G instanceof Uint8Array&&G.byteLength===G.buffer.byteLength?G.buffer:new Uint8Array(G).buffer;if(ue===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(ve):this._queuedChunks.push(ve);else{const he=this._rangeReaders.some(function(oe){return oe._begin!==ue?!1:(oe._enqueue(ve),!0)});(0,R.assert)(he,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var ue;return((ue=this._fullRequestReader)==null?void 0:ue._loaded)??0}_onProgress(ue){var G,ve,he,oe;ue.total===void 0?(ve=(G=this._rangeReaders[0])==null?void 0:G.onProgress)==null||ve.call(G,{loaded:ue.loaded}):(oe=(he=this._fullRequestReader)==null?void 0:he.onProgress)==null||oe.call(he,{loaded:ue.loaded,total:ue.total})}_onProgressiveDone(){var ue;(ue=this._fullRequestReader)==null||ue.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(ue){const G=this._rangeReaders.indexOf(ue);G>=0&&this._rangeReaders.splice(G,1)}getFullReader(){(0,R.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const ue=this._queuedChunks;return this._queuedChunks=null,new W(this,ue,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(ue,G){if(G<=this._progressiveDataLength)return null;const ve=new pe(this,ue,G);return this._pdfDataRangeTransport.requestDataRange(ue,G),this._rangeReaders.push(ve),ve}cancelAllRequests(ue){var G;(G=this._fullRequestReader)==null||G.cancel(ue);for(const ve of this._rangeReaders.slice(0))ve.cancel(ue);this._pdfDataRangeTransport.abort()}}$.PDFDataTransportStream=H;class W{constructor(ue,G,ve=!1,he=null){this._stream=ue,this._done=ve||!1,this._filename=(0,O.isPdfFile)(he)?he:null,this._queuedChunks=G||[],this._loaded=0;for(const oe of this._queuedChunks)this._loaded+=oe.byteLength;this._requests=[],this._headersReady=Promise.resolve(),ue._fullRequestReader=this,this.onProgress=null}_enqueue(ue){this._done||(this._requests.length>0?this._requests.shift().resolve({value:ue,done:!1}):this._queuedChunks.push(ue),this._loaded+=ue.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const ue=new R.PromiseCapability;return this._requests.push(ue),ue.promise}cancel(ue){this._done=!0;for(const G of this._requests)G.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class pe{constructor(ue,G,ve){this._stream=ue,this._begin=G,this._end=ve,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(ue){if(!this._done){if(this._requests.length===0)this._queuedChunk=ue;else{this._requests.shift().resolve({value:ue,done:!1});for(const ve of this._requests)ve.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const G=this._queuedChunk;return this._queuedChunk=null,{value:G,done:!1}}if(this._done)return{value:void 0,done:!0};const ue=new R.PromiseCapability;return this._requests.push(ue),ue.promise}cancel(ue){this._done=!0;for(const G of this._requests)G.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(A,$,B)=>{Object.defineProperty($,"__esModule",{value:!0}),$.PDFFetchStream=void 0;var R=B(1),O=B(20);function H(ve,he,oe){return{method:"GET",headers:ve,signal:oe.signal,mode:"cors",credentials:he?"include":"same-origin",redirect:"follow"}}function W(ve){const he=new Headers;for(const oe in ve){const ae=ve[oe];ae!==void 0&&he.append(oe,ae)}return he}function pe(ve){return ve instanceof Uint8Array?ve.buffer:ve instanceof ArrayBuffer?ve:((0,R.warn)(`getArrayBuffer - unexpected data format: ${ve}`),new Uint8Array(ve).buffer)}class ce{constructor(he){this.source=he,this.isHttp=/^https?:/i.test(he.url),this.httpHeaders=this.isHttp&&he.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var he;return((he=this._fullRequestReader)==null?void 0:he._loaded)??0}getFullReader(){return(0,R.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ue(this),this._fullRequestReader}getRangeReader(he,oe){if(oe<=this._progressiveDataLength)return null;const ae=new G(this,he,oe);return this._rangeRequestReaders.push(ae),ae}cancelAllRequests(he){var oe;(oe=this._fullRequestReader)==null||oe.cancel(he);for(const ae of this._rangeRequestReaders.slice(0))ae.cancel(he)}}$.PDFFetchStream=ce;class ue{constructor(he){this._stream=he,this._reader=null,this._loaded=0,this._filename=null;const oe=he.source;this._withCredentials=oe.withCredentials||!1,this._contentLength=oe.length,this._headersCapability=new R.PromiseCapability,this._disableRange=oe.disableRange||!1,this._rangeChunkSize=oe.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!oe.disableStream,this._isRangeSupported=!oe.disableRange,this._headers=W(this._stream.httpHeaders);const ae=oe.url;fetch(ae,H(this._headers,this._withCredentials,this._abortController)).then(J=>{if(!(0,O.validateResponseStatus)(J.status))throw(0,O.createResponseStatusError)(J.status,ae);this._reader=J.body.getReader(),this._headersCapability.resolve();const V=se=>J.headers.get(se),{allowRangeRequests:re,suggestedLength:ie}=(0,O.validateRangeRequestCapabilities)({getResponseHeader:V,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=re,this._contentLength=ie||this._contentLength,this._filename=(0,O.extractFilenameFromHeader)(V),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new R.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ae;await this._headersCapability.promise;const{value:he,done:oe}=await this._reader.read();return oe?{value:he,done:oe}:(this._loaded+=he.byteLength,(ae=this.onProgress)==null||ae.call(this,{loaded:this._loaded,total:this._contentLength}),{value:pe(he),done:!1})}cancel(he){var oe;(oe=this._reader)==null||oe.cancel(he),this._abortController.abort()}}class G{constructor(he,oe,ae){this._stream=he,this._reader=null,this._loaded=0;const J=he.source;this._withCredentials=J.withCredentials||!1,this._readCapability=new R.PromiseCapability,this._isStreamingSupported=!J.disableStream,this._abortController=new AbortController,this._headers=W(this._stream.httpHeaders),this._headers.append("Range",`bytes=${oe}-${ae-1}`);const V=J.url;fetch(V,H(this._headers,this._withCredentials,this._abortController)).then(re=>{if(!(0,O.validateResponseStatus)(re.status))throw(0,O.createResponseStatusError)(re.status,V);this._readCapability.resolve(),this._reader=re.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ae;await this._readCapability.promise;const{value:he,done:oe}=await this._reader.read();return oe?{value:he,done:oe}:(this._loaded+=he.byteLength,(ae=this.onProgress)==null||ae.call(this,{loaded:this._loaded}),{value:pe(he),done:!1})}cancel(he){var oe;(oe=this._reader)==null||oe.cancel(he),this._abortController.abort()}}},(A,$,B)=>{Object.defineProperty($,"__esModule",{value:!0}),$.createResponseStatusError=ce,$.extractFilenameFromHeader=pe,$.validateRangeRequestCapabilities=W,$.validateResponseStatus=ue;var R=B(1),O=B(21),H=B(6);function W({getResponseHeader:G,isHttp:ve,rangeChunkSize:he,disableRange:oe}){const ae={allowRangeRequests:!1,suggestedLength:void 0},J=parseInt(G("Content-Length"),10);return!Number.isInteger(J)||(ae.suggestedLength=J,J<=2*he)||oe||!ve||G("Accept-Ranges")!=="bytes"||(G("Content-Encoding")||"identity")!=="identity"||(ae.allowRangeRequests=!0),ae}function pe(G){const ve=G("Content-Disposition");if(ve){let he=(0,O.getFilenameFromContentDispositionHeader)(ve);if(he.includes("%"))try{he=decodeURIComponent(he)}catch{}if((0,H.isPdfFile)(he))return he}return null}function ce(G,ve){return G===404||G===0&&ve.startsWith("file:")?new R.MissingPDFException('Missing PDF "'+ve+'".'):new R.UnexpectedResponseException(`Unexpected server response (${G}) while retrieving PDF "${ve}".`,G)}function ue(G){return G===200||G===206}},(A,$,B)=>{Object.defineProperty($,"__esModule",{value:!0}),$.getFilenameFromContentDispositionHeader=O;var R=B(1);function O(H){let W=!0,pe=ce("filename\\*","i").exec(H);if(pe){pe=pe[1];let J=he(pe);return J=unescape(J),J=oe(J),J=ae(J),G(J)}if(pe=ve(H),pe){const J=ae(pe);return G(J)}if(pe=ce("filename","i").exec(H),pe){pe=pe[1];let J=he(pe);return J=ae(J),G(J)}function ce(J,V){return new RegExp("(?:^|;)\\s*"+J+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',V)}function ue(J,V){if(J){if(!/^[\x00-\xFF]+$/.test(V))return V;try{const re=new TextDecoder(J,{fatal:!0}),ie=(0,R.stringToBytes)(V);V=re.decode(ie),W=!1}catch{}}return V}function G(J){return W&&/[\x80-\xff]/.test(J)&&(J=ue("utf-8",J),W&&(J=ue("iso-8859-1",J))),J}function ve(J){const V=[];let re;const ie=ce("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(re=ie.exec(J))!==null;){let[,fe,Y,ee]=re;if(fe=parseInt(fe,10),fe in V){if(fe===0)break;continue}V[fe]=[Y,ee]}const se=[];for(let fe=0;fe<V.length&&fe in V;++fe){let[Y,ee]=V[fe];ee=he(ee),Y&&(ee=unescape(ee),fe===0&&(ee=oe(ee))),se.push(ee)}return se.join("")}function he(J){if(J.startsWith('"')){const V=J.slice(1).split('\\"');for(let re=0;re<V.length;++re){const ie=V[re].indexOf('"');ie!==-1&&(V[re]=V[re].slice(0,ie),V.length=re+1),V[re]=V[re].replaceAll(/\\(.)/g,"$1")}J=V.join('"')}return J}function oe(J){const V=J.indexOf("'");if(V===-1)return J;const re=J.slice(0,V),se=J.slice(V+1).replace(/^[^']*'/,"");return ue(re,se)}function ae(J){return!J.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(J)?J:J.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(V,re,ie,se){if(ie==="q"||ie==="Q")return se=se.replaceAll("_"," "),se=se.replaceAll(/=([0-9a-fA-F]{2})/g,function(fe,Y){return String.fromCharCode(parseInt(Y,16))}),ue(re,se);try{se=atob(se)}catch{}return ue(re,se)})}return""}},(A,$,B)=>{Object.defineProperty($,"__esModule",{value:!0}),$.PDFNetworkStream=void 0;var R=B(1),O=B(20);const H=200,W=206;function pe(he){const oe=he.response;return typeof oe!="string"?oe:(0,R.stringToBytes)(oe).buffer}class ce{constructor(oe,ae={}){this.url=oe,this.isHttp=/^https?:/i.test(oe),this.httpHeaders=this.isHttp&&ae.httpHeaders||Object.create(null),this.withCredentials=ae.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(oe,ae,J){const V={begin:oe,end:ae};for(const re in J)V[re]=J[re];return this.request(V)}requestFull(oe){return this.request(oe)}request(oe){const ae=new XMLHttpRequest,J=this.currXhrId++,V=this.pendingRequests[J]={xhr:ae};ae.open("GET",this.url),ae.withCredentials=this.withCredentials;for(const re in this.httpHeaders){const ie=this.httpHeaders[re];ie!==void 0&&ae.setRequestHeader(re,ie)}return this.isHttp&&"begin"in oe&&"end"in oe?(ae.setRequestHeader("Range",`bytes=${oe.begin}-${oe.end-1}`),V.expectedStatus=W):V.expectedStatus=H,ae.responseType="arraybuffer",oe.onError&&(ae.onerror=function(re){oe.onError(ae.status)}),ae.onreadystatechange=this.onStateChange.bind(this,J),ae.onprogress=this.onProgress.bind(this,J),V.onHeadersReceived=oe.onHeadersReceived,V.onDone=oe.onDone,V.onError=oe.onError,V.onProgress=oe.onProgress,ae.send(null),J}onProgress(oe,ae){var V;const J=this.pendingRequests[oe];J&&((V=J.onProgress)==null||V.call(J,ae))}onStateChange(oe,ae){var fe,Y,ee;const J=this.pendingRequests[oe];if(!J)return;const V=J.xhr;if(V.readyState>=2&&J.onHeadersReceived&&(J.onHeadersReceived(),delete J.onHeadersReceived),V.readyState!==4||!(oe in this.pendingRequests))return;if(delete this.pendingRequests[oe],V.status===0&&this.isHttp){(fe=J.onError)==null||fe.call(J,V.status);return}const re=V.status||H;if(!(re===H&&J.expectedStatus===W)&&re!==J.expectedStatus){(Y=J.onError)==null||Y.call(J,V.status);return}const se=pe(V);if(re===W){const Ee=V.getResponseHeader("Content-Range"),be=/bytes (\d+)-(\d+)\/(\d+)/.exec(Ee);J.onDone({begin:parseInt(be[1],10),chunk:se})}else se?J.onDone({begin:0,chunk:se}):(ee=J.onError)==null||ee.call(J,V.status)}getRequestXhr(oe){return this.pendingRequests[oe].xhr}isPendingRequest(oe){return oe in this.pendingRequests}abortRequest(oe){const ae=this.pendingRequests[oe].xhr;delete this.pendingRequests[oe],ae.abort()}}class ue{constructor(oe){this._source=oe,this._manager=new ce(oe.url,{httpHeaders:oe.httpHeaders,withCredentials:oe.withCredentials}),this._rangeChunkSize=oe.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(oe){const ae=this._rangeRequestReaders.indexOf(oe);ae>=0&&this._rangeRequestReaders.splice(ae,1)}getFullReader(){return(0,R.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new G(this._manager,this._source),this._fullRequestReader}getRangeReader(oe,ae){const J=new ve(this._manager,oe,ae);return J.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(J),J}cancelAllRequests(oe){var ae;(ae=this._fullRequestReader)==null||ae.cancel(oe);for(const J of this._rangeRequestReaders.slice(0))J.cancel(oe)}}$.PDFNetworkStream=ue;class G{constructor(oe,ae){this._manager=oe;const J={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ae.url,this._fullRequestId=oe.requestFull(J),this._headersReceivedCapability=new R.PromiseCapability,this._disableRange=ae.disableRange||!1,this._contentLength=ae.length,this._rangeChunkSize=ae.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const oe=this._fullRequestId,ae=this._manager.getRequestXhr(oe),J=ie=>ae.getResponseHeader(ie),{allowRangeRequests:V,suggestedLength:re}=(0,O.validateRangeRequestCapabilities)({getResponseHeader:J,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});V&&(this._isRangeSupported=!0),this._contentLength=re||this._contentLength,this._filename=(0,O.extractFilenameFromHeader)(J),this._isRangeSupported&&this._manager.abortRequest(oe),this._headersReceivedCapability.resolve()}_onDone(oe){if(oe&&(this._requests.length>0?this._requests.shift().resolve({value:oe.chunk,done:!1}):this._cachedChunks.push(oe.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const ae of this._requests)ae.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(oe){this._storedError=(0,O.createResponseStatusError)(oe,this._url),this._headersReceivedCapability.reject(this._storedError);for(const ae of this._requests)ae.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(oe){var ae;(ae=this.onProgress)==null||ae.call(this,{loaded:oe.loaded,total:oe.lengthComputable?oe.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const oe=new R.PromiseCapability;return this._requests.push(oe),oe.promise}cancel(oe){this._done=!0,this._headersReceivedCapability.reject(oe);for(const ae of this._requests)ae.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class ve{constructor(oe,ae,J){this._manager=oe;const V={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=oe.url,this._requestId=oe.requestRange(ae,J,V),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var oe;(oe=this.onClosed)==null||oe.call(this,this)}_onDone(oe){const ae=oe.chunk;this._requests.length>0?this._requests.shift().resolve({value:ae,done:!1}):this._queuedChunk=ae,this._done=!0;for(const J of this._requests)J.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(oe){this._storedError=(0,O.createResponseStatusError)(oe,this._url);for(const ae of this._requests)ae.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(oe){var ae;this.isStreamingSupported||(ae=this.onProgress)==null||ae.call(this,{loaded:oe.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const ae=this._queuedChunk;return this._queuedChunk=null,{value:ae,done:!1}}if(this._done)return{value:void 0,done:!0};const oe=new R.PromiseCapability;return this._requests.push(oe),oe.promise}cancel(oe){this._done=!0;for(const ae of this._requests)ae.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(A,$,B)=>{Object.defineProperty($,"__esModule",{value:!0}),$.PDFNodeStream=void 0;var R=B(1),O=B(20);const H=/^file:\/\/\/[a-zA-Z]:\//;function W(J){const V=require$$5,re=V.parse(J);return re.protocol==="file:"||re.host?re:/^[a-z]:[/\\]/i.test(J)?V.parse(`file:///${J}`):(re.host||(re.protocol="file:"),re)}class pe{constructor(V){this.source=V,this.url=W(V.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&V.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var V;return((V=this._fullRequestReader)==null?void 0:V._loaded)??0}getFullReader(){return(0,R.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new oe(this):new ve(this),this._fullRequestReader}getRangeReader(V,re){if(re<=this._progressiveDataLength)return null;const ie=this.isFsUrl?new ae(this,V,re):new he(this,V,re);return this._rangeRequestReaders.push(ie),ie}cancelAllRequests(V){var re;(re=this._fullRequestReader)==null||re.cancel(V);for(const ie of this._rangeRequestReaders.slice(0))ie.cancel(V)}}$.PDFNodeStream=pe;class ce{constructor(V){this._url=V.url,this._done=!1,this._storedError=null,this.onProgress=null;const re=V.source;this._contentLength=re.length,this._loaded=0,this._filename=null,this._disableRange=re.disableRange||!1,this._rangeChunkSize=re.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!re.disableStream,this._isRangeSupported=!re.disableRange,this._readableStream=null,this._readCapability=new R.PromiseCapability,this._headersCapability=new R.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ie;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const V=this._readableStream.read();return V===null?(this._readCapability=new R.PromiseCapability,this.read()):(this._loaded+=V.length,(ie=this.onProgress)==null||ie.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(V).buffer,done:!1})}cancel(V){if(!this._readableStream){this._error(V);return}this._readableStream.destroy(V)}_error(V){this._storedError=V,this._readCapability.resolve()}_setReadableStream(V){this._readableStream=V,V.on("readable",()=>{this._readCapability.resolve()}),V.on("end",()=>{V.destroy(),this._done=!0,this._readCapability.resolve()}),V.on("error",re=>{this._error(re)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new R.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class ue{constructor(V){this._url=V.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new R.PromiseCapability;const re=V.source;this._isStreamingSupported=!re.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var ie;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const V=this._readableStream.read();return V===null?(this._readCapability=new R.PromiseCapability,this.read()):(this._loaded+=V.length,(ie=this.onProgress)==null||ie.call(this,{loaded:this._loaded}),{value:new Uint8Array(V).buffer,done:!1})}cancel(V){if(!this._readableStream){this._error(V);return}this._readableStream.destroy(V)}_error(V){this._storedError=V,this._readCapability.resolve()}_setReadableStream(V){this._readableStream=V,V.on("readable",()=>{this._readCapability.resolve()}),V.on("end",()=>{V.destroy(),this._done=!0,this._readCapability.resolve()}),V.on("error",re=>{this._error(re)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function G(J,V){return{protocol:J.protocol,auth:J.auth,host:J.hostname,port:J.port,path:J.path,method:"GET",headers:V}}class ve extends ce{constructor(V){super(V);const re=ie=>{if(ie.statusCode===404){const ee=new R.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ee,this._headersCapability.reject(ee);return}this._headersCapability.resolve(),this._setReadableStream(ie);const se=ee=>this._readableStream.headers[ee.toLowerCase()],{allowRangeRequests:fe,suggestedLength:Y}=(0,O.validateRangeRequestCapabilities)({getResponseHeader:se,isHttp:V.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=fe,this._contentLength=Y||this._contentLength,this._filename=(0,O.extractFilenameFromHeader)(se)};if(this._request=null,this._url.protocol==="http:"){const ie=require$$5;this._request=ie.request(G(this._url,V.httpHeaders),re)}else{const ie=require$$5;this._request=ie.request(G(this._url,V.httpHeaders),re)}this._request.on("error",ie=>{this._storedError=ie,this._headersCapability.reject(ie)}),this._request.end()}}class he extends ue{constructor(V,re,ie){super(V),this._httpHeaders={};for(const fe in V.httpHeaders){const Y=V.httpHeaders[fe];Y!==void 0&&(this._httpHeaders[fe]=Y)}this._httpHeaders.Range=`bytes=${re}-${ie-1}`;const se=fe=>{if(fe.statusCode===404){const Y=new R.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Y;return}this._setReadableStream(fe)};if(this._request=null,this._url.protocol==="http:"){const fe=require$$5;this._request=fe.request(G(this._url,this._httpHeaders),se)}else{const fe=require$$5;this._request=fe.request(G(this._url,this._httpHeaders),se)}this._request.on("error",fe=>{this._storedError=fe}),this._request.end()}}class oe extends ce{constructor(V){super(V);let re=decodeURIComponent(this._url.path);H.test(this._url.href)&&(re=re.replace(/^\//,""));const ie=require$$5;ie.lstat(re,(se,fe)=>{if(se){se.code==="ENOENT"&&(se=new R.MissingPDFException(`Missing PDF "${re}".`)),this._storedError=se,this._headersCapability.reject(se);return}this._contentLength=fe.size,this._setReadableStream(ie.createReadStream(re)),this._headersCapability.resolve()})}}class ae extends ue{constructor(V,re,ie){super(V);let se=decodeURIComponent(this._url.path);H.test(this._url.href)&&(se=se.replace(/^\//,""));const fe=require$$5;this._setReadableStream(fe.createReadStream(se,{start:re,end:ie-1}))}}},(A,$,B)=>{Object.defineProperty($,"__esModule",{value:!0}),$.SVGGraphics=void 0;var R=B(6),O=B(1);const H={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},W="http://www.w3.org/XML/1998/namespace",pe="http://www.w3.org/1999/xlink",ce=["butt","round","square"],ue=["miter","round","bevel"],G=function(fe,Y="",ee=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!ee)return URL.createObjectURL(new Blob([fe],{type:Y}));const Ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let be=`data:${Y};base64,`;for(let te=0,ge=fe.length;te<ge;te+=3){const de=fe[te]&255,Ae=fe[te+1]&255,Fe=fe[te+2]&255,ye=de>>2,Te=(de&3)<<4|Ae>>4,Ue=te+1<ge?(Ae&15)<<2|Fe>>6:64,Be=te+2<ge?Fe&63:64;be+=Ee[ye]+Ee[Te]+Ee[Ue]+Ee[Be]}return be},ve=function(){const fe=new Uint8Array([137,80,78,71,13,10,26,10]),Y=12,ee=new Int32Array(256);for(let Fe=0;Fe<256;Fe++){let ye=Fe;for(let Te=0;Te<8;Te++)ye=ye&1?3988292384^ye>>1&2147483647:ye>>1&2147483647;ee[Fe]=ye}function Ee(Fe,ye,Te){let Ue=-1;for(let Be=ye;Be<Te;Be++){const Ce=(Ue^Fe[Be])&255,Qe=ee[Ce];Ue=Ue>>>8^Qe}return Ue^-1}function be(Fe,ye,Te,Ue){let Be=Ue;const Ce=ye.length;Te[Be]=Ce>>24&255,Te[Be+1]=Ce>>16&255,Te[Be+2]=Ce>>8&255,Te[Be+3]=Ce&255,Be+=4,Te[Be]=Fe.charCodeAt(0)&255,Te[Be+1]=Fe.charCodeAt(1)&255,Te[Be+2]=Fe.charCodeAt(2)&255,Te[Be+3]=Fe.charCodeAt(3)&255,Be+=4,Te.set(ye,Be),Be+=ye.length;const Qe=Ee(Te,Ue+4,Be);Te[Be]=Qe>>24&255,Te[Be+1]=Qe>>16&255,Te[Be+2]=Qe>>8&255,Te[Be+3]=Qe&255}function te(Fe,ye,Te){let Ue=1,Be=0;for(let Ce=ye;Ce<Te;++Ce)Ue=(Ue+(Fe[Ce]&255))%65521,Be=(Be+Ue)%65521;return Be<<16|Ue}function ge(Fe){if(!O.isNodeJS)return de(Fe);try{const ye=parseInt(process.versions.node)>=8?Fe:Buffer.from(Fe),Te=require$$5.deflateSync(ye,{level:9});return Te instanceof Uint8Array?Te:new Uint8Array(Te)}catch(ye){(0,O.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+ye)}return de(Fe)}function de(Fe){let ye=Fe.length;const Te=65535,Ue=Math.ceil(ye/Te),Be=new Uint8Array(2+ye+Ue*5+4);let Ce=0;Be[Ce++]=120,Be[Ce++]=156;let Qe=0;for(;ye>Te;)Be[Ce++]=0,Be[Ce++]=255,Be[Ce++]=255,Be[Ce++]=0,Be[Ce++]=0,Be.set(Fe.subarray(Qe,Qe+Te),Ce),Ce+=Te,Qe+=Te,ye-=Te;Be[Ce++]=1,Be[Ce++]=ye&255,Be[Ce++]=ye>>8&255,Be[Ce++]=~ye&65535&255,Be[Ce++]=(~ye&65535)>>8&255,Be.set(Fe.subarray(Qe),Ce),Ce+=Fe.length-Qe;const at=te(Fe,0,Fe.length);return Be[Ce++]=at>>24&255,Be[Ce++]=at>>16&255,Be[Ce++]=at>>8&255,Be[Ce++]=at&255,Be}function Ae(Fe,ye,Te,Ue){const Be=Fe.width,Ce=Fe.height;let Qe,at,ft;const _t=Fe.data;switch(ye){case O.ImageKind.GRAYSCALE_1BPP:at=0,Qe=1,ft=Be+7>>3;break;case O.ImageKind.RGB_24BPP:at=2,Qe=8,ft=Be*3;break;case O.ImageKind.RGBA_32BPP:at=6,Qe=8,ft=Be*4;break;default:throw new Error("invalid format")}const xe=new Uint8Array((1+ft)*Ce);let q=0,ne=0;for(let Le=0;Le<Ce;++Le)xe[q++]=0,xe.set(_t.subarray(ne,ne+ft),q),ne+=ft,q+=ft;if(ye===O.ImageKind.GRAYSCALE_1BPP&&Ue){q=0;for(let Le=0;Le<Ce;Le++){q++;for(let Ke=0;Ke<ft;Ke++)xe[q++]^=255}}const X=new Uint8Array([Be>>24&255,Be>>16&255,Be>>8&255,Be&255,Ce>>24&255,Ce>>16&255,Ce>>8&255,Ce&255,Qe,at,0,0,0]),le=ge(xe),me=fe.length+Y*3+X.length+le.length,Se=new Uint8Array(me);let Pe=0;return Se.set(fe,Pe),Pe+=fe.length,be("IHDR",X,Se,Pe),Pe+=Y+X.length,be("IDATA",le,Se,Pe),Pe+=Y+le.length,be("IEND",new Uint8Array(0),Se,Pe),G(Se,"image/png",Te)}return function(ye,Te,Ue){const Be=ye.kind===void 0?O.ImageKind.GRAYSCALE_1BPP:ye.kind;return Ae(ye,Be,Te,Ue)}}();class he{constructor(){this.fontSizeScale=1,this.fontWeight=H.fontWeight,this.fontSize=0,this.textMatrix=O.IDENTITY_MATRIX,this.fontMatrix=O.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=O.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=H.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(Y,ee){this.x=Y,this.y=ee}}function oe(fe){let Y=[];const ee=[];for(const Ee of fe){if(Ee.fn==="save"){Y.push({fnId:92,fn:"group",items:[]}),ee.push(Y),Y=Y.at(-1).items;continue}Ee.fn==="restore"?Y=ee.pop():Y.push(Ee)}return Y}function ae(fe){if(Number.isInteger(fe))return fe.toString();const Y=fe.toFixed(10);let ee=Y.length-1;if(Y[ee]!=="0")return Y;do ee--;while(Y[ee]==="0");return Y.substring(0,Y[ee]==="."?ee:ee+1)}function J(fe){if(fe[4]===0&&fe[5]===0){if(fe[1]===0&&fe[2]===0)return fe[0]===1&&fe[3]===1?"":`scale(${ae(fe[0])} ${ae(fe[3])})`;if(fe[0]===fe[3]&&fe[1]===-fe[2]){const Y=Math.acos(fe[0])*180/Math.PI;return`rotate(${ae(Y)})`}}else if(fe[0]===1&&fe[1]===0&&fe[2]===0&&fe[3]===1)return`translate(${ae(fe[4])} ${ae(fe[5])})`;return`matrix(${ae(fe[0])} ${ae(fe[1])} ${ae(fe[2])} ${ae(fe[3])} ${ae(fe[4])} ${ae(fe[5])})`}let V=0,re=0,ie=0;class se{constructor(Y,ee,Ee=!1){(0,R.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new R.DOMSVGFactory,this.current=new he,this.transformMatrix=O.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=Y,this.objs=ee,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!Ee,this._operatorIdMapping=[];for(const be in O.OPS)this._operatorIdMapping[O.OPS[be]]=be}getObject(Y,ee=null){return typeof Y=="string"?Y.startsWith("g_")?this.commonObjs.get(Y):this.objs.get(Y):ee}save(){this.transformStack.push(this.transformMatrix);const Y=this.current;this.extraStack.push(Y),this.current=Y.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(Y){this.save(),this.executeOpTree(Y),this.restore()}loadDependencies(Y){const ee=Y.fnArray,Ee=Y.argsArray;for(let be=0,te=ee.length;be<te;be++)if(ee[be]===O.OPS.dependency)for(const ge of Ee[be]){const de=ge.startsWith("g_")?this.commonObjs:this.objs,Ae=new Promise(Fe=>{de.get(ge,Fe)});this.current.dependencies.push(Ae)}return Promise.all(this.current.dependencies)}transform(Y,ee,Ee,be,te,ge){const de=[Y,ee,Ee,be,te,ge];this.transformMatrix=O.Util.transform(this.transformMatrix,de),this.tgrp=null}getSVG(Y,ee){this.viewport=ee;const Ee=this._initialize(ee);return this.loadDependencies(Y).then(()=>(this.transformMatrix=O.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(Y)),Ee))}convertOpList(Y){const ee=this._operatorIdMapping,Ee=Y.argsArray,be=Y.fnArray,te=[];for(let ge=0,de=be.length;ge<de;ge++){const Ae=be[ge];te.push({fnId:Ae,fn:ee[Ae],args:Ee[ge]})}return oe(te)}executeOpTree(Y){for(const ee of Y){const Ee=ee.fn,be=ee.fnId,te=ee.args;switch(be|0){case O.OPS.beginText:this.beginText();break;case O.OPS.dependency:break;case O.OPS.setLeading:this.setLeading(te);break;case O.OPS.setLeadingMoveText:this.setLeadingMoveText(te[0],te[1]);break;case O.OPS.setFont:this.setFont(te);break;case O.OPS.showText:this.showText(te[0]);break;case O.OPS.showSpacedText:this.showText(te[0]);break;case O.OPS.endText:this.endText();break;case O.OPS.moveText:this.moveText(te[0],te[1]);break;case O.OPS.setCharSpacing:this.setCharSpacing(te[0]);break;case O.OPS.setWordSpacing:this.setWordSpacing(te[0]);break;case O.OPS.setHScale:this.setHScale(te[0]);break;case O.OPS.setTextMatrix:this.setTextMatrix(te[0],te[1],te[2],te[3],te[4],te[5]);break;case O.OPS.setTextRise:this.setTextRise(te[0]);break;case O.OPS.setTextRenderingMode:this.setTextRenderingMode(te[0]);break;case O.OPS.setLineWidth:this.setLineWidth(te[0]);break;case O.OPS.setLineJoin:this.setLineJoin(te[0]);break;case O.OPS.setLineCap:this.setLineCap(te[0]);break;case O.OPS.setMiterLimit:this.setMiterLimit(te[0]);break;case O.OPS.setFillRGBColor:this.setFillRGBColor(te[0],te[1],te[2]);break;case O.OPS.setStrokeRGBColor:this.setStrokeRGBColor(te[0],te[1],te[2]);break;case O.OPS.setStrokeColorN:this.setStrokeColorN(te);break;case O.OPS.setFillColorN:this.setFillColorN(te);break;case O.OPS.shadingFill:this.shadingFill(te[0]);break;case O.OPS.setDash:this.setDash(te[0],te[1]);break;case O.OPS.setRenderingIntent:this.setRenderingIntent(te[0]);break;case O.OPS.setFlatness:this.setFlatness(te[0]);break;case O.OPS.setGState:this.setGState(te[0]);break;case O.OPS.fill:this.fill();break;case O.OPS.eoFill:this.eoFill();break;case O.OPS.stroke:this.stroke();break;case O.OPS.fillStroke:this.fillStroke();break;case O.OPS.eoFillStroke:this.eoFillStroke();break;case O.OPS.clip:this.clip("nonzero");break;case O.OPS.eoClip:this.clip("evenodd");break;case O.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case O.OPS.paintImageXObject:this.paintImageXObject(te[0]);break;case O.OPS.paintInlineImageXObject:this.paintInlineImageXObject(te[0]);break;case O.OPS.paintImageMaskXObject:this.paintImageMaskXObject(te[0]);break;case O.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(te[0],te[1]);break;case O.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case O.OPS.closePath:this.closePath();break;case O.OPS.closeStroke:this.closeStroke();break;case O.OPS.closeFillStroke:this.closeFillStroke();break;case O.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case O.OPS.nextLine:this.nextLine();break;case O.OPS.transform:this.transform(te[0],te[1],te[2],te[3],te[4],te[5]);break;case O.OPS.constructPath:this.constructPath(te[0],te[1]);break;case O.OPS.endPath:this.endPath();break;case 92:this.group(ee.items);break;default:(0,O.warn)(`Unimplemented operator ${Ee}`);break}}}setWordSpacing(Y){this.current.wordSpacing=Y}setCharSpacing(Y){this.current.charSpacing=Y}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(Y,ee,Ee,be,te,ge){const de=this.current;de.textMatrix=de.lineMatrix=[Y,ee,Ee,be,te,ge],de.textMatrixScale=Math.hypot(Y,ee),de.x=de.lineX=0,de.y=de.lineY=0,de.xcoords=[],de.ycoords=[],de.tspan=this.svgFactory.createElement("svg:tspan"),de.tspan.setAttributeNS(null,"font-family",de.fontFamily),de.tspan.setAttributeNS(null,"font-size",`${ae(de.fontSize)}px`),de.tspan.setAttributeNS(null,"y",ae(-de.y)),de.txtElement=this.svgFactory.createElement("svg:text"),de.txtElement.append(de.tspan)}beginText(){const Y=this.current;Y.x=Y.lineX=0,Y.y=Y.lineY=0,Y.textMatrix=O.IDENTITY_MATRIX,Y.lineMatrix=O.IDENTITY_MATRIX,Y.textMatrixScale=1,Y.tspan=this.svgFactory.createElement("svg:tspan"),Y.txtElement=this.svgFactory.createElement("svg:text"),Y.txtgrp=this.svgFactory.createElement("svg:g"),Y.xcoords=[],Y.ycoords=[]}moveText(Y,ee){const Ee=this.current;Ee.x=Ee.lineX+=Y,Ee.y=Ee.lineY+=ee,Ee.xcoords=[],Ee.ycoords=[],Ee.tspan=this.svgFactory.createElement("svg:tspan"),Ee.tspan.setAttributeNS(null,"font-family",Ee.fontFamily),Ee.tspan.setAttributeNS(null,"font-size",`${ae(Ee.fontSize)}px`),Ee.tspan.setAttributeNS(null,"y",ae(-Ee.y))}showText(Y){const ee=this.current,Ee=ee.font,be=ee.fontSize;if(be===0)return;const te=ee.fontSizeScale,ge=ee.charSpacing,de=ee.wordSpacing,Ae=ee.fontDirection,Fe=ee.textHScale*Ae,ye=Ee.vertical,Te=ye?1:-1,Ue=Ee.defaultVMetrics,Be=be*ee.fontMatrix[0];let Ce=0;for(const ft of Y){if(ft===null){Ce+=Ae*de;continue}else if(typeof ft=="number"){Ce+=Te*ft*be/1e3;continue}const _t=(ft.isSpace?de:0)+ge,xe=ft.fontChar;let q,ne,X=ft.width;if(ye){let me;const Se=ft.vmetric||Ue;me=ft.vmetric?Se[1]:X*.5,me=-me*Be;const Pe=Se[2]*Be;X=Se?-Se[0]:X,q=me/te,ne=(Ce+Pe)/te}else q=Ce/te,ne=0;(ft.isInFont||Ee.missingFile)&&(ee.xcoords.push(ee.x+q),ye&&ee.ycoords.push(-ee.y+ne),ee.tspan.textContent+=xe);const le=ye?X*Be-_t*Ae:X*Be+_t*Ae;Ce+=le}ee.tspan.setAttributeNS(null,"x",ee.xcoords.map(ae).join(" ")),ye?ee.tspan.setAttributeNS(null,"y",ee.ycoords.map(ae).join(" ")):ee.tspan.setAttributeNS(null,"y",ae(-ee.y)),ye?ee.y-=Ce:ee.x+=Ce*Fe,ee.tspan.setAttributeNS(null,"font-family",ee.fontFamily),ee.tspan.setAttributeNS(null,"font-size",`${ae(ee.fontSize)}px`),ee.fontStyle!==H.fontStyle&&ee.tspan.setAttributeNS(null,"font-style",ee.fontStyle),ee.fontWeight!==H.fontWeight&&ee.tspan.setAttributeNS(null,"font-weight",ee.fontWeight);const Qe=ee.textRenderingMode&O.TextRenderingMode.FILL_STROKE_MASK;if(Qe===O.TextRenderingMode.FILL||Qe===O.TextRenderingMode.FILL_STROKE?(ee.fillColor!==H.fillColor&&ee.tspan.setAttributeNS(null,"fill",ee.fillColor),ee.fillAlpha<1&&ee.tspan.setAttributeNS(null,"fill-opacity",ee.fillAlpha)):ee.textRenderingMode===O.TextRenderingMode.ADD_TO_PATH?ee.tspan.setAttributeNS(null,"fill","transparent"):ee.tspan.setAttributeNS(null,"fill","none"),Qe===O.TextRenderingMode.STROKE||Qe===O.TextRenderingMode.FILL_STROKE){const ft=1/(ee.textMatrixScale||1);this._setStrokeAttributes(ee.tspan,ft)}let at=ee.textMatrix;ee.textRise!==0&&(at=at.slice(),at[5]+=ee.textRise),ee.txtElement.setAttributeNS(null,"transform",`${J(at)} scale(${ae(Fe)}, -1)`),ee.txtElement.setAttributeNS(W,"xml:space","preserve"),ee.txtElement.append(ee.tspan),ee.txtgrp.append(ee.txtElement),this._ensureTransformGroup().append(ee.txtElement)}setLeadingMoveText(Y,ee){this.setLeading(-ee),this.moveText(Y,ee)}addFontStyle(Y){if(!Y.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const ee=G(Y.data,Y.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${Y.loadedName}"; src: url(${ee}); }
`}setFont(Y){const ee=this.current,Ee=this.commonObjs.get(Y[0]);let be=Y[1];ee.font=Ee,this.embedFonts&&!Ee.missingFile&&!this.embeddedFonts[Ee.loadedName]&&(this.addFontStyle(Ee),this.embeddedFonts[Ee.loadedName]=Ee),ee.fontMatrix=Ee.fontMatrix||O.FONT_IDENTITY_MATRIX;let te="normal";Ee.black?te="900":Ee.bold&&(te="bold");const ge=Ee.italic?"italic":"normal";be<0?(be=-be,ee.fontDirection=-1):ee.fontDirection=1,ee.fontSize=be,ee.fontFamily=Ee.loadedName,ee.fontWeight=te,ee.fontStyle=ge,ee.tspan=this.svgFactory.createElement("svg:tspan"),ee.tspan.setAttributeNS(null,"y",ae(-ee.y)),ee.xcoords=[],ee.ycoords=[]}endText(){var ee;const Y=this.current;Y.textRenderingMode&O.TextRenderingMode.ADD_TO_PATH_FLAG&&((ee=Y.txtElement)!=null&&ee.hasChildNodes())&&(Y.element=Y.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(Y){Y>0&&(this.current.lineWidth=Y)}setLineCap(Y){this.current.lineCap=ce[Y]}setLineJoin(Y){this.current.lineJoin=ue[Y]}setMiterLimit(Y){this.current.miterLimit=Y}setStrokeAlpha(Y){this.current.strokeAlpha=Y}setStrokeRGBColor(Y,ee,Ee){this.current.strokeColor=O.Util.makeHexColor(Y,ee,Ee)}setFillAlpha(Y){this.current.fillAlpha=Y}setFillRGBColor(Y,ee,Ee){this.current.fillColor=O.Util.makeHexColor(Y,ee,Ee),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(Y){this.current.strokeColor=this._makeColorN_Pattern(Y)}setFillColorN(Y){this.current.fillColor=this._makeColorN_Pattern(Y)}shadingFill(Y){const{width:ee,height:Ee}=this.viewport,be=O.Util.inverseTransform(this.transformMatrix),[te,ge,de,Ae]=O.Util.getAxialAlignedBoundingBox([0,0,ee,Ee],be),Fe=this.svgFactory.createElement("svg:rect");Fe.setAttributeNS(null,"x",te),Fe.setAttributeNS(null,"y",ge),Fe.setAttributeNS(null,"width",de-te),Fe.setAttributeNS(null,"height",Ae-ge),Fe.setAttributeNS(null,"fill",this._makeShadingPattern(Y)),this.current.fillAlpha<1&&Fe.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Fe)}_makeColorN_Pattern(Y){return Y[0]==="TilingPattern"?this._makeTilingPattern(Y):this._makeShadingPattern(Y)}_makeTilingPattern(Y){const ee=Y[1],Ee=Y[2],be=Y[3]||O.IDENTITY_MATRIX,[te,ge,de,Ae]=Y[4],Fe=Y[5],ye=Y[6],Te=Y[7],Ue=`shading${ie++}`,[Be,Ce,Qe,at]=O.Util.normalizeRect([...O.Util.applyTransform([te,ge],be),...O.Util.applyTransform([de,Ae],be)]),[ft,_t]=O.Util.singularValueDecompose2dScale(be),xe=Fe*ft,q=ye*_t,ne=this.svgFactory.createElement("svg:pattern");ne.setAttributeNS(null,"id",Ue),ne.setAttributeNS(null,"patternUnits","userSpaceOnUse"),ne.setAttributeNS(null,"width",xe),ne.setAttributeNS(null,"height",q),ne.setAttributeNS(null,"x",`${Be}`),ne.setAttributeNS(null,"y",`${Ce}`);const X=this.svg,le=this.transformMatrix,me=this.current.fillColor,Se=this.current.strokeColor,Pe=this.svgFactory.create(Qe-Be,at-Ce);if(this.svg=Pe,this.transformMatrix=be,Te===2){const Le=O.Util.makeHexColor(...ee);this.current.fillColor=Le,this.current.strokeColor=Le}return this.executeOpTree(this.convertOpList(Ee)),this.svg=X,this.transformMatrix=le,this.current.fillColor=me,this.current.strokeColor=Se,ne.append(Pe.childNodes[0]),this.defs.append(ne),`url(#${Ue})`}_makeShadingPattern(Y){switch(typeof Y=="string"&&(Y=this.objs.get(Y)),Y[0]){case"RadialAxial":const ee=`shading${ie++}`,Ee=Y[3];let be;switch(Y[1]){case"axial":const te=Y[4],ge=Y[5];be=this.svgFactory.createElement("svg:linearGradient"),be.setAttributeNS(null,"id",ee),be.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),be.setAttributeNS(null,"x1",te[0]),be.setAttributeNS(null,"y1",te[1]),be.setAttributeNS(null,"x2",ge[0]),be.setAttributeNS(null,"y2",ge[1]);break;case"radial":const de=Y[4],Ae=Y[5],Fe=Y[6],ye=Y[7];be=this.svgFactory.createElement("svg:radialGradient"),be.setAttributeNS(null,"id",ee),be.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),be.setAttributeNS(null,"cx",Ae[0]),be.setAttributeNS(null,"cy",Ae[1]),be.setAttributeNS(null,"r",ye),be.setAttributeNS(null,"fx",de[0]),be.setAttributeNS(null,"fy",de[1]),be.setAttributeNS(null,"fr",Fe);break;default:throw new Error(`Unknown RadialAxial type: ${Y[1]}`)}for(const te of Ee){const ge=this.svgFactory.createElement("svg:stop");ge.setAttributeNS(null,"offset",te[0]),ge.setAttributeNS(null,"stop-color",te[1]),be.append(ge)}return this.defs.append(be),`url(#${ee})`;case"Mesh":return(0,O.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${Y[0]}`)}}setDash(Y,ee){this.current.dashArray=Y,this.current.dashPhase=ee}constructPath(Y,ee){const Ee=this.current;let be=Ee.x,te=Ee.y,ge=[],de=0;for(const Ae of Y)switch(Ae|0){case O.OPS.rectangle:be=ee[de++],te=ee[de++];const Fe=ee[de++],ye=ee[de++],Te=be+Fe,Ue=te+ye;ge.push("M",ae(be),ae(te),"L",ae(Te),ae(te),"L",ae(Te),ae(Ue),"L",ae(be),ae(Ue),"Z");break;case O.OPS.moveTo:be=ee[de++],te=ee[de++],ge.push("M",ae(be),ae(te));break;case O.OPS.lineTo:be=ee[de++],te=ee[de++],ge.push("L",ae(be),ae(te));break;case O.OPS.curveTo:be=ee[de+4],te=ee[de+5],ge.push("C",ae(ee[de]),ae(ee[de+1]),ae(ee[de+2]),ae(ee[de+3]),ae(be),ae(te)),de+=6;break;case O.OPS.curveTo2:ge.push("C",ae(be),ae(te),ae(ee[de]),ae(ee[de+1]),ae(ee[de+2]),ae(ee[de+3])),be=ee[de+2],te=ee[de+3],de+=4;break;case O.OPS.curveTo3:be=ee[de+2],te=ee[de+3],ge.push("C",ae(ee[de]),ae(ee[de+1]),ae(be),ae(te),ae(be),ae(te)),de+=4;break;case O.OPS.closePath:ge.push("Z");break}ge=ge.join(" "),Ee.path&&Y.length>0&&Y[0]!==O.OPS.rectangle&&Y[0]!==O.OPS.moveTo?ge=Ee.path.getAttributeNS(null,"d")+ge:(Ee.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(Ee.path)),Ee.path.setAttributeNS(null,"d",ge),Ee.path.setAttributeNS(null,"fill","none"),Ee.element=Ee.path,Ee.setCurrentPoint(be,te)}endPath(){const Y=this.current;if(Y.path=null,!this.pendingClip)return;if(!Y.element){this.pendingClip=null;return}const ee=`clippath${V++}`,Ee=this.svgFactory.createElement("svg:clipPath");Ee.setAttributeNS(null,"id",ee),Ee.setAttributeNS(null,"transform",J(this.transformMatrix));const be=Y.element.cloneNode(!0);if(this.pendingClip==="evenodd"?be.setAttributeNS(null,"clip-rule","evenodd"):be.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,Ee.append(be),this.defs.append(Ee),Y.activeClipUrl){Y.clipGroup=null;for(const te of this.extraStack)te.clipGroup=null;Ee.setAttributeNS(null,"clip-path",Y.activeClipUrl)}Y.activeClipUrl=`url(#${ee})`,this.tgrp=null}clip(Y){this.pendingClip=Y}closePath(){const Y=this.current;if(Y.path){const ee=`${Y.path.getAttributeNS(null,"d")}Z`;Y.path.setAttributeNS(null,"d",ee)}}setLeading(Y){this.current.leading=-Y}setTextRise(Y){this.current.textRise=Y}setTextRenderingMode(Y){this.current.textRenderingMode=Y}setHScale(Y){this.current.textHScale=Y/100}setRenderingIntent(Y){}setFlatness(Y){}setGState(Y){for(const[ee,Ee]of Y)switch(ee){case"LW":this.setLineWidth(Ee);break;case"LC":this.setLineCap(Ee);break;case"LJ":this.setLineJoin(Ee);break;case"ML":this.setMiterLimit(Ee);break;case"D":this.setDash(Ee[0],Ee[1]);break;case"RI":this.setRenderingIntent(Ee);break;case"FL":this.setFlatness(Ee);break;case"Font":this.setFont(Ee);break;case"CA":this.setStrokeAlpha(Ee);break;case"ca":this.setFillAlpha(Ee);break;default:(0,O.warn)(`Unimplemented graphic state operator ${ee}`);break}}fill(){const Y=this.current;Y.element&&(Y.element.setAttributeNS(null,"fill",Y.fillColor),Y.element.setAttributeNS(null,"fill-opacity",Y.fillAlpha),this.endPath())}stroke(){const Y=this.current;Y.element&&(this._setStrokeAttributes(Y.element),Y.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(Y,ee=1){const Ee=this.current;let be=Ee.dashArray;ee!==1&&be.length>0&&(be=be.map(function(te){return ee*te})),Y.setAttributeNS(null,"stroke",Ee.strokeColor),Y.setAttributeNS(null,"stroke-opacity",Ee.strokeAlpha),Y.setAttributeNS(null,"stroke-miterlimit",ae(Ee.miterLimit)),Y.setAttributeNS(null,"stroke-linecap",Ee.lineCap),Y.setAttributeNS(null,"stroke-linejoin",Ee.lineJoin),Y.setAttributeNS(null,"stroke-width",ae(ee*Ee.lineWidth)+"px"),Y.setAttributeNS(null,"stroke-dasharray",be.map(ae).join(" ")),Y.setAttributeNS(null,"stroke-dashoffset",ae(ee*Ee.dashPhase)+"px")}eoFill(){var Y;(Y=this.current.element)==null||Y.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var Y;(Y=this.current.element)==null||Y.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const Y=this.svgFactory.createElement("svg:rect");Y.setAttributeNS(null,"x","0"),Y.setAttributeNS(null,"y","0"),Y.setAttributeNS(null,"width","1px"),Y.setAttributeNS(null,"height","1px"),Y.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(Y)}paintImageXObject(Y){const ee=this.getObject(Y);if(!ee){(0,O.warn)(`Dependent image with object ID ${Y} is not ready yet`);return}this.paintInlineImageXObject(ee)}paintInlineImageXObject(Y,ee){const Ee=Y.width,be=Y.height,te=ve(Y,this.forceDataSchema,!!ee),ge=this.svgFactory.createElement("svg:rect");ge.setAttributeNS(null,"x","0"),ge.setAttributeNS(null,"y","0"),ge.setAttributeNS(null,"width",ae(Ee)),ge.setAttributeNS(null,"height",ae(be)),this.current.element=ge,this.clip("nonzero");const de=this.svgFactory.createElement("svg:image");de.setAttributeNS(pe,"xlink:href",te),de.setAttributeNS(null,"x","0"),de.setAttributeNS(null,"y",ae(-be)),de.setAttributeNS(null,"width",ae(Ee)+"px"),de.setAttributeNS(null,"height",ae(be)+"px"),de.setAttributeNS(null,"transform",`scale(${ae(1/Ee)} ${ae(-1/be)})`),ee?ee.append(de):this._ensureTransformGroup().append(de)}paintImageMaskXObject(Y){const ee=this.getObject(Y.data,Y);if(ee.bitmap){(0,O.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const Ee=this.current,be=ee.width,te=ee.height,ge=Ee.fillColor;Ee.maskId=`mask${re++}`;const de=this.svgFactory.createElement("svg:mask");de.setAttributeNS(null,"id",Ee.maskId);const Ae=this.svgFactory.createElement("svg:rect");Ae.setAttributeNS(null,"x","0"),Ae.setAttributeNS(null,"y","0"),Ae.setAttributeNS(null,"width",ae(be)),Ae.setAttributeNS(null,"height",ae(te)),Ae.setAttributeNS(null,"fill",ge),Ae.setAttributeNS(null,"mask",`url(#${Ee.maskId})`),this.defs.append(de),this._ensureTransformGroup().append(Ae),this.paintInlineImageXObject(ee,de)}paintFormXObjectBegin(Y,ee){if(Array.isArray(Y)&&Y.length===6&&this.transform(Y[0],Y[1],Y[2],Y[3],Y[4],Y[5]),ee){const Ee=ee[2]-ee[0],be=ee[3]-ee[1],te=this.svgFactory.createElement("svg:rect");te.setAttributeNS(null,"x",ee[0]),te.setAttributeNS(null,"y",ee[1]),te.setAttributeNS(null,"width",ae(Ee)),te.setAttributeNS(null,"height",ae(be)),this.current.element=te,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(Y){const ee=this.svgFactory.create(Y.width,Y.height),Ee=this.svgFactory.createElement("svg:defs");ee.append(Ee),this.defs=Ee;const be=this.svgFactory.createElement("svg:g");return be.setAttributeNS(null,"transform",J(Y.transform)),ee.append(be),this.svg=be,ee}_ensureClipGroup(){if(!this.current.clipGroup){const Y=this.svgFactory.createElement("svg:g");Y.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(Y),this.current.clipGroup=Y}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",J(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}$.SVGGraphics=se},(A,$)=>{Object.defineProperty($,"__esModule",{value:!0}),$.XfaText=void 0;class B{static textContent(O){const H=[],W={items:H,styles:Object.create(null)};function pe(ce){var ve;if(!ce)return;let ue=null;const G=ce.name;if(G==="#text")ue=ce.value;else if(B.shouldBuildText(G))(ve=ce==null?void 0:ce.attributes)!=null&&ve.textContent?ue=ce.attributes.textContent:ce.value&&(ue=ce.value);else return;if(ue!==null&&H.push({str:ue}),!!ce.children)for(const he of ce.children)pe(he)}return pe(O),W}static shouldBuildText(O){return!(O==="textarea"||O==="input"||O==="option"||O==="select")}}$.XfaText=B},(A,$,B)=>{Object.defineProperty($,"__esModule",{value:!0}),$.TextLayerRenderTask=void 0,$.renderTextLayer=J,$.updateTextLayer=V;var R=B(1),O=B(6);const H=1e5,W=30,pe=.8,ce=new Map;function ue(re,ie){let se;if(ie&&R.FeatureTest.isOffscreenCanvasSupported)se=new OffscreenCanvas(re,re).getContext("2d",{alpha:!1});else{const fe=document.createElement("canvas");fe.width=fe.height=re,se=fe.getContext("2d",{alpha:!1})}return se}function G(re,ie){const se=ce.get(re);if(se)return se;const fe=ue(W,ie);fe.font=`${W}px ${re}`;const Y=fe.measureText("");let ee=Y.fontBoundingBoxAscent,Ee=Math.abs(Y.fontBoundingBoxDescent);if(ee){const te=ee/(ee+Ee);return ce.set(re,te),fe.canvas.width=fe.canvas.height=0,te}fe.strokeStyle="red",fe.clearRect(0,0,W,W),fe.strokeText("g",0,0);let be=fe.getImageData(0,0,W,W).data;Ee=0;for(let te=be.length-1-3;te>=0;te-=4)if(be[te]>0){Ee=Math.ceil(te/4/W);break}fe.clearRect(0,0,W,W),fe.strokeText("A",0,W),be=fe.getImageData(0,0,W,W).data,ee=0;for(let te=0,ge=be.length;te<ge;te+=4)if(be[te]>0){ee=W-Math.floor(te/4/W);break}if(fe.canvas.width=fe.canvas.height=0,ee){const te=ee/(ee+Ee);return ce.set(re,te),te}return ce.set(re,pe),pe}function ve(re,ie,se){const fe=document.createElement("span"),Y={angle:0,canvasWidth:0,hasText:ie.str!=="",hasEOL:ie.hasEOL,fontSize:0};re._textDivs.push(fe);const ee=R.Util.transform(re._transform,ie.transform);let Ee=Math.atan2(ee[1],ee[0]);const be=se[ie.fontName];be.vertical&&(Ee+=Math.PI/2);const te=Math.hypot(ee[2],ee[3]),ge=te*G(be.fontFamily,re._isOffscreenCanvasSupported);let de,Ae;Ee===0?(de=ee[4],Ae=ee[5]-ge):(de=ee[4]+ge*Math.sin(Ee),Ae=ee[5]-ge*Math.cos(Ee));const Fe="calc(var(--scale-factor)*",ye=fe.style;re._container===re._rootContainer?(ye.left=`${(100*de/re._pageWidth).toFixed(2)}%`,ye.top=`${(100*Ae/re._pageHeight).toFixed(2)}%`):(ye.left=`${Fe}${de.toFixed(2)}px)`,ye.top=`${Fe}${Ae.toFixed(2)}px)`),ye.fontSize=`${Fe}${te.toFixed(2)}px)`,ye.fontFamily=be.fontFamily,Y.fontSize=te,fe.setAttribute("role","presentation"),fe.textContent=ie.str,fe.dir=ie.dir,re._fontInspectorEnabled&&(fe.dataset.fontName=ie.fontName),Ee!==0&&(Y.angle=Ee*(180/Math.PI));let Te=!1;if(ie.str.length>1)Te=!0;else if(ie.str!==" "&&ie.transform[0]!==ie.transform[3]){const Ue=Math.abs(ie.transform[0]),Be=Math.abs(ie.transform[3]);Ue!==Be&&Math.max(Ue,Be)/Math.min(Ue,Be)>1.5&&(Te=!0)}Te&&(Y.canvasWidth=be.vertical?ie.height:ie.width),re._textDivProperties.set(fe,Y),re._isReadableStream&&re._layoutText(fe)}function he(re){const{div:ie,scale:se,properties:fe,ctx:Y,prevFontSize:ee,prevFontFamily:Ee}=re,{style:be}=ie;let te="";if(fe.canvasWidth!==0&&fe.hasText){const{fontFamily:ge}=be,{canvasWidth:de,fontSize:Ae}=fe;(ee!==Ae||Ee!==ge)&&(Y.font=`${Ae*se}px ${ge}`,re.prevFontSize=Ae,re.prevFontFamily=ge);const{width:Fe}=Y.measureText(ie.textContent);Fe>0&&(te=`scaleX(${de*se/Fe})`)}fe.angle!==0&&(te=`rotate(${fe.angle}deg) ${te}`),te.length>0&&(be.transform=te)}function oe(re){if(re._canceled)return;const ie=re._textDivs,se=re._capability;if(ie.length>H){se.resolve();return}if(!re._isReadableStream)for(const Y of ie)re._layoutText(Y);se.resolve()}class ae{constructor({textContentSource:ie,container:se,viewport:fe,textDivs:Y,textDivProperties:ee,textContentItemsStr:Ee,isOffscreenCanvasSupported:be}){var Fe;this._textContentSource=ie,this._isReadableStream=ie instanceof ReadableStream,this._container=this._rootContainer=se,this._textDivs=Y||[],this._textContentItemsStr=Ee||[],this._isOffscreenCanvasSupported=be,this._fontInspectorEnabled=!!((Fe=globalThis.FontInspector)!=null&&Fe.enabled),this._reader=null,this._textDivProperties=ee||new WeakMap,this._canceled=!1,this._capability=new R.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:fe.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:ue(0,be)};const{pageWidth:te,pageHeight:ge,pageX:de,pageY:Ae}=fe.rawDims;this._transform=[1,0,0,-1,-de,Ae+ge],this._pageWidth=te,this._pageHeight=ge,(0,O.setLayerDimensions)(se,fe),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new R.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new R.AbortException("TextLayer task cancelled."))}_processItems(ie,se){for(const fe of ie){if(fe.str===void 0){if(fe.type==="beginMarkedContentProps"||fe.type==="beginMarkedContent"){const Y=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),fe.id!==null&&this._container.setAttribute("id",`${fe.id}`),Y.append(this._container)}else fe.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(fe.str),ve(this,fe,se)}}_layoutText(ie){const se=this._layoutTextParams.properties=this._textDivProperties.get(ie);if(this._layoutTextParams.div=ie,he(this._layoutTextParams),se.hasText&&this._container.append(ie),se.hasEOL){const fe=document.createElement("br");fe.setAttribute("role","presentation"),this._container.append(fe)}}_render(){const ie=new R.PromiseCapability;let se=Object.create(null);if(this._isReadableStream){const fe=()=>{this._reader.read().then(({value:Y,done:ee})=>{if(ee){ie.resolve();return}Object.assign(se,Y.styles),this._processItems(Y.items,se),fe()},ie.reject)};this._reader=this._textContentSource.getReader(),fe()}else if(this._textContentSource){const{items:fe,styles:Y}=this._textContentSource;this._processItems(fe,Y),ie.resolve()}else throw new Error('No "textContentSource" parameter specified.');ie.promise.then(()=>{se=null,oe(this)},this._capability.reject)}}$.TextLayerRenderTask=ae;function J(re){!re.textContentSource&&(re.textContent||re.textContentStream)&&((0,O.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),re.textContentSource=re.textContent||re.textContentStream);const{container:ie,viewport:se}=re,fe=getComputedStyle(ie),Y=fe.getPropertyValue("visibility"),ee=parseFloat(fe.getPropertyValue("--scale-factor"));Y==="visible"&&(!ee||Math.abs(ee-se.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const Ee=new ae(re);return Ee._render(),Ee}function V({container:re,viewport:ie,textDivs:se,textDivProperties:fe,isOffscreenCanvasSupported:Y,mustRotate:ee=!0,mustRescale:Ee=!0}){if(ee&&(0,O.setLayerDimensions)(re,{rotation:ie.rotation}),Ee){const be=ue(0,Y),ge={prevFontSize:null,prevFontFamily:null,div:null,scale:ie.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:be};for(const de of se)ge.properties=fe.get(de),ge.div=de,he(ge)}}},(A,$,B)=>{var G,ve,he,oe,ae,J,V,re,ie,se,fe,Ii,ee,Zr,be,Fi,ge,Di;Object.defineProperty($,"__esModule",{value:!0}),$.AnnotationEditorLayer=void 0;var R=B(1),O=B(4),H=B(28),W=B(33),pe=B(6),ce=B(34);const Ae=class Ae{constructor({uiManager:ye,pageIndex:Te,div:Ue,accessibilityManager:Be,annotationLayer:Ce,viewport:Qe,l10n:at}){Oe(this,fe);Oe(this,ee);Oe(this,be);Oe(this,ge);Oe(this,G,void 0);Oe(this,ve,!1);Oe(this,he,null);Oe(this,oe,this.pointerup.bind(this));Oe(this,ae,this.pointerdown.bind(this));Oe(this,J,new Map);Oe(this,V,!1);Oe(this,re,!1);Oe(this,ie,!1);Oe(this,se,void 0);const ft=[H.FreeTextEditor,W.InkEditor,ce.StampEditor];if(!Ae._initialized){Ae._initialized=!0;for(const _t of ft)_t.initialize(at)}ye.registerEditorTypes(ft),it(this,se,ye),this.pageIndex=Te,this.div=Ue,it(this,G,Be),it(this,he,Ce),this.viewport=Qe,U(this,se).addLayer(this)}get isEmpty(){return U(this,J).size===0}updateToolbar(ye){U(this,se).updateToolbar(ye)}updateMode(ye=U(this,se).getMode()){Ge(this,ge,Di).call(this),ye===R.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),ye!==R.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",ye===R.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",ye===R.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",ye===R.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(ye){if(!ye&&U(this,se).getMode()!==R.AnnotationEditorType.INK)return;if(!ye){for(const Ue of U(this,J).values())if(Ue.isEmpty()){Ue.setInBackground();return}}Ge(this,ee,Zr).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(ye){U(this,se).setEditingState(ye)}addCommands(ye){U(this,se).addCommands(ye)}enable(){this.div.style.pointerEvents="auto";const ye=new Set;for(const Ue of U(this,J).values())Ue.enableEditing(),Ue.annotationElementId&&ye.add(Ue.annotationElementId);if(!U(this,he))return;const Te=U(this,he).getEditableAnnotations();for(const Ue of Te){if(Ue.hide(),U(this,se).isDeletedAnnotationElement(Ue.data.id)||ye.has(Ue.data.id))continue;const Be=this.deserialize(Ue);Be&&(this.addOrRebuild(Be),Be.enableEditing())}}disable(){var Te;it(this,ie,!0),this.div.style.pointerEvents="none";const ye=new Set;for(const Ue of U(this,J).values()){if(Ue.disableEditing(),!Ue.annotationElementId||Ue.serialize()!==null){ye.add(Ue.annotationElementId);continue}(Te=this.getEditableAnnotation(Ue.annotationElementId))==null||Te.show(),Ue.remove()}if(U(this,he)){const Ue=U(this,he).getEditableAnnotations();for(const Be of Ue){const{id:Ce}=Be.data;ye.has(Ce)||U(this,se).isDeletedAnnotationElement(Ce)||Be.show()}}Ge(this,ge,Di).call(this),this.isEmpty&&(this.div.hidden=!0),it(this,ie,!1)}getEditableAnnotation(ye){var Te;return((Te=U(this,he))==null?void 0:Te.getEditableAnnotation(ye))||null}setActiveEditor(ye){U(this,se).getActive()!==ye&&U(this,se).setActiveEditor(ye)}enableClick(){this.div.addEventListener("pointerdown",U(this,ae)),this.div.addEventListener("pointerup",U(this,oe))}disableClick(){this.div.removeEventListener("pointerdown",U(this,ae)),this.div.removeEventListener("pointerup",U(this,oe))}attach(ye){U(this,J).set(ye.id,ye);const{annotationElementId:Te}=ye;Te&&U(this,se).isDeletedAnnotationElement(Te)&&U(this,se).removeDeletedAnnotationElement(ye)}detach(ye){var Te;U(this,J).delete(ye.id),(Te=U(this,G))==null||Te.removePointerInTextLayer(ye.contentDiv),!U(this,ie)&&ye.annotationElementId&&U(this,se).addDeletedAnnotationElement(ye)}remove(ye){this.detach(ye),U(this,se).removeEditor(ye),ye.div.contains(document.activeElement)&&setTimeout(()=>{U(this,se).focusMainContainer()},0),ye.div.remove(),ye.isAttachedToDOM=!1,U(this,re)||this.addInkEditorIfNeeded(!1)}changeParent(ye){var Te;ye.parent!==this&&(ye.annotationElementId&&(U(this,se).addDeletedAnnotationElement(ye.annotationElementId),O.AnnotationEditor.deleteAnnotationElement(ye),ye.annotationElementId=null),this.attach(ye),(Te=ye.parent)==null||Te.detach(ye),ye.setParent(this),ye.div&&ye.isAttachedToDOM&&(ye.div.remove(),this.div.append(ye.div)))}add(ye){if(this.changeParent(ye),U(this,se).addEditor(ye),this.attach(ye),!ye.isAttachedToDOM){const Te=ye.render();this.div.append(Te),ye.isAttachedToDOM=!0}ye.fixAndSetPosition(),ye.onceAdded(),U(this,se).addToAnnotationStorage(ye)}moveEditorInDOM(ye){var Ue;if(!ye.isAttachedToDOM)return;const{activeElement:Te}=document;ye.div.contains(Te)&&(ye._focusEventsAllowed=!1,setTimeout(()=>{ye.div.contains(document.activeElement)?ye._focusEventsAllowed=!0:(ye.div.addEventListener("focusin",()=>{ye._focusEventsAllowed=!0},{once:!0}),Te.focus())},0)),ye._structTreeParentId=(Ue=U(this,G))==null?void 0:Ue.moveElementInDOM(this.div,ye.div,ye.contentDiv,!0)}addOrRebuild(ye){ye.needsToBeRebuilt()?ye.rebuild():this.add(ye)}addUndoableEditor(ye){const Te=()=>ye._uiManager.rebuild(ye),Ue=()=>{ye.remove()};this.addCommands({cmd:Te,undo:Ue,mustExec:!1})}getNextId(){return U(this,se).getId()}pasteEditor(ye,Te){U(this,se).updateToolbar(ye),U(this,se).updateMode(ye);const{offsetX:Ue,offsetY:Be}=Ge(this,be,Fi).call(this),Ce=this.getNextId(),Qe=Ge(this,fe,Ii).call(this,{parent:this,id:Ce,x:Ue,y:Be,uiManager:U(this,se),isCentered:!0,...Te});Qe&&this.add(Qe)}deserialize(ye){switch(ye.annotationType??ye.annotationEditorType){case R.AnnotationEditorType.FREETEXT:return H.FreeTextEditor.deserialize(ye,this,U(this,se));case R.AnnotationEditorType.INK:return W.InkEditor.deserialize(ye,this,U(this,se));case R.AnnotationEditorType.STAMP:return ce.StampEditor.deserialize(ye,this,U(this,se))}return null}addNewEditor(){Ge(this,ee,Zr).call(this,Ge(this,be,Fi).call(this),!0)}setSelected(ye){U(this,se).setSelected(ye)}toggleSelected(ye){U(this,se).toggleSelected(ye)}isSelected(ye){return U(this,se).isSelected(ye)}unselect(ye){U(this,se).unselect(ye)}pointerup(ye){const{isMac:Te}=R.FeatureTest.platform;if(!(ye.button!==0||ye.ctrlKey&&Te)&&ye.target===this.div&&U(this,V)){if(it(this,V,!1),!U(this,ve)){it(this,ve,!0);return}if(U(this,se).getMode()===R.AnnotationEditorType.STAMP){U(this,se).unselectAll();return}Ge(this,ee,Zr).call(this,ye,!1)}}pointerdown(ye){if(U(this,V)){it(this,V,!1);return}const{isMac:Te}=R.FeatureTest.platform;if(ye.button!==0||ye.ctrlKey&&Te||ye.target!==this.div)return;it(this,V,!0);const Ue=U(this,se).getActive();it(this,ve,!Ue||Ue.isEmpty())}findNewParent(ye,Te,Ue){const Be=U(this,se).findParent(Te,Ue);return Be===null||Be===this?!1:(Be.changeParent(ye),!0)}destroy(){var ye,Te;((ye=U(this,se).getActive())==null?void 0:ye.parent)===this&&(U(this,se).commitOrRemove(),U(this,se).setActiveEditor(null));for(const Ue of U(this,J).values())(Te=U(this,G))==null||Te.removePointerInTextLayer(Ue.contentDiv),Ue.setParent(null),Ue.isAttachedToDOM=!1,Ue.div.remove();this.div=null,U(this,J).clear(),U(this,se).removeLayer(this)}render({viewport:ye}){this.viewport=ye,(0,pe.setLayerDimensions)(this.div,ye);for(const Te of U(this,se).getEditors(this.pageIndex))this.add(Te);this.updateMode()}update({viewport:ye}){U(this,se).commitOrRemove(),this.viewport=ye,(0,pe.setLayerDimensions)(this.div,{rotation:ye.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:ye,pageHeight:Te}=this.viewport.rawDims;return[ye,Te]}};G=new WeakMap,ve=new WeakMap,he=new WeakMap,oe=new WeakMap,ae=new WeakMap,J=new WeakMap,V=new WeakMap,re=new WeakMap,ie=new WeakMap,se=new WeakMap,fe=new WeakSet,Ii=function(ye){switch(U(this,se).getMode()){case R.AnnotationEditorType.FREETEXT:return new H.FreeTextEditor(ye);case R.AnnotationEditorType.INK:return new W.InkEditor(ye);case R.AnnotationEditorType.STAMP:return new ce.StampEditor(ye)}return null},ee=new WeakSet,Zr=function(ye,Te){const Ue=this.getNextId(),Be=Ge(this,fe,Ii).call(this,{parent:this,id:Ue,x:ye.offsetX,y:ye.offsetY,uiManager:U(this,se),isCentered:Te});return Be&&this.add(Be),Be},be=new WeakSet,Fi=function(){const{x:ye,y:Te,width:Ue,height:Be}=this.div.getBoundingClientRect(),Ce=Math.max(0,ye),Qe=Math.max(0,Te),at=Math.min(window.innerWidth,ye+Ue),ft=Math.min(window.innerHeight,Te+Be),_t=(Ce+at)/2-ye,xe=(Qe+ft)/2-Te,[q,ne]=this.viewport.rotation%180===0?[_t,xe]:[xe,_t];return{offsetX:q,offsetY:ne}},ge=new WeakSet,Di=function(){it(this,re,!0);for(const ye of U(this,J).values())ye.isEmpty()&&ye.remove();it(this,re,!1)},Fn(Ae,"_initialized",!1);let ue=Ae;$.AnnotationEditorLayer=ue},(A,$,B)=>{var ce,ue,G,ve,he,oe,ae,J,V,re,Ca,se,ka,Y,$a,Ee,Ir,te,Ni,de,Ma,Fe,ji;Object.defineProperty($,"__esModule",{value:!0}),$.FreeTextEditor=void 0;var R=B(1),O=B(5),H=B(4),W=B(29);const Te=class Te extends H.AnnotationEditor{constructor(Ce){super({...Ce,name:"freeTextEditor"});Oe(this,re);Oe(this,se);Oe(this,Y);Oe(this,Ee);Oe(this,te);Oe(this,de);Oe(this,Fe);Oe(this,ce,this.editorDivBlur.bind(this));Oe(this,ue,this.editorDivFocus.bind(this));Oe(this,G,this.editorDivInput.bind(this));Oe(this,ve,this.editorDivKeydown.bind(this));Oe(this,he,void 0);Oe(this,oe,"");Oe(this,ae,`${this.id}-editor`);Oe(this,J,void 0);Oe(this,V,null);it(this,he,Ce.color||Te._defaultColor||H.AnnotationEditor._defaultLineColor),it(this,J,Ce.fontSize||Te._defaultFontSize)}static get _keyboardManager(){const Ce=Te.prototype,Qe=_t=>_t.isEmpty(),at=O.AnnotationEditorUIManager.TRANSLATE_SMALL,ft=O.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,R.shadow)(this,"_keyboardManager",new O.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],Ce.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Ce.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],Ce._translateEmpty,{args:[-at,0],checker:Qe}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Ce._translateEmpty,{args:[-ft,0],checker:Qe}],[["ArrowRight","mac+ArrowRight"],Ce._translateEmpty,{args:[at,0],checker:Qe}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Ce._translateEmpty,{args:[ft,0],checker:Qe}],[["ArrowUp","mac+ArrowUp"],Ce._translateEmpty,{args:[0,-at],checker:Qe}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Ce._translateEmpty,{args:[0,-ft],checker:Qe}],[["ArrowDown","mac+ArrowDown"],Ce._translateEmpty,{args:[0,at],checker:Qe}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Ce._translateEmpty,{args:[0,ft],checker:Qe}]]))}static initialize(Ce){H.AnnotationEditor.initialize(Ce,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const Qe=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Qe.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Ce,Qe){switch(Ce){case R.AnnotationEditorParamsType.FREETEXT_SIZE:Te._defaultFontSize=Qe;break;case R.AnnotationEditorParamsType.FREETEXT_COLOR:Te._defaultColor=Qe;break}}updateParams(Ce,Qe){switch(Ce){case R.AnnotationEditorParamsType.FREETEXT_SIZE:Ge(this,re,Ca).call(this,Qe);break;case R.AnnotationEditorParamsType.FREETEXT_COLOR:Ge(this,se,ka).call(this,Qe);break}}static get defaultPropertiesToUpdate(){return[[R.AnnotationEditorParamsType.FREETEXT_SIZE,Te._defaultFontSize],[R.AnnotationEditorParamsType.FREETEXT_COLOR,Te._defaultColor||H.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[R.AnnotationEditorParamsType.FREETEXT_SIZE,U(this,J)],[R.AnnotationEditorParamsType.FREETEXT_COLOR,U(this,he)]]}_translateEmpty(Ce,Qe){this._uiManager.translateSelectedEditors(Ce,Qe,!0)}getInitialTranslation(){const Ce=this.parentScale;return[-Te._internalPadding*Ce,-(Te._internalPadding+U(this,J))*Ce]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(R.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",U(this,ve)),this.editorDiv.addEventListener("focus",U(this,ue)),this.editorDiv.addEventListener("blur",U(this,ce)),this.editorDiv.addEventListener("input",U(this,G)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",U(this,ae)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",U(this,ve)),this.editorDiv.removeEventListener("focus",U(this,ue)),this.editorDiv.removeEventListener("blur",U(this,ce)),this.editorDiv.removeEventListener("input",U(this,G)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Ce){this._focusEventsAllowed&&(super.focusin(Ce),Ce.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var Ce;if(this.width){Ge(this,Fe,ji).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(Ce=this._initialOptions)!=null&&Ce.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const Ce=U(this,oe),Qe=it(this,oe,Ge(this,Y,$a).call(this).trimEnd());if(Ce===Qe)return;const at=ft=>{if(it(this,oe,ft),!ft){this.remove();return}Ge(this,te,Ni).call(this),this._uiManager.rebuild(this),Ge(this,Ee,Ir).call(this)};this.addCommands({cmd:()=>{at(Qe)},undo:()=>{at(Ce)},mustExec:!1}),Ge(this,Ee,Ir).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(Ce){this.enterInEditMode()}keydown(Ce){Ce.target===this.div&&Ce.key==="Enter"&&(this.enterInEditMode(),Ce.preventDefault())}editorDivKeydown(Ce){Te._keyboardManager.exec(this,Ce)}editorDivFocus(Ce){this.isEditing=!0}editorDivBlur(Ce){this.isEditing=!1}editorDivInput(Ce){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Ce,Qe;this.width&&(Ce=this.x,Qe=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",U(this,ae)),this.enableEditing(),H.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(ft=>{var _t;return(_t=this.editorDiv)==null?void 0:_t.setAttribute("aria-label",ft)}),H.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(ft=>{var _t;return(_t=this.editorDiv)==null?void 0:_t.setAttribute("default-content",ft)}),this.editorDiv.contentEditable=!0;const{style:at}=this.editorDiv;if(at.fontSize=`calc(${U(this,J)}px * var(--scale-factor))`,at.color=U(this,he),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,O.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[ft,_t]=this.parentDimensions;if(this.annotationElementId){const{position:xe}=U(this,V);let[q,ne]=this.getInitialTranslation();[q,ne]=this.pageTranslationToScreen(q,ne);const[X,le]=this.pageDimensions,[me,Se]=this.pageTranslation;let Pe,Le;switch(this.rotation){case 0:Pe=Ce+(xe[0]-me)/X,Le=Qe+this.height-(xe[1]-Se)/le;break;case 90:Pe=Ce+(xe[0]-me)/X,Le=Qe-(xe[1]-Se)/le,[q,ne]=[ne,-q];break;case 180:Pe=Ce-this.width+(xe[0]-me)/X,Le=Qe-(xe[1]-Se)/le,[q,ne]=[-q,-ne];break;case 270:Pe=Ce+(xe[0]-me-this.height*le)/X,Le=Qe+(xe[1]-Se-this.width*X)/le,[q,ne]=[-ne,q];break}this.setAt(Pe*ft,Le*_t,q,ne)}else this.setAt(Ce*ft,Qe*_t,this.width*ft,this.height*_t);Ge(this,te,Ni).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Ce,Qe,at){let ft=null;if(Ce instanceof W.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:xe,fontColor:q},rect:ne,rotation:X,id:le},textContent:me,textPosition:Se,parent:{page:{pageNumber:Pe}}}=Ce;if(!me||me.length===0)return null;ft=Ce={annotationType:R.AnnotationEditorType.FREETEXT,color:Array.from(q),fontSize:xe,value:me.join(`
`),position:Se,pageIndex:Pe-1,rect:ne,rotation:X,id:le,deleted:!1}}const _t=super.deserialize(Ce,Qe,at);return it(_t,J,Ce.fontSize),it(_t,he,R.Util.makeHexColor(...Ce.color)),it(_t,oe,Ce.value),_t.annotationElementId=Ce.id||null,it(_t,V,ft),_t}serialize(Ce=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Qe=Te._internalPadding*this.parentScale,at=this.getRect(Qe,Qe),ft=H.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:U(this,he)),_t={annotationType:R.AnnotationEditorType.FREETEXT,color:ft,fontSize:U(this,J),value:U(this,oe),pageIndex:this.pageIndex,rect:at,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return Ce?_t:this.annotationElementId&&!Ge(this,de,Ma).call(this,_t)?null:(_t.id=this.annotationElementId,_t)}};ce=new WeakMap,ue=new WeakMap,G=new WeakMap,ve=new WeakMap,he=new WeakMap,oe=new WeakMap,ae=new WeakMap,J=new WeakMap,V=new WeakMap,re=new WeakSet,Ca=function(Ce){const Qe=ft=>{this.editorDiv.style.fontSize=`calc(${ft}px * var(--scale-factor))`,this.translate(0,-(ft-U(this,J))*this.parentScale),it(this,J,ft),Ge(this,Ee,Ir).call(this)},at=U(this,J);this.addCommands({cmd:()=>{Qe(Ce)},undo:()=>{Qe(at)},mustExec:!0,type:R.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},se=new WeakSet,ka=function(Ce){const Qe=U(this,he);this.addCommands({cmd:()=>{it(this,he,this.editorDiv.style.color=Ce)},undo:()=>{it(this,he,this.editorDiv.style.color=Qe)},mustExec:!0,type:R.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Y=new WeakSet,$a=function(){const Ce=this.editorDiv.getElementsByTagName("div");if(Ce.length===0)return this.editorDiv.innerText;const Qe=[];for(const at of Ce)Qe.push(at.innerText.replace(/\r\n?|\n/,""));return Qe.join(`
`)},Ee=new WeakSet,Ir=function(){const[Ce,Qe]=this.parentDimensions;let at;if(this.isAttachedToDOM)at=this.div.getBoundingClientRect();else{const{currentLayer:ft,div:_t}=this,xe=_t.style.display;_t.style.display="hidden",ft.div.append(this.div),at=_t.getBoundingClientRect(),_t.remove(),_t.style.display=xe}this.rotation%180===this.parentRotation%180?(this.width=at.width/Ce,this.height=at.height/Qe):(this.width=at.height/Ce,this.height=at.width/Qe),this.fixAndSetPosition()},te=new WeakSet,Ni=function(){if(this.editorDiv.replaceChildren(),!!U(this,oe))for(const Ce of U(this,oe).split(`
`)){const Qe=document.createElement("div");Qe.append(Ce?document.createTextNode(Ce):document.createElement("br")),this.editorDiv.append(Qe)}},de=new WeakSet,Ma=function(Ce){const{value:Qe,fontSize:at,color:ft,rect:_t,pageIndex:xe}=U(this,V);return Ce.value!==Qe||Ce.fontSize!==at||Ce.rect.some((q,ne)=>Math.abs(q-_t[ne])>=1)||Ce.color.some((q,ne)=>q!==ft[ne])||Ce.pageIndex!==xe},Fe=new WeakSet,ji=function(Ce=!1){if(!this.annotationElementId)return;if(Ge(this,Ee,Ir).call(this),!Ce&&(this.width===0||this.height===0)){setTimeout(()=>Ge(this,Fe,ji).call(this,!0),0);return}const Qe=Te._internalPadding*this.parentScale;U(this,V).rect=this.getRect(Qe,Qe)},Fn(Te,"_freeTextDefaultContent",""),Fn(Te,"_internalPadding",0),Fn(Te,"_defaultColor",null),Fn(Te,"_defaultFontSize",10),Fn(Te,"_type","freetext");let pe=Te;$.FreeTextEditor=pe},(A,$,B)=>{var ne,le,_r,Se,Ta,Le,Ke,Ve,rt,lt,gt,dt,pt,vt,mt,Mt,st,Xe,qe,ut,Pt,At,Ut,Ra,Dt,Jr,en,Bi,ln,zi,Ie,Re,ht,ct,an,_n,Ye,Hi,Nt,$t,Bt,Ht,La,wt,Ui;Object.defineProperty($,"__esModule",{value:!0}),$.StampAnnotationElement=$.InkAnnotationElement=$.FreeTextAnnotationElement=$.AnnotationLayer=void 0;var R=B(1),O=B(6),H=B(3),W=B(30),pe=B(31),ce=B(32);const ue=1e3,G=9,ve=new WeakSet;function he(jt){return{width:jt[2]-jt[0],height:jt[3]-jt[1]}}class oe{static create($e){switch($e.data.annotationType){case R.AnnotationType.LINK:return new J($e);case R.AnnotationType.TEXT:return new V($e);case R.AnnotationType.WIDGET:switch($e.data.fieldType){case"Tx":return new ie($e);case"Btn":return $e.data.radioButton?new Y($e):$e.data.checkBox?new fe($e):new ee($e);case"Ch":return new Ee($e);case"Sig":return new se($e)}return new re($e);case R.AnnotationType.POPUP:return new be($e);case R.AnnotationType.FREETEXT:return new ge($e);case R.AnnotationType.LINE:return new de($e);case R.AnnotationType.SQUARE:return new Ae($e);case R.AnnotationType.CIRCLE:return new Fe($e);case R.AnnotationType.POLYLINE:return new ye($e);case R.AnnotationType.CARET:return new Ue($e);case R.AnnotationType.INK:return new Be($e);case R.AnnotationType.POLYGON:return new Te($e);case R.AnnotationType.HIGHLIGHT:return new Ce($e);case R.AnnotationType.UNDERLINE:return new Qe($e);case R.AnnotationType.SQUIGGLY:return new at($e);case R.AnnotationType.STRIKEOUT:return new ft($e);case R.AnnotationType.STAMP:return new _t($e);case R.AnnotationType.FILEATTACHMENT:return new xe($e);default:return new ae($e)}}}const X=class X{constructor($e,{isRenderable:K=!1,ignoreBorder:we=!1,createQuadrilaterals:Me=!1}={}){Oe(this,ne,!1);this.isRenderable=K,this.data=$e.data,this.layer=$e.layer,this.linkService=$e.linkService,this.downloadManager=$e.downloadManager,this.imageResourcesPath=$e.imageResourcesPath,this.renderForms=$e.renderForms,this.svgFactory=$e.svgFactory,this.annotationStorage=$e.annotationStorage,this.enableScripting=$e.enableScripting,this.hasJSActions=$e.hasJSActions,this._fieldObjects=$e.fieldObjects,this.parent=$e.parent,K&&(this.container=this._createContainer(we)),Me&&this._createQuadrilaterals()}static _hasPopupData({titleObj:$e,contentsObj:K,richText:we}){return!!($e!=null&&$e.str||K!=null&&K.str||we!=null&&we.str)}get hasPopupData(){return X._hasPopupData(this.data)}_createContainer($e){const{data:K,parent:{page:we,viewport:Me}}=this,ze=document.createElement("section");ze.setAttribute("data-annotation-id",K.id),this instanceof re||(ze.tabIndex=ue),ze.style.zIndex=this.parent.zIndex++,this.data.popupRef&&ze.setAttribute("aria-haspopup","dialog"),K.noRotate&&ze.classList.add("norotate");const{pageWidth:Ze,pageHeight:ot,pageX:Et,pageY:Lt}=Me.rawDims;if(!K.rect||this instanceof be){const{rotation:Yt}=K;return!K.hasOwnCanvas&&Yt!==0&&this.setRotation(Yt,ze),ze}const{width:Tt,height:nn}=he(K.rect),It=R.Util.normalizeRect([K.rect[0],we.view[3]-K.rect[1]+we.view[1],K.rect[2],we.view[3]-K.rect[3]+we.view[1]]);if(!$e&&K.borderStyle.width>0){ze.style.borderWidth=`${K.borderStyle.width}px`;const Yt=K.borderStyle.horizontalCornerRadius,un=K.borderStyle.verticalCornerRadius;if(Yt>0||un>0){const An=`calc(${Yt}px * var(--scale-factor)) / calc(${un}px * var(--scale-factor))`;ze.style.borderRadius=An}else if(this instanceof Y){const An=`calc(${Tt}px * var(--scale-factor)) / calc(${nn}px * var(--scale-factor))`;ze.style.borderRadius=An}switch(K.borderStyle.style){case R.AnnotationBorderStyleType.SOLID:ze.style.borderStyle="solid";break;case R.AnnotationBorderStyleType.DASHED:ze.style.borderStyle="dashed";break;case R.AnnotationBorderStyleType.BEVELED:(0,R.warn)("Unimplemented border style: beveled");break;case R.AnnotationBorderStyleType.INSET:(0,R.warn)("Unimplemented border style: inset");break;case R.AnnotationBorderStyleType.UNDERLINE:ze.style.borderBottomStyle="solid";break}const yn=K.borderColor||null;yn?(it(this,ne,!0),ze.style.borderColor=R.Util.makeHexColor(yn[0]|0,yn[1]|0,yn[2]|0)):ze.style.borderWidth=0}ze.style.left=`${100*(It[0]-Et)/Ze}%`,ze.style.top=`${100*(It[1]-Lt)/ot}%`;const{rotation:Ft}=K;return K.hasOwnCanvas||Ft===0?(ze.style.width=`${100*Tt/Ze}%`,ze.style.height=`${100*nn/ot}%`):this.setRotation(Ft,ze),ze}setRotation($e,K=this.container){if(!this.data.rect)return;const{pageWidth:we,pageHeight:Me}=this.parent.viewport.rawDims,{width:ze,height:Ze}=he(this.data.rect);let ot,Et;$e%180===0?(ot=100*ze/we,Et=100*Ze/Me):(ot=100*Ze/we,Et=100*ze/Me),K.style.width=`${ot}%`,K.style.height=`${Et}%`,K.setAttribute("data-main-rotation",(360-$e)%360)}get _commonActions(){const $e=(K,we,Me)=>{const ze=Me.detail[K],Ze=ze[0],ot=ze.slice(1);Me.target.style[we]=W.ColorConverters[`${Ze}_HTML`](ot),this.annotationStorage.setValue(this.data.id,{[we]:W.ColorConverters[`${Ze}_rgb`](ot)})};return(0,R.shadow)(this,"_commonActions",{display:K=>{const{display:we}=K.detail,Me=we%2===1;this.container.style.visibility=Me?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Me,noPrint:we===1||we===2})},print:K=>{this.annotationStorage.setValue(this.data.id,{noPrint:!K.detail.print})},hidden:K=>{const{hidden:we}=K.detail;this.container.style.visibility=we?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:we,noView:we})},focus:K=>{setTimeout(()=>K.target.focus({preventScroll:!1}),0)},userName:K=>{K.target.title=K.detail.userName},readonly:K=>{K.target.disabled=K.detail.readonly},required:K=>{this._setRequired(K.target,K.detail.required)},bgColor:K=>{$e("bgColor","backgroundColor",K)},fillColor:K=>{$e("fillColor","backgroundColor",K)},fgColor:K=>{$e("fgColor","color",K)},textColor:K=>{$e("textColor","color",K)},borderColor:K=>{$e("borderColor","borderColor",K)},strokeColor:K=>{$e("strokeColor","borderColor",K)},rotation:K=>{const we=K.detail.rotation;this.setRotation(we),this.annotationStorage.setValue(this.data.id,{rotation:we})}})}_dispatchEventFromSandbox($e,K){const we=this._commonActions;for(const Me of Object.keys(K.detail)){const ze=$e[Me]||we[Me];ze==null||ze(K)}}_setDefaultPropertiesFromJS($e){if(!this.enableScripting)return;const K=this.annotationStorage.getRawValue(this.data.id);if(!K)return;const we=this._commonActions;for(const[Me,ze]of Object.entries(K)){const Ze=we[Me];if(Ze){const ot={detail:{[Me]:ze},target:$e};Ze(ot),delete K[Me]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:$e}=this.data;if(!$e)return;const[K,we,Me,ze]=this.data.rect;if($e.length===1){const[,{x:un,y:yn},{x:An,y:Gn}]=$e[0];if(Me===un&&ze===yn&&K===An&&we===Gn)return}const{style:Ze}=this.container;let ot;if(U(this,ne)){const{borderColor:un,borderWidth:yn}=Ze;Ze.borderWidth=0,ot=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${un}" stroke-width="${yn}">`],this.container.classList.add("hasBorder")}const Et=Me-K,Lt=ze-we,{svgFactory:Tt}=this,nn=Tt.createElement("svg");nn.classList.add("quadrilateralsContainer"),nn.setAttribute("width",0),nn.setAttribute("height",0);const It=Tt.createElement("defs");nn.append(It);const Ft=Tt.createElement("clipPath"),Yt=`clippath_${this.data.id}`;Ft.setAttribute("id",Yt),Ft.setAttribute("clipPathUnits","objectBoundingBox"),It.append(Ft);for(const[,{x:un,y:yn},{x:An,y:Gn}]of $e){const Dn=Tt.createElement("rect"),tr=(An-K)/Et,rr=(ze-yn)/Lt,cr=(un-An)/Et,Nr=(yn-Gn)/Lt;Dn.setAttribute("x",tr),Dn.setAttribute("y",rr),Dn.setAttribute("width",cr),Dn.setAttribute("height",Nr),Ft.append(Dn),ot==null||ot.push(`<rect vector-effect="non-scaling-stroke" x="${tr}" y="${rr}" width="${cr}" height="${Nr}"/>`)}U(this,ne)&&(ot.push("</g></svg>')"),Ze.backgroundImage=ot.join("")),this.container.append(nn),this.container.style.clipPath=`url(#${Yt})`}_createPopup(){const{container:$e,data:K}=this;$e.setAttribute("aria-haspopup","dialog");const we=new be({data:{color:K.color,titleObj:K.titleObj,modificationDate:K.modificationDate,contentsObj:K.contentsObj,richText:K.richText,parentRect:K.rect,borderStyle:0,id:`popup_${K.id}`,rotation:K.rotation},parent:this.parent,elements:[this]});this.parent.div.append(we.render())}render(){(0,R.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName($e,K=null){const we=[];if(this._fieldObjects){const Me=this._fieldObjects[$e];if(Me)for(const{page:ze,id:Ze,exportValues:ot}of Me){if(ze===-1||Ze===K)continue;const Et=typeof ot=="string"?ot:null,Lt=document.querySelector(`[data-element-id="${Ze}"]`);if(Lt&&!ve.has(Lt)){(0,R.warn)(`_getElementsByName - element not allowed: ${Ze}`);continue}we.push({id:Ze,exportValue:Et,domElement:Lt})}return we}for(const Me of document.getElementsByName($e)){const{exportValue:ze}=Me,Ze=Me.getAttribute("data-element-id");Ze!==K&&ve.has(Me)&&we.push({id:Ze,exportValue:ze,domElement:Me})}return we}show(){var $e;this.container&&(this.container.hidden=!1),($e=this.popup)==null||$e.maybeShow()}hide(){var $e;this.container&&(this.container.hidden=!0),($e=this.popup)==null||$e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const $e=this.getElementsToTriggerPopup();if(Array.isArray($e))for(const K of $e)K.classList.add("highlightArea");else $e.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:$e,data:{id:K}}=this;this.container.addEventListener("dblclick",()=>{var we;(we=this.linkService.eventBus)==null||we.dispatch("switchannotationeditormode",{source:this,mode:$e,editId:K})})}};ne=new WeakMap;let ae=X;class J extends ae{constructor(K,we=null){super(K,{isRenderable:!0,ignoreBorder:!!(we!=null&&we.ignoreBorder),createQuadrilaterals:!0});Oe(this,le);Oe(this,Se);this.isTooltipOnly=K.data.isTooltipOnly}render(){const{data:K,linkService:we}=this,Me=document.createElement("a");Me.setAttribute("data-element-id",K.id);let ze=!1;return K.url?(we.addLinkAttributes(Me,K.url,K.newWindow),ze=!0):K.action?(this._bindNamedAction(Me,K.action),ze=!0):K.attachment?(this._bindAttachment(Me,K.attachment),ze=!0):K.setOCGState?(Ge(this,Se,Ta).call(this,Me,K.setOCGState),ze=!0):K.dest?(this._bindLink(Me,K.dest),ze=!0):(K.actions&&(K.actions.Action||K.actions["Mouse Up"]||K.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Me,K),ze=!0),K.resetForm?(this._bindResetFormAction(Me,K.resetForm),ze=!0):this.isTooltipOnly&&!ze&&(this._bindLink(Me,""),ze=!0)),this.container.classList.add("linkAnnotation"),ze&&this.container.append(Me),this.container}_bindLink(K,we){K.href=this.linkService.getDestinationHash(we),K.onclick=()=>(we&&this.linkService.goToDestination(we),!1),(we||we==="")&&Ge(this,le,_r).call(this)}_bindNamedAction(K,we){K.href=this.linkService.getAnchorUrl(""),K.onclick=()=>(this.linkService.executeNamedAction(we),!1),Ge(this,le,_r).call(this)}_bindAttachment(K,we){K.href=this.linkService.getAnchorUrl(""),K.onclick=()=>{var Me;return(Me=this.downloadManager)==null||Me.openOrDownloadData(this.container,we.content,we.filename),!1},Ge(this,le,_r).call(this)}_bindJSAction(K,we){K.href=this.linkService.getAnchorUrl("");const Me=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const ze of Object.keys(we.actions)){const Ze=Me.get(ze);Ze&&(K[Ze]=()=>{var ot;return(ot=this.linkService.eventBus)==null||ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:we.id,name:ze}}),!1})}K.onclick||(K.onclick=()=>!1),Ge(this,le,_r).call(this)}_bindResetFormAction(K,we){const Me=K.onclick;if(Me||(K.href=this.linkService.getAnchorUrl("")),Ge(this,le,_r).call(this),!this._fieldObjects){(0,R.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Me||(K.onclick=()=>!1);return}K.onclick=()=>{var nn;Me==null||Me();const{fields:ze,refs:Ze,include:ot}=we,Et=[];if(ze.length!==0||Ze.length!==0){const It=new Set(Ze);for(const Ft of ze){const Yt=this._fieldObjects[Ft]||[];for(const{id:un}of Yt)It.add(un)}for(const Ft of Object.values(this._fieldObjects))for(const Yt of Ft)It.has(Yt.id)===ot&&Et.push(Yt)}else for(const It of Object.values(this._fieldObjects))Et.push(...It);const Lt=this.annotationStorage,Tt=[];for(const It of Et){const{id:Ft}=It;switch(Tt.push(Ft),It.type){case"text":{const un=It.defaultValue||"";Lt.setValue(Ft,{value:un});break}case"checkbox":case"radiobutton":{const un=It.defaultValue===It.exportValues;Lt.setValue(Ft,{value:un});break}case"combobox":case"listbox":{const un=It.defaultValue||"";Lt.setValue(Ft,{value:un});break}default:continue}const Yt=document.querySelector(`[data-element-id="${Ft}"]`);if(Yt){if(!ve.has(Yt)){(0,R.warn)(`_bindResetFormAction - element not allowed: ${Ft}`);continue}}else continue;Yt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((nn=this.linkService.eventBus)==null||nn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Tt,name:"ResetForm"}})),!1}}}le=new WeakSet,_r=function(){this.container.setAttribute("data-internal-link","")},Se=new WeakSet,Ta=function(K,we){K.href=this.linkService.getAnchorUrl(""),K.onclick=()=>(this.linkService.executeSetOCGState(we),!1),Ge(this,le,_r).call(this)};class V extends ae{constructor($e){super($e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const $e=document.createElement("img");return $e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",$e.alt="[{{type}} Annotation]",$e.dataset.l10nId="text_annotation_type",$e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append($e),this.container}}class re extends ae{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas($e){var K;this.data.hasOwnCanvas&&(((K=$e.previousSibling)==null?void 0:K.nodeName)==="CANVAS"&&($e.previousSibling.hidden=!0),$e.hidden=!1)}_getKeyModifier($e){const{isWin:K,isMac:we}=R.FeatureTest.platform;return K&&$e.ctrlKey||we&&$e.metaKey}_setEventListener($e,K,we,Me,ze){we.includes("mouse")?$e.addEventListener(we,Ze=>{var ot;(ot=this.linkService.eventBus)==null||ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Me,value:ze(Ze),shift:Ze.shiftKey,modifier:this._getKeyModifier(Ze)}})}):$e.addEventListener(we,Ze=>{var ot;if(we==="blur"){if(!K.focused||!Ze.relatedTarget)return;K.focused=!1}else if(we==="focus"){if(K.focused)return;K.focused=!0}ze&&((ot=this.linkService.eventBus)==null||ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Me,value:ze(Ze)}}))})}_setEventListeners($e,K,we,Me){var ze,Ze,ot;for(const[Et,Lt]of we)(Lt==="Action"||(ze=this.data.actions)!=null&&ze[Lt])&&((Lt==="Focus"||Lt==="Blur")&&(K||(K={focused:!1})),this._setEventListener($e,K,Et,Lt,Me),Lt==="Focus"&&!((Ze=this.data.actions)!=null&&Ze.Blur)?this._setEventListener($e,K,"blur","Blur",null):Lt==="Blur"&&!((ot=this.data.actions)!=null&&ot.Focus)&&this._setEventListener($e,K,"focus","Focus",null))}_setBackgroundColor($e){const K=this.data.backgroundColor||null;$e.style.backgroundColor=K===null?"transparent":R.Util.makeHexColor(K[0],K[1],K[2])}_setTextStyle($e){const K=["left","center","right"],{fontColor:we}=this.data.defaultAppearanceData,Me=this.data.defaultAppearanceData.fontSize||G,ze=$e.style;let Ze;const ot=2,Et=Lt=>Math.round(10*Lt)/10;if(this.data.multiLine){const Lt=Math.abs(this.data.rect[3]-this.data.rect[1]-ot),Tt=Math.round(Lt/(R.LINE_FACTOR*Me))||1,nn=Lt/Tt;Ze=Math.min(Me,Et(nn/R.LINE_FACTOR))}else{const Lt=Math.abs(this.data.rect[3]-this.data.rect[1]-ot);Ze=Math.min(Me,Et(Lt/R.LINE_FACTOR))}ze.fontSize=`calc(${Ze}px * var(--scale-factor))`,ze.color=R.Util.makeHexColor(we[0],we[1],we[2]),this.data.textAlignment!==null&&(ze.textAlign=K[this.data.textAlignment])}_setRequired($e,K){K?$e.setAttribute("required",!0):$e.removeAttribute("required"),$e.setAttribute("aria-required",K)}}class ie extends re{constructor($e){const K=$e.renderForms||!$e.data.hasAppearance&&!!$e.data.fieldValue;super($e,{isRenderable:K})}setPropertyOnSiblings($e,K,we,Me){const ze=this.annotationStorage;for(const Ze of this._getElementsByName($e.name,$e.id))Ze.domElement&&(Ze.domElement[K]=we),ze.setValue(Ze.id,{[Me]:we})}render(){var Me,ze;const $e=this.annotationStorage,K=this.data.id;this.container.classList.add("textWidgetAnnotation");let we=null;if(this.renderForms){const Ze=$e.getValue(K,{value:this.data.fieldValue});let ot=Ze.value||"";const Et=$e.getValue(K,{charLimit:this.data.maxLen}).charLimit;Et&&ot.length>Et&&(ot=ot.slice(0,Et));let Lt=Ze.formattedValue||((Me=this.data.textContent)==null?void 0:Me.join(`
`))||null;Lt&&this.data.comb&&(Lt=Lt.replaceAll(/\s+/g,""));const Tt={userValue:ot,formattedValue:Lt,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(we=document.createElement("textarea"),we.textContent=Lt??ot,this.data.doNotScroll&&(we.style.overflowY="hidden")):(we=document.createElement("input"),we.type="text",we.setAttribute("value",Lt??ot),this.data.doNotScroll&&(we.style.overflowX="hidden")),this.data.hasOwnCanvas&&(we.hidden=!0),ve.add(we),we.setAttribute("data-element-id",K),we.disabled=this.data.readOnly,we.name=this.data.fieldName,we.tabIndex=ue,this._setRequired(we,this.data.required),Et&&(we.maxLength=Et),we.addEventListener("input",It=>{$e.setValue(K,{value:It.target.value}),this.setPropertyOnSiblings(we,"value",It.target.value,"value"),Tt.formattedValue=null}),we.addEventListener("resetform",It=>{const Ft=this.data.defaultFieldValue??"";we.value=Tt.userValue=Ft,Tt.formattedValue=null});let nn=It=>{const{formattedValue:Ft}=Tt;Ft!=null&&(It.target.value=Ft),It.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){we.addEventListener("focus",Ft=>{if(Tt.focused)return;const{target:Yt}=Ft;Tt.userValue&&(Yt.value=Tt.userValue),Tt.lastCommittedValue=Yt.value,Tt.commitKey=1,Tt.focused=!0}),we.addEventListener("updatefromsandbox",Ft=>{this.showElementAndHideCanvas(Ft.target);const Yt={value(un){Tt.userValue=un.detail.value??"",$e.setValue(K,{value:Tt.userValue.toString()}),un.target.value=Tt.userValue},formattedValue(un){const{formattedValue:yn}=un.detail;Tt.formattedValue=yn,yn!=null&&un.target!==document.activeElement&&(un.target.value=yn),$e.setValue(K,{formattedValue:yn})},selRange(un){un.target.setSelectionRange(...un.detail.selRange)},charLimit:un=>{var Dn;const{charLimit:yn}=un.detail,{target:An}=un;if(yn===0){An.removeAttribute("maxLength");return}An.setAttribute("maxLength",yn);let Gn=Tt.userValue;!Gn||Gn.length<=yn||(Gn=Gn.slice(0,yn),An.value=Tt.userValue=Gn,$e.setValue(K,{value:Gn}),(Dn=this.linkService.eventBus)==null||Dn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:K,name:"Keystroke",value:Gn,willCommit:!0,commitKey:1,selStart:An.selectionStart,selEnd:An.selectionEnd}}))}};this._dispatchEventFromSandbox(Yt,Ft)}),we.addEventListener("keydown",Ft=>{var yn;Tt.commitKey=1;let Yt=-1;if(Ft.key==="Escape"?Yt=0:Ft.key==="Enter"&&!this.data.multiLine?Yt=2:Ft.key==="Tab"&&(Tt.commitKey=3),Yt===-1)return;const{value:un}=Ft.target;Tt.lastCommittedValue!==un&&(Tt.lastCommittedValue=un,Tt.userValue=un,(yn=this.linkService.eventBus)==null||yn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:K,name:"Keystroke",value:un,willCommit:!0,commitKey:Yt,selStart:Ft.target.selectionStart,selEnd:Ft.target.selectionEnd}}))});const It=nn;nn=null,we.addEventListener("blur",Ft=>{var un;if(!Tt.focused||!Ft.relatedTarget)return;Tt.focused=!1;const{value:Yt}=Ft.target;Tt.userValue=Yt,Tt.lastCommittedValue!==Yt&&((un=this.linkService.eventBus)==null||un.dispatch("dispatcheventinsandbox",{source:this,detail:{id:K,name:"Keystroke",value:Yt,willCommit:!0,commitKey:Tt.commitKey,selStart:Ft.target.selectionStart,selEnd:Ft.target.selectionEnd}})),It(Ft)}),(ze=this.data.actions)!=null&&ze.Keystroke&&we.addEventListener("beforeinput",Ft=>{var rr;Tt.lastCommittedValue=null;const{data:Yt,target:un}=Ft,{value:yn,selectionStart:An,selectionEnd:Gn}=un;let Dn=An,tr=Gn;switch(Ft.inputType){case"deleteWordBackward":{const cr=yn.substring(0,An).match(/\w*[^\w]*$/);cr&&(Dn-=cr[0].length);break}case"deleteWordForward":{const cr=yn.substring(An).match(/^[^\w]*\w*/);cr&&(tr+=cr[0].length);break}case"deleteContentBackward":An===Gn&&(Dn-=1);break;case"deleteContentForward":An===Gn&&(tr+=1);break}Ft.preventDefault(),(rr=this.linkService.eventBus)==null||rr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:K,name:"Keystroke",value:yn,change:Yt||"",willCommit:!1,selStart:Dn,selEnd:tr}})}),this._setEventListeners(we,Tt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ft=>Ft.target.value)}if(nn&&we.addEventListener("blur",nn),this.data.comb){const Ft=(this.data.rect[2]-this.data.rect[0])/Et;we.classList.add("comb"),we.style.letterSpacing=`calc(${Ft}px * var(--scale-factor) - 1ch)`}}else we=document.createElement("div"),we.textContent=this.data.fieldValue,we.style.verticalAlign="middle",we.style.display="table-cell";return this._setTextStyle(we),this._setBackgroundColor(we),this._setDefaultPropertiesFromJS(we),this.container.append(we),this.container}}class se extends re{constructor($e){super($e,{isRenderable:!!$e.data.hasOwnCanvas})}}class fe extends re{constructor($e){super($e,{isRenderable:$e.renderForms})}render(){const $e=this.annotationStorage,K=this.data,we=K.id;let Me=$e.getValue(we,{value:K.exportValue===K.fieldValue}).value;typeof Me=="string"&&(Me=Me!=="Off",$e.setValue(we,{value:Me})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const ze=document.createElement("input");return ve.add(ze),ze.setAttribute("data-element-id",we),ze.disabled=K.readOnly,this._setRequired(ze,this.data.required),ze.type="checkbox",ze.name=K.fieldName,Me&&ze.setAttribute("checked",!0),ze.setAttribute("exportValue",K.exportValue),ze.tabIndex=ue,ze.addEventListener("change",Ze=>{const{name:ot,checked:Et}=Ze.target;for(const Lt of this._getElementsByName(ot,we)){const Tt=Et&&Lt.exportValue===K.exportValue;Lt.domElement&&(Lt.domElement.checked=Tt),$e.setValue(Lt.id,{value:Tt})}$e.setValue(we,{value:Et})}),ze.addEventListener("resetform",Ze=>{const ot=K.defaultFieldValue||"Off";Ze.target.checked=ot===K.exportValue}),this.enableScripting&&this.hasJSActions&&(ze.addEventListener("updatefromsandbox",Ze=>{const ot={value(Et){Et.target.checked=Et.detail.value!=="Off",$e.setValue(we,{value:Et.target.checked})}};this._dispatchEventFromSandbox(ot,Ze)}),this._setEventListeners(ze,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ze=>Ze.target.checked)),this._setBackgroundColor(ze),this._setDefaultPropertiesFromJS(ze),this.container.append(ze),this.container}}class Y extends re{constructor($e){super($e,{isRenderable:$e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const $e=this.annotationStorage,K=this.data,we=K.id;let Me=$e.getValue(we,{value:K.fieldValue===K.buttonValue}).value;typeof Me=="string"&&(Me=Me!==K.buttonValue,$e.setValue(we,{value:Me}));const ze=document.createElement("input");if(ve.add(ze),ze.setAttribute("data-element-id",we),ze.disabled=K.readOnly,this._setRequired(ze,this.data.required),ze.type="radio",ze.name=K.fieldName,Me&&ze.setAttribute("checked",!0),ze.tabIndex=ue,ze.addEventListener("change",Ze=>{const{name:ot,checked:Et}=Ze.target;for(const Lt of this._getElementsByName(ot,we))$e.setValue(Lt.id,{value:!1});$e.setValue(we,{value:Et})}),ze.addEventListener("resetform",Ze=>{const ot=K.defaultFieldValue;Ze.target.checked=ot!=null&&ot===K.buttonValue}),this.enableScripting&&this.hasJSActions){const Ze=K.buttonValue;ze.addEventListener("updatefromsandbox",ot=>{const Et={value:Lt=>{const Tt=Ze===Lt.detail.value;for(const nn of this._getElementsByName(Lt.target.name)){const It=Tt&&nn.id===we;nn.domElement&&(nn.domElement.checked=It),$e.setValue(nn.id,{value:It})}}};this._dispatchEventFromSandbox(Et,ot)}),this._setEventListeners(ze,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ot=>ot.target.checked)}return this._setBackgroundColor(ze),this._setDefaultPropertiesFromJS(ze),this.container.append(ze),this.container}}class ee extends J{constructor($e){super($e,{ignoreBorder:$e.data.hasAppearance})}render(){const $e=super.render();$e.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&($e.title=this.data.alternativeText);const K=$e.lastChild;return this.enableScripting&&this.hasJSActions&&K&&(this._setDefaultPropertiesFromJS(K),K.addEventListener("updatefromsandbox",we=>{this._dispatchEventFromSandbox({},we)})),$e}}class Ee extends re{constructor($e){super($e,{isRenderable:$e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const $e=this.annotationStorage,K=this.data.id,we=$e.getValue(K,{value:this.data.fieldValue}),Me=document.createElement("select");ve.add(Me),Me.setAttribute("data-element-id",K),Me.disabled=this.data.readOnly,this._setRequired(Me,this.data.required),Me.name=this.data.fieldName,Me.tabIndex=ue;let ze=this.data.combo&&this.data.options.length>0;this.data.combo||(Me.size=this.data.options.length,this.data.multiSelect&&(Me.multiple=!0)),Me.addEventListener("resetform",Tt=>{const nn=this.data.defaultFieldValue;for(const It of Me.options)It.selected=It.value===nn});for(const Tt of this.data.options){const nn=document.createElement("option");nn.textContent=Tt.displayValue,nn.value=Tt.exportValue,we.value.includes(Tt.exportValue)&&(nn.setAttribute("selected",!0),ze=!1),Me.append(nn)}let Ze=null;if(ze){const Tt=document.createElement("option");Tt.value=" ",Tt.setAttribute("hidden",!0),Tt.setAttribute("selected",!0),Me.prepend(Tt),Ze=()=>{Tt.remove(),Me.removeEventListener("input",Ze),Ze=null},Me.addEventListener("input",Ze)}const ot=Tt=>{const nn=Tt?"value":"textContent",{options:It,multiple:Ft}=Me;return Ft?Array.prototype.filter.call(It,Yt=>Yt.selected).map(Yt=>Yt[nn]):It.selectedIndex===-1?null:It[It.selectedIndex][nn]};let Et=ot(!1);const Lt=Tt=>{const nn=Tt.target.options;return Array.prototype.map.call(nn,It=>({displayValue:It.textContent,exportValue:It.value}))};return this.enableScripting&&this.hasJSActions?(Me.addEventListener("updatefromsandbox",Tt=>{const nn={value(It){Ze==null||Ze();const Ft=It.detail.value,Yt=new Set(Array.isArray(Ft)?Ft:[Ft]);for(const un of Me.options)un.selected=Yt.has(un.value);$e.setValue(K,{value:ot(!0)}),Et=ot(!1)},multipleSelection(It){Me.multiple=!0},remove(It){const Ft=Me.options,Yt=It.detail.remove;Ft[Yt].selected=!1,Me.remove(Yt),Ft.length>0&&Array.prototype.findIndex.call(Ft,yn=>yn.selected)===-1&&(Ft[0].selected=!0),$e.setValue(K,{value:ot(!0),items:Lt(It)}),Et=ot(!1)},clear(It){for(;Me.length!==0;)Me.remove(0);$e.setValue(K,{value:null,items:[]}),Et=ot(!1)},insert(It){const{index:Ft,displayValue:Yt,exportValue:un}=It.detail.insert,yn=Me.children[Ft],An=document.createElement("option");An.textContent=Yt,An.value=un,yn?yn.before(An):Me.append(An),$e.setValue(K,{value:ot(!0),items:Lt(It)}),Et=ot(!1)},items(It){const{items:Ft}=It.detail;for(;Me.length!==0;)Me.remove(0);for(const Yt of Ft){const{displayValue:un,exportValue:yn}=Yt,An=document.createElement("option");An.textContent=un,An.value=yn,Me.append(An)}Me.options.length>0&&(Me.options[0].selected=!0),$e.setValue(K,{value:ot(!0),items:Lt(It)}),Et=ot(!1)},indices(It){const Ft=new Set(It.detail.indices);for(const Yt of It.target.options)Yt.selected=Ft.has(Yt.index);$e.setValue(K,{value:ot(!0)}),Et=ot(!1)},editable(It){It.target.disabled=!It.detail.editable}};this._dispatchEventFromSandbox(nn,Tt)}),Me.addEventListener("input",Tt=>{var It;const nn=ot(!0);$e.setValue(K,{value:nn}),Tt.preventDefault(),(It=this.linkService.eventBus)==null||It.dispatch("dispatcheventinsandbox",{source:this,detail:{id:K,name:"Keystroke",value:Et,changeEx:nn,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Me,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Tt=>Tt.target.value)):Me.addEventListener("input",function(Tt){$e.setValue(K,{value:ot(!0)})}),this.data.combo&&this._setTextStyle(Me),this._setBackgroundColor(Me),this._setDefaultPropertiesFromJS(Me),this.container.append(Me),this.container}}class be extends ae{constructor($e){const{data:K,elements:we}=$e;super($e,{isRenderable:ae._hasPopupData(K)}),this.elements=we}render(){this.container.classList.add("popupAnnotation");const $e=new te({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),K=[];for(const we of this.elements)we.popup=$e,K.push(we.data.id),we.addHighlightArea();return this.container.setAttribute("aria-controls",K.map(we=>`${R.AnnotationPrefix}${we}`).join(",")),this.container}}class te{constructor({container:$e,color:K,elements:we,titleObj:Me,modificationDate:ze,contentsObj:Ze,richText:ot,parent:Et,rect:Lt,parentRect:Tt,open:nn}){Oe(this,Ut);Oe(this,Dt);Oe(this,en);Oe(this,ln);Oe(this,Le,null);Oe(this,Ke,Ge(this,Ut,Ra).bind(this));Oe(this,Ve,Ge(this,ln,zi).bind(this));Oe(this,rt,Ge(this,en,Bi).bind(this));Oe(this,lt,Ge(this,Dt,Jr).bind(this));Oe(this,gt,null);Oe(this,dt,null);Oe(this,pt,null);Oe(this,vt,null);Oe(this,mt,null);Oe(this,Mt,null);Oe(this,st,!1);Oe(this,Xe,null);Oe(this,qe,null);Oe(this,ut,null);Oe(this,Pt,null);Oe(this,At,!1);var Ft;it(this,dt,$e),it(this,Pt,Me),it(this,pt,Ze),it(this,ut,ot),it(this,mt,Et),it(this,gt,K),it(this,qe,Lt),it(this,Mt,Tt),it(this,vt,we);const It=O.PDFDateString.toDateObject(ze);It&&it(this,Le,Et.l10n.get("annotation_date_string",{date:It.toLocaleDateString(),time:It.toLocaleTimeString()})),this.trigger=we.flatMap(Yt=>Yt.getElementsToTriggerPopup());for(const Yt of this.trigger)Yt.addEventListener("click",U(this,lt)),Yt.addEventListener("mouseenter",U(this,rt)),Yt.addEventListener("mouseleave",U(this,Ve)),Yt.classList.add("popupTriggerArea");for(const Yt of we)(Ft=Yt.container)==null||Ft.addEventListener("keydown",U(this,Ke));U(this,dt).hidden=!0,nn&&Ge(this,Dt,Jr).call(this)}render(){if(U(this,Xe))return;const{page:{view:$e},viewport:{rawDims:{pageWidth:K,pageHeight:we,pageX:Me,pageY:ze}}}=U(this,mt),Ze=it(this,Xe,document.createElement("div"));if(Ze.className="popup",U(this,gt)){const Dn=Ze.style.outlineColor=R.Util.makeHexColor(...U(this,gt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Ze.style.backgroundColor=`color-mix(in srgb, ${Dn} 30%, white)`:Ze.style.backgroundColor=R.Util.makeHexColor(...U(this,gt).map(rr=>Math.floor(.7*(255-rr)+rr)))}const ot=document.createElement("span");ot.className="header";const Et=document.createElement("h1");if(ot.append(Et),{dir:Et.dir,str:Et.textContent}=U(this,Pt),Ze.append(ot),U(this,Le)){const Dn=document.createElement("span");Dn.classList.add("popupDate"),U(this,Le).then(tr=>{Dn.textContent=tr}),ot.append(Dn)}const Lt=U(this,pt),Tt=U(this,ut);if(Tt!=null&&Tt.str&&(!(Lt!=null&&Lt.str)||Lt.str===Tt.str))ce.XfaLayer.render({xfaHtml:Tt.html,intent:"richText",div:Ze}),Ze.lastChild.classList.add("richText","popupContent");else{const Dn=this._formatContents(Lt);Ze.append(Dn)}let nn=!!U(this,Mt),It=nn?U(this,Mt):U(this,qe);for(const Dn of U(this,vt))if(!It||R.Util.intersect(Dn.data.rect,It)!==null){It=Dn.data.rect,nn=!0;break}const Ft=R.Util.normalizeRect([It[0],$e[3]-It[1]+$e[1],It[2],$e[3]-It[3]+$e[1]]),un=nn?It[2]-It[0]+5:0,yn=Ft[0]+un,An=Ft[1],{style:Gn}=U(this,dt);Gn.left=`${100*(yn-Me)/K}%`,Gn.top=`${100*(An-ze)/we}%`,U(this,dt).append(Ze)}_formatContents({str:$e,dir:K}){const we=document.createElement("p");we.classList.add("popupContent"),we.dir=K;const Me=$e.split(/(?:\r\n?|\n)/);for(let ze=0,Ze=Me.length;ze<Ze;++ze){const ot=Me[ze];we.append(document.createTextNode(ot)),ze<Ze-1&&we.append(document.createElement("br"))}return we}forceHide(){it(this,At,this.isVisible),U(this,At)&&(U(this,dt).hidden=!0)}maybeShow(){U(this,At)&&(it(this,At,!1),U(this,dt).hidden=!1)}get isVisible(){return U(this,dt).hidden===!1}}Le=new WeakMap,Ke=new WeakMap,Ve=new WeakMap,rt=new WeakMap,lt=new WeakMap,gt=new WeakMap,dt=new WeakMap,pt=new WeakMap,vt=new WeakMap,mt=new WeakMap,Mt=new WeakMap,st=new WeakMap,Xe=new WeakMap,qe=new WeakMap,ut=new WeakMap,Pt=new WeakMap,At=new WeakMap,Ut=new WeakSet,Ra=function($e){$e.altKey||$e.shiftKey||$e.ctrlKey||$e.metaKey||($e.key==="Enter"||$e.key==="Escape"&&U(this,st))&&Ge(this,Dt,Jr).call(this)},Dt=new WeakSet,Jr=function(){it(this,st,!U(this,st)),U(this,st)?(Ge(this,en,Bi).call(this),U(this,dt).addEventListener("click",U(this,lt)),U(this,dt).addEventListener("keydown",U(this,Ke))):(Ge(this,ln,zi).call(this),U(this,dt).removeEventListener("click",U(this,lt)),U(this,dt).removeEventListener("keydown",U(this,Ke)))},en=new WeakSet,Bi=function(){U(this,Xe)||this.render(),this.isVisible?U(this,st)&&U(this,dt).classList.add("focused"):(U(this,dt).hidden=!1,U(this,dt).style.zIndex=parseInt(U(this,dt).style.zIndex)+1e3)},ln=new WeakSet,zi=function(){U(this,dt).classList.remove("focused"),!(U(this,st)||!this.isVisible)&&(U(this,dt).hidden=!0,U(this,dt).style.zIndex=parseInt(U(this,dt).style.zIndex)-1e3)};class ge extends ae{constructor($e){super($e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=$e.data.textContent,this.textPosition=$e.data.textPosition,this.annotationEditorType=R.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const $e=document.createElement("div");$e.classList.add("annotationTextContent"),$e.setAttribute("role","comment");for(const K of this.textContent){const we=document.createElement("span");we.textContent=K,$e.append(we)}this.container.append($e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}$.FreeTextAnnotationElement=ge;class de extends ae{constructor(K){super(K,{isRenderable:!0,ignoreBorder:!0});Oe(this,Ie,null)}render(){this.container.classList.add("lineAnnotation");const K=this.data,{width:we,height:Me}=he(K.rect),ze=this.svgFactory.create(we,Me,!0),Ze=it(this,Ie,this.svgFactory.createElement("svg:line"));return Ze.setAttribute("x1",K.rect[2]-K.lineCoordinates[0]),Ze.setAttribute("y1",K.rect[3]-K.lineCoordinates[1]),Ze.setAttribute("x2",K.rect[2]-K.lineCoordinates[2]),Ze.setAttribute("y2",K.rect[3]-K.lineCoordinates[3]),Ze.setAttribute("stroke-width",K.borderStyle.width||1),Ze.setAttribute("stroke","transparent"),Ze.setAttribute("fill","transparent"),ze.append(Ze),this.container.append(ze),!K.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return U(this,Ie)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ie=new WeakMap;class Ae extends ae{constructor(K){super(K,{isRenderable:!0,ignoreBorder:!0});Oe(this,Re,null)}render(){this.container.classList.add("squareAnnotation");const K=this.data,{width:we,height:Me}=he(K.rect),ze=this.svgFactory.create(we,Me,!0),Ze=K.borderStyle.width,ot=it(this,Re,this.svgFactory.createElement("svg:rect"));return ot.setAttribute("x",Ze/2),ot.setAttribute("y",Ze/2),ot.setAttribute("width",we-Ze),ot.setAttribute("height",Me-Ze),ot.setAttribute("stroke-width",Ze||1),ot.setAttribute("stroke","transparent"),ot.setAttribute("fill","transparent"),ze.append(ot),this.container.append(ze),!K.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return U(this,Re)}addHighlightArea(){this.container.classList.add("highlightArea")}}Re=new WeakMap;class Fe extends ae{constructor(K){super(K,{isRenderable:!0,ignoreBorder:!0});Oe(this,ht,null)}render(){this.container.classList.add("circleAnnotation");const K=this.data,{width:we,height:Me}=he(K.rect),ze=this.svgFactory.create(we,Me,!0),Ze=K.borderStyle.width,ot=it(this,ht,this.svgFactory.createElement("svg:ellipse"));return ot.setAttribute("cx",we/2),ot.setAttribute("cy",Me/2),ot.setAttribute("rx",we/2-Ze/2),ot.setAttribute("ry",Me/2-Ze/2),ot.setAttribute("stroke-width",Ze||1),ot.setAttribute("stroke","transparent"),ot.setAttribute("fill","transparent"),ze.append(ot),this.container.append(ze),!K.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return U(this,ht)}addHighlightArea(){this.container.classList.add("highlightArea")}}ht=new WeakMap;class ye extends ae{constructor(K){super(K,{isRenderable:!0,ignoreBorder:!0});Oe(this,ct,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const K=this.data,{width:we,height:Me}=he(K.rect),ze=this.svgFactory.create(we,Me,!0);let Ze=[];for(const Et of K.vertices){const Lt=Et.x-K.rect[0],Tt=K.rect[3]-Et.y;Ze.push(Lt+","+Tt)}Ze=Ze.join(" ");const ot=it(this,ct,this.svgFactory.createElement(this.svgElementName));return ot.setAttribute("points",Ze),ot.setAttribute("stroke-width",K.borderStyle.width||1),ot.setAttribute("stroke","transparent"),ot.setAttribute("fill","transparent"),ze.append(ot),this.container.append(ze),!K.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return U(this,ct)}addHighlightArea(){this.container.classList.add("highlightArea")}}ct=new WeakMap;class Te extends ye{constructor($e){super($e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Ue extends ae{constructor($e){super($e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Be extends ae{constructor(K){super(K,{isRenderable:!0,ignoreBorder:!0});Oe(this,an,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=R.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const K=this.data,{width:we,height:Me}=he(K.rect),ze=this.svgFactory.create(we,Me,!0);for(const Ze of K.inkLists){let ot=[];for(const Lt of Ze){const Tt=Lt.x-K.rect[0],nn=K.rect[3]-Lt.y;ot.push(`${Tt},${nn}`)}ot=ot.join(" ");const Et=this.svgFactory.createElement(this.svgElementName);U(this,an).push(Et),Et.setAttribute("points",ot),Et.setAttribute("stroke-width",K.borderStyle.width||1),Et.setAttribute("stroke","transparent"),Et.setAttribute("fill","transparent"),!K.popupRef&&this.hasPopupData&&this._createPopup(),ze.append(Et)}return this.container.append(ze),this.container}getElementsToTriggerPopup(){return U(this,an)}addHighlightArea(){this.container.classList.add("highlightArea")}}an=new WeakMap,$.InkAnnotationElement=Be;class Ce extends ae{constructor($e){super($e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Qe extends ae{constructor($e){super($e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class at extends ae{constructor($e){super($e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class ft extends ae{constructor($e){super($e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class _t extends ae{constructor($e){super($e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}$.StampAnnotationElement=_t;class xe extends ae{constructor(K){var ze;super(K,{isRenderable:!0});Oe(this,Ye);Oe(this,_n,null);const{filename:we,content:Me}=this.data.file;this.filename=(0,O.getFilenameFromUrl)(we,!0),this.content=Me,(ze=this.linkService.eventBus)==null||ze.dispatch("fileattachmentannotation",{source:this,filename:we,content:Me})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:K,data:we}=this;let Me;we.hasAppearance||we.fillAlpha===0?Me=document.createElement("div"):(Me=document.createElement("img"),Me.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(we.name)?"paperclip":"pushpin"}.svg`,we.fillAlpha&&we.fillAlpha<1&&(Me.style=`filter: opacity(${Math.round(we.fillAlpha*100)}%);`)),Me.addEventListener("dblclick",Ge(this,Ye,Hi).bind(this)),it(this,_n,Me);const{isMac:ze}=R.FeatureTest.platform;return K.addEventListener("keydown",Ze=>{Ze.key==="Enter"&&(ze?Ze.metaKey:Ze.ctrlKey)&&Ge(this,Ye,Hi).call(this)}),!we.popupRef&&this.hasPopupData?this._createPopup():Me.classList.add("popupTriggerArea"),K.append(Me),K}getElementsToTriggerPopup(){return U(this,_n)}addHighlightArea(){this.container.classList.add("highlightArea")}}_n=new WeakMap,Ye=new WeakSet,Hi=function(){var K;(K=this.downloadManager)==null||K.openOrDownloadData(this.container,this.content,this.filename)};class q{constructor({div:$e,accessibilityManager:K,annotationCanvasMap:we,l10n:Me,page:ze,viewport:Ze}){Oe(this,Ht);Oe(this,wt);Oe(this,Nt,null);Oe(this,$t,null);Oe(this,Bt,new Map);this.div=$e,it(this,Nt,K),it(this,$t,we),this.l10n=Me,this.page=ze,this.viewport=Ze,this.zIndex=0,this.l10n||(this.l10n=pe.NullL10n)}async render($e){const{annotations:K}=$e,we=this.div;(0,O.setLayerDimensions)(we,this.viewport);const Me=new Map,ze={data:null,layer:we,linkService:$e.linkService,downloadManager:$e.downloadManager,imageResourcesPath:$e.imageResourcesPath||"",renderForms:$e.renderForms!==!1,svgFactory:new O.DOMSVGFactory,annotationStorage:$e.annotationStorage||new H.AnnotationStorage,enableScripting:$e.enableScripting===!0,hasJSActions:$e.hasJSActions,fieldObjects:$e.fieldObjects,parent:this,elements:null};for(const Ze of K){if(Ze.noHTML)continue;const ot=Ze.annotationType===R.AnnotationType.POPUP;if(ot){const Tt=Me.get(Ze.id);if(!Tt)continue;ze.elements=Tt}else{const{width:Tt,height:nn}=he(Ze.rect);if(Tt<=0||nn<=0)continue}ze.data=Ze;const Et=oe.create(ze);if(!Et.isRenderable)continue;if(!ot&&Ze.popupRef){const Tt=Me.get(Ze.popupRef);Tt?Tt.push(Et):Me.set(Ze.popupRef,[Et])}Et.annotationEditorType>0&&U(this,Bt).set(Et.data.id,Et);const Lt=Et.render();Ze.hidden&&(Lt.style.visibility="hidden"),Ge(this,Ht,La).call(this,Lt,Ze.id)}Ge(this,wt,Ui).call(this),await this.l10n.translate(we)}update({viewport:$e}){const K=this.div;this.viewport=$e,(0,O.setLayerDimensions)(K,{rotation:$e.rotation}),Ge(this,wt,Ui).call(this),K.hidden=!1}getEditableAnnotations(){return Array.from(U(this,Bt).values())}getEditableAnnotation($e){return U(this,Bt).get($e)}}Nt=new WeakMap,$t=new WeakMap,Bt=new WeakMap,Ht=new WeakSet,La=function($e,K){var Me;const we=$e.firstChild||$e;we.id=`${R.AnnotationPrefix}${K}`,this.div.append($e),(Me=U(this,Nt))==null||Me.moveElementInDOM(this.div,$e,we,!1)},wt=new WeakSet,Ui=function(){if(!U(this,$t))return;const $e=this.div;for(const[K,we]of U(this,$t)){const Me=$e.querySelector(`[data-annotation-id="${K}"]`);if(!Me)continue;const{firstChild:ze}=Me;ze?ze.nodeName==="CANVAS"?ze.replaceWith(we):ze.before(we):Me.append(we)}U(this,$t).clear()},$.AnnotationLayer=q},(A,$)=>{Object.defineProperty($,"__esModule",{value:!0}),$.ColorConverters=void 0;function B(H){return Math.floor(Math.max(0,Math.min(1,H))*255).toString(16).padStart(2,"0")}function R(H){return Math.max(0,Math.min(255,255*H))}class O{static CMYK_G([W,pe,ce,ue]){return["G",1-Math.min(1,.3*W+.59*ce+.11*pe+ue)]}static G_CMYK([W]){return["CMYK",0,0,0,1-W]}static G_RGB([W]){return["RGB",W,W,W]}static G_rgb([W]){return W=R(W),[W,W,W]}static G_HTML([W]){const pe=B(W);return`#${pe}${pe}${pe}`}static RGB_G([W,pe,ce]){return["G",.3*W+.59*pe+.11*ce]}static RGB_rgb(W){return W.map(R)}static RGB_HTML(W){return`#${W.map(B).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([W,pe,ce,ue]){return["RGB",1-Math.min(1,W+ue),1-Math.min(1,ce+ue),1-Math.min(1,pe+ue)]}static CMYK_rgb([W,pe,ce,ue]){return[R(1-Math.min(1,W+ue)),R(1-Math.min(1,ce+ue)),R(1-Math.min(1,pe+ue))]}static CMYK_HTML(W){const pe=this.CMYK_RGB(W).slice(1);return this.RGB_HTML(pe)}static RGB_CMYK([W,pe,ce]){const ue=1-W,G=1-pe,ve=1-ce,he=Math.min(ue,G,ve);return["CMYK",ue,G,ve,he]}}$.ColorConverters=O},(A,$)=>{Object.defineProperty($,"__esModule",{value:!0}),$.NullL10n=void 0,$.getL10nFallback=R;const B={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};B.print_progress_percent="{{progress}}%";function R(W,pe){switch(W){case"find_match_count":W=`find_match_count[${pe.total===1?"one":"other"}]`;break;case"find_match_count_limit":W=`find_match_count_limit[${pe.limit===1?"one":"other"}]`;break}return B[W]||""}function O(W,pe){return pe?W.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(ce,ue)=>ue in pe?pe[ue]:"{{"+ue+"}}"):W}const H={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(W,pe=null,ce=R(W,pe)){return O(ce,pe)},async translate(W){}};$.NullL10n=H},(A,$,B)=>{Object.defineProperty($,"__esModule",{value:!0}),$.XfaLayer=void 0;var R=B(25);class O{static setupStorage(W,pe,ce,ue,G){const ve=ue.getValue(pe,{value:null});switch(ce.name){case"textarea":if(ve.value!==null&&(W.textContent=ve.value),G==="print")break;W.addEventListener("input",he=>{ue.setValue(pe,{value:he.target.value})});break;case"input":if(ce.attributes.type==="radio"||ce.attributes.type==="checkbox"){if(ve.value===ce.attributes.xfaOn?W.setAttribute("checked",!0):ve.value===ce.attributes.xfaOff&&W.removeAttribute("checked"),G==="print")break;W.addEventListener("change",he=>{ue.setValue(pe,{value:he.target.checked?he.target.getAttribute("xfaOn"):he.target.getAttribute("xfaOff")})})}else{if(ve.value!==null&&W.setAttribute("value",ve.value),G==="print")break;W.addEventListener("input",he=>{ue.setValue(pe,{value:he.target.value})})}break;case"select":if(ve.value!==null){W.setAttribute("value",ve.value);for(const he of ce.children)he.attributes.value===ve.value?he.attributes.selected=!0:he.attributes.hasOwnProperty("selected")&&delete he.attributes.selected}W.addEventListener("input",he=>{const oe=he.target.options,ae=oe.selectedIndex===-1?"":oe[oe.selectedIndex].value;ue.setValue(pe,{value:ae})});break}}static setAttributes({html:W,element:pe,storage:ce=null,intent:ue,linkService:G}){const{attributes:ve}=pe,he=W instanceof HTMLAnchorElement;ve.type==="radio"&&(ve.name=`${ve.name}-${ue}`);for(const[oe,ae]of Object.entries(ve))if(ae!=null)switch(oe){case"class":ae.length&&W.setAttribute(oe,ae.join(" "));break;case"dataId":break;case"id":W.setAttribute("data-element-id",ae);break;case"style":Object.assign(W.style,ae);break;case"textContent":W.textContent=ae;break;default:(!he||oe!=="href"&&oe!=="newWindow")&&W.setAttribute(oe,ae)}he&&G.addLinkAttributes(W,ve.href,ve.newWindow),ce&&ve.dataId&&this.setupStorage(W,ve.dataId,pe,ce)}static render(W){var J;const pe=W.annotationStorage,ce=W.linkService,ue=W.xfaHtml,G=W.intent||"display",ve=document.createElement(ue.name);ue.attributes&&this.setAttributes({html:ve,element:ue,intent:G,linkService:ce});const he=[[ue,-1,ve]],oe=W.div;if(oe.append(ve),W.viewport){const V=`matrix(${W.viewport.transform.join(",")})`;oe.style.transform=V}G!=="richText"&&oe.setAttribute("class","xfaLayer xfaFont");const ae=[];for(;he.length>0;){const[V,re,ie]=he.at(-1);if(re+1===V.children.length){he.pop();continue}const se=V.children[++he.at(-1)[1]];if(se===null)continue;const{name:fe}=se;if(fe==="#text"){const ee=document.createTextNode(se.value);ae.push(ee),ie.append(ee);continue}const Y=(J=se==null?void 0:se.attributes)!=null&&J.xmlns?document.createElementNS(se.attributes.xmlns,fe):document.createElement(fe);if(ie.append(Y),se.attributes&&this.setAttributes({html:Y,element:se,storage:pe,intent:G,linkService:ce}),se.children&&se.children.length>0)he.push([se,-1,Y]);else if(se.value){const ee=document.createTextNode(se.value);R.XfaText.shouldBuildText(fe)&&ae.push(ee),Y.append(ee)}}for(const V of oe.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))V.setAttribute("readOnly",!0);return{textDivs:ae}}static update(W){const pe=`matrix(${W.viewport.transform.join(",")})`;W.div.style.transform=pe,W.div.hidden=!1}}$.XfaLayer=O},(A,$,B)=>{var ue,G,ve,he,oe,ae,J,V,re,ie,se,fe,Y,ee,Ee,Oa,te,Ia,de,Fa,Fe,Da,Te,Vi,Be,Na,Qe,Wi,ft,ja,xe,Ba,ne,za,le,Ha,Se,Ua,Le,dr,Ve,Gi,lt,Qr,dt,ei,vt,Pr,Mt,qi,Xe,ti,ut,Va,At,Xi,Xt,Wa,Kt,Ga,Vt,Ki,We,ni,Re,Cr;Object.defineProperty($,"__esModule",{value:!0}),$.InkEditor=void 0;var R=B(1),O=B(4),H=B(29),W=B(6),pe=B(5);const ct=class ct extends O.AnnotationEditor{constructor(Ye){super({...Ye,name:"inkEditor"});Oe(this,Ee);Oe(this,te);Oe(this,de);Oe(this,Fe);Oe(this,Te);Oe(this,Be);Oe(this,Qe);Oe(this,ft);Oe(this,xe);Oe(this,ne);Oe(this,le);Oe(this,Se);Oe(this,Le);Oe(this,Ve);Oe(this,lt);Oe(this,dt);Oe(this,vt);Oe(this,Mt);Oe(this,Xe);Oe(this,Kt);Oe(this,Vt);Oe(this,We);Oe(this,Re);Oe(this,ue,0);Oe(this,G,0);Oe(this,ve,this.canvasPointermove.bind(this));Oe(this,he,this.canvasPointerleave.bind(this));Oe(this,oe,this.canvasPointerup.bind(this));Oe(this,ae,this.canvasPointerdown.bind(this));Oe(this,J,new Path2D);Oe(this,V,!1);Oe(this,re,!1);Oe(this,ie,!1);Oe(this,se,null);Oe(this,fe,0);Oe(this,Y,0);Oe(this,ee,null);this.color=Ye.color||null,this.thickness=Ye.thickness||null,this.opacity=Ye.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(Ye){O.AnnotationEditor.initialize(Ye,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(Ye,xt){switch(Ye){case R.AnnotationEditorParamsType.INK_THICKNESS:ct._defaultThickness=xt;break;case R.AnnotationEditorParamsType.INK_COLOR:ct._defaultColor=xt;break;case R.AnnotationEditorParamsType.INK_OPACITY:ct._defaultOpacity=xt/100;break}}updateParams(Ye,xt){switch(Ye){case R.AnnotationEditorParamsType.INK_THICKNESS:Ge(this,Ee,Oa).call(this,xt);break;case R.AnnotationEditorParamsType.INK_COLOR:Ge(this,te,Ia).call(this,xt);break;case R.AnnotationEditorParamsType.INK_OPACITY:Ge(this,de,Fa).call(this,xt);break}}static get defaultPropertiesToUpdate(){return[[R.AnnotationEditorParamsType.INK_THICKNESS,ct._defaultThickness],[R.AnnotationEditorParamsType.INK_COLOR,ct._defaultColor||O.AnnotationEditor._defaultLineColor],[R.AnnotationEditorParamsType.INK_OPACITY,Math.round(ct._defaultOpacity*100)]]}get propertiesToUpdate(){return[[R.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ct._defaultThickness],[R.AnnotationEditorParamsType.INK_COLOR,this.color||ct._defaultColor||O.AnnotationEditor._defaultLineColor],[R.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ct._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Ge(this,lt,Qr).call(this),Ge(this,dt,ei).call(this)),this.isAttachedToDOM||(this.parent.add(this),Ge(this,vt,Pr).call(this)),Ge(this,Re,Cr).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,U(this,se).disconnect(),it(this,se,null),super.remove())}setParent(Ye){!this.parent&&Ye?this._uiManager.removeShouldRescale(this):this.parent&&Ye===null&&this._uiManager.addShouldRescale(this),super.setParent(Ye)}onScaleChanging(){const[Ye,xt]=this.parentDimensions,Nt=this.width*Ye,$t=this.height*xt;this.setDimensions(Nt,$t)}enableEditMode(){U(this,V)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",U(this,ae)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",U(this,ae)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){U(this,V)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),it(this,V,!0),this.div.classList.add("disabled"),Ge(this,Re,Cr).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(Ye){this._focusEventsAllowed&&(super.focusin(Ye),this.enableEditMode())}canvasPointerdown(Ye){Ye.button!==0||!this.isInEditMode()||U(this,V)||(this.setInForeground(),Ye.preventDefault(),Ye.type!=="mouse"&&this.div.focus(),Ge(this,Be,Na).call(this,Ye.offsetX,Ye.offsetY))}canvasPointermove(Ye){Ye.preventDefault(),Ge(this,Qe,Wi).call(this,Ye.offsetX,Ye.offsetY)}canvasPointerup(Ye){Ye.preventDefault(),Ge(this,Ve,Gi).call(this,Ye)}canvasPointerleave(Ye){Ge(this,Ve,Gi).call(this,Ye)}get isResizable(){return!this.isEmpty()&&U(this,V)}render(){if(this.div)return this.div;let Ye,xt;this.width&&(Ye=this.x,xt=this.y),super.render(),O.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(En=>{var wt;return(wt=this.div)==null?void 0:wt.setAttribute("aria-label",En)});const[Nt,$t,Bt,Ht]=Ge(this,Fe,Da).call(this);if(this.setAt(Nt,$t,0,0),this.setDims(Bt,Ht),Ge(this,lt,Qr).call(this),this.width){const[En,wt]=this.parentDimensions;this.setAspectRatio(this.width*En,this.height*wt),this.setAt(Ye*En,xt*wt,this.width*En,this.height*wt),it(this,ie,!0),Ge(this,vt,Pr).call(this),this.setDims(this.width*En,this.height*wt),Ge(this,Le,dr).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Ge(this,dt,ei).call(this),this.div}setDimensions(Ye,xt){const Nt=Math.round(Ye),$t=Math.round(xt);if(U(this,fe)===Nt&&U(this,Y)===$t)return;it(this,fe,Nt),it(this,Y,$t),this.canvas.style.visibility="hidden";const[Bt,Ht]=this.parentDimensions;this.width=Ye/Bt,this.height=xt/Ht,this.fixAndSetPosition(),U(this,V)&&Ge(this,Mt,qi).call(this,Ye,xt),Ge(this,vt,Pr).call(this),Ge(this,Le,dr).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(Ye,xt,Nt){var ze,Ze,ot;if(Ye instanceof H.InkAnnotationElement)return null;const $t=super.deserialize(Ye,xt,Nt);$t.thickness=Ye.thickness,$t.color=R.Util.makeHexColor(...Ye.color),$t.opacity=Ye.opacity;const[Bt,Ht]=$t.pageDimensions,En=$t.width*Bt,wt=$t.height*Ht,pn=$t.parentScale,jt=Ye.thickness/2;it($t,V,!0),it($t,fe,Math.round(En)),it($t,Y,Math.round(wt));const{paths:$e,rect:K,rotation:we}=Ye;for(let{bezier:Et}of $e){Et=Ge(ze=ct,Xt,Wa).call(ze,Et,K,we);const Lt=[];$t.paths.push(Lt);let Tt=pn*(Et[0]-jt),nn=pn*(Et[1]-jt);for(let Ft=2,Yt=Et.length;Ft<Yt;Ft+=6){const un=pn*(Et[Ft]-jt),yn=pn*(Et[Ft+1]-jt),An=pn*(Et[Ft+2]-jt),Gn=pn*(Et[Ft+3]-jt),Dn=pn*(Et[Ft+4]-jt),tr=pn*(Et[Ft+5]-jt);Lt.push([[Tt,nn],[un,yn],[An,Gn],[Dn,tr]]),Tt=Dn,nn=tr}const It=Ge(this,ut,Va).call(this,Lt);$t.bezierPath2D.push(It)}const Me=Ge(Ze=$t,Vt,Ki).call(Ze);return it($t,G,Math.max(O.AnnotationEditor.MIN_SIZE,Me[2]-Me[0])),it($t,ue,Math.max(O.AnnotationEditor.MIN_SIZE,Me[3]-Me[1])),Ge(ot=$t,Mt,qi).call(ot,En,wt),$t}serialize(){if(this.isEmpty())return null;const Ye=this.getRect(0,0),xt=O.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:R.AnnotationEditorType.INK,color:xt,thickness:this.thickness,opacity:this.opacity,paths:Ge(this,Kt,Ga).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,Ye),pageIndex:this.pageIndex,rect:Ye,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};ue=new WeakMap,G=new WeakMap,ve=new WeakMap,he=new WeakMap,oe=new WeakMap,ae=new WeakMap,J=new WeakMap,V=new WeakMap,re=new WeakMap,ie=new WeakMap,se=new WeakMap,fe=new WeakMap,Y=new WeakMap,ee=new WeakMap,Ee=new WeakSet,Oa=function(Ye){const xt=this.thickness;this.addCommands({cmd:()=>{this.thickness=Ye,Ge(this,Re,Cr).call(this)},undo:()=>{this.thickness=xt,Ge(this,Re,Cr).call(this)},mustExec:!0,type:R.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},te=new WeakSet,Ia=function(Ye){const xt=this.color;this.addCommands({cmd:()=>{this.color=Ye,Ge(this,Le,dr).call(this)},undo:()=>{this.color=xt,Ge(this,Le,dr).call(this)},mustExec:!0,type:R.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},de=new WeakSet,Fa=function(Ye){Ye/=100;const xt=this.opacity;this.addCommands({cmd:()=>{this.opacity=Ye,Ge(this,Le,dr).call(this)},undo:()=>{this.opacity=xt,Ge(this,Le,dr).call(this)},mustExec:!0,type:R.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Fe=new WeakSet,Da=function(){const{parentRotation:Ye,parentDimensions:[xt,Nt]}=this;switch(Ye){case 90:return[0,Nt,Nt,xt];case 180:return[xt,Nt,xt,Nt];case 270:return[xt,0,Nt,xt];default:return[0,0,xt,Nt]}},Te=new WeakSet,Vi=function(){const{ctx:Ye,color:xt,opacity:Nt,thickness:$t,parentScale:Bt,scaleFactor:Ht}=this;Ye.lineWidth=$t*Bt/Ht,Ye.lineCap="round",Ye.lineJoin="round",Ye.miterLimit=10,Ye.strokeStyle=`${xt}${(0,pe.opacityToHex)(Nt)}`},Be=new WeakSet,Na=function(Ye,xt){this.canvas.addEventListener("contextmenu",W.noContextMenu),this.canvas.addEventListener("pointerleave",U(this,he)),this.canvas.addEventListener("pointermove",U(this,ve)),this.canvas.addEventListener("pointerup",U(this,oe)),this.canvas.removeEventListener("pointerdown",U(this,ae)),this.isEditing=!0,U(this,ie)||(it(this,ie,!0),Ge(this,vt,Pr).call(this),this.thickness||(this.thickness=ct._defaultThickness),this.color||(this.color=ct._defaultColor||O.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=ct._defaultOpacity)),this.currentPath.push([Ye,xt]),it(this,re,!1),Ge(this,Te,Vi).call(this),it(this,ee,()=>{Ge(this,ne,za).call(this),U(this,ee)&&window.requestAnimationFrame(U(this,ee))}),window.requestAnimationFrame(U(this,ee))},Qe=new WeakSet,Wi=function(Ye,xt){const[Nt,$t]=this.currentPath.at(-1);if(this.currentPath.length>1&&Ye===Nt&&xt===$t)return;const Bt=this.currentPath;let Ht=U(this,J);if(Bt.push([Ye,xt]),it(this,re,!0),Bt.length<=2){Ht.moveTo(...Bt[0]),Ht.lineTo(Ye,xt);return}Bt.length===3&&(it(this,J,Ht=new Path2D),Ht.moveTo(...Bt[0])),Ge(this,le,Ha).call(this,Ht,...Bt.at(-3),...Bt.at(-2),Ye,xt)},ft=new WeakSet,ja=function(){if(this.currentPath.length===0)return;const Ye=this.currentPath.at(-1);U(this,J).lineTo(...Ye)},xe=new WeakSet,Ba=function(Ye,xt){it(this,ee,null),Ye=Math.min(Math.max(Ye,0),this.canvas.width),xt=Math.min(Math.max(xt,0),this.canvas.height),Ge(this,Qe,Wi).call(this,Ye,xt),Ge(this,ft,ja).call(this);let Nt;if(this.currentPath.length!==1)Nt=Ge(this,Se,Ua).call(this);else{const wt=[Ye,xt];Nt=[[wt,wt.slice(),wt.slice(),wt]]}const $t=U(this,J),Bt=this.currentPath;this.currentPath=[],it(this,J,new Path2D);const Ht=()=>{this.allRawPaths.push(Bt),this.paths.push(Nt),this.bezierPath2D.push($t),this.rebuild()},En=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Ge(this,lt,Qr).call(this),Ge(this,dt,ei).call(this)),Ge(this,Re,Cr).call(this))};this.addCommands({cmd:Ht,undo:En,mustExec:!0})},ne=new WeakSet,za=function(){if(!U(this,re))return;it(this,re,!1);const Ye=Math.ceil(this.thickness*this.parentScale),xt=this.currentPath.slice(-3),Nt=xt.map(Ht=>Ht[0]),$t=xt.map(Ht=>Ht[1]);Math.min(...Nt)-Ye,Math.max(...Nt)+Ye,Math.min(...$t)-Ye,Math.max(...$t)+Ye;const{ctx:Bt}=this;Bt.save(),Bt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Ht of this.bezierPath2D)Bt.stroke(Ht);Bt.stroke(U(this,J)),Bt.restore()},le=new WeakSet,Ha=function(Ye,xt,Nt,$t,Bt,Ht,En){const wt=(xt+$t)/2,pn=(Nt+Bt)/2,jt=($t+Ht)/2,$e=(Bt+En)/2;Ye.bezierCurveTo(wt+2*($t-wt)/3,pn+2*(Bt-pn)/3,jt+2*($t-jt)/3,$e+2*(Bt-$e)/3,jt,$e)},Se=new WeakSet,Ua=function(){const Ye=this.currentPath;if(Ye.length<=2)return[[Ye[0],Ye[0],Ye.at(-1),Ye.at(-1)]];const xt=[];let Nt,[$t,Bt]=Ye[0];for(Nt=1;Nt<Ye.length-2;Nt++){const[K,we]=Ye[Nt],[Me,ze]=Ye[Nt+1],Ze=(K+Me)/2,ot=(we+ze)/2,Et=[$t+2*(K-$t)/3,Bt+2*(we-Bt)/3],Lt=[Ze+2*(K-Ze)/3,ot+2*(we-ot)/3];xt.push([[$t,Bt],Et,Lt,[Ze,ot]]),[$t,Bt]=[Ze,ot]}const[Ht,En]=Ye[Nt],[wt,pn]=Ye[Nt+1],jt=[$t+2*(Ht-$t)/3,Bt+2*(En-Bt)/3],$e=[wt+2*(Ht-wt)/3,pn+2*(En-pn)/3];return xt.push([[$t,Bt],jt,$e,[wt,pn]]),xt},Le=new WeakSet,dr=function(){if(this.isEmpty()){Ge(this,Xe,ti).call(this);return}Ge(this,Te,Vi).call(this);const{canvas:Ye,ctx:xt}=this;xt.setTransform(1,0,0,1,0,0),xt.clearRect(0,0,Ye.width,Ye.height),Ge(this,Xe,ti).call(this);for(const Nt of this.bezierPath2D)xt.stroke(Nt)},Ve=new WeakSet,Gi=function(Ye){this.canvas.removeEventListener("pointerleave",U(this,he)),this.canvas.removeEventListener("pointermove",U(this,ve)),this.canvas.removeEventListener("pointerup",U(this,oe)),this.canvas.addEventListener("pointerdown",U(this,ae)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",W.noContextMenu)},10),Ge(this,xe,Ba).call(this,Ye.offsetX,Ye.offsetY),this.addToAnnotationStorage(),this.setInBackground()},lt=new WeakSet,Qr=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",O.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(Ye=>{var xt;return(xt=this.canvas)==null?void 0:xt.setAttribute("aria-label",Ye)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},dt=new WeakSet,ei=function(){it(this,se,new ResizeObserver(Ye=>{const xt=Ye[0].contentRect;xt.width&&xt.height&&this.setDimensions(xt.width,xt.height)})),U(this,se).observe(this.div)},vt=new WeakSet,Pr=function(){if(!U(this,ie))return;const[Ye,xt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Ye),this.canvas.height=Math.ceil(this.height*xt),Ge(this,Xe,ti).call(this)},Mt=new WeakSet,qi=function(Ye,xt){const Nt=Ge(this,We,ni).call(this),$t=(Ye-Nt)/U(this,G),Bt=(xt-Nt)/U(this,ue);this.scaleFactor=Math.min($t,Bt)},Xe=new WeakSet,ti=function(){const Ye=Ge(this,We,ni).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Ye,this.translationY*this.scaleFactor+Ye)},ut=new WeakSet,Va=function(Ye){const xt=new Path2D;for(let Nt=0,$t=Ye.length;Nt<$t;Nt++){const[Bt,Ht,En,wt]=Ye[Nt];Nt===0&&xt.moveTo(...Bt),xt.bezierCurveTo(Ht[0],Ht[1],En[0],En[1],wt[0],wt[1])}return xt},At=new WeakSet,Xi=function(Ye,xt,Nt){const[$t,Bt,Ht,En]=xt;switch(Nt){case 0:for(let wt=0,pn=Ye.length;wt<pn;wt+=2)Ye[wt]+=$t,Ye[wt+1]=En-Ye[wt+1];break;case 90:for(let wt=0,pn=Ye.length;wt<pn;wt+=2){const jt=Ye[wt];Ye[wt]=Ye[wt+1]+$t,Ye[wt+1]=jt+Bt}break;case 180:for(let wt=0,pn=Ye.length;wt<pn;wt+=2)Ye[wt]=Ht-Ye[wt],Ye[wt+1]+=Bt;break;case 270:for(let wt=0,pn=Ye.length;wt<pn;wt+=2){const jt=Ye[wt];Ye[wt]=Ht-Ye[wt+1],Ye[wt+1]=En-jt}break;default:throw new Error("Invalid rotation")}return Ye},Xt=new WeakSet,Wa=function(Ye,xt,Nt){const[$t,Bt,Ht,En]=xt;switch(Nt){case 0:for(let wt=0,pn=Ye.length;wt<pn;wt+=2)Ye[wt]-=$t,Ye[wt+1]=En-Ye[wt+1];break;case 90:for(let wt=0,pn=Ye.length;wt<pn;wt+=2){const jt=Ye[wt];Ye[wt]=Ye[wt+1]-Bt,Ye[wt+1]=jt-$t}break;case 180:for(let wt=0,pn=Ye.length;wt<pn;wt+=2)Ye[wt]=Ht-Ye[wt],Ye[wt+1]-=Bt;break;case 270:for(let wt=0,pn=Ye.length;wt<pn;wt+=2){const jt=Ye[wt];Ye[wt]=En-Ye[wt+1],Ye[wt+1]=Ht-jt}break;default:throw new Error("Invalid rotation")}return Ye},Kt=new WeakSet,Ga=function(Ye,xt,Nt,$t){var pn,jt;const Bt=[],Ht=this.thickness/2,En=Ye*xt+Ht,wt=Ye*Nt+Ht;for(const $e of this.paths){const K=[],we=[];for(let Me=0,ze=$e.length;Me<ze;Me++){const[Ze,ot,Et,Lt]=$e[Me],Tt=Ye*Ze[0]+En,nn=Ye*Ze[1]+wt,It=Ye*ot[0]+En,Ft=Ye*ot[1]+wt,Yt=Ye*Et[0]+En,un=Ye*Et[1]+wt,yn=Ye*Lt[0]+En,An=Ye*Lt[1]+wt;Me===0&&(K.push(Tt,nn),we.push(Tt,nn)),K.push(It,Ft,Yt,un,yn,An),we.push(It,Ft),Me===ze-1&&we.push(yn,An)}Bt.push({bezier:Ge(pn=ct,At,Xi).call(pn,K,$t,this.rotation),points:Ge(jt=ct,At,Xi).call(jt,we,$t,this.rotation)})}return Bt},Vt=new WeakSet,Ki=function(){let Ye=1/0,xt=-1/0,Nt=1/0,$t=-1/0;for(const Bt of this.paths)for(const[Ht,En,wt,pn]of Bt){const jt=R.Util.bezierBoundingBox(...Ht,...En,...wt,...pn);Ye=Math.min(Ye,jt[0]),Nt=Math.min(Nt,jt[1]),xt=Math.max(xt,jt[2]),$t=Math.max($t,jt[3])}return[Ye,Nt,xt,$t]},We=new WeakSet,ni=function(){return U(this,V)?Math.ceil(this.thickness*this.parentScale):0},Re=new WeakSet,Cr=function(Ye=!1){if(this.isEmpty())return;if(!U(this,V)){Ge(this,Le,dr).call(this);return}const xt=Ge(this,Vt,Ki).call(this),Nt=Ge(this,We,ni).call(this);it(this,G,Math.max(O.AnnotationEditor.MIN_SIZE,xt[2]-xt[0])),it(this,ue,Math.max(O.AnnotationEditor.MIN_SIZE,xt[3]-xt[1]));const $t=Math.ceil(Nt+U(this,G)*this.scaleFactor),Bt=Math.ceil(Nt+U(this,ue)*this.scaleFactor),[Ht,En]=this.parentDimensions;this.width=$t/Ht,this.height=Bt/En,this.setAspectRatio($t,Bt);const wt=this.translationX,pn=this.translationY;this.translationX=-xt[0],this.translationY=-xt[1],Ge(this,vt,Pr).call(this),Ge(this,Le,dr).call(this),it(this,fe,$t),it(this,Y,Bt),this.setDims($t,Bt);const jt=Ye?Nt/this.scaleFactor/2:0;this.translate(wt-this.translationX-jt,pn-this.translationY-jt)},Oe(ct,ut),Oe(ct,At),Oe(ct,Xt),Fn(ct,"_defaultColor",null),Fn(ct,"_defaultOpacity",1),Fn(ct,"_defaultThickness",1),Fn(ct,"_type","ink");let ce=ct;$.InkEditor=ce},(A,$,B)=>{var ce,ue,G,ve,he,oe,ae,J,V,re,ie,Fr,fe,Dr,ee,ri,be,Yi,ge,qa,Ae,Xa,ye,Zi,Ue,ii,Ce,Ka;Object.defineProperty($,"__esModule",{value:!0}),$.StampEditor=void 0;var R=B(1),O=B(4),H=B(6),W=B(29);const at=class at extends O.AnnotationEditor{constructor(xe){super({...xe,name:"stampEditor"});Oe(this,ie);Oe(this,fe);Oe(this,ee);Oe(this,be);Oe(this,ge);Oe(this,Ae);Oe(this,ye);Oe(this,Ue);Oe(this,Ce);Oe(this,ce,null);Oe(this,ue,null);Oe(this,G,null);Oe(this,ve,null);Oe(this,he,null);Oe(this,oe,null);Oe(this,ae,null);Oe(this,J,null);Oe(this,V,!1);Oe(this,re,!1);it(this,ve,xe.bitmapUrl),it(this,he,xe.bitmapFile)}static initialize(xe){O.AnnotationEditor.initialize(xe)}static get supportedTypes(){const xe=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,R.shadow)(this,"supportedTypes",xe.map(q=>`image/${q}`))}static get supportedTypesStr(){return(0,R.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(xe){return this.supportedTypes.includes(xe)}static paste(xe,q){q.pasteEditor(R.AnnotationEditorType.STAMP,{bitmapFile:xe.getAsFile()})}remove(){var xe,q;U(this,ue)&&(it(this,ce,null),this._uiManager.imageManager.deleteId(U(this,ue)),(xe=U(this,oe))==null||xe.remove(),it(this,oe,null),(q=U(this,ae))==null||q.disconnect(),it(this,ae,null)),super.remove()}rebuild(){if(!this.parent){U(this,ue)&&Ge(this,ee,ri).call(this);return}super.rebuild(),this.div!==null&&(U(this,ue)&&Ge(this,ee,ri).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(U(this,G)||U(this,ce)||U(this,ve)||U(this,he))}get isResizable(){return!0}render(){if(this.div)return this.div;let xe,q;if(this.width&&(xe=this.x,q=this.y),super.render(),this.div.hidden=!0,U(this,ce)?Ge(this,be,Yi).call(this):Ge(this,ee,ri).call(this),this.width){const[ne,X]=this.parentDimensions;this.setAt(xe*ne,q*X,this.width*ne,this.height*X)}return this.div}static deserialize(xe,q,ne){if(xe instanceof W.StampAnnotationElement)return null;const X=super.deserialize(xe,q,ne),{rect:le,bitmapUrl:me,bitmapId:Se,isSvg:Pe,accessibilityData:Le}=xe;Se&&ne.imageManager.isValidId(Se)?it(X,ue,Se):it(X,ve,me),it(X,V,Pe);const[Ke,Ve]=X.pageDimensions;return X.width=(le[2]-le[0])/Ke,X.height=(le[3]-le[1])/Ve,Le&&(X.altTextData=Le),X}serialize(xe=!1,q=null){if(this.isEmpty())return null;const ne={annotationType:R.AnnotationEditorType.STAMP,bitmapId:U(this,ue),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:U(this,V),structTreeParentId:this._structTreeParentId};if(xe)return ne.bitmapUrl=Ge(this,Ue,ii).call(this,!0),ne.accessibilityData=this.altTextData,ne;const{decorative:X,altText:le}=this.altTextData;if(!X&&le&&(ne.accessibilityData={type:"Figure",alt:le}),q===null)return ne;q.stamps||(q.stamps=new Map);const me=U(this,V)?(ne.rect[2]-ne.rect[0])*(ne.rect[3]-ne.rect[1]):null;if(!q.stamps.has(U(this,ue)))q.stamps.set(U(this,ue),{area:me,serialized:ne}),ne.bitmap=Ge(this,Ue,ii).call(this,!1);else if(U(this,V)){const Se=q.stamps.get(U(this,ue));me>Se.area&&(Se.area=me,Se.serialized.bitmap.close(),Se.serialized.bitmap=Ge(this,Ue,ii).call(this,!1))}return ne}};ce=new WeakMap,ue=new WeakMap,G=new WeakMap,ve=new WeakMap,he=new WeakMap,oe=new WeakMap,ae=new WeakMap,J=new WeakMap,V=new WeakMap,re=new WeakMap,ie=new WeakSet,Fr=function(xe,q=!1){if(!xe){this.remove();return}it(this,ce,xe.bitmap),q||(it(this,ue,xe.id),it(this,V,xe.isSvg)),Ge(this,be,Yi).call(this)},fe=new WeakSet,Dr=function(){it(this,G,null),this._uiManager.enableWaiting(!1),U(this,oe)&&this.div.focus()},ee=new WeakSet,ri=function(){if(U(this,ue)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(U(this,ue)).then(q=>Ge(this,ie,Fr).call(this,q,!0)).finally(()=>Ge(this,fe,Dr).call(this));return}if(U(this,ve)){const q=U(this,ve);it(this,ve,null),this._uiManager.enableWaiting(!0),it(this,G,this._uiManager.imageManager.getFromUrl(q).then(ne=>Ge(this,ie,Fr).call(this,ne)).finally(()=>Ge(this,fe,Dr).call(this)));return}if(U(this,he)){const q=U(this,he);it(this,he,null),this._uiManager.enableWaiting(!0),it(this,G,this._uiManager.imageManager.getFromFile(q).then(ne=>Ge(this,ie,Fr).call(this,ne)).finally(()=>Ge(this,fe,Dr).call(this)));return}const xe=document.createElement("input");xe.type="file",xe.accept=at.supportedTypesStr,it(this,G,new Promise(q=>{xe.addEventListener("change",async()=>{if(!xe.files||xe.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const ne=await this._uiManager.imageManager.getFromFile(xe.files[0]);Ge(this,ie,Fr).call(this,ne)}q()}),xe.addEventListener("cancel",()=>{this.remove(),q()})}).finally(()=>Ge(this,fe,Dr).call(this))),xe.click()},be=new WeakSet,Yi=function(){const{div:xe}=this;let{width:q,height:ne}=U(this,ce);const[X,le]=this.pageDimensions,me=.75;if(this.width)q=this.width*X,ne=this.height*le;else if(q>me*X||ne>me*le){const Ke=Math.min(me*X/q,me*le/ne);q*=Ke,ne*=Ke}const[Se,Pe]=this.parentDimensions;this.setDims(q*Se/X,ne*Pe/le),this._uiManager.enableWaiting(!1);const Le=it(this,oe,document.createElement("canvas"));xe.append(Le),xe.hidden=!1,Ge(this,ye,Zi).call(this,q,ne),Ge(this,Ce,Ka).call(this),U(this,re)||(this.parent.addUndoableEditor(this),it(this,re,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},ge=new WeakSet,qa=function(xe,q){var me;const[ne,X]=this.parentDimensions;this.width=xe/ne,this.height=q/X,this.setDims(xe,q),(me=this._initialOptions)!=null&&me.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,U(this,J)!==null&&clearTimeout(U(this,J)),it(this,J,setTimeout(()=>{it(this,J,null),Ge(this,ye,Zi).call(this,xe,q)},200))},Ae=new WeakSet,Xa=function(xe,q){const{width:ne,height:X}=U(this,ce);let le=ne,me=X,Se=U(this,ce);for(;le>2*xe||me>2*q;){const Pe=le,Le=me;le>2*xe&&(le=le>=16384?Math.floor(le/2)-1:Math.ceil(le/2)),me>2*q&&(me=me>=16384?Math.floor(me/2)-1:Math.ceil(me/2));const Ke=new OffscreenCanvas(le,me);Ke.getContext("2d").drawImage(Se,0,0,Pe,Le,0,0,le,me),Se=Ke.transferToImageBitmap()}return Se},ye=new WeakSet,Zi=function(xe,q){xe=Math.ceil(xe),q=Math.ceil(q);const ne=U(this,oe);if(!ne||ne.width===xe&&ne.height===q)return;ne.width=xe,ne.height=q;const X=U(this,V)?U(this,ce):Ge(this,Ae,Xa).call(this,xe,q),le=ne.getContext("2d");le.filter=this._uiManager.hcmFilter,le.drawImage(X,0,0,X.width,X.height,0,0,xe,q)},Ue=new WeakSet,ii=function(xe){if(xe){if(U(this,V)){const X=this._uiManager.imageManager.getSvgUrl(U(this,ue));if(X)return X}const q=document.createElement("canvas");return{width:q.width,height:q.height}=U(this,ce),q.getContext("2d").drawImage(U(this,ce),0,0),q.toDataURL()}if(U(this,V)){const[q,ne]=this.pageDimensions,X=Math.round(this.width*q*H.PixelsPerInch.PDF_TO_CSS_UNITS),le=Math.round(this.height*ne*H.PixelsPerInch.PDF_TO_CSS_UNITS),me=new OffscreenCanvas(X,le);return me.getContext("2d").drawImage(U(this,ce),0,0,U(this,ce).width,U(this,ce).height,0,0,X,le),me.transferToImageBitmap()}return structuredClone(U(this,ce))},Ce=new WeakSet,Ka=function(){it(this,ae,new ResizeObserver(xe=>{const q=xe[0].contentRect;q.width&&q.height&&Ge(this,ge,qa).call(this,q.width,q.height)})),U(this,ae).observe(this.div)},Fn(at,"_type","stamp");let pe=at;$.StampEditor=pe}],__webpack_module_cache__={};function __w_pdfjs_require__(A){var $=__webpack_module_cache__[A];if($!==void 0)return $.exports;var B=__webpack_module_cache__[A]={exports:{}};return __webpack_modules__[A](B,B.exports,__w_pdfjs_require__),B.exports}var __webpack_exports__={};return(()=>{var A=__webpack_exports__;Object.defineProperty(A,"__esModule",{value:!0}),Object.defineProperty(A,"AbortException",{enumerable:!0,get:function(){return $.AbortException}}),Object.defineProperty(A,"AnnotationEditorLayer",{enumerable:!0,get:function(){return H.AnnotationEditorLayer}}),Object.defineProperty(A,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return $.AnnotationEditorParamsType}}),Object.defineProperty(A,"AnnotationEditorType",{enumerable:!0,get:function(){return $.AnnotationEditorType}}),Object.defineProperty(A,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return W.AnnotationEditorUIManager}}),Object.defineProperty(A,"AnnotationLayer",{enumerable:!0,get:function(){return pe.AnnotationLayer}}),Object.defineProperty(A,"AnnotationMode",{enumerable:!0,get:function(){return $.AnnotationMode}}),Object.defineProperty(A,"CMapCompressionType",{enumerable:!0,get:function(){return $.CMapCompressionType}}),Object.defineProperty(A,"DOMSVGFactory",{enumerable:!0,get:function(){return R.DOMSVGFactory}}),Object.defineProperty(A,"FeatureTest",{enumerable:!0,get:function(){return $.FeatureTest}}),Object.defineProperty(A,"GlobalWorkerOptions",{enumerable:!0,get:function(){return ce.GlobalWorkerOptions}}),Object.defineProperty(A,"ImageKind",{enumerable:!0,get:function(){return $.ImageKind}}),Object.defineProperty(A,"InvalidPDFException",{enumerable:!0,get:function(){return $.InvalidPDFException}}),Object.defineProperty(A,"MissingPDFException",{enumerable:!0,get:function(){return $.MissingPDFException}}),Object.defineProperty(A,"OPS",{enumerable:!0,get:function(){return $.OPS}}),Object.defineProperty(A,"PDFDataRangeTransport",{enumerable:!0,get:function(){return B.PDFDataRangeTransport}}),Object.defineProperty(A,"PDFDateString",{enumerable:!0,get:function(){return R.PDFDateString}}),Object.defineProperty(A,"PDFWorker",{enumerable:!0,get:function(){return B.PDFWorker}}),Object.defineProperty(A,"PasswordResponses",{enumerable:!0,get:function(){return $.PasswordResponses}}),Object.defineProperty(A,"PermissionFlag",{enumerable:!0,get:function(){return $.PermissionFlag}}),Object.defineProperty(A,"PixelsPerInch",{enumerable:!0,get:function(){return R.PixelsPerInch}}),Object.defineProperty(A,"PromiseCapability",{enumerable:!0,get:function(){return $.PromiseCapability}}),Object.defineProperty(A,"RenderingCancelledException",{enumerable:!0,get:function(){return R.RenderingCancelledException}}),Object.defineProperty(A,"SVGGraphics",{enumerable:!0,get:function(){return B.SVGGraphics}}),Object.defineProperty(A,"UnexpectedResponseException",{enumerable:!0,get:function(){return $.UnexpectedResponseException}}),Object.defineProperty(A,"Util",{enumerable:!0,get:function(){return $.Util}}),Object.defineProperty(A,"VerbosityLevel",{enumerable:!0,get:function(){return $.VerbosityLevel}}),Object.defineProperty(A,"XfaLayer",{enumerable:!0,get:function(){return ue.XfaLayer}}),Object.defineProperty(A,"build",{enumerable:!0,get:function(){return B.build}}),Object.defineProperty(A,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return $.createValidAbsoluteUrl}}),Object.defineProperty(A,"getDocument",{enumerable:!0,get:function(){return B.getDocument}}),Object.defineProperty(A,"getFilenameFromUrl",{enumerable:!0,get:function(){return R.getFilenameFromUrl}}),Object.defineProperty(A,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return R.getPdfFilenameFromUrl}}),Object.defineProperty(A,"getXfaPageViewport",{enumerable:!0,get:function(){return R.getXfaPageViewport}}),Object.defineProperty(A,"isDataScheme",{enumerable:!0,get:function(){return R.isDataScheme}}),Object.defineProperty(A,"isPdfFile",{enumerable:!0,get:function(){return R.isPdfFile}}),Object.defineProperty(A,"loadScript",{enumerable:!0,get:function(){return R.loadScript}}),Object.defineProperty(A,"noContextMenu",{enumerable:!0,get:function(){return R.noContextMenu}}),Object.defineProperty(A,"normalizeUnicode",{enumerable:!0,get:function(){return $.normalizeUnicode}}),Object.defineProperty(A,"renderTextLayer",{enumerable:!0,get:function(){return O.renderTextLayer}}),Object.defineProperty(A,"setLayerDimensions",{enumerable:!0,get:function(){return R.setLayerDimensions}}),Object.defineProperty(A,"shadow",{enumerable:!0,get:function(){return $.shadow}}),Object.defineProperty(A,"updateTextLayer",{enumerable:!0,get:function(){return O.updateTextLayer}}),Object.defineProperty(A,"version",{enumerable:!0,get:function(){return B.version}});var $=__w_pdfjs_require__(1),B=__w_pdfjs_require__(2),R=__w_pdfjs_require__(6),O=__w_pdfjs_require__(26),H=__w_pdfjs_require__(27),W=__w_pdfjs_require__(5),pe=__w_pdfjs_require__(29),ce=__w_pdfjs_require__(14),ue=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;(function(A){var $=reactExports,B=pdfExports;function R(Q){var _e=Object.create(null);return Q&&Object.keys(Q).forEach(function(ke){if(ke!=="default"){var De=Object.getOwnPropertyDescriptor(Q,ke);Object.defineProperty(_e,ke,De.get?De:{enumerable:!0,get:function(){return Q[ke]}})}}),_e.default=Q,Object.freeze(_e)}var O,H=R($),W=R(B);A.AnnotationType=void 0,(O=A.AnnotationType||(A.AnnotationType={}))[O.Text=1]="Text",O[O.Link=2]="Link",O[O.FreeText=3]="FreeText",O[O.Line=4]="Line",O[O.Square=5]="Square",O[O.Circle=6]="Circle",O[O.Polygon=7]="Polygon",O[O.Polyline=8]="Polyline",O[O.Highlight=9]="Highlight",O[O.Underline=10]="Underline",O[O.Squiggly=11]="Squiggly",O[O.StrikeOut=12]="StrikeOut",O[O.Stamp=13]="Stamp",O[O.Caret=14]="Caret",O[O.Ink=15]="Ink",O[O.Popup=16]="Popup",O[O.FileAttachment=17]="FileAttachment";var pe=function(Q,_e){return pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ke,De){ke.__proto__=De}||function(ke,De){for(var je in De)Object.prototype.hasOwnProperty.call(De,je)&&(ke[je]=De[je])},pe(Q,_e)};function ce(Q,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Class extends value "+String(_e)+" is not a constructor or null");function ke(){this.constructor=Q}pe(Q,_e),Q.prototype=_e===null?Object.create(_e):(ke.prototype=_e.prototype,new ke)}var ue,G=function(){return G=Object.assign||function(Q){for(var _e,ke=1,De=arguments.length;ke<De;ke++)for(var je in _e=arguments[ke])Object.prototype.hasOwnProperty.call(_e,je)&&(Q[je]=_e[je]);return Q},G.apply(this,arguments)};A.TextDirection=void 0,(ue=A.TextDirection||(A.TextDirection={})).RightToLeft="RTL",ue.LeftToRight="LTR";var ve,he=H.createContext({currentTheme:"light",direction:A.TextDirection.LeftToRight,setCurrentTheme:function(){}}),oe=function(Q){var _e=[];return Object.keys(Q).forEach(function(ke){ke&&Q[ke]&&_e.push(ke)}),_e.join(" ")},ae=typeof window<"u"?H.useLayoutEffect:H.useEffect,J=function(Q){var _e=H.useRef(null),ke=Q.once,De=Q.threshold,je=Q.onVisibilityChanged;return ae(function(){var He=_e.current;if(He){var nt=new IntersectionObserver(function(Je){Je.forEach(function(Ne){var tt=Ne.isIntersecting,et=Ne.intersectionRatio;je({isVisible:tt,ratio:et}),tt&&ke&&(nt.unobserve(He),nt.disconnect())})},{threshold:De||0});return nt.observe(He),function(){nt.unobserve(He),nt.disconnect()}}},[]),_e},V=function(Q){var _e=Q.children,ke=Q.ignoreDirection,De=ke!==void 0&&ke,je=Q.size,He=je===void 0?24:je,nt=H.useContext(he).direction,Je=!De&&nt===A.TextDirection.RightToLeft,Ne="".concat(He||24,"px");return H.createElement("svg",{"aria-hidden":"true",className:oe({"rpv-core__icon":!0,"rpv-core__icon--rtl":Je}),focusable:"false",height:Ne,viewBox:"0 0 24 24",width:Ne},_e)},re=function(){return H.createElement(V,{size:16},H.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},ie=function(Q){var _e=Q.children,ke=Q.testId,De=Q.onClick,je=H.useContext(he).direction===A.TextDirection.RightToLeft,He=ke?{"data-testid":ke}:{};return H.createElement("button",G({className:oe({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":je}),type:"button",onClick:De},He),_e)},se=function(Q){var _e=Q.size,ke=_e===void 0?"4rem":_e,De=Q.testId,je=H.useState(!1),He=je[0],nt=je[1],Je=De?{"data-testid":De}:{},Ne=J({onVisibilityChanged:function(tt){nt(tt.isVisible)}});return H.createElement("div",G({},Je,{className:oe({"rpv-core__spinner":!0,"rpv-core__spinner--animating":He}),ref:Ne,style:{height:ke,width:ke}}))},fe=function(Q){var _e=Q.ariaLabel,ke=_e===void 0?"":_e,De=Q.autoFocus,je=De!==void 0&&De,He=Q.placeholder,nt=He===void 0?"":He,Je=Q.testId,Ne=Q.type,tt=Ne===void 0?"text":Ne,et=Q.value,St=et===void 0?"":et,yt=Q.onChange,bt=Q.onKeyDown,Ot=bt===void 0?function(){}:bt,Rt=H.useContext(he).direction,kt=H.useRef(),bn=Rt===A.TextDirection.RightToLeft,Qt={ref:kt,"data-testid":"","aria-label":ke,className:oe({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":bn}),placeholder:nt,value:St,onChange:function(tn){return yt(tn.target.value)},onKeyDown:Ot};return Je&&(Qt["data-testid"]=Je),ae(function(){if(je){var tn=kt.current;if(tn){var cn=window.scrollX,Wt=window.scrollY;tn.focus(),window.scrollTo(cn,Wt)}}},[]),tt==="text"?H.createElement("input",G({type:"text"},Qt)):H.createElement("input",G({type:"password"},Qt))};(function(Q){Q[Q.ExitFullScreen=0]="ExitFullScreen",Q[Q.FullScreenChange=1]="FullScreenChange",Q[Q.FullScreenElement=2]="FullScreenElement",Q[Q.FullScreenEnabled=3]="FullScreenEnabled",Q[Q.RequestFullScreen=4]="RequestFullScreen"})(ve||(ve={}));var Y,ee={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},Ee={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},be={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},te=typeof window<"u",ge=te&&(ve.FullScreenEnabled in document&&ee||Ee.FullScreenEnabled in document&&Ee||be.FullScreenEnabled in document&&be)||ee,de=function(){return te&&ge.FullScreenEnabled in document&&document[ge.FullScreenEnabled]===!0},Ae=function(Q){return te?Q[ge.ExitFullScreen]():Promise.resolve({})},Fe=function(){return te?document[ge.FullScreenElement]:null},ye=function(Q,_e){var ke=H.useRef(),De=function(){ke.current&&clearTimeout(ke.current)};return H.useEffect(function(){return function(){return De()}},[]),H.useCallback(function(){for(var je=[],He=0;He<arguments.length;He++)je[He]=arguments[He];De(),ke.current=setTimeout(function(){Q.apply(void 0,je)},_e)},[Q,_e])},Te=function(){var Q=H.useRef(!1);return H.useEffect(function(){return Q.current=!0,function(){Q.current=!1}},[]),Q},Ue=function(Q){var _e=H.useRef(Q);return H.useEffect(function(){_e.current=Q},[Q]),_e.current};(function(Q){Q.NotRenderedYet="NotRenderedYet",Q.Rendering="Rendering",Q.Rendered="Rendered"})(Y||(Y={}));var Be,Ce=-9999,Qe=function(Q){var _e=Q.doc,ke=_e.numPages,De=_e.loadingTask.docId,je=H.useMemo(function(){return Array(ke).fill(null).map(function(Je,Ne){return{pageIndex:Ne,renderStatus:Y.NotRenderedYet,visibility:Ce}})},[De]),He=H.useRef({currentRenderingPage:-1,startRange:0,endRange:ke-1,visibilities:je}),nt=function(Je,Ne){He.current.visibilities[Je].visibility=Ne};return{getHighestPriorityPage:function(){var Je=He.current.visibilities.slice(He.current.startRange,He.current.endRange+1).filter(function(yt){return yt.visibility>Ce});if(!Je.length)return-1;for(var Ne=Je[0].pageIndex,tt=Je[Je.length-1].pageIndex,et=Je.length,St=0;St<et;St++){if(Je[St].renderStatus===Y.Rendering)return-1;if(Je[St].renderStatus===Y.NotRenderedYet)return Je[St].pageIndex}return tt+1<ke&&He.current.visibilities[tt+1].renderStatus!==Y.Rendered?tt+1:Ne-1>=0&&He.current.visibilities[Ne-1].renderStatus!==Y.Rendered?Ne-1:-1},isInRange:function(Je){return Je>=He.current.startRange&&Je<=He.current.endRange},markNotRendered:function(){for(var Je=0;Je<ke;Je++)He.current.visibilities[Je].renderStatus=Y.NotRenderedYet},markRendered:function(Je){He.current.visibilities[Je].renderStatus=Y.Rendered},markRendering:function(Je){He.current.currentRenderingPage!==-1&&He.current.currentRenderingPage!==Je&&He.current.visibilities[He.current.currentRenderingPage].renderStatus===Y.Rendering&&(He.current.visibilities[He.current.currentRenderingPage].renderStatus=Y.NotRenderedYet),He.current.visibilities[Je].renderStatus=Y.Rendering,He.current.currentRenderingPage=Je},setOutOfRange:function(Je){nt(Je,Ce)},setRange:function(Je,Ne){He.current.startRange=Je,He.current.endRange=Ne;for(var tt=0;tt<ke;tt++)(tt<Je||tt>Ne)&&(He.current.visibilities[tt].visibility=Ce,He.current.visibilities[tt].renderStatus=Y.NotRenderedYet)},setVisibility:nt}},at={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},ft=H.createContext({l10n:at,setL10n:function(){}}),_t=0,xe=function(){return _t++},q=function(Q,_e,ke){var De=function(je){var He=_e.current;if(He){var nt=je.target;if(nt instanceof Element&&nt.shadowRoot){var Je=je.composedPath();Je.length>0&&!He.contains(Je[0])&&ke()}else He.contains(nt)||ke()}};H.useEffect(function(){if(Q){var je={capture:!0};return document.addEventListener("click",De,je),function(){document.removeEventListener("click",De,je)}}},[])},ne=function(Q){var _e=function(ke){ke.key==="Escape"&&Q()};H.useEffect(function(){return document.addEventListener("keyup",_e),function(){document.removeEventListener("keyup",_e)}},[])},X=function(Q){var _e=Q.ariaControlsSuffix,ke=Q.children,De=Q.closeOnClickOutside,je=Q.closeOnEscape,He=Q.onToggle,nt=H.useRef(),Je=H.useContext(he).direction===A.TextDirection.RightToLeft;return H.useEffect(function(){var Ne=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=Ne}},[]),ne(function(){nt.current&&je&&He()}),q(De,nt,He),ae(function(){var Ne=nt.current;if(Ne){var tt=.75*document.body.clientHeight;Ne.getBoundingClientRect().height>=tt&&(Ne.style.overflow="auto",Ne.style.maxHeight="".concat(tt,"px"))}},[]),H.createElement("div",{"aria-modal":"true",className:oe({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":Je}),id:"rpv-core__modal-body-".concat(_e),ref:nt,role:"dialog",tabIndex:-1},ke)},le=function(Q){var _e=Q.children;return H.createElement("div",{className:"rpv-core__modal-overlay"},_e)};A.ToggleStatus=void 0,(Be=A.ToggleStatus||(A.ToggleStatus={})).Close="Close",Be.Open="Open",Be.Toggle="Toggle";var me,Se=function(Q){var _e=H.useState(Q),ke=_e[0],De=_e[1];return{opened:ke,toggle:function(je){switch(je){case A.ToggleStatus.Close:De(!1);break;case A.ToggleStatus.Open:De(!0);break;case A.ToggleStatus.Toggle:default:De(function(He){return!He})}}}},Pe=function(Q){var _e=Q.content,ke=Q.isOpened,De=ke!==void 0&&ke,je=Q.target,He=Se(De),nt=He.opened,Je=He.toggle;return H.createElement(H.Fragment,null,je&&je(Je,nt),nt&&_e(Je))};A.Position=void 0,(me=A.Position||(A.Position={})).TopLeft="TOP_LEFT",me.TopCenter="TOP_CENTER",me.TopRight="TOP_RIGHT",me.RightTop="RIGHT_TOP",me.RightCenter="RIGHT_CENTER",me.RightBottom="RIGHT_BOTTOM",me.BottomLeft="BOTTOM_LEFT",me.BottomCenter="BOTTOM_CENTER",me.BottomRight="BOTTOM_RIGHT",me.LeftTop="LEFT_TOP",me.LeftCenter="LEFT_CENTER",me.LeftBottom="LEFT_BOTTOM";var Le,Ke,Ve,rt,lt,gt,dt,pt,vt=function(Q,_e,ke,De,je){ae(function(){var He=_e.current,nt=Q.current,Je=ke.current;if(nt&&He&&Je){var Ne=Je.getBoundingClientRect(),tt=function(yt,bt,Ot,Rt){var kt=bt.getBoundingClientRect(),bn=yt.getBoundingClientRect(),Qt=bn.height,tn=bn.width,cn=0,Wt=0;switch(Ot){case A.Position.TopLeft:cn=kt.top-Qt,Wt=kt.left;break;case A.Position.TopCenter:cn=kt.top-Qt,Wt=kt.left+kt.width/2-tn/2;break;case A.Position.TopRight:cn=kt.top-Qt,Wt=kt.left+kt.width-tn;break;case A.Position.RightTop:cn=kt.top,Wt=kt.left+kt.width;break;case A.Position.RightCenter:cn=kt.top+kt.height/2-Qt/2,Wt=kt.left+kt.width;break;case A.Position.RightBottom:cn=kt.top+kt.height-Qt,Wt=kt.left+kt.width;break;case A.Position.BottomLeft:cn=kt.top+kt.height,Wt=kt.left;break;case A.Position.BottomCenter:cn=kt.top+kt.height,Wt=kt.left+kt.width/2-tn/2;break;case A.Position.BottomRight:cn=kt.top+kt.height,Wt=kt.left+kt.width-tn;break;case A.Position.LeftTop:cn=kt.top,Wt=kt.left-tn;break;case A.Position.LeftCenter:cn=kt.top+kt.height/2-Qt/2,Wt=kt.left-tn;break;case A.Position.LeftBottom:cn=kt.top+kt.height-Qt,Wt=kt.left-tn}return{left:Wt+(Rt.left||0),top:cn+(Rt.top||0)}}(nt,He,De,je),et=tt.top,St=tt.left;nt.style.top="".concat(et-Ne.top,"px"),nt.style.left="".concat(St-Ne.left,"px")}},[])},mt=function(Q){var _e,ke=Q.customClassName,De=Q.position;return H.createElement("div",{className:oe((_e={"rpv-core__arrow":!0,"rpv-core__arrow--tl":De===A.Position.TopLeft,"rpv-core__arrow--tc":De===A.Position.TopCenter,"rpv-core__arrow--tr":De===A.Position.TopRight,"rpv-core__arrow--rt":De===A.Position.RightTop,"rpv-core__arrow--rc":De===A.Position.RightCenter,"rpv-core__arrow--rb":De===A.Position.RightBottom,"rpv-core__arrow--bl":De===A.Position.BottomLeft,"rpv-core__arrow--bc":De===A.Position.BottomCenter,"rpv-core__arrow--br":De===A.Position.BottomRight,"rpv-core__arrow--lt":De===A.Position.LeftTop,"rpv-core__arrow--lc":De===A.Position.LeftCenter,"rpv-core__arrow--lb":De===A.Position.LeftBottom},_e["".concat(ke)]=ke!=="",_e))})},Mt=function(Q){var _e=Q.ariaControlsSuffix,ke=Q.children,De=Q.closeOnClickOutside,je=Q.offset,He=Q.position,nt=Q.targetRef,Je=Q.onClose,Ne=H.useRef(),tt=H.useRef(),et=H.useRef(),St=H.useContext(he).direction===A.TextDirection.RightToLeft;q(De,Ne,Je),vt(Ne,nt,et,He,je),ae(function(){var bt=tt.current;if(bt){var Ot=.75*document.body.clientHeight;bt.getBoundingClientRect().height>=Ot&&(bt.style.overflow="auto",bt.style.maxHeight="".concat(Ot,"px"))}},[]);var yt="rpv-core__popover-body-inner-".concat(_e);return H.createElement(H.Fragment,null,H.createElement("div",{ref:et,style:{left:0,position:"absolute",top:0}}),H.createElement("div",{"aria-describedby":yt,className:oe({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":St}),id:"rpv-core__popover-body-".concat(_e),ref:Ne,role:"dialog",tabIndex:-1},H.createElement(mt,{customClassName:"rpv-core__popover-body-arrow",position:He}),H.createElement("div",{id:yt,ref:tt},ke)))},st=function(Q){var _e=Q.closeOnEscape,ke=Q.onClose,De=H.useRef();return ne(function(){De.current&&_e&&ke()}),H.createElement("div",{className:"rpv-core__popover-overlay",ref:De})},Xe=function(Q){var _e=Q.ariaControlsSuffix,ke=Q.children,De=Q.contentRef,je=Q.offset,He=Q.position,nt=Q.targetRef,Je=H.useRef(),Ne=H.useContext(he).direction===A.TextDirection.RightToLeft;return vt(De,nt,Je,He,je),H.createElement(H.Fragment,null,H.createElement("div",{ref:Je,style:{left:0,position:"absolute",top:0}}),H.createElement("div",{className:oe({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":Ne}),id:"rpv-core__tooltip-body-".concat(_e),ref:De,role:"tooltip"},H.createElement(mt,{customClassName:"rpv-core__tooltip-body-arrow",position:He}),H.createElement("div",{className:"rpv-core__tooltip-body-content"},ke)))};A.FullScreenMode=void 0,(Le=A.FullScreenMode||(A.FullScreenMode={})).Normal="Normal",Le.Entering="Entering",Le.Entered="Entered",Le.EnteredCompletely="EnteredCompletely",Le.Exitting="Exitting",Le.Exited="Exited",A.LayerRenderStatus=void 0,(Ke=A.LayerRenderStatus||(A.LayerRenderStatus={}))[Ke.PreRender=0]="PreRender",Ke[Ke.DidRender=1]="DidRender",A.PageMode=void 0,(Ve=A.PageMode||(A.PageMode={})).Attachments="UseAttachments",Ve.Bookmarks="UseOutlines",Ve.ContentGroup="UseOC",Ve.Default="UserNone",Ve.FullScreen="FullScreen",Ve.Thumbnails="UseThumbs",A.PasswordStatus=void 0,(rt=A.PasswordStatus||(A.PasswordStatus={})).RequiredPassword="RequiredPassword",rt.WrongPassword="WrongPassword",A.RotateDirection=void 0,(lt=A.RotateDirection||(A.RotateDirection={})).Backward="Backward",lt.Forward="Forward",A.ScrollMode=void 0,(gt=A.ScrollMode||(A.ScrollMode={})).Page="Page",gt.Horizontal="Horizontal",gt.Vertical="Vertical",gt.Wrapped="Wrapped",A.SpecialZoomLevel=void 0,(dt=A.SpecialZoomLevel||(A.SpecialZoomLevel={})).ActualSize="ActualSize",dt.PageFit="PageFit",dt.PageWidth="PageWidth",A.ViewMode=void 0,(pt=A.ViewMode||(A.ViewMode={})).DualPage="DualPage",pt.DualPageWithCover="DualPageWithCover",pt.SinglePage="SinglePage";var qe,ut=function(Q,_e){return Q.reduce(function(ke,De,je){return je%_e?ke[ke.length-1].push(De):ke.push([De]),ke},[])},Pt=function(Q,_e){switch(_e[1].name){case"XYZ":return{bottomOffset:function(ke,De){return _e[3]===null?De:_e[3]},leftOffset:function(ke,De){return _e[2]===null?0:_e[2]},pageIndex:Q,scaleTo:_e[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:Q,scaleTo:A.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:_e[2],leftOffset:0,pageIndex:Q,scaleTo:A.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:Q,scaleTo:1}}},At=new Map,Ut=new Map,Xt=function(Q,_e){return"".concat(Q.loadingTask.docId,"___").concat(_e.num,"R").concat(_e.gen===0?"":_e.gen)},Dt=function(Q,_e,ke){At.set(Xt(Q,_e),ke)},Kt=function(Q,_e){if(!Q)return Promise.reject("The document is not loaded yet");var ke="".concat(Q.loadingTask.docId,"___").concat(_e),De=Ut.get(ke);return De?Promise.resolve(De):new Promise(function(je,He){Q.getPage(_e+1).then(function(nt){Ut.set(ke,nt),nt.ref&&Dt(Q,nt.ref,_e),je(nt)})})},en=function(Q,_e){return new Promise(function(ke){new Promise(function(De){typeof _e=="string"?Q.getDestination(_e).then(function(je){De(je)}):De(_e)}).then(function(De){if(typeof De[0]=="object"&&De[0]!==null){var je=De[0],He=function(Je,Ne){var tt=Xt(Je,Ne);return At.has(tt)?At.get(tt):null}(Q,je);He===null?Q.getPageIndex(je).then(function(Je){Dt(Q,je,Je),en(Q,_e).then(function(Ne){return ke(Ne)})}):ke(Pt(He,De))}else{var nt=Pt(De[0],De);ke(nt)}})})};(function(Q){Q[Q.Solid=1]="Solid",Q[Q.Dashed=2]="Dashed",Q[Q.Beveled=3]="Beveled",Q[Q.Inset=4]="Inset",Q[Q.Underline=5]="Underline"})(qe||(qe={}));var Vt,ln=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),We=function(Q,_e,ke,De){var je=parseInt(Q,10);return je>=_e&&je<=ke?je:De},Ie=function(Q){return Q.contentsObj?Q.contentsObj.str:Q.contents||""},Re=function(Q){return Q.titleObj?Q.titleObj.str:Q.title||""},ht=function(Q){var _e=Q.annotation,ke=H.useContext(he).direction,De=Re(_e),je=Ie(_e),He=ke===A.TextDirection.RightToLeft,nt=H.useRef(),Je="";if(_e.modificationDate){var Ne=function(tt){var et=ln.exec(tt);if(!et)return null;var St=parseInt(et[1],10),yt=We(et[2],1,12,1)-1,bt=We(et[3],1,31,1),Ot=We(et[4],0,23,0),Rt=We(et[5],0,59,0),kt=We(et[6],0,59,0),bn=et[7]||"Z",Qt=We(et[8],0,23,0),tn=We(et[9],0,59,0);switch(bn){case"-":Ot+=Qt,Rt+=tn;break;case"+":Ot-=Qt,Rt-=tn}return new Date(Date.UTC(St,yt,bt,Ot,Rt,kt))}(_e.modificationDate);Je=Ne?"".concat(Ne.toLocaleDateString(),", ").concat(Ne.toLocaleTimeString()):""}return H.useLayoutEffect(function(){if(nt.current){var tt=document.querySelector('[data-annotation-id="'.concat(_e.id,'"]'));if(tt){var et=tt;return et.style.zIndex+=1,function(){et.style.zIndex="".concat(parseInt(et.style.zIndex,10)-1)}}}},[]),H.createElement("div",{ref:nt,className:oe({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":He}),style:{top:_e.annotationType===A.AnnotationType.Popup?"":"100%"}},De&&H.createElement(H.Fragment,null,H.createElement("div",{className:oe({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!He,"rpv-core__annotation-popup-title--rtl":He})},De),H.createElement("div",{className:"rpv-core__annotation-popup-date"},Je)),je&&H.createElement("div",{className:"rpv-core__annotation-popup-content"},je.split(`
`).map(function(tt,et){return H.createElement(H.Fragment,{key:et},tt,H.createElement("br",null))})))};(function(Q){Q.Click="Click",Q.Hover="Hover"})(Vt||(Vt={}));var ct,an=function(Q){var _e,ke=Q.annotation,De=Q.children,je=Q.ignoreBorder,He=Q.hasPopup,nt=Q.isRenderable,Je=Q.page,Ne=Q.viewport,tt=ke.rect,et=function(){var on=Se(!1),Cn=on.opened,Pn=on.toggle,kn=H.useState(Vt.Hover),$n=kn[0],Tn=kn[1];return{opened:Cn,closeOnHover:function(){$n===Vt.Hover&&Pn(A.ToggleStatus.Close)},openOnHover:function(){$n===Vt.Hover&&Pn(A.ToggleStatus.Open)},toggleOnClick:function(){switch($n){case Vt.Click:Cn&&Tn(Vt.Hover),Pn(A.ToggleStatus.Toggle);break;case Vt.Hover:Tn(Vt.Click),Pn(A.ToggleStatus.Open)}}}}(),St=et.closeOnHover,yt=et.opened,bt=et.openOnHover,Ot=et.toggleOnClick,Rt=(_e=[tt[0],Je.view[3]+Je.view[1]-tt[1],tt[2],Je.view[3]+Je.view[1]-tt[3]],[Math.min(_e[0],_e[2]),Math.min(_e[1],_e[3]),Math.max(_e[0],_e[2]),Math.max(_e[1],_e[3])]),kt=tt[2]-tt[0],bn=tt[3]-tt[1],Qt={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!je&&ke.borderStyle.width>0){switch(ke.borderStyle.style){case qe.Dashed:Qt.borderStyle="dashed";break;case qe.Solid:Qt.borderStyle="solid";break;case qe.Underline:Qt=Object.assign({borderBottomStyle:"solid"},Qt);case qe.Beveled:case qe.Inset:}var tn=ke.borderStyle.width;Qt.borderWidth="".concat(tn,"px"),ke.borderStyle.style!==qe.Underline&&(kt-=2*tn,bn-=2*tn);var cn=ke.borderStyle,Wt=cn.horizontalCornerRadius,dn=cn.verticalCornerRadius;(Wt>0||dn>0)&&(Qt.borderRadius="".concat(Wt,"px / ").concat(dn,"px")),ke.color?Qt.borderColor="rgb(".concat(0|ke.color[0],", ").concat(0|ke.color[1],", ").concat(0|ke.color[2],")"):Qt.borderWidth="0"}return H.createElement(H.Fragment,null,nt&&De({popup:{opened:yt,closeOnHover:St,openOnHover:bt,toggleOnClick:Ot},slot:{attrs:{style:Object.assign({height:"".concat(bn,"px"),left:"".concat(Rt[0],"px"),top:"".concat(Rt[1],"px"),transform:"matrix(".concat(Ne.transform.join(","),")"),transformOrigin:"-".concat(Rt[0],"px -").concat(Rt[1],"px"),width:"".concat(kt,"px")},Qt)},children:H.createElement(H.Fragment,null,He&&yt&&H.createElement(ht,{annotation:ke}))}}))},_n=function(Q){var _e=Q.annotation,ke=Q.page,De=Q.viewport,je=_e.hasPopup===!1,He=Re(_e),nt=Ie(_e),Je=!!(_e.hasPopup||He||nt);return H.createElement(an,{annotation:_e,hasPopup:je,ignoreBorder:!0,isRenderable:Je,page:ke,viewport:De},function(Ne){return H.createElement("div",G({},Ne.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":_e.id,onClick:Ne.popup.toggleOnClick,onMouseEnter:Ne.popup.openOnHover,onMouseLeave:Ne.popup.closeOnHover}),Ne.slot.children)})},Ye=function(Q){var _e=Q.annotation,ke=Q.page,De=Q.viewport,je=_e.hasPopup===!1,He=Re(_e),nt=Ie(_e),Je=!!(_e.hasPopup||He||nt),Ne=_e.rect,tt=Ne[2]-Ne[0],et=Ne[3]-Ne[1],St=_e.borderStyle.width;return H.createElement(an,{annotation:_e,hasPopup:je,ignoreBorder:!0,isRenderable:Je,page:ke,viewport:De},function(yt){return H.createElement("div",G({},yt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":_e.id,onClick:yt.popup.toggleOnClick,onMouseEnter:yt.popup.openOnHover,onMouseLeave:yt.popup.closeOnHover}),H.createElement("svg",{height:"".concat(et,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(tt," ").concat(et),width:"".concat(tt,"px")},H.createElement("circle",{cy:et/2,fill:"none",rx:tt/2-St/2,ry:et/2-St/2,stroke:"transparent",strokeWidth:St||1})),yt.slot.children)})},xt=function(Q){var _e=Q.annotation,ke=Q.page,De=Q.viewport,je=Re(_e),He=Ie(_e),nt=!(_e.hasPopup!==!1||!je&&!He),Je=function(){var Ne,tt,et,St,yt=_e.file;yt&&(Ne=yt.filename,tt=yt.content,et=typeof tt=="string"?"":URL.createObjectURL(new Blob([tt],{type:""})),(St=document.createElement("a")).style.display="none",St.href=et||Ne,St.setAttribute("download",function(bt){var Ot=bt.split("/").pop();return Ot?Ot.split("#")[0].split("?")[0]:bt}(Ne)),document.body.appendChild(St),St.click(),document.body.removeChild(St),et&&URL.revokeObjectURL(et))};return H.createElement(an,{annotation:_e,hasPopup:nt,ignoreBorder:!0,isRenderable:!0,page:ke,viewport:De},function(Ne){return H.createElement("div",G({},Ne.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":_e.id,onClick:Ne.popup.toggleOnClick,onDoubleClick:Je,onMouseEnter:Ne.popup.openOnHover,onMouseLeave:Ne.popup.closeOnHover}),Ne.slot.children)})},Nt=function(Q){var _e=Q.annotation,ke=Q.page,De=Q.viewport,je=_e.hasPopup===!1,He=Re(_e),nt=Ie(_e),Je=!!(_e.hasPopup||He||nt);return H.createElement(an,{annotation:_e,hasPopup:je,ignoreBorder:!0,isRenderable:Je,page:ke,viewport:De},function(Ne){return H.createElement("div",G({},Ne.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":_e.id,onClick:Ne.popup.toggleOnClick,onMouseEnter:Ne.popup.openOnHover,onMouseLeave:Ne.popup.closeOnHover}),Ne.slot.children)})},$t=function(Q){var _e=Q.annotation,ke=Q.page,De=Q.viewport,je=Re(_e),He=Ie(_e),nt=!(!je&&!He),Je=!_e.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(_e.parentType)!==-1;return ae(function(){if(_e.parentId){var Ne=document.querySelector('[data-annotation-id="'.concat(_e.parentId,'"]')),tt=document.querySelector('[data-annotation-id="'.concat(_e.id,'"]'));if(Ne&&tt){var et=parseFloat(Ne.style.left),St=parseFloat(Ne.style.top)+parseFloat(Ne.style.height);tt.style.left="".concat(et,"px"),tt.style.top="".concat(St,"px"),tt.style.transformOrigin="-".concat(et,"px -").concat(St,"px")}}},[]),H.createElement(an,{annotation:_e,hasPopup:Je,ignoreBorder:!1,isRenderable:nt,page:ke,viewport:De},function(Ne){return H.createElement("div",G({},Ne.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":_e.id}),H.createElement(ht,{annotation:_e}))})},Bt=function(Q){var _e=Q.annotation,ke=Q.childAnnotation,De=Q.page,je=Q.viewport,He=_e.hasPopup===!1,nt=Re(_e),Je=Ie(_e),Ne=!!(_e.hasPopup||nt||Je);if(_e.quadPoints&&_e.quadPoints.length>0){var tt=_e.quadPoints.map(function(et){return Object.assign({},_e,{rect:[et[2].x,et[2].y,et[1].x,et[1].y],quadPoints:[]})});return H.createElement(H.Fragment,null,tt.map(function(et,St){return H.createElement(Bt,{key:St,annotation:et,childAnnotation:ke,page:De,viewport:je})}))}return H.createElement(an,{annotation:_e,hasPopup:He,ignoreBorder:!0,isRenderable:Ne,page:De,viewport:je},function(et){return H.createElement(H.Fragment,null,H.createElement("div",G({},et.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":_e.id,onClick:et.popup.toggleOnClick,onMouseEnter:et.popup.openOnHover,onMouseLeave:et.popup.closeOnHover}),et.slot.children),ke&&ke.annotationType===A.AnnotationType.Popup&&et.popup.opened&&H.createElement($t,{annotation:ke,page:De,viewport:je}))})},Ht=function(Q){var _e=Q.annotation,ke=Q.page,De=Q.viewport,je=_e.hasPopup===!1,He=Re(_e),nt=Ie(_e),Je=!!(_e.hasPopup||He||nt),Ne=_e.rect,tt=Ne[2]-Ne[0],et=Ne[3]-Ne[1],St=_e.borderStyle.width;return H.createElement(an,{annotation:_e,hasPopup:je,ignoreBorder:!0,isRenderable:Je,page:ke,viewport:De},function(yt){return H.createElement("div",G({},yt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":_e.id,onClick:yt.popup.toggleOnClick,onMouseEnter:yt.popup.openOnHover,onMouseLeave:yt.popup.closeOnHover}),_e.inkLists&&_e.inkLists.length&&H.createElement("svg",{height:"".concat(et,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(tt," ").concat(et),width:"".concat(tt,"px")},_e.inkLists.map(function(bt,Ot){return H.createElement("polyline",{key:Ot,fill:"none",stroke:"transparent",strokeWidth:St||1,points:bt.map(function(Rt){return"".concat(Rt.x-Ne[0],",").concat(Ne[3]-Rt.y)}).join(" ")})})),yt.slot.children)})},En=function(Q){var _e=Q.annotation,ke=Q.page,De=Q.viewport,je=_e.hasPopup===!1,He=Re(_e),nt=Ie(_e),Je=!!(_e.hasPopup||He||nt),Ne=_e.rect,tt=Ne[2]-Ne[0],et=Ne[3]-Ne[1],St=_e.borderStyle.width;return H.createElement(an,{annotation:_e,hasPopup:je,ignoreBorder:!0,isRenderable:Je,page:ke,viewport:De},function(yt){return H.createElement("div",G({},yt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":_e.id,onClick:yt.popup.toggleOnClick,onMouseEnter:yt.popup.openOnHover,onMouseLeave:yt.popup.closeOnHover}),H.createElement("svg",{height:"".concat(et,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(tt," ").concat(et),width:"".concat(tt,"px")},H.createElement("line",{stroke:"transparent",strokeWidth:St||1,x1:Ne[2]-_e.lineCoordinates[0],x2:Ne[2]-_e.lineCoordinates[2],y1:Ne[3]-_e.lineCoordinates[1],y2:Ne[3]-_e.lineCoordinates[3]})),yt.slot.children)})},wt=/^([^\w]*)(javascript|data|vbscript)/im,pn=/&#(\w+)(^\w|;)?/g,jt=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,$e=/^([^:]+):/gm,K=function(Q,_e){var ke,De=(ke=Q||"",ke.replace(pn,function(Je,Ne){return String.fromCharCode(Ne)})).replace(jt,"").trim();if(!De)return _e;var je=De[0];if(je==="."||je==="/")return De;var He=De.match($e);if(!He)return De;var nt=He[0];return wt.test(nt)?_e:De},we=function(Q){var _e,ke=Q.annotation,De=Q.annotationContainerRef,je=Q.doc,He=Q.outlines,nt=Q.page,Je=Q.pageIndex,Ne=Q.scale,tt=Q.viewport,et=Q.onExecuteNamedAction,St=Q.onJumpFromLinkAnnotation,yt=Q.onJumpToDest,bt=H.useRef(),Ot=He&&He.length&&ke.dest&&typeof ke.dest=="string"?(_e=He.find(function(Qt){return Qt.dest===ke.dest}))===null||_e===void 0?void 0:_e.title:"",Rt=!!(ke.url||ke.dest||ke.action||ke.unsafeUrl),kt={};if(ke.url||ke.unsafeUrl){var bn=K(ke.url||ke.unsafeUrl,"");bn?kt={"data-target":"external",href:bn,rel:"noopener noreferrer nofollow",target:ke.newWindow?"_blank":"",title:bn}:Rt=!1}else kt={href:"","data-annotation-link":ke.id,onClick:function(Qt){Qt.preventDefault(),ke.action?et(ke.action):en(je,ke.dest).then(function(tn){var cn=bt.current,Wt=De.current;if(cn&&Wt){var dn=cn.getBoundingClientRect();Wt.style.setProperty("height","100%"),Wt.style.setProperty("width","100%");var on=Wt.getBoundingClientRect();Wt.style.removeProperty("height"),Wt.style.removeProperty("width");var Cn=(dn.left-on.left)/Ne,Pn=(on.bottom-dn.bottom+dn.height)/Ne;St({bottomOffset:Pn,label:Ot,leftOffset:Cn,pageIndex:Je})}yt(tn)})}};return Ot&&(kt=Object.assign({},kt,{title:Ot,"aria-label":Ot})),H.createElement(an,{annotation:ke,hasPopup:!1,ignoreBorder:!1,isRenderable:Rt,page:nt,viewport:tt},function(Qt){return H.createElement("div",G({},Qt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":ke.id,"data-testid":"core__annotation--link-".concat(ke.id)}),H.createElement("a",G({ref:bt},kt)))})},Me=function(Q){var _e=Q.annotation,ke=Q.page,De=Q.viewport,je=_e.hasPopup===!1,He=Re(_e),nt=Ie(_e),Je=!!(_e.hasPopup||He||nt),Ne=_e.rect,tt=Ne[2]-Ne[0],et=Ne[3]-Ne[1],St=_e.borderStyle.width;return H.createElement(an,{annotation:_e,hasPopup:je,ignoreBorder:!0,isRenderable:Je,page:ke,viewport:De},function(yt){return H.createElement("div",G({},yt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":_e.id,onClick:yt.popup.toggleOnClick,onMouseEnter:yt.popup.openOnHover,onMouseLeave:yt.popup.closeOnHover}),_e.vertices&&_e.vertices.length&&H.createElement("svg",{height:"".concat(et,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(tt," ").concat(et),width:"".concat(tt,"px")},H.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:St||1,points:_e.vertices.map(function(bt){return"".concat(bt.x-Ne[0],",").concat(Ne[3]-bt.y)}).join(" ")})),yt.slot.children)})},ze=function(Q){var _e=Q.annotation,ke=Q.page,De=Q.viewport,je=_e.hasPopup===!1,He=Re(_e),nt=Ie(_e),Je=!!(_e.hasPopup||He||nt),Ne=_e.rect,tt=Ne[2]-Ne[0],et=Ne[3]-Ne[1],St=_e.borderStyle.width;return H.createElement(an,{annotation:_e,hasPopup:je,ignoreBorder:!0,isRenderable:Je,page:ke,viewport:De},function(yt){return H.createElement("div",G({},yt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":_e.id,onClick:yt.popup.toggleOnClick,onMouseEnter:yt.popup.openOnHover,onMouseLeave:yt.popup.closeOnHover}),_e.vertices&&_e.vertices.length&&H.createElement("svg",{height:"".concat(et,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(tt," ").concat(et),width:"".concat(tt,"px")},H.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:St||1,points:_e.vertices.map(function(bt){return"".concat(bt.x-Ne[0],",").concat(Ne[3]-bt.y)}).join(" ")})),yt.slot.children)})},Ze=function(Q){var _e=Q.annotation,ke=Q.page,De=Q.viewport,je=_e.hasPopup===!1,He=Re(_e),nt=Ie(_e),Je=!!(_e.hasPopup||He||nt),Ne=_e.rect,tt=Ne[2]-Ne[0],et=Ne[3]-Ne[1],St=_e.borderStyle.width;return H.createElement(an,{annotation:_e,hasPopup:je,ignoreBorder:!0,isRenderable:Je,page:ke,viewport:De},function(yt){return H.createElement("div",G({},yt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":_e.id,onClick:yt.popup.toggleOnClick,onMouseEnter:yt.popup.openOnHover,onMouseLeave:yt.popup.closeOnHover}),H.createElement("svg",{height:"".concat(et,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(tt," ").concat(et),width:"".concat(tt,"px")},H.createElement("rect",{height:et-St,fill:"none",stroke:"transparent",strokeWidth:St||1,x:St/2,y:St/2,width:tt-St})),yt.slot.children)})},ot=function(Q){var _e=Q.annotation,ke=Q.page,De=Q.viewport,je=_e.hasPopup===!1,He=Re(_e),nt=Ie(_e),Je=!!(_e.hasPopup||He||nt);return H.createElement(an,{annotation:_e,hasPopup:je,ignoreBorder:!0,isRenderable:Je,page:ke,viewport:De},function(Ne){return H.createElement("div",G({},Ne.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":_e.id,onClick:Ne.popup.toggleOnClick,onMouseEnter:Ne.popup.openOnHover,onMouseLeave:Ne.popup.closeOnHover}),Ne.slot.children)})},Et=function(Q){var _e=Q.annotation,ke=Q.page,De=Q.viewport,je=_e.hasPopup===!1,He=Re(_e),nt=Ie(_e),Je=!!(_e.hasPopup||He||nt);return H.createElement(an,{annotation:_e,hasPopup:je,ignoreBorder:!0,isRenderable:Je,page:ke,viewport:De},function(Ne){return H.createElement("div",G({},Ne.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":_e.id,onClick:Ne.popup.toggleOnClick,onMouseEnter:Ne.popup.openOnHover,onMouseLeave:Ne.popup.closeOnHover}),Ne.slot.children)})},Lt=function(Q){var _e=Q.annotation,ke=Q.page,De=Q.viewport,je=_e.hasPopup===!1,He=Re(_e),nt=Ie(_e),Je=!!(_e.hasPopup||He||nt);return H.createElement(an,{annotation:_e,hasPopup:je,ignoreBorder:!0,isRenderable:Je,page:ke,viewport:De},function(Ne){return H.createElement("div",G({},Ne.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":_e.id,onClick:Ne.popup.toggleOnClick,onMouseEnter:Ne.popup.openOnHover,onMouseLeave:Ne.popup.closeOnHover}),Ne.slot.children)})},Tt=function(){return H.createElement(V,{size:16},H.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),H.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),H.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),H.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},nn=function(){return H.createElement(V,{size:16},H.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),H.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),H.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),H.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),H.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),H.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),H.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),H.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),H.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),H.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},It=function(){return H.createElement(V,{size:16},H.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),H.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},Ft=function(){return H.createElement(V,{size:16},H.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),H.createElement("path",{d:"M6 4.5L6 0.5"}),H.createElement("path",{d:"M18 4.5L18 0.5"}),H.createElement("path",{d:"M10 4.5L10 0.5"}),H.createElement("path",{d:"M14 4.5L14 0.5"}))},Yt=function(){return H.createElement(V,{size:16},H.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),H.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),H.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},un=function(){return H.createElement(V,{size:16},H.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},yn=function(Q){var _e=Q.annotation,ke=Q.childAnnotation,De=Q.page,je=Q.viewport,He=_e.hasPopup===!1,nt=Re(_e),Je=Ie(_e),Ne=!!(_e.hasPopup||nt||Je),tt=_e.name?_e.name.toLowerCase():"";return H.createElement(an,{annotation:_e,hasPopup:He,ignoreBorder:!1,isRenderable:Ne,page:De,viewport:je},function(et){return H.createElement(H.Fragment,null,H.createElement("div",G({},et.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":_e.id,onClick:et.popup.toggleOnClick,onMouseEnter:et.popup.openOnHover,onMouseLeave:et.popup.closeOnHover}),tt&&H.createElement("div",{className:"rpv-core__annotation-text-icon"},tt==="check"&&H.createElement(re,null),tt==="comment"&&H.createElement(Tt,null),tt==="help"&&H.createElement(nn,null),tt==="insert"&&H.createElement(un,null),tt==="key"&&H.createElement(It,null),tt==="note"&&H.createElement(Ft,null),(tt==="newparagraph"||tt==="paragraph")&&H.createElement(Yt,null)),et.slot.children),ke&&ke.annotationType===A.AnnotationType.Popup&&et.popup.opened&&H.createElement($t,{annotation:ke,page:De,viewport:je}))})},An=function(Q){var _e=Q.annotation,ke=Q.page,De=Q.viewport,je=_e.hasPopup===!1,He=Re(_e),nt=Ie(_e),Je=!!(_e.hasPopup||He||nt);return H.createElement(an,{annotation:_e,hasPopup:je,ignoreBorder:!0,isRenderable:Je,page:ke,viewport:De},function(Ne){return H.createElement("div",G({},Ne.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":_e.id,onClick:Ne.popup.toggleOnClick,onMouseEnter:Ne.popup.openOnHover,onMouseLeave:Ne.popup.closeOnHover}),Ne.slot.children)})},Gn=function(Q){var _e=Q.annotations,ke=Q.doc,De=Q.outlines,je=Q.page,He=Q.pageIndex,nt=Q.plugins,Je=Q.rotation,Ne=Q.scale,tt=Q.onExecuteNamedAction,et=Q.onJumpFromLinkAnnotation,St=Q.onJumpToDest,yt=H.useRef(),bt=je.getViewport({rotation:Je,scale:Ne}).clone({dontFlip:!0}),Ot=_e.filter(function(Rt){return!Rt.parentId});return ae(function(){var Rt=yt.current;Rt&&nt.forEach(function(kt){kt.onAnnotationLayerRender&&kt.onAnnotationLayerRender({annotations:Ot,container:Rt,pageIndex:He,rotation:Je,scale:Ne})})},[]),H.createElement("div",{ref:yt,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(He)},Ot.map(function(Rt){var kt=_e.find(function(bn){return bn.parentId===Rt.id});switch(Rt.annotationType){case A.AnnotationType.Caret:return H.createElement(_n,{key:Rt.id,annotation:Rt,page:je,viewport:bt});case A.AnnotationType.Circle:return H.createElement(Ye,{key:Rt.id,annotation:Rt,page:je,viewport:bt});case A.AnnotationType.FileAttachment:return H.createElement(xt,{key:Rt.id,annotation:Rt,page:je,viewport:bt});case A.AnnotationType.FreeText:return H.createElement(Nt,{key:Rt.id,annotation:Rt,page:je,viewport:bt});case A.AnnotationType.Highlight:return H.createElement(Bt,{key:Rt.id,annotation:Rt,childAnnotation:kt,page:je,viewport:bt});case A.AnnotationType.Ink:return H.createElement(Ht,{key:Rt.id,annotation:Rt,page:je,viewport:bt});case A.AnnotationType.Line:return H.createElement(En,{key:Rt.id,annotation:Rt,page:je,viewport:bt});case A.AnnotationType.Link:return H.createElement(we,{key:Rt.id,annotation:Rt,annotationContainerRef:yt,doc:ke,outlines:De,page:je,pageIndex:He,scale:Ne,viewport:bt,onExecuteNamedAction:tt,onJumpFromLinkAnnotation:et,onJumpToDest:St});case A.AnnotationType.Polygon:return H.createElement(Me,{key:Rt.id,annotation:Rt,page:je,viewport:bt});case A.AnnotationType.Polyline:return H.createElement(ze,{key:Rt.id,annotation:Rt,page:je,viewport:bt});case A.AnnotationType.Popup:return H.createElement($t,{key:Rt.id,annotation:Rt,page:je,viewport:bt});case A.AnnotationType.Square:return H.createElement(Ze,{key:Rt.id,annotation:Rt,page:je,viewport:bt});case A.AnnotationType.Squiggly:return H.createElement(ot,{key:Rt.id,annotation:Rt,page:je,viewport:bt});case A.AnnotationType.Stamp:return H.createElement(Et,{key:Rt.id,annotation:Rt,page:je,viewport:bt});case A.AnnotationType.StrikeOut:return H.createElement(Lt,{key:Rt.id,annotation:Rt,page:je,viewport:bt});case A.AnnotationType.Text:return H.createElement(yn,{key:Rt.id,annotation:Rt,childAnnotation:kt,page:je,viewport:bt});case A.AnnotationType.Underline:return H.createElement(An,{key:Rt.id,annotation:Rt,page:je,viewport:bt});default:return H.createElement(H.Fragment,{key:Rt.id})}}))},Dn=function(Q){var _e=Q.page,ke=Q.renderAnnotations,De=Te(),je=H.useState({loading:!0,annotations:[]}),He=je[0],nt=je[1];return H.useEffect(function(){_e.getAnnotations({intent:"display"}).then(function(Je){De.current&&nt({loading:!1,annotations:Je})})},[]),He.loading?H.createElement(H.Fragment,null):ke(He.annotations)},tr=function(Q){var _e=Q.doc,ke=Q.outlines,De=Q.page,je=Q.pageIndex,He=Q.plugins,nt=Q.rotation,Je=Q.scale,Ne=Q.onExecuteNamedAction,tt=Q.onJumpFromLinkAnnotation,et=Q.onJumpToDest;return H.createElement(Dn,{page:De,renderAnnotations:function(St){return H.createElement(Gn,{annotations:St,doc:_e,outlines:ke,page:De,pageIndex:je,plugins:He,rotation:nt,scale:Je,onExecuteNamedAction:Ne,onJumpFromLinkAnnotation:tt,onJumpToDest:et})}})},rr=function(Q,_e){var ke=Q%_e;return ke===0?Q:Math.floor(Q-ke)},cr=function(Q){var _e=Q.canvasLayerRef,ke=Q.height,De=Q.page,je=Q.pageIndex,He=Q.plugins,nt=Q.rotation,Je=Q.scale,Ne=Q.width,tt=Q.onRenderCanvasCompleted,et=H.useRef();return ae(function(){var St=et.current;St&&St.cancel();var yt=_e.current;yt.removeAttribute("data-testid"),He.forEach(function(on){on.onCanvasLayerRender&&on.onCanvasLayerRender({ele:yt,pageIndex:je,rotation:nt,scale:Je,status:A.LayerRenderStatus.PreRender})});var bt=De.getViewport({rotation:nt,scale:Je}),Ot=window.devicePixelRatio||1,Rt=Math.sqrt(16777216/(bt.width*bt.height)),kt=Ot>Rt;kt?yt.style.transform="scale(1, 1)":yt.style.removeProperty("transform");var bn=Math.min(Rt,Ot),Qt=function(on,Cn){var Pn,kn;if(Math.floor(on)===on)return[on,1];var $n=1/on;if($n>Cn)return[1,Cn];if(Math.floor($n)===$n)return[1,$n];for(var Tn=on>1?$n:on,qn=0,Bn=1,Xn=1,Hn=1;;){var Vn=qn+Xn,Wn=Bn+Hn;if(Wn>Cn)break;Tn<=Vn/Wn?(Xn=(Pn=[Vn,Wn])[0],Hn=Pn[1]):(qn=(kn=[Vn,Wn])[0],Bn=kn[1])}return Tn<(qn/Bn+Xn/Hn)/2?Tn===on?[qn,Bn]:[Bn,qn]:Tn===on?[Xn,Hn]:[Hn,Xn]}(bn,8),tn=Qt[0],cn=Qt[1];yt.width=rr(bt.width*bn,tn),yt.height=rr(bt.height*bn,tn),yt.style.width="".concat(rr(bt.width,cn),"px"),yt.style.height="".concat(rr(bt.height,cn),"px"),yt.hidden=!0;var Wt=yt.getContext("2d",{alpha:!1}),dn=kt||Ot!==1?[bn,0,0,bn,0,0]:null;return et.current=De.render({canvasContext:Wt,transform:dn,viewport:bt}),et.current.promise.then(function(){yt.hidden=!1,yt.setAttribute("data-testid","core__canvas-layer-".concat(je)),He.forEach(function(on){on.onCanvasLayerRender&&on.onCanvasLayerRender({ele:yt,pageIndex:je,rotation:nt,scale:Je,status:A.LayerRenderStatus.DidRender})}),tt()},function(){tt()}),function(){yt&&(yt.width=0,yt.height=0)}},[]),H.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(ke,"px"),width:"".concat(Ne,"px")}},H.createElement("canvas",{ref:_e}))},Nr=function(Q){var _e=Q.height,ke=Q.page,De=Q.rotation,je=Q.scale,He=Q.width,nt=H.useRef();return ae(function(){var Je=nt.current,Ne=ke.getViewport({rotation:De,scale:je});ke.getOperatorList().then(function(tt){(function(){var et=nt.current;et&&(et.innerHTML="")})(),new W.SVGGraphics(ke.commonObjs,ke.objs).getSVG(tt,Ne).then(function(et){et.style.height="".concat(_e,"px"),et.style.width="".concat(He,"px"),Je.appendChild(et)})})},[]),H.createElement("div",{className:"rpv-core__svg-layer",ref:nt})},Ya=function(Q){var _e=Q.containerRef,ke=Q.page,De=Q.pageIndex,je=Q.plugins,He=Q.rotation,nt=Q.scale,Je=Q.onRenderTextCompleted,Ne=H.useRef(),tt=function(){var et=_e.current;et&&([].slice.call(et.querySelectorAll(".rpv-core__text-layer-text")).forEach(function(St){return et.removeChild(St)}),[].slice.call(et.querySelectorAll('br[role="presentation"]')).forEach(function(St){return et.removeChild(St)}))};return ae(function(){var et=Ne.current;et&&et.cancel();var St=_e.current;if(St){St.removeAttribute("data-testid");var yt=ke.getViewport({rotation:He,scale:nt});return je.forEach(function(bt){bt.onTextLayerRender&&bt.onTextLayerRender({ele:St,pageIndex:De,scale:nt,status:A.LayerRenderStatus.PreRender})}),ke.getTextContent().then(function(bt){tt(),Ne.current=W.renderTextLayer({container:St,textContent:bt,textContentSource:bt,viewport:yt}),Ne.current.promise.then(function(){St.setAttribute("data-testid","core__text-layer-".concat(De)),[].slice.call(St.children).forEach(function(Ot){Ot.classList.contains("rpv-core__text-layer-text--not")||Ot.classList.add("rpv-core__text-layer-text")}),je.forEach(function(Ot){Ot.onTextLayerRender&&Ot.onTextLayerRender({ele:St,pageIndex:De,scale:nt,status:A.LayerRenderStatus.DidRender})}),Je()},function(){St.removeAttribute("data-testid"),Je()})}),function(){var bt;tt(),(bt=Ne.current)===null||bt===void 0||bt.cancel()}}},[]),H.createElement("div",{className:"rpv-core__text-layer",ref:_e})},Za=function(Q){var _e=Q.doc,ke=Q.measureRef,De=Q.outlines,je=Q.pageIndex,He=Q.pageRotation,nt=Q.pageSize,Je=Q.plugins,Ne=Q.renderPage,tt=Q.renderQueueKey,et=Q.rotation,St=Q.scale,yt=Q.shouldRender,bt=Q.viewMode,Ot=Q.onExecuteNamedAction,Rt=Q.onJumpFromLinkAnnotation,kt=Q.onJumpToDest,bn=Q.onRenderCompleted,Qt=Q.onRotatePage,tn=Te(),cn=H.useState(null),Wt=cn[0],dn=cn[1],on=H.useState(!1),Cn=on[0],Pn=on[1],kn=H.useState(!1),$n=kn[0],Tn=kn[1],qn=H.useRef(),Bn=H.useRef(),Xn=Math.abs(et+He)%180==0,Hn=nt.pageWidth*St,Vn=nt.pageHeight*St,Wn=Xn?Hn:Vn,Un=Xn?Vn:Hn,er=(nt.rotation+et+He)%360,lr=H.useRef(0),sr=Ne||function(Zn){return H.createElement(H.Fragment,null,Zn.canvasLayer.children,Zn.textLayer.children,Zn.annotationLayer.children)};return H.useEffect(function(){dn(null),Pn(!1),Tn(!1)},[He,et,St]),H.useEffect(function(){yt&&tn.current&&!Wt&&Kt(_e,je).then(function(Zn){tn.current&&(lr.current=tt,dn(Zn))})},[yt,Wt]),H.useEffect(function(){Cn&&$n&&(tt!==lr.current?(dn(null),Pn(!1),Tn(!1)):bn(je))},[Cn,$n]),H.createElement("div",{className:oe({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":bt===A.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":bt===A.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":bt===A.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(je),ref:ke,style:{height:"".concat(Un,"px"),width:"".concat(Wn,"px")}},Wt?H.createElement(H.Fragment,null,sr({annotationLayer:{attrs:{},children:H.createElement(tr,{doc:_e,outlines:De,page:Wt,pageIndex:je,plugins:Je,rotation:er,scale:St,onExecuteNamedAction:Ot,onJumpFromLinkAnnotation:Rt,onJumpToDest:kt})},canvasLayer:{attrs:{},children:H.createElement(cr,{canvasLayerRef:qn,height:Un,page:Wt,pageIndex:je,plugins:Je,rotation:er,scale:St,width:Wn,onRenderCanvasCompleted:function(){tn.current&&Pn(!0)}})},canvasLayerRendered:Cn,doc:_e,height:Un,pageIndex:je,rotation:er,scale:St,svgLayer:{attrs:{},children:H.createElement(Nr,{height:Un,page:Wt,rotation:er,scale:St,width:Wn})},textLayer:{attrs:{},children:H.createElement(Ya,{containerRef:Bn,page:Wt,pageIndex:je,plugins:Je,rotation:er,scale:St,onRenderTextCompleted:function(){tn.current&&Tn(!0)}})},textLayerRendered:$n,width:Wn,markRendered:bn,onRotatePage:function(Zn){return Qt(je,Zn)}}),Je.map(function(Zn,nr){return Zn.renderPageLayer?H.createElement(H.Fragment,{key:nr},Zn.renderPageLayer({canvasLayerRef:qn,canvasLayerRendered:Cn,doc:_e,height:Un,pageIndex:je,rotation:er,scale:St,textLayerRef:Bn,textLayerRendered:$n,width:Wn})):H.createElement(H.Fragment,{key:nr})})):H.createElement(se,{testId:"core__page-layer-loading-".concat(je)}))},Ja=function(Q,_e){var ke=_e.rect;return Q.height!==ke.height||Q.width!==ke.width?ke:Q};(function(Q){Q.Horizontal="Horizontal",Q.Vertical="Vertical",Q.Both="Both"})(ct||(ct={}));var Qa=function(Q){return 1-Math.pow(1-Q,4)},jr=1e-4,Ji={left:0,top:0},Qi={capture:!1,passive:!0},eo=function(Q){var _e=Q.elementRef,ke=Q.enableSmoothScroll,De=Q.isRtl,je=Q.scrollDirection,He=Q.onSmoothScroll,nt=H.useState(Ji),Je=nt[0],Ne=nt[1],tt=H.useState(_e.current),et=tt[0],St=tt[1],yt=De?-1:1,bt=H.useRef(je);bt.current=je;var Ot=H.useRef(Ji),Rt=H.useRef(!0),kt=H.useCallback(function(){Rt.current=!0,ke&&Ne(Ot.current),He(!1)},[]),bn=H.useCallback(function(){if(et){switch(bt.current){case ct.Horizontal:Ot.current={left:yt*et.scrollLeft,top:0};break;case ct.Both:Ot.current={left:yt*et.scrollLeft,top:et.scrollTop};break;case ct.Vertical:default:Ot.current={left:0,top:et.scrollTop}}ke&&!Rt.current||Ne(Ot.current)}},[et]);ae(function(){St(_e.current)}),ae(function(){if(et)return et.addEventListener("scroll",bn,Qi),function(){et.removeEventListener("scroll",bn,Qi)}},[et]);var Qt=H.useCallback(function(tn,cn){var Wt=_e.current;if(!Wt)return Promise.resolve();var dn={left:0,top:0};switch(bt.current){case ct.Horizontal:dn.left=yt*tn.left;break;case ct.Both:dn.left=yt*tn.left,dn.top=tn.top;break;case ct.Vertical:default:dn.top=tn.top}return cn?(Rt.current=!1,He(!0),new Promise(function(on,Cn){(function(Pn,kn,$n,Tn,qn,Bn){qn===void 0&&(qn=function(nr){return nr}),Bn===void 0&&(Bn=function(){});var Xn=0,Hn=0,Vn=!1;switch(kn){case ct.Horizontal:Hn=Pn.scrollLeft,Xn=0;case ct.Both:Hn=Pn.scrollLeft,Xn=Pn.scrollTop;break;case ct.Vertical:default:Hn=0,Xn=Pn.scrollTop}var Wn=function(){Vn||(Vn=!0,Pn.scrollLeft=$n.left,Pn.scrollTop=$n.top,Bn())};if(Math.abs(Xn-$n.top)<=jr&&kn===ct.Vertical)Wn();else if(Math.abs(Hn-$n.left)<=jr&&kn===ct.Horizontal)Wn();else{var Un,er=-1,lr=Hn-$n.left,sr=Xn-$n.top,Zn=function(nr){er===-1&&(er=nr);var ur=nr-er,sn=Math.min(ur/Tn,1),rn=qn(sn),Gt={left:Hn-lr*rn,top:Xn-sr*rn};switch(kn){case ct.Horizontal:Pn.scrollLeft=Gt.left;break;case ct.Both:Pn.scrollLeft=Gt.left,Pn.scrollTop=Gt.top;break;case ct.Vertical:default:Pn.scrollTop=Gt.top}Math.abs(Gt.top-$n.top)<=jr&&Math.abs(Gt.left-$n.left)<=jr&&!Vn&&(window.cancelAnimationFrame(Un),Wn()),ur<Tn?Un=window.requestAnimationFrame(Zn):window.cancelAnimationFrame(Un)};Un=window.requestAnimationFrame(Zn)}})(Wt,bt.current,dn,400,Qa,function(){kt(),on()})})):new Promise(function(on,Cn){switch(bt.current){case ct.Horizontal:Wt.scrollLeft=dn.left;break;case ct.Both:Wt.scrollLeft=dn.left,Wt.scrollTop=dn.top;break;case ct.Vertical:default:Wt.scrollTop=dn.top}on()})},[_e]);return{scrollOffset:Je,scrollTo:Qt}},kr=function(Q,_e,ke){return Math.max(Q,Math.min(ke,_e))},to=function(Q,_e){if(_e!==A.ViewMode.DualPageWithCover)return 0;if(!function(je){var He=je.length;if(He===1)return!1;for(var nt=1;nt<He;nt++)if(je[nt].height!==je[0].height||je[nt].width!==je[0].width)return!0;return!1}(Q))return 2*Q[0].width;var ke=ut(Q.slice(1),2).map(function(je){return je.length===2?je[0].width+je[1].width:je[0].width}),De=[Q[0].width].concat(ke);return Math.max.apply(Math,De)},no={left:0,top:0},ro={left:0,top:0},ai={left:0,top:0},io={left:0,top:0},ao={height:0,width:0},ea={left:0,top:0},ta="data-virtual-index",oo=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],so=function(Q){var _e=Q.enableSmoothScroll,ke=Q.isRtl,De=Q.numberOfItems,je=Q.parentRef,He=Q.setRenderRange,nt=Q.sizes,Je=Q.scrollMode,Ne=Q.viewMode,tt=H.useState(!1),et=tt[0],St=tt[1],yt=H.useCallback(function(sn){return St(sn)},[]),bt=H.useRef(Je);bt.current=Je;var Ot=H.useRef(Ne);Ot.current=Ne;var Rt=Je===A.ScrollMode.Wrapped||Ne===A.ViewMode.DualPageWithCover||Ne===A.ViewMode.DualPage?ct.Both:Je===A.ScrollMode.Horizontal?ct.Horizontal:ct.Vertical,kt=eo({elementRef:je,enableSmoothScroll:_e,isRtl:ke,scrollDirection:Rt,onSmoothScroll:yt}),bn=kt.scrollOffset,Qt=kt.scrollTo,tn=function(sn){var rn=sn.elementRef,Gt=H.useState(rn.current),Zt=Gt[0],qt=Gt[1],hn=H.useRef(!1),fn=H.useReducer(Ja,{height:0,width:0}),Jt=fn[0],zt=fn[1];return ae(function(){rn.current!==Zt&&qt(rn.current)}),ae(function(){if(Zt&&!hn.current){hn.current=!0;var gn=Zt.getBoundingClientRect(),Sn=gn.height,Nn=gn.width;zt({rect:{height:Sn,width:Nn}})}},[Zt]),H.useEffect(function(){if(Zt){var gn=new ResizeObserver(function(Sn,Nn){Sn.forEach(function(On){if(On.target===Zt){var Jn=On.contentRect,ir=Jn.height,vn=Jn.width;zt({rect:{height:ir,width:vn}})}})});return gn.observe(Zt),function(){gn.unobserve(Zt)}}},[Zt]),Jt}({elementRef:je}),cn=H.useRef({scrollOffset:ea,measurements:[]});cn.current.scrollOffset=bn;var Wt=H.useMemo(function(){return Array(De).fill(-1)},[]),dn=H.useState(Wt),on=dn[0],Cn=dn[1],Pn=H.useMemo(function(){var sn=new IntersectionObserver(function(rn){rn.forEach(function(Gt){var Zt=Gt.isIntersecting?Gt.intersectionRatio:-1,qt=Gt.target.getAttribute(ta);if(qt){var hn=parseInt(qt,10);0<=hn&&hn<De&&Cn(function(fn){return fn[hn]=Zt,function(Jt,zt,gn){for(var Sn,Nn=0,On=zt.length;Nn<On;Nn++)!Sn&&Nn in zt||(Sn||(Sn=Array.prototype.slice.call(zt,0,Nn)),Sn[Nn]=zt[Nn]);return Jt.concat(Sn||Array.prototype.slice.call(zt))}([],fn)})}})},{threshold:oo});return sn},[]),kn=H.useMemo(function(){return Je===A.ScrollMode.Page&&Ne===A.ViewMode.SinglePage?function(sn,rn,Gt){for(var Zt=[],qt=0;qt<sn;qt++){var hn={height:Math.max(rn.height,Gt[qt].height),width:Math.max(rn.width,Gt[qt].width)},fn=qt===0?io:Zt[qt-1].end,Jt={left:fn.left+hn.width,top:fn.top+hn.height};Zt[qt]={index:qt,start:fn,size:hn,end:Jt,visibility:-1}}return Zt}(De,tn,nt):Ne===A.ViewMode.DualPageWithCover?function(sn,rn,Gt,Zt){for(var qt=[],hn=0,fn=0,Jt=ai,zt=0;zt<sn;zt++){var gn=zt===0?{height:Zt===A.ScrollMode.Page?Math.max(rn.height,Gt[zt].height):Gt[zt].height,width:Zt===A.ScrollMode.Page?Math.max(rn.width,Gt[zt].width):Gt[zt].width}:{height:Zt===A.ScrollMode.Page?Math.max(rn.height,Gt[zt].height):Gt[zt].height,width:Math.max(rn.width/2,Gt[zt].width)};Zt===A.ScrollMode.Page?Jt=zt===0?ai:{left:zt%2==0?gn.width:0,top:Math.floor((zt-1)/2)*gn.height+qt[0].end.top}:zt===0?(Jt=ai,hn=Gt[0].height,fn=0):zt%2==1?(Jt={left:0,top:hn+=fn},fn=zt===sn-1?Gt[zt].height:Math.max(Gt[zt].height,Gt[zt+1].height)):Jt={left:qt[zt-1].end.left,top:hn};var Sn={left:Jt.left+gn.width,top:Jt.top+gn.height};qt[zt]={index:zt,start:Jt,size:gn,end:Sn,visibility:-1}}return qt}(De,tn,nt,Je):Ne===A.ViewMode.DualPage?function(sn,rn,Gt,Zt){for(var qt=[],hn=0,fn=0,Jt=ro,zt=0;zt<sn;zt++){var gn={height:Zt===A.ScrollMode.Page?Math.max(rn.height,Gt[zt].height):Gt[zt].height,width:Math.max(rn.width/2,Gt[zt].width)};Zt===A.ScrollMode.Page?Jt={left:zt%2==0?0:gn.width,top:Math.floor(zt/2)*gn.height}:zt%2==0?(Jt={left:0,top:hn+=fn},fn=zt===sn-1?Gt[zt].height:Math.max(Gt[zt].height,Gt[zt+1].height)):Jt={left:qt[zt-1].end.left,top:hn};var Sn={left:Jt.left+gn.width,top:Jt.top+gn.height};qt[zt]={index:zt,start:Jt,size:gn,end:Sn,visibility:-1}}return qt}(De,tn,nt,Je):function(sn,rn,Gt,Zt){for(var qt=[],hn=0,fn={left:0,top:0},Jt=0,zt=no,gn=0;gn<sn;gn++){var Sn=Gt[gn];if(gn===0)hn=Sn.width,fn={left:0,top:0},Jt=Sn.height;else switch(Zt){case A.ScrollMode.Wrapped:(hn+=Sn.width)<rn.width?(zt={left:qt[gn-1].end.left,top:fn.top},Jt=Math.max(Jt,Sn.height)):(hn=Sn.width,fn={left:(zt={left:fn.left,top:fn.top+Jt}).left,top:zt.top},Jt=Sn.height);break;case A.ScrollMode.Horizontal:case A.ScrollMode.Vertical:default:zt=qt[gn-1].end}var Nn={left:zt.left+Sn.width,top:zt.top+Sn.height};qt[gn]={index:gn,start:zt,size:Sn,end:Nn,visibility:-1}}return qt}(De,tn,nt,Je)},[Je,nt,Ne,tn]),$n=kn[De-1]?{height:kn[De-1].end.top,width:kn[De-1].end.left}:ao;cn.current.measurements=kn;var Tn=H.useMemo(function(){var sn=function(gn,Sn,Nn,On){var Jn=0;switch(gn){case ct.Horizontal:Jn=On.left;break;case ct.Vertical:default:Jn=On.top}var ir=Sn.length-1,vn=function(Ln,hr,Er,zr){for(;Ln<=hr;){var vr=(Ln+hr)/2|0,$r=zr(vr);if($r<Er)Ln=vr+1;else{if(!($r>Er))return vr;hr=vr-1}}return Ln>0?Ln-1:0}(0,ir,Jn,function(Ln){switch(gn){case ct.Horizontal:return Sn[Ln].start.left;case ct.Both:case ct.Vertical:default:return Sn[Ln].start.top}});if(gn===ct.Both)for(var Qn=Sn[vn].start.top;vn-1>=0&&Sn[vn-1].start.top===Qn&&Sn[vn-1].start.left>=On.left;)vn--;for(var jn=vn;jn<=ir;){var zn={top:Sn[jn].start.top-On.top,left:Sn[jn].start.left-On.left},Kn={height:Nn.height-zn.top,width:Nn.width-zn.left};if(gn===ct.Horizontal&&Kn.width<0||gn===ct.Vertical&&Kn.height<0||gn===ct.Both&&(Kn.width<0||Kn.height<0))break;jn++}return{start:vn,end:jn}}(Rt,kn,tn,bn),rn=sn.start,Gt=sn.end,Zt=on.slice(kr(0,De,rn),kr(0,De,Gt)),qt=rn+Zt.reduce(function(gn,Sn,Nn,On){return Sn>On[gn]?Nn:gn},0),hn=qt=kr(0,De-1,qt),fn=He({endPage:Gt,numPages:De,startPage:rn}),Jt=fn.startPage,zt=fn.endPage;switch(Jt=Math.max(Jt,0),zt=Math.min(zt,De-1),Ne){case A.ViewMode.DualPageWithCover:qt>0&&(hn=qt%2==1?qt:qt-1),Jt=Jt===0?0:Jt%2==1?Jt:Jt-1,De-(zt=zt%2==1?zt-1:zt)<=2&&(zt=De-1);break;case A.ViewMode.DualPage:hn=qt%2==0?qt:qt-1,Jt=Jt%2==0?Jt:Jt-1,zt=zt%2==1?zt:zt-1;break;case A.ViewMode.SinglePage:default:hn=qt}return{startPage:Jt,endPage:zt,maxVisbilityIndex:hn}},[kn,tn,bn,Ne,on]),qn=Tn.startPage,Bn=Tn.endPage,Xn=Tn.maxVisbilityIndex,Hn=H.useMemo(function(){for(var sn=[],rn=function(Zt){var qt=kn[Zt],hn=G(G({},qt),{visibility:on[Zt]!==void 0?on[Zt]:-1,measureRef:function(fn){fn&&(fn.setAttribute(ta,"".concat(Zt)),Pn.observe(fn))}});sn.push(hn)},Gt=qn;Gt<=Bn;Gt++)rn(Gt);return sn},[qn,Bn,on,kn]),Vn=H.useCallback(function(sn,rn){var Gt=cn.current.measurements[kr(0,De-1,sn)],Zt=bt.current===A.ScrollMode.Page?ea:rn;return Gt?Qt({left:Zt.left+Gt.start.left,top:Zt.top+Gt.start.top},_e):Promise.resolve()},[Qt,_e]),Wn=H.useCallback(function(sn,rn){var Gt=cn.current.measurements,Zt=Gt[sn].start,qt=Gt.find(function(fn){return fn.start.top-Zt.top>1e-12});if(!qt)return Promise.resolve();var hn=qt.index;switch(Ot.current){case A.ViewMode.DualPage:hn=hn%2==0?hn:hn+1;break;case A.ViewMode.DualPageWithCover:hn=hn%2==1?hn:hn+1}return Vn(hn,rn)},[]),Un=H.useCallback(function(sn,rn){for(var Gt=cn.current.measurements,Zt=Gt[sn].start,qt=sn,hn=!1,fn=De-1;fn>=0;fn--)if(Zt.top-Gt[fn].start.top>1e-12){hn=!0,qt=Gt[fn].index;break}if(!hn)return Promise.resolve();switch(Ot.current){case A.ViewMode.DualPage:qt=qt%2==0?qt:qt-1;break;case A.ViewMode.DualPageWithCover:qt=qt%2==0?qt-1:qt}return qt===sn&&(qt=sn-1),Vn(qt,rn)},[]),er=H.useCallback(function(sn,rn){if(Ot.current===A.ViewMode.DualPageWithCover||Ot.current===A.ViewMode.DualPage)return Wn(sn,rn);switch(bt.current){case A.ScrollMode.Wrapped:return Wn(sn,rn);case A.ScrollMode.Horizontal:case A.ScrollMode.Vertical:default:return Vn(sn+1,rn)}},[]),lr=H.useCallback(function(sn,rn){if(Ot.current===A.ViewMode.DualPageWithCover||Ot.current===A.ViewMode.DualPage)return Un(sn,rn);switch(bt.current){case A.ScrollMode.Wrapped:return Un(sn,rn);case A.ScrollMode.Horizontal:case A.ScrollMode.Vertical:default:return Vn(sn-1,rn)}},[]),sr=H.useCallback(function(){return function(sn,rn){switch(rn){case A.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(sn.width,"px")};case A.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(sn.height,"px"),width:"100%"}}}($n,bt.current)},[$n]),Zn=H.useCallback(function(sn){return function(rn,Gt,Zt){return Zt!==A.ScrollMode.Page?{}:{height:"".concat(Gt.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(rn.start.top,"px)")}}(sn,tn,bt.current)},[tn]),nr=H.useCallback(function(sn){return function(rn,Gt,Zt,qt,hn){var fn,Jt,zt,gn,Sn,Nn,On,Jn=Gt?"right":"left",ir=Gt?-1:1,vn=Zt.length,Qn=rn.start.left*ir,jn=rn.size,zn=jn.height,Kn=jn.width;if(qt===A.ViewMode.DualPageWithCover){var Ln=hn===A.ScrollMode.Page?0:rn.start.top;return rn.index===0||vn%2==0&&rn.index===vn-1?((fn={height:"".concat(zn,"px"),minWidth:"".concat(to(Zt,qt),"px"),width:"100%"})[Jn]=0,fn.position="absolute",fn.top=0,fn.transform="translate(".concat(Qn,"px, ").concat(Ln,"px)"),fn):((Jt={height:"".concat(zn,"px"),width:"".concat(Kn,"px")})[Jn]=0,Jt.position="absolute",Jt.top=0,Jt.transform="translate(".concat(Qn,"px, ").concat(Ln,"px)"),Jt)}if(qt===A.ViewMode.DualPage)return(zt={height:"".concat(zn,"px"),width:"".concat(Kn,"px")})[Jn]=0,zt.position="absolute",zt.top=0,zt.transform="translate(".concat(Qn,"px, ").concat(hn===A.ScrollMode.Page?0:rn.start.top,"px)"),zt;switch(hn){case A.ScrollMode.Horizontal:return(gn={height:"100%",width:"".concat(Kn,"px")})[Jn]=0,gn.position="absolute",gn.top=0,gn.transform="translateX(".concat(Qn,"px)"),gn;case A.ScrollMode.Page:return(Sn={height:"".concat(zn,"px"),width:"".concat(Kn,"px")})[Jn]=0,Sn.position="absolute",Sn.top=0,Sn;case A.ScrollMode.Wrapped:return(Nn={height:"".concat(zn,"px"),width:"".concat(Kn,"px")})[Jn]=0,Nn.position="absolute",Nn.top=0,Nn.transform="translate(".concat(Qn,"px, ").concat(rn.start.top,"px)"),Nn;case A.ScrollMode.Vertical:default:return(On={height:"".concat(zn,"px"),width:"100%"})[Jn]=0,On.position="absolute",On.top=0,On.transform="translateY(".concat(rn.start.top,"px)"),On}}(sn,ke,nt,Ot.current,bt.current)},[ke,nt]),ur=H.useCallback(function(sn,rn){var Gt=cn.current,Zt=Gt.measurements,qt=Gt.scrollOffset,hn=Zt[kr(0,De-1,rn)];if(hn){var fn=bt.current===A.ScrollMode.Page?{left:hn.start.left,top:hn.start.top}:{left:qt.left*sn,top:qt.top*sn};return Qt(fn,!1)}return Promise.resolve()},[]);return H.useEffect(function(){return function(){Pn.disconnect()}},[]),{boundingClientRect:tn,isSmoothScrolling:et,startPage:qn,endPage:Bn,maxVisbilityIndex:Xn,virtualItems:Hn,getContainerStyles:sr,getItemContainerStyles:Zn,getItemStyles:nr,scrollToItem:Vn,scrollToNextItem:er,scrollToPreviousItem:lr,zoom:ur}},oi=function(Q,_e,ke,De,je,He){var nt=ke;switch(!0){case(je===A.ViewMode.DualPageWithCover&&He>=3):case(je===A.ViewMode.DualPage&&He>=3):nt=2*ke;break;default:nt=ke}switch(De){case A.SpecialZoomLevel.ActualSize:return 1;case A.SpecialZoomLevel.PageFit:return Math.min((Q.clientWidth-17)/nt,(Q.clientHeight-16)/_e);case A.SpecialZoomLevel.PageWidth:return(Q.clientWidth-17)/nt}},co=function(Q){var _e,ke,De=Q.getCurrentPage,je=(_e=50,ke=H.useRef([]),H.useEffect(function(){return function(){ke.current=[]}},[]),{push:function(tt){var et=ke.current;et.length+1>_e&&et.shift(),et.push(tt),ke.current=et},map:function(tt){return ke.current.map(function(et){return tt(et)})},pop:function(){var tt=ke.current;if(tt.length===0)return null;var et=tt.pop();return ke.current=tt,et}}),He=function(tt){var et=H.useRef([]);return H.useEffect(function(){return function(){et.current=[]}},[]),{dequeue:function(){var St=et.current;if(St.length===0)return null;var yt=St.shift();return et.current=St,yt||null},enqueue:function(St){var yt=et.current;yt.length+1>tt&&yt.pop(),et.current=[St].concat(yt)},map:function(St){return et.current.map(function(yt){return St(yt)})}}}(50),nt=function(){var tt=He.dequeue();return tt&&je.push(tt),tt&&tt.pageIndex===De()?nt():tt},Je=function(){var tt=je.pop();return tt&&He.enqueue(tt),tt&&tt.pageIndex===De()?Je():tt},Ne=H.useCallback(function(tt){je.push(tt)},[]);return{getNextDestination:nt,getPreviousDestination:Je,markVisitedDestination:Ne}},na=function(Q){var _e=[];return Q.map(function(ke){_e=_e.concat(ke).concat(function(De){var je=[];return De.items&&De.items.length>0&&(je=je.concat(na(De.items))),je}(ke))}),_e},ra={capture:!1,passive:!0},lo={height:0,width:0},si={height:0,width:0},uo=function(Q){var _e=Q.getCurrentPage,ke=Q.getCurrentScrollMode,De=Q.jumpToPage,je=Q.targetRef,He=H.useState(A.FullScreenMode.Normal),nt=He[0],Je=He[1],Ne=function(){var on=H.useState(lo),Cn=on[0],Pn=on[1],kn=ye(function(){Pn({height:window.innerHeight,width:window.innerWidth})},100);return ae(function(){return window.addEventListener("resize",kn,ra),function(){window.removeEventListener("resize",kn,ra)}},[]),Cn}(),tt=H.useState(si),et=tt[0],St=tt[1],yt=H.useRef(si),bt=H.useRef(_e()),Ot=H.useRef(si),Rt=H.useState(je.current),kt=Rt[0],bn=Rt[1],Qt=H.useRef();ae(function(){je.current!==kt&&bn(je.current)},[]),ae(function(){if(kt){var on=new ResizeObserver(function(Cn){Cn.forEach(function(Pn){var kn=Pn.target.getBoundingClientRect(),$n=kn.height,Tn=kn.width;St({height:$n,width:Tn})})});return on.observe(kt),function(){on.unobserve(kt),on.disconnect()}}},[kt]);var tn=H.useCallback(function(on){var Cn=Fe();return Cn&&Cn!==on?(Je(A.FullScreenMode.Normal),Ae(Cn)):Promise.resolve()},[]),cn=H.useCallback(function(on){on&&de()&&(bn(on),tn(on).then(function(){Qt.current=on,Je(A.FullScreenMode.Entering),function(Cn){te&&Cn[ge.RequestFullScreen]()}(on)}))},[]),Wt=H.useCallback(function(){Fe()&&(Je(A.FullScreenMode.Exitting),Ae(document))},[]),dn=H.useCallback(function(){kt&&Fe()!==kt&&Je(A.FullScreenMode.Exitting)},[kt]);return H.useEffect(function(){switch(nt){case A.FullScreenMode.Entering:Qt.current&&(Qt.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),bt.current=_e(),yt.current={height:window.innerHeight,width:window.innerWidth};break;case A.FullScreenMode.Entered:ke()===A.ScrollMode.Page?De(bt.current).then(function(){Je(A.FullScreenMode.EnteredCompletely)}):Je(A.FullScreenMode.EnteredCompletely);break;case A.FullScreenMode.Exitting:Qt.current&&(Qt.current.style.backgroundColor="",Qt.current=null),bt.current=_e();break;case A.FullScreenMode.Exited:Je(A.FullScreenMode.Normal),ke()===A.ScrollMode.Page&&De(bt.current)}},[nt]),H.useEffect(function(){if(nt!==A.FullScreenMode.Normal)return nt===A.FullScreenMode.Entering&&Ne.height===et.height&&Ne.width===et.width&&Ne.height>0&&Ne.width>0&&(Ot.current.height===0||Ne.height==Ot.current.height)?(Ot.current={height:window.innerHeight,width:window.innerWidth},void Je(A.FullScreenMode.Entered)):void(nt===A.FullScreenMode.Exitting&&yt.current.height===Ne.height&&yt.current.width===Ne.width&&Ne.height>0&&Ne.width>0&&Je(A.FullScreenMode.Exited))},[nt,Ne,et]),H.useEffect(function(){var on;return on=dn,te&&document.addEventListener(ge.FullScreenChange,on),function(){(function(Cn){te&&document.removeEventListener(ge.FullScreenChange,Cn)})(dn)}},[kt]),{enterFullScreenMode:cn,exitFullScreenMode:Wt,fullScreenMode:nt}},ho={buildPageStyles:function(){return{}},transformSize:function(Q){return Q.size}},yr={left:0,top:0},fo=function(Q){var _e=Q.currentFile,ke=Q.defaultScale,De=Q.doc,je=Q.enableSmoothScroll,He=Q.initialPage,nt=Q.initialRotation,Je=Q.initialScale,Ne=Q.pageLayout,tt=Q.pageSizes,et=Q.plugins,St=Q.renderPage,yt=Q.scrollMode,bt=Q.setRenderRange,Ot=Q.viewMode,Rt=Q.viewerState,kt=Q.onDocumentLoad,bn=Q.onOpenFile,Qt=Q.onPageChange,tn=Q.onRotate,cn=Q.onRotatePage,Wt=Q.onZoom,dn=De.numPages,on=De.loadingTask.docId,Cn=H.useContext(ft).l10n,Pn=H.useContext(he),kn=Pn.direction===A.TextDirection.RightToLeft,$n=H.useRef(),Tn=H.useRef(),qn=H.useState(He),Bn=qn[0],Xn=qn[1],Hn=H.useRef(null),Vn=co({getCurrentPage:function(){return vn.current.pageIndex}}),Wn=H.useState(nt),Un=Wn[0],er=Wn[1],lr=Ue(Un),sr=H.useState(!1),Zn=sr[0],nr=sr[1],ur=H.useState(new Map),sn=ur[0],rn=ur[1],Gt=H.useState(yt),Zt=Gt[0],qt=Gt[1],hn=Ue(Zt),fn=H.useState(Ot),Jt=fn[0],zt=fn[1],gn=Ue(Jt),Sn=function(Ct){var mn=Te(),xn=H.useState([]),Rn=xn[0],Mn=xn[1];return H.useEffect(function(){Ct.getOutline().then(function(wn){if(mn.current&&wn!==null){var Yn=na(wn);Mn(Yn)}})},[]),Rn}(De),Nn=H.useState(Je),On=Nn[0],Jn=Nn[1],ir=Ue(On),vn=H.useRef(Rt),Qn=H.useRef(typeof ke=="string"?ke:null),jn=H.useRef(-1),zn=H.useRef(-1),Kn=H.useRef(He),Ln=uo({getCurrentPage:function(){return vn.current.pageIndex},getCurrentScrollMode:function(){return vn.current.scrollMode},jumpToPage:function(Ct){return pr(Ct)},targetRef:Tn}),hr=H.useState(-1),Er=hr[0],zr=hr[1],vr=H.useState(0),$r=vr[0],_o=vr[1],ar=Qe({doc:De});H.useEffect(function(){return function(){At.clear(),Ut.clear()}},[on]);var sa=H.useMemo(function(){return Object.assign({},ho,Ne)},[]),yo=H.useMemo(function(){return Array(dn).fill(0).map(function(Ct,mn){var xn=[tt[mn].pageHeight,tt[mn].pageWidth],Rn=Math.abs(Un)%180==0?{height:xn[0],width:xn[1]}:{height:xn[1],width:xn[0]},Mn={height:Rn.height*On,width:Rn.width*On};return sa.transformSize({numPages:dn,pageIndex:mn,size:Mn})})},[Un,On]),In=so({enableSmoothScroll:je,isRtl:kn,numberOfItems:dn,parentRef:Tn,scrollMode:Zt,setRenderRange:bt,sizes:yo,viewMode:Jt}),Eo=ye(function(){!Qn.current||vn.current.fullScreenMode!==A.FullScreenMode.Normal||He>0&&Kn.current===He||br(Qn.current)},200);(function(Ct){var mn=Ct.targetRef,xn=Ct.onResize;ae(function(){var Rn=new ResizeObserver(function(wn){wn.forEach(function(Yn){xn(Yn.target)})}),Mn=mn.current;if(Mn)return Rn.observe(Mn),function(){Rn.unobserve(Mn)}},[])})({targetRef:Tn,onResize:Eo});var fr=function(Ct){var mn=Ct;et.forEach(function(xn){xn.onViewerStateChange&&(mn=xn.onViewerStateChange(mn))}),vn.current=mn},So=function(){return Tn.current},xo=function(){return vn.current},wo=H.useCallback(function(Ct){Vn.markVisitedDestination(Ct)},[]),ui=H.useCallback(function(Ct){var mn=Ct.pageIndex,xn=Ct.bottomOffset,Rn=Ct.leftOffset,Mn=Ct.scaleTo,wn=Tn.current,Yn=vn.current;return wn&&Yn?new Promise(function(mr,gi){Kt(De,mn).then(function(Hr){var gr=Hr.getViewport({scale:1}),Ur=0,ma=(typeof xn=="function"?xn(gr.width,gr.height):xn)||0,Vr=(typeof Rn=="function"?Rn(gr.width,gr.height):Rn)||0,Sr=Yn.scale;switch(Mn){case A.SpecialZoomLevel.PageFit:Ur=0,Vr=0,br(A.SpecialZoomLevel.PageFit);break;case A.SpecialZoomLevel.PageWidth:Sr=oi(wn,tt[mn].pageHeight,tt[mn].pageWidth,A.SpecialZoomLevel.PageWidth,Ot,dn),Ur=(gr.height-ma)*Sr,Vr*=Sr,br(Sr);break;default:Ur=(gr.height-ma)*Sr,Vr*=Sr}switch(Yn.scrollMode){case A.ScrollMode.Horizontal:In.scrollToItem(mn,{left:Vr,top:0}).then(function(){mr()});break;case A.ScrollMode.Vertical:default:In.scrollToItem(mn,{left:0,top:Ur}).then(function(){mr()})}})}):Promise.resolve()},[]),ca=H.useCallback(function(Ct){return Vn.markVisitedDestination(Ct),ui(Ct)},[]),Ao=H.useCallback(function(){var Ct=Vn.getNextDestination();return Ct?ui(Ct):Promise.resolve()},[]),Po=H.useCallback(function(){var Ct=Vn.getPreviousDestination();return Ct?ui(Ct):Promise.resolve()},[]),Co=H.useCallback(function(){return In.scrollToNextItem(vn.current.pageIndex,yr)},[]),pr=H.useCallback(function(Ct){return 0<=Ct&&Ct<dn?In.scrollToItem(Ct,yr):Promise.resolve()},[]),ko=H.useCallback(function(){return In.scrollToPreviousItem(vn.current.pageIndex,yr)},[]),la=H.useCallback(function(Ct){var mn,xn;(mn=Ct.name,xn=mn.split(/\./).pop(),xn?xn.toLowerCase():"").toLowerCase()==="pdf"&&new Promise(function(Rn){var Mn=new FileReader;Mn.readAsArrayBuffer(Ct),Mn.onload=function(){var wn=new Uint8Array(Mn.result);Rn(wn)}}).then(function(Rn){bn(Ct.name,Rn)})},[bn]),ua=H.useCallback(function(Ct){var mn=Ct===A.RotateDirection.Backward?-90:90,xn=vn.current.rotation,Rn=xn===360||xn===-360?mn:xn+mn;ar.markNotRendered(),er(Rn),fr(G(G({},vn.current),{rotation:Rn})),tn({direction:Ct,doc:De,rotation:Rn})},[]),di=H.useCallback(function(Ct,mn){var xn=mn===A.RotateDirection.Backward?-90:90,Rn=vn.current.pagesRotation,Mn=(Rn.has(Ct)?Rn.get(Ct):nt)+xn,wn=Rn.set(Ct,Mn);rn(wn),nr(function(Yn){return!Yn}),fr(G(G({},vn.current),{pagesRotation:wn,rotatedPage:Ct})),cn({direction:mn,doc:De,pageIndex:Ct,rotation:Mn}),ar.markRendering(Ct),zr(Ct)},[]),da=H.useCallback(function(Ct){fr(G(G({},vn.current),{scrollMode:Ct})),qt(Ct)},[]),ha=H.useCallback(function(Ct){fr(G(G({},vn.current),{viewMode:Ct})),zt(Ct)},[]),br=H.useCallback(function(Ct){var mn=Tn.current,xn=vn.current.pageIndex;if(!(xn<0||xn>=dn)){var Rn=tt[xn].pageHeight,Mn=tt[xn].pageWidth,wn=mn?typeof Ct=="string"?oi(mn,Rn,Mn,Ct,vn.current.viewMode,dn):Ct:1;Qn.current=typeof Ct=="string"?Ct:null,wn!==vn.current.scale&&(_o(function(Yn){return Yn+1}),ar.markNotRendered(),Jn(wn),Wt({doc:De,scale:wn}),fr(G(G({},vn.current),{scale:wn})))}},[]),$o=H.useCallback(function(Ct){Ln.enterFullScreenMode(Ct)},[]),Mo=H.useCallback(function(){Ln.exitFullScreenMode()},[]);H.useEffect(function(){fr(G(G({},vn.current),{fullScreenMode:Ln.fullScreenMode}))},[Ln.fullScreenMode]),H.useEffect(function(){var Ct={enterFullScreenMode:$o,exitFullScreenMode:Mo,getPagesContainer:So,getViewerState:xo,jumpToDestination:ca,jumpToNextDestination:Ao,jumpToPreviousDestination:Po,jumpToNextPage:Co,jumpToPreviousPage:ko,jumpToPage:pr,openFile:la,rotate:ua,rotatePage:di,setViewerState:fr,switchScrollMode:da,switchViewMode:ha,zoom:br};return et.forEach(function(mn){mn.install&&mn.install(Ct)}),function(){et.forEach(function(mn){mn.uninstall&&mn.uninstall(Ct)})}},[on]),H.useEffect(function(){kt({doc:De,file:_e}),et.forEach(function(Ct){Ct.onDocumentLoad&&Ct.onDocumentLoad({doc:De,file:_e})})},[on]);var hi,fi,pi,fa=In.boundingClientRect;hi=function(){He&&pr(He)},fi=fa.height>0&&fa.width>0,pi=H.useRef(!1),ae(function(){fi&&!pi.current&&(pi.current=!0,hi())},[hi,fi]),ae(function(){var Ct=vn.current.pageIndex;Ct>-1&&hn!==Zt&&In.scrollToItem(Ct,yr).then(function(){Ln.fullScreenMode===A.FullScreenMode.EnteredCompletely&&(je||ar.markNotRendered(),jn.current=-1)})},[Zt]),ae(function(){var Ct=vn.current.pageIndex;Ct>-1&&lr!==Un&&In.scrollToItem(Ct,yr)},[Un]),ae(function(){ir!=0&&ir!=vn.current.scale&&In.zoom(vn.current.scale/ir,vn.current.pageIndex).then(function(){Ln.fullScreenMode===A.FullScreenMode.EnteredCompletely&&(zn.current=-1)})},[On]),ae(function(){if(gn!==vn.current.viewMode){var Ct=In.startPage,mn=In.endPage,xn=In.virtualItems;ar.markNotRendered(),ar.setRange(Ct,mn);for(var Rn=function(wn){var Yn=xn.find(function(mr){return mr.index===wn});Yn&&ar.setVisibility(wn,Yn.visibility)},Mn=Ct;Mn<=mn;Mn++)Rn(Mn);mi()}},[Jt]),ae(function(){var Ct=vn.current.pageIndex;Ct>-1&&gn!==Jt&&In.scrollToItem(Ct,yr)},[Jt]),ae(function(){var Ct=vn.current.pageIndex;Ct>0&&Ct===He&&Kn.current===He&&Qn.current&&(Kn.current=-1,br(Qn.current))},[Bn]),H.useEffect(function(){In.isSmoothScrolling||Hn.current!==null&&Hn.current===Bn||(Hn.current=Bn,Qt({currentPage:Bn,doc:De}))},[Bn,In.isSmoothScrolling]),H.useEffect(function(){Ln.fullScreenMode===A.FullScreenMode.Entering&&vn.current.scrollMode===A.ScrollMode.Page&&(jn.current=vn.current.pageIndex),Ln.fullScreenMode===A.FullScreenMode.EnteredCompletely&&vn.current.scrollMode===A.ScrollMode.Page&&je&&(jn.current=-1),Ln.fullScreenMode===A.FullScreenMode.EnteredCompletely&&Qn.current&&(zn.current=vn.current.pageIndex,br(Qn.current))},[Ln.fullScreenMode]),H.useEffect(function(){if(Ln.fullScreenMode!==A.FullScreenMode.Entering&&Ln.fullScreenMode!==A.FullScreenMode.Exitting&&!In.isSmoothScrolling){var Ct=In.startPage,mn=In.endPage,xn=In.maxVisbilityIndex,Rn=In.virtualItems,Mn=xn,wn=Ln.fullScreenMode===A.FullScreenMode.Entered||Ln.fullScreenMode===A.FullScreenMode.EnteredCompletely;if(!(wn&&Mn!==jn.current&&jn.current>-1||wn&&Mn!==zn.current&&zn.current>-1)){Xn(Mn),fr(G(G({},vn.current),{pageIndex:Mn})),ar.setRange(Ct,mn);for(var Yn=function(gi){var Hr=Rn.find(function(gr){return gr.index===gi});Hr&&ar.setVisibility(gi,Hr.visibility)},mr=Ct;mr<=mn;mr++)Yn(mr);mi()}}},[In.startPage,In.endPage,In.isSmoothScrolling,In.maxVisbilityIndex,Ln.fullScreenMode,Zn,Un,On]);var To=H.useCallback(function(Ct){ar.markRendered(Ct),mi()},[$r]),mi=function(){var Ct=ar.getHighestPriorityPage();Ct>-1&&ar.isInRange(Ct)&&(ar.markRendering(Ct),zr(Ct))},Ro=function(Ct){var mn=Bn-1,xn=Bn+1;switch(Ct){case"FirstPage":pr(0);break;case"LastPage":pr(dn-1);break;case"NextPage":xn<dn&&pr(xn);break;case"PrevPage":mn>=0&&pr(mn)}},Lo=H.useCallback(function(){var Ct=In.virtualItems,mn=[];switch(Jt){case A.ViewMode.DualPage:mn=ut(Ct,2);break;case A.ViewMode.DualPageWithCover:Ct.length&&(mn=Ct[0].index===0?[[Ct[0]]].concat(ut(Ct.slice(1),2)):ut(Ct,2));break;case A.ViewMode.SinglePage:default:mn=ut(Ct,1)}var xn=Cn&&Cn.core?Cn.core.pageLabel:"Page {{pageIndex}}",Rn={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:$n,style:{height:"100%"}},children:H.createElement(H.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:oe({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":Zt===A.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":kn,"rpv-core__inner-pages--single":Zt===A.ScrollMode.Page,"rpv-core__inner-pages--vertical":Zt===A.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":Zt===A.ScrollMode.Wrapped}),ref:Tn,style:{height:"100%",position:"relative"}},children:H.createElement("div",{"data-testid":"core__inner-current-page-".concat(Bn),style:Object.assign({"--scale-factor":On},In.getContainerStyles())},mn.map(function(Mn){return H.createElement("div",{className:oe({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":Zt===A.ScrollMode.Page}),style:In.getItemContainerStyles(Mn[0]),key:"".concat(Mn[0].index,"-").concat(Jt)},Mn.map(function(wn){var Yn=Jt===A.ViewMode.DualPageWithCover&&(wn.index===0||dn%2==0&&wn.index===dn-1);return H.createElement("div",{"aria-label":xn.replace("{{pageIndex}}","".concat(wn.index+1)),className:oe({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":Jt===A.ViewMode.DualPage&&wn.index%2==0,"rpv-core__inner-page--dual-odd":Jt===A.ViewMode.DualPage&&wn.index%2==1,"rpv-core__inner-page--dual-cover":Yn,"rpv-core__inner-page--dual-cover-even":Jt===A.ViewMode.DualPageWithCover&&!Yn&&wn.index%2==0,"rpv-core__inner-page--dual-cover-odd":Jt===A.ViewMode.DualPageWithCover&&!Yn&&wn.index%2==1,"rpv-core__inner-page--single":Jt===A.ViewMode.SinglePage&&Zt===A.ScrollMode.Page}),role:"region",key:"".concat(wn.index,"-").concat(Jt),style:Object.assign({},In.getItemStyles(wn),sa.buildPageStyles({numPages:dn,pageIndex:wn.index,scrollMode:Zt,viewMode:Jt}))},H.createElement(Za,{doc:De,measureRef:wn.measureRef,outlines:Sn,pageIndex:wn.index,pageRotation:sn.has(wn.index)?sn.get(wn.index):0,pageSize:tt[wn.index],plugins:et,renderPage:St,renderQueueKey:$r,rotation:Un,scale:On,shouldRender:Er===wn.index,viewMode:Jt,onExecuteNamedAction:Ro,onJumpFromLinkAnnotation:wo,onJumpToDest:ca,onRenderCompleted:To,onRotatePage:di}))}))}))}};return et.forEach(function(Mn){Mn.renderViewer&&(Rn=Mn.renderViewer({containerRef:$n,doc:De,pagesContainerRef:Tn,pagesRotation:sn,pageSizes:tt,rotation:Un,slot:Rn,themeContext:Pn,jumpToPage:pr,openFile:la,rotate:ua,rotatePage:di,switchScrollMode:da,switchViewMode:ha,zoom:br}))}),Rn},[et,In]),pa=H.useCallback(function(Ct){return H.createElement("div",G({},Ct.attrs,{style:Ct.attrs&&Ct.attrs.style?Ct.attrs.style:{}}),Ct.children,Ct.subSlot&&pa(Ct.subSlot))},[]);return pa(Lo())},ia=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],po=function(Q){var _e=Q.defaultScale,ke=Q.doc,De=Q.render,je=Q.scrollMode,He=Q.viewMode,nt=H.useRef(),Je=H.useState({pageSizes:[],scale:0}),Ne=Je[0],tt=Je[1];return H.useLayoutEffect(function(){var et=Array(ke.numPages).fill(0).map(function(St,yt){return new Promise(function(bt,Ot){Kt(ke,yt).then(function(Rt){var kt=Rt.getViewport({scale:1});bt({pageHeight:kt.height,pageWidth:kt.width,rotation:kt.rotation})})})});Promise.all(et).then(function(St){var yt=nt.current;if(yt&&St.length!==0){var bt=St[0].pageWidth,Ot=St[0].pageHeight,Rt=yt.parentElement,kt=(Rt.clientWidth-45)/bt,bn=(Rt.clientHeight-45)/Ot,Qt=kt;switch(je){case A.ScrollMode.Horizontal:Qt=Math.min(kt,bn);break;case A.ScrollMode.Vertical:default:Qt=kt}var tn,cn,Wt=_e?typeof _e=="string"?oi(Rt,Ot,bt,_e,He,ke.numPages):_e:(tn=Qt,(cn=ia.findIndex(function(dn){return dn>=tn}))===-1||cn===0?tn:ia[cn-1]);tt({pageSizes:St,scale:Wt})}})},[ke.loadingTask.docId]),Ne.pageSizes.length===0||Ne.scale===0?H.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:nt},H.createElement(se,null)):De(Ne.pageSizes,Ne.scale)},Br=function(){},ci=function(Q){function _e(ke,De){var je=Q.call(this)||this;return je.verifyPassword=ke,je.passwordStatus=De,je}return ce(_e,Q),_e}(Br),mo=function(Q){var _e=Q.passwordStatus,ke=Q.renderProtectedView,De=Q.verifyPassword,je=Q.onDocumentAskPassword,He=H.useContext(ft).l10n,nt=H.useState(""),Je=nt[0],Ne=nt[1],tt=H.useContext(he).direction===A.TextDirection.RightToLeft,et=function(){return De(Je)};return H.useEffect(function(){je&&je({verifyPassword:De})},[]),ke?ke({passwordStatus:_e,verifyPassword:De}):H.createElement("div",{className:"rpv-core__asking-password-wrapper"},H.createElement("div",{className:oe({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":tt})},H.createElement("div",{className:"rpv-core__asking-password-message"},_e===A.PasswordStatus.RequiredPassword&&He.core.askingPassword.requirePasswordToOpen,_e===A.PasswordStatus.WrongPassword&&He.core.wrongPassword.tryAgain),H.createElement("div",{className:"rpv-core__asking-password-body"},H.createElement("div",{className:oe({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!tt,"rpv-core__asking-password-input--rtl":tt})},H.createElement(fe,{testId:"core__asking-password-input",type:"password",value:Je,onChange:Ne,onKeyDown:function(St){St.key==="Enter"&&et()}})),H.createElement(ie,{onClick:et},He.core.askingPassword.submit))))},aa=function(Q){function _e(ke){var De=Q.call(this)||this;return De.doc=ke,De}return ce(_e,Q),_e}(Br),oa=function(Q){function _e(ke){var De=Q.call(this)||this;return De.error=ke,De}return ce(_e,Q),_e}(Br),li=function(Q){function _e(ke){var De=Q.call(this)||this;return De.percentages=ke,De}return ce(_e,Q),_e}(Br),go=function(Q){var _e=Q.characterMap,ke=Q.file,De=Q.httpHeaders,je=Q.render,He=Q.renderError,nt=Q.renderLoader,Je=Q.renderProtectedView,Ne=Q.transformGetDocumentParams,tt=Q.withCredentials,et=Q.onDocumentAskPassword,St=H.useContext(he).direction===A.TextDirection.RightToLeft,yt=H.useState(new li(0)),bt=yt[0],Ot=yt[1],Rt=H.useRef(""),kt=Te();return H.useEffect(function(){Rt.current="",Ot(new li(0));var bn=new W.PDFWorker({name:"PDFWorker_".concat(Date.now())}),Qt=Object.assign({httpHeaders:De,withCredentials:tt,worker:bn},typeof ke=="string"?{url:ke}:{data:ke},_e?{cMapUrl:_e.url,cMapPacked:_e.isCompressed}:{}),tn=Ne?Ne(Qt):Qt,cn=W.getDocument(tn);return cn.onPassword=function(Wt,dn){switch(dn){case W.PasswordResponses.NEED_PASSWORD:kt.current&&Ot(new ci(Wt,A.PasswordStatus.RequiredPassword));break;case W.PasswordResponses.INCORRECT_PASSWORD:kt.current&&Ot(new ci(Wt,A.PasswordStatus.WrongPassword))}},cn.onProgress=function(Wt){var dn=Wt.total>0?Math.min(100,100*Wt.loaded/Wt.total):100;kt.current&&Rt.current===""&&Ot(new li(dn))},cn.promise.then(function(Wt){Rt.current=Wt.loadingTask.docId,kt.current&&Ot(new aa(Wt))},function(Wt){return kt.current&&!bn.destroyed&&Ot(new oa({message:Wt.message||"Cannot load document",name:Wt.name}))}),function(){cn.destroy(),bn.destroy()}},[ke]),bt instanceof ci?H.createElement(mo,{passwordStatus:bt.passwordStatus,renderProtectedView:Je,verifyPassword:bt.verifyPassword,onDocumentAskPassword:et}):bt instanceof aa?je(bt.doc):bt instanceof oa?He?He(bt.error):H.createElement("div",{className:oe({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":St})},H.createElement("div",{className:"rpv-core__doc-error-text"},bt.error.message)):H.createElement("div",{"data-testid":"core__doc-loading",className:oe({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":St})},nt?nt(bt.percentages):H.createElement(se,null))},vo=function(Q,_e){var ke=H.useMemo(function(){return Q==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":Q},[]),De=H.useState(ke),je=De[0],He=De[1],nt=Ue(je);return H.useEffect(function(){if(Q==="auto"){var Je=window.matchMedia("(prefers-color-scheme: dark)"),Ne=function(tt){He(tt.matches?"dark":"light")};return Je.addEventListener("change",Ne),function(){return Je.removeEventListener("change",Ne)}}},[]),H.useEffect(function(){je!==nt&&_e&&_e(je)},[je]),H.useEffect(function(){Q!==je&&He(Q)},[Q]),{currentTheme:je,setCurrentTheme:He}},bo=function(Q){return{startPage:Q.startPage-3,endPage:Q.endPage+3}};A.Button=function(Q){var _e=Q.children,ke=Q.testId,De=Q.onClick,je=H.useContext(he).direction===A.TextDirection.RightToLeft,He=ke?{"data-testid":ke}:{};return H.createElement("button",G({className:oe({"rpv-core__button":!0,"rpv-core__button--rtl":je}),type:"button",onClick:De},He),_e)},A.Icon=V,A.LazyRender=function(Q){var _e=Q.attrs,ke=Q.children,De=Q.testId,je=H.useState(!1),He=je[0],nt=je[1],Je=De?G(G({},_e),{"data-testid":De}):_e,Ne=J({once:!0,onVisibilityChanged:function(tt){tt.isVisible&&nt(!0)}});return H.createElement("div",G({ref:Ne},Je),He&&ke)},A.LocalizationContext=ft,A.Menu=function(Q){var _e=Q.children,ke=H.useRef(),De=H.useRef([]),je=H.useContext(he).direction===A.TextDirection.RightToLeft,He=function(Je){if(ke.current)switch(Je.key){case"Tab":Je.preventDefault();break;case"ArrowDown":Je.preventDefault(),nt(function(Ne,tt){return tt+1});break;case"ArrowUp":Je.preventDefault(),nt(function(Ne,tt){return tt-1});break;case"End":Je.preventDefault(),nt(function(Ne,tt){return Ne.length-1});break;case"Home":Je.preventDefault(),nt(function(Ne,tt){return 0})}},nt=function(Je){if(ke.current){var Ne=De.current,tt=Ne.findIndex(function(St){return St.getAttribute("tabindex")==="0"}),et=Math.min(Ne.length-1,Math.max(0,Je(Ne,tt)));tt>=0&&tt<=Ne.length-1&&Ne[tt].setAttribute("tabindex","-1"),Ne[et].setAttribute("tabindex","0"),Ne[et].focus()}};return ae(function(){var Je=ke.current;if(Je){var Ne=function(tt){var et=[];return tt.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach(function(St){if(St instanceof HTMLElement){var yt=St.parentElement;(yt===tt||window.getComputedStyle(yt).display!=="none")&&et.push(St)}}),et}(Je);De.current=Ne}},[]),ae(function(){return document.addEventListener("keydown",He),function(){document.removeEventListener("keydown",He)}},[]),H.createElement("div",{ref:ke,"aria-orientation":"vertical",className:oe({"rpv-core__menu":!0,"rpv-core__menu--rtl":je}),role:"menu",tabIndex:0},_e)},A.MenuDivider=function(){return H.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},A.MenuItem=function(Q){var _e=Q.checked,ke=_e!==void 0&&_e,De=Q.children,je=Q.icon,He=je===void 0?null:je,nt=Q.isDisabled,Je=nt!==void 0&&nt,Ne=Q.testId,tt=Q.onClick,et=H.useContext(he).direction===A.TextDirection.RightToLeft,St=Ne?{"data-testid":Ne}:{};return H.createElement("button",G({className:oe({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":Je,"rpv-core__menu-item--ltr":!et,"rpv-core__menu-item--rtl":et}),role:"menuitem",tabIndex:-1,type:"button",onClick:tt},St),H.createElement("div",{className:oe({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!et,"rpv-core__menu-item-icon--rtl":et})},He),H.createElement("div",{className:oe({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!et,"rpv-core__menu-item-label--rtl":et})},De),H.createElement("div",{className:oe({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!et,"rpv-core__menu-item-check--rtl":et})},ke&&H.createElement(re,null)))},A.MinimalButton=function(Q){var _e=Q.ariaLabel,ke=_e===void 0?"":_e,De=Q.ariaKeyShortcuts,je=De===void 0?"":De,He=Q.children,nt=Q.isDisabled,Je=nt!==void 0&&nt,Ne=Q.isSelected,tt=Ne!==void 0&&Ne,et=Q.testId,St=Q.onClick,yt=H.useContext(he).direction===A.TextDirection.RightToLeft,bt=et?{"data-testid":et}:{};return H.createElement("button",G({"aria-label":ke},je&&{"aria-keyshortcuts":je},Je&&{"aria-disabled":!0},{className:oe({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":Je,"rpv-core__minimal-button--rtl":yt,"rpv-core__minimal-button--selected":tt}),type:"button",onClick:St},bt),He)},A.Modal=function(Q){var _e=Q.ariaControlsSuffix,ke=Q.closeOnClickOutside,De=Q.closeOnEscape,je=Q.content,He=Q.isOpened,nt=He!==void 0&&He,Je=Q.target,Ne=_e||"".concat(xe());return H.createElement(Pe,{target:Je?function(tt,et){return H.createElement("div",{"aria-expanded":et?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(Ne)},Je(tt,et))}:null,content:function(tt){return H.createElement(le,null,H.createElement(X,{ariaControlsSuffix:Ne,closeOnClickOutside:ke,closeOnEscape:De,onToggle:tt},je(tt)))},isOpened:nt})},A.Popover=function(Q){var _e=Q.ariaHasPopup,ke=_e===void 0?"dialog":_e,De=Q.ariaControlsSuffix,je=Q.closeOnClickOutside,He=Q.closeOnEscape,nt=Q.content,Je=Q.lockScroll,Ne=Je===void 0||Je,tt=Q.offset,et=Q.position,St=Q.target,yt=Se(!1),bt=yt.opened,Ot=yt.toggle,Rt=H.useRef(),kt=H.useMemo(function(){return De||"".concat(xe())},[]);return H.createElement("div",{ref:Rt,"aria-expanded":bt?"true":"false","aria-haspopup":ke,"aria-controls":"rpv-core__popver-body-".concat(kt)},St(Ot,bt),bt&&H.createElement(H.Fragment,null,Ne&&H.createElement(st,{closeOnEscape:He,onClose:Ot}),H.createElement(Mt,{ariaControlsSuffix:kt,closeOnClickOutside:je,offset:tt,position:et,targetRef:Rt,onClose:Ot},nt(Ot))))},A.PrimaryButton=ie,A.ProgressBar=function(Q){var _e=Q.progress,ke=H.useContext(he).direction===A.TextDirection.RightToLeft;return H.createElement("div",{className:oe({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":ke})},H.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(_e,"%")}},_e,"%"))},A.Separator=function(){return H.createElement("div",{className:"rpv-core__separator"})},A.Spinner=se,A.Splitter=function(Q){var _e=Q.constrain,ke=H.useContext(he).direction===A.TextDirection.RightToLeft,De=H.useRef(),je=H.useRef(),He=H.useRef(),nt=H.useRef(0),Je=H.useRef(0),Ne=H.useRef(0),tt=H.useRef(0),et={capture:!0},St=function(bt){var Ot=De.current,Rt=je.current,kt=He.current;if(Ot&&Rt&&kt){var bn=tt.current,Qt=bt.clientX-nt.current,tn=Ne.current+(ke?-Qt:Qt),cn=Ot.parentElement.getBoundingClientRect().width,Wt=100*tn/cn;if(Ot.classList.add("rpv-core__splitter--resizing"),_e){var dn=cn-tn-bn;if(!_e({firstHalfPercentage:Wt,firstHalfSize:tn,secondHalfPercentage:100*dn/cn,secondHalfSize:dn}))return}Rt.style.width="".concat(Wt,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),Rt.classList.add("rpv-core__splitter-sibling--resizing"),kt.classList.add("rpv-core__splitter-sibling--resizing")}},yt=function(bt){var Ot=De.current,Rt=je.current,kt=He.current;Ot&&Rt&&kt&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),Ot.classList.remove("rpv-core__splitter--resizing"),Rt.classList.remove("rpv-core__splitter-sibling--resizing"),kt.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",St,et),document.removeEventListener("mouseup",yt,et))};return H.useEffect(function(){var bt=De.current;bt&&(tt.current=bt.getBoundingClientRect().width,je.current=bt.previousElementSibling,He.current=bt.nextElementSibling)},[]),H.createElement("div",{ref:De,className:"rpv-core__splitter",onMouseDown:function(bt){var Ot=je.current;Ot&&(nt.current=bt.clientX,Je.current=bt.clientY,Ne.current=Ot.getBoundingClientRect().width,document.addEventListener("mousemove",St,et),document.addEventListener("mouseup",yt,et))}})},A.TextBox=fe,A.ThemeContext=he,A.Tooltip=function(Q){var _e=Q.ariaControlsSuffix,ke=Q.content,De=Q.offset,je=Q.position,He=Q.target,nt=Se(!1),Je=nt.opened,Ne=nt.toggle,tt=H.useRef(),et=H.useRef(),St=H.useMemo(function(){return _e||"".concat(xe())},[]);ne(function(){tt.current&&document.activeElement&&tt.current.contains(document.activeElement)&&bt()});var yt=function(){Ne(A.ToggleStatus.Open)},bt=function(){Ne(A.ToggleStatus.Close)};return H.createElement(H.Fragment,null,H.createElement("div",{ref:tt,"aria-describedby":"rpv-core__tooltip-body-".concat(St),onBlur:function(Ot){Ot.relatedTarget instanceof HTMLElement&&Ot.currentTarget.parentElement&&Ot.currentTarget.parentElement.contains(Ot.relatedTarget)?et.current&&(et.current.style.display="none"):bt()},onFocus:yt,onMouseEnter:yt,onMouseLeave:bt},He),Je&&H.createElement(Xe,{ariaControlsSuffix:St,contentRef:et,offset:De,position:je,targetRef:tt},ke()))},A.Viewer=function(Q){var _e=Q.characterMap,ke=Q.defaultScale,De=Q.enableSmoothScroll,je=De===void 0||De,He=Q.fileUrl,nt=Q.httpHeaders,Je=nt===void 0?{}:nt,Ne=Q.initialPage,tt=Ne===void 0?0:Ne,et=Q.pageLayout,St=Q.initialRotation,yt=St===void 0?0:St,bt=Q.localization,Ot=Q.plugins,Rt=Ot===void 0?[]:Ot,kt=Q.renderError,bn=Q.renderLoader,Qt=Q.renderPage,tn=Q.renderProtectedView,cn=Q.scrollMode,Wt=cn===void 0?A.ScrollMode.Vertical:cn,dn=Q.setRenderRange,on=dn===void 0?bo:dn,Cn=Q.transformGetDocumentParams,Pn=Q.theme,kn=Pn===void 0?{direction:A.TextDirection.LeftToRight,theme:"light"}:Pn,$n=Q.viewMode,Tn=$n===void 0?A.ViewMode.SinglePage:$n,qn=Q.withCredentials,Bn=qn!==void 0&&qn,Xn=Q.onDocumentAskPassword,Hn=Q.onDocumentLoad,Vn=Hn===void 0?function(){}:Hn,Wn=Q.onPageChange,Un=Wn===void 0?function(){}:Wn,er=Q.onRotate,lr=er===void 0?function(){}:er,sr=Q.onRotatePage,Zn=sr===void 0?function(){}:sr,nr=Q.onSwitchTheme,ur=nr===void 0?function(){}:nr,sn=Q.onZoom,rn=sn===void 0?function(){}:sn,Gt=H.useState({data:He,name:typeof He=="string"?He:"",shouldLoad:!1}),Zt=Gt[0],qt=Gt[1],hn=function(jn,zn){qt({data:zn,name:jn,shouldLoad:!0})},fn=H.useState(!1),Jt=fn[0],zt=fn[1],gn=Ue(Zt);H.useEffect(function(){var jn,zn,Kn,Ln;jn=gn.data,Ln=typeof(zn=He),(Kn=typeof jn)=="string"&&Ln==="string"&&jn===zn||Kn==="object"&&Ln==="object"&&jn.length===zn.length&&jn.every(function(hr,Er){return hr===zn[Er]})||qt({data:He,name:typeof He=="string"?He:"",shouldLoad:Jt})},[He,Jt]);var Sn=J({onVisibilityChanged:function(jn){zt(jn.isVisible),jn.isVisible&&qt(function(zn){return Object.assign({},zn,{shouldLoad:!0})})}}),Nn=typeof kn=="string"?{direction:A.TextDirection.LeftToRight,theme:kn}:kn,On=H.useState(bt||at),Jn=On[0],ir=On[1],vn={l10n:Jn,setL10n:ir},Qn=Object.assign({},{direction:Nn.direction},vo(Nn.theme||"light",ur));return H.useEffect(function(){bt&&ir(bt)},[bt]),H.createElement(ft.Provider,{value:vn},H.createElement(he.Provider,{value:Qn},H.createElement("div",{ref:Sn,className:"rpv-core__viewer rpv-core__viewer--".concat(Qn.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},Zt.shouldLoad&&H.createElement(go,{characterMap:_e,file:Zt.data,httpHeaders:Je,render:function(jn){return H.createElement(po,{defaultScale:ke,doc:jn,render:function(zn,Kn){return H.createElement(fo,{currentFile:{data:Zt.data,name:Zt.name},defaultScale:ke,doc:jn,enableSmoothScroll:je,initialPage:tt,initialRotation:yt,initialScale:Kn,pageLayout:et,pageSizes:zn,plugins:Rt,renderPage:Qt,scrollMode:Wt,setRenderRange:on,viewMode:Tn,viewerState:{file:Zt,fullScreenMode:A.FullScreenMode.Normal,pageIndex:-1,pageHeight:zn[0].pageHeight,pageWidth:zn[0].pageWidth,pagesRotation:new Map,rotation:yt,scale:Kn,scrollMode:Wt,viewMode:Tn},onDocumentLoad:Vn,onOpenFile:hn,onPageChange:Un,onRotate:lr,onRotatePage:Zn,onZoom:rn})},scrollMode:Wt,viewMode:Tn})},renderError:kt,renderLoader:bn,renderProtectedView:tn,transformGetDocumentParams:Cn,withCredentials:Bn,onDocumentAskPassword:Xn}))))},A.Worker=function(Q){var _e=Q.children,ke=Q.workerUrl;return W.GlobalWorkerOptions.workerSrc=ke,H.createElement(H.Fragment,null,_e)},A.chunk=ut,A.classNames=oe,A.createStore=function(Q){var _e=Q||{},ke={},De=function(He,nt){var Je;_e=G(G({},_e),((Je={})[He]=nt,Je)),(ke[He]||[]).forEach(function(Ne){return Ne(_e[He])})},je=function(He){return _e[He]};return{subscribe:function(He,nt){ke[He]=(ke[He]||[]).concat(nt)},unsubscribe:function(He,nt){ke[He]=(ke[He]||[]).filter(function(Je){return Je!==nt})},update:function(He,nt){De(He,nt)},updateCurrentValue:function(He,nt){var Je=je(He);Je!==void 0&&De(He,nt(Je))},get:function(He){return je(He)}}},A.getDestination=en,A.getPage=Kt,A.isFullScreenEnabled=de,A.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},A.useDebounceCallback=ye,A.useIntersectionObserver=J,A.useIsMounted=Te,A.useIsomorphicLayoutEffect=ae,A.usePrevious=Ue,A.useRenderQueue=Qe})(core_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$i.exports=core_min;var libExports$h=lib$i.exports,lib$h={exports:{}},defaultLayout_min={},lib$g={exports:{}},attachment_min={},e$e=libExports$h;function t$e(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(B){if(B!=="default"){var R=Object.getOwnPropertyDescriptor(A,B);Object.defineProperty($,B,R.get?R:{enumerable:!0,get:function(){return A[B]}})}}),$.default=A,Object.freeze($)}var n$e=t$e(reactExports),a$e=function(A){var $=A.files,B=n$e.useRef(),R=n$e.useContext(e$e.LocalizationContext).l10n,O=n$e.useContext(e$e.ThemeContext).direction===e$e.TextDirection.RightToLeft,H=n$e.useRef([]),W=R&&R.attachment?R.attachment.clickToDownload:"Click to download",pe=function(ce){var ue=B.current,G=[].slice.call(ue.getElementsByClassName("rpv-attachment__item"));if(G.length!==0){G.forEach(function(oe){return oe.setAttribute("tabindex","-1")});var ve=document.activeElement,he=G[Math.min(G.length-1,Math.max(0,ce(G,ve)))];he.setAttribute("tabindex","0"),he.focus()}};return e$e.useIsomorphicLayoutEffect(function(){var ce=B.current;if(ce){var ue=[].slice.call(ce.getElementsByClassName("rpv-attachment__item"));if(H.current=ue,ue.length>0){var G=ue[0];G.focus(),G.setAttribute("tabindex","0")}}},[]),n$e.createElement("div",{"data-testid":"attachment__list",className:e$e.classNames({"rpv-attachment__list":!0,"rpv-attachment__list--rtl":O}),ref:B,tabIndex:-1,onKeyDown:function(ce){switch(ce.key){case"ArrowDown":ce.preventDefault(),pe(function(ue,G){return ue.indexOf(G)+1});break;case"ArrowUp":ce.preventDefault(),pe(function(ue,G){return ue.indexOf(G)-1});break;case"End":ce.preventDefault(),pe(function(ue,G){return ue.length-1});break;case"Home":ce.preventDefault(),pe(function(ue,G){return 0})}}},$.map(function(ce){return n$e.createElement("button",{className:"rpv-attachment__item",key:ce.fileName,tabIndex:-1,title:W,type:"button",onClick:function(){return ue=ce.fileName,G=ce.data,ve=typeof G=="string"?"":URL.createObjectURL(new Blob([G],{type:""})),(he=document.createElement("a")).style.display="none",he.href=ve||ue,he.setAttribute("download",function(oe){var ae=oe.split("/").pop();return ae?ae.split("#")[0].split("?")[0]:oe}(ue)),document.body.appendChild(he),he.click(),document.body.removeChild(he),void(ve&&URL.revokeObjectURL(ve));var ue,G,ve,he}},ce.fileName)}))},r$e=function(A){var $=A.doc,B=n$e.useContext(e$e.LocalizationContext).l10n,R=n$e.useContext(e$e.ThemeContext).direction===e$e.TextDirection.RightToLeft,O=B&&B.attachment?B.attachment.noAttachment:"There is no attachment",H=n$e.useState({files:[],isLoaded:!1}),W=H[0],pe=H[1];return n$e.useEffect(function(){$.getAttachments().then(function(ce){var ue=ce?Object.keys(ce).map(function(G){return{data:ce[G].content,fileName:ce[G].filename}}):[];pe({files:ue,isLoaded:!0})})},[$]),W.isLoaded?W.files.length===0?n$e.createElement("div",{"data-testid":"attachment__empty",className:e$e.classNames({"rpv-attachment__empty":!0,"rpv-attachment__empty--rtl":R})},O):n$e.createElement(a$e,{files:W.files}):n$e.createElement(e$e.Spinner,null)},c$e=function(A){var $=A.store,B=n$e.useState($.get("doc")),R=B[0],O=B[1],H=function(W){O(W)};return n$e.useEffect(function(){return $.subscribe("doc",H),function(){$.unsubscribe("doc",H)}},[]),R?n$e.createElement(r$e,{doc:R}):n$e.createElement("div",{className:"rpv-attachment__loader"},n$e.createElement(e$e.Spinner,null))};attachment_min.attachmentPlugin=function(){var A=n$e.useMemo(function(){return e$e.createStore({})},[]);return{onDocumentLoad:function($){A.update("doc",$.doc)},Attachments:function(){return n$e.createElement(c$e,{store:A})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$g.exports=attachment_min;var libExports$g=lib$g.exports,lib$f={exports:{}},bookmark_min={},e$d=libExports$h;function t$d(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(B){if(B!=="default"){var R=Object.getOwnPropertyDescriptor(A,B);Object.defineProperty($,B,R.get?R:{enumerable:!0,get:function(){return A[B]}})}}),$.default=A,Object.freeze($)}var r$d,o$d=t$d(reactExports),n$d=function(){return n$d=Object.assign||function(A){for(var $,B=1,R=arguments.length;B<R;B++)for(var O in $=arguments[B])Object.prototype.hasOwnProperty.call($,O)&&(A[O]=$[O]);return A},n$d.apply(this,arguments)},a$d=function(){return o$d.createElement(e$d.Icon,{size:16},o$d.createElement("path",{d:"M6.427,8.245A.5.5,0,0,1,6.862,7.5H17.138a.5.5,0,0,1,.435.749l-5.139,9a.5.5,0,0,1-.868,0Z"}))},i$d=function(){return o$d.createElement(e$d.Icon,{size:16},o$d.createElement("path",{d:"M9.248,17.572a.5.5,0,0,1-.748-.434V6.862a.5.5,0,0,1,.748-.434l8.992,5.138a.5.5,0,0,1,0,.868Z"}))},c$d=function(A){var $=A.bookmark,B=A.depth,R=A.doc,O=A.index,H=A.isBookmarkExpanded,W=A.numberOfSiblings,pe=A.pathFromRoot,ce=A.renderBookmarkItem,ue=A.store,G=pe?"".concat(pe,".").concat(O):"".concat(O),ve=o$d.useMemo(function(){return function(te){var ge=te.count,de=te.items;if(ge>=0)return!1;var Ae=de.length;if(Ae===0)return!1;for(var Fe=de.concat([]);Fe.length>0;){var ye=Fe.shift(),Te=ye.items;ye.count&&Te&&ye.count>0&&Te.length>0&&(Ae+=Te.length,Fe=Fe.concat(Te))}return Math.abs(ge)===Ae}($)},[$]),he=ue.get("bookmarkExpandedMap"),oe=H?H({bookmark:$,doc:R,depth:B,index:O}):he.has(G)?he.get(G):!ve,ae=o$d.useState(oe),J=ae[0],V=ae[1],re=$.items&&$.items.length>0,ie=function(){var te=!J;ue.updateCurrentValue("bookmarkExpandedMap",function(ge){return ge.set(G,te)}),V(te)},se=function(){var te=$.dest,ge=ue.get("jumpToDestination");e$d.getDestination(R,te).then(function(de){ge&&ge(n$d({label:$.title},de))})},fe=function(){re&&$.dest&&se()},Y=function(){!re&&$.dest&&se()},ee=function(te,ge){return o$d.createElement("div",{className:"rpv-bookmark__item",style:{paddingLeft:"".concat(1.25*B,"rem")},onClick:te},ge)},Ee=function(te,ge){return re?o$d.createElement("span",{className:"rpv-bookmark__toggle","data-testid":"bookmark__toggle-".concat(B,"-").concat(O),onClick:ie},J?te:ge):o$d.createElement("span",{className:"rpv-bookmark__toggle"})},be=function(te){return $.url?o$d.createElement("a",{className:"rpv-bookmark__title",href:$.url,rel:"noopener noreferrer nofollow",target:$.newWindow?"_blank":""},$.title):o$d.createElement("div",{className:"rpv-bookmark__title","aria-label":$.title,onClick:te},$.title)};return o$d.createElement("li",{"aria-expanded":J?"true":"false","aria-label":$.title,"aria-level":B+1,"aria-posinset":O+1,"aria-setsize":W,role:"treeitem",tabIndex:-1},ce?ce({bookmark:$,depth:B,hasSubItems:re,index:O,isExpanded:J,path:G,defaultRenderItem:ee,defaultRenderTitle:be,defaultRenderToggle:Ee,onClickItem:Y,onClickTitle:fe,onToggleSubItems:ie}):ee(Y,o$d.createElement(o$d.Fragment,null,Ee(o$d.createElement(a$d,null),o$d.createElement(i$d,null)),be(fe))),re&&J&&o$d.createElement(m$9,{bookmarks:$.items,depth:B+1,doc:R,isBookmarkExpanded:H,isRoot:!1,pathFromRoot:G,renderBookmarkItem:ce,store:ue}))},m$9=function(A){var $=A.bookmarks,B=A.depth,R=B===void 0?0:B,O=A.doc,H=A.isBookmarkExpanded,W=A.isRoot,pe=A.pathFromRoot,ce=A.renderBookmarkItem,ue=A.store;return o$d.createElement("ul",{className:"rpv-bookmark__list",role:W?"tree":"group",tabIndex:-1},$.map(function(G,ve){return o$d.createElement(c$d,{bookmark:G,depth:R,doc:O,index:ve,isBookmarkExpanded:H,key:ve,numberOfSiblings:$.length,pathFromRoot:pe,renderBookmarkItem:ce,store:ue})}))};(function(A){A[A.Collapse=0]="Collapse",A[A.Expand=1]="Expand"})(r$d||(r$d={}));var l$d=function(A){var $=A.bookmarks,B=A.doc,R=A.isBookmarkExpanded,O=A.renderBookmarkItem,H=A.store,W=o$d.useRef(),pe=function(ve){var he=W.current;if(he&&ve.target instanceof HTMLElement&&he.contains(ve.target))switch(ve.key){case"ArrowDown":ve.preventDefault(),ue(function(oe,ae){return oe.indexOf(ae)+1});break;case"ArrowLeft":ve.preventDefault(),G(r$d.Collapse);break;case"ArrowRight":ve.preventDefault(),G(r$d.Expand);break;case"ArrowUp":ve.preventDefault,ue(function(oe,ae){return oe.indexOf(ae)-1});break;case"End":ve.preventDefault(),ue(function(oe,ae){return oe.length-1});break;case" ":case"Enter":case"Space":ve.preventDefault(),ce();break;case"Home":ve.preventDefault(),ue(function(oe,ae){return 0})}},ce=function(){var ve=document.activeElement.closest(".rpv-bookmark__item").querySelector(".rpv-bookmark__title");ve&&ve.click()},ue=function(ve){var he=W.current,oe=[].slice.call(he.getElementsByClassName("rpv-bookmark__item"));if(oe.length!==0){var ae=document.activeElement,J=oe[Math.min(oe.length-1,Math.max(0,ve(oe,ae)))];ae.setAttribute("tabindex","-1"),J.setAttribute("tabindex","0"),J.focus()}},G=function(ve){var he=W.current;if([].slice.call(he.getElementsByClassName("rpv-bookmark__item")).length!==0){var oe=document.activeElement.closest(".rpv-bookmark__item"),ae=ve===r$d.Collapse?"true":"false";if(oe&&oe.parentElement.getAttribute("aria-expanded")===ae){var J=oe.querySelector(".rpv-bookmark__toggle");J&&J.click()}}};return o$d.useEffect(function(){return document.addEventListener("keydown",pe),function(){document.removeEventListener("keydown",pe)}},[]),o$d.useEffect(function(){var ve=W.current;if(ve){var he=[].slice.call(ve.getElementsByClassName("rpv-bookmark__item"));he.length>0&&(he[0].focus(),he[0].setAttribute("tabindex","0"))}},[]),o$d.createElement("div",{ref:W},o$d.createElement(m$9,{bookmarks:$,depth:0,doc:B,isBookmarkExpanded:R,isRoot:!0,pathFromRoot:"",renderBookmarkItem:O,store:H}))},s$9=function(A){var $=A.doc,B=A.isBookmarkExpanded,R=A.renderBookmarkItem,O=A.store,H=o$d.useContext(e$d.LocalizationContext).l10n,W=o$d.useContext(e$d.ThemeContext).direction===e$d.TextDirection.RightToLeft,pe=o$d.useState({isLoaded:!1,items:[]}),ce=pe[0],ue=pe[1];return o$d.useEffect(function(){ue({isLoaded:!1,items:[]}),$.getOutline().then(function(G){ue({isLoaded:!0,items:G||[]})})},[$]),ce.isLoaded?ce.items.length===0?o$d.createElement("div",{"data-testid":"bookmark__empty",className:e$d.classNames({"rpv-bookmark__empty":!0,"rpv-bookmark__empty--rtl":W})},H&&H.bookmark?H.bookmark.noBookmark:"There is no bookmark"):o$d.createElement("div",{"data-testid":"bookmark__container",className:e$d.classNames({"rpv-bookmark__container":!0,"rpv-bookmark__container--rtl":W})},o$d.createElement(l$d,{bookmarks:ce.items,doc:$,isBookmarkExpanded:B,renderBookmarkItem:R,store:O})):o$d.createElement("div",{className:"rpv-bookmark__loader"},o$d.createElement(e$d.Spinner,null))},u$d=function(A){var $=A.isBookmarkExpanded,B=A.renderBookmarkItem,R=A.store,O=o$d.useState(R.get("doc")),H=O[0],W=O[1],pe=function(ce){W(ce)};return o$d.useEffect(function(){return R.subscribe("doc",pe),function(){R.unsubscribe("doc",pe)}},[]),H?o$d.createElement(s$9,{doc:H,isBookmarkExpanded:$,renderBookmarkItem:B,store:R}):o$d.createElement("div",{className:"rpv-bookmark__loader"},o$d.createElement(e$d.Spinner,null))};bookmark_min.DownArrowIcon=a$d,bookmark_min.RightArrowIcon=i$d,bookmark_min.bookmarkPlugin=function(){var A=o$d.useMemo(function(){return e$d.createStore({bookmarkExpandedMap:new Map})},[]);return{install:function($){A.update("jumpToDestination",$.jumpToDestination)},onDocumentLoad:function($){A.update("doc",$.doc)},Bookmarks:function($){return o$d.createElement(u$d,{isBookmarkExpanded:$==null?void 0:$.isBookmarkExpanded,renderBookmarkItem:$==null?void 0:$.renderBookmarkItem,store:A})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$f.exports=bookmark_min;var libExports$f=lib$f.exports,lib$e={exports:{}},thumbnail_min={};(function(A){var $=libExports$h;function B(J){var V=Object.create(null);return J&&Object.keys(J).forEach(function(re){if(re!=="default"){var ie=Object.getOwnPropertyDescriptor(J,re);Object.defineProperty(V,re,ie.get?ie:{enumerable:!0,get:function(){return J[re]}})}}),V.default=J,Object.freeze(V)}var R,O=B(reactExports);A.ThumbnailDirection=void 0,(R=A.ThumbnailDirection||(A.ThumbnailDirection={})).Horizontal="Horizontal",R.Vertical="Vertical";var H=function(){return H=Object.assign||function(J){for(var V,re=1,ie=arguments.length;re<ie;re++)for(var se in V=arguments[re])Object.prototype.hasOwnProperty.call(V,se)&&(J[se]=V[se]);return J},H.apply(this,arguments)},W=function(J){var V=J.doc,re=J.getPageIndex,ie=J.renderSpinner,se=J.store,fe=J.width,Y=V.numPages,ee=re?re({numPages:Y}):0,Ee=Math.max(0,Math.min(ee,Y-1)),be=se.get("pagesRotation")||new Map,te=be.has(Ee)?be.get(Ee):0,ge=O.useState(""),de=ge[0],Ae=ge[1],Fe=$.useIsMounted(),ye=O.useRef(),Te=O.useState(se.get("rotation")||0),Ue=Te[0],Be=Te[1],Ce=O.useState(te),Qe=Ce[0],at=Ce[1],ft=O.useState(!1),_t=ft[0],xe=ft[1],q=function(le){var me=le.has(Ee)?le.get(Ee):0;at(me)},ne=function(le){Be(le)},X=$.useIntersectionObserver({onVisibilityChanged:function(le){xe(le.isVisible)}});return O.useEffect(function(){if(_t){var le=X.current;le&&(Ae(""),$.getPage(V,Ee).then(function(me){var Se=me.getViewport({scale:1}),Pe=(Se.rotation+Ue+Qe)%360,Le=Math.abs(Ue+Qe)%180==0,Ke=Le?Se.width:Se.height,Ve=Le?Se.height:Se.width,rt=document.createElement("canvas"),lt=rt.getContext("2d",{alpha:!1}),gt=le.clientWidth,dt=le.clientHeight,pt=fe?fe/Ke:Math.min(gt/Ke,dt/Ve),vt=pt*Ke,mt=pt*Ve;rt.height=mt,rt.width=vt,rt.style.opacity="0";var Mt=me.getViewport({rotation:Pe,scale:pt});ye.current=me.render({canvasContext:lt,viewport:Mt}),ye.current.promise.then(function(){Fe.current&&Ae(rt.toDataURL()),rt.width=0,rt.height=0},function(){})}))}},[Qe,_t]),O.useEffect(function(){return se.subscribe("pagesRotation",q),se.subscribe("rotation",ne),function(){se.unsubscribe("pagesRotation",q),se.unsubscribe("rotation",ne)}},[]),O.useEffect(function(){return function(){var le;(le=ye.current)===null||le===void 0||le.cancel()}},[]),O.createElement("div",{ref:X,className:"rpv-thumbnail__cover-inner","data-testid":"thumbnail__cover-inner"},de?O.createElement("img",{className:"rpv-thumbnail__cover-image","data-testid":"thumbnail__cover-image",src:de}):O.createElement("div",{className:"rpv-thumbnail__cover-loader","data-testid":"thumbnail__cover-loader"},ie?ie():O.createElement($.Spinner,null)))},pe=function(J){var V=J.getPageIndex,re=J.renderSpinner,ie=J.store,se=J.width,fe=O.useState(ie.get("doc")),Y=fe[0],ee=fe[1],Ee=function(be){ee(be)};return O.useEffect(function(){return ie.subscribe("doc",Ee),function(){ie.unsubscribe("doc",Ee)}},[]),O.createElement("div",{className:"rpv-thumbnail__cover"},Y?O.createElement(W,{doc:Y,getPageIndex:V,renderSpinner:re,store:ie,width:se}):O.createElement("div",{className:"rpv-thumbnail__cover-loader"},re?re():O.createElement($.Spinner,null)))},ce=function(){return O.createElement($.Spinner,null)},ue=O.createContext({renderSpinner:ce}),G=function(J){var V=J.children,re=J.doc,ie=$.useIsMounted(),se=O.useState({loading:!0,labels:[]}),fe=se[0],Y=se[1];return O.useEffect(function(){re.getPageLabels().then(function(ee){ie.current&&Y({loading:!1,labels:ee||[]})})},[re.loadingTask.docId]),fe.loading?O.createElement(O.Fragment,null):V(fe.labels)},ve=function(J){var V=J.page,re=J.pageHeight,ie=J.pageIndex,se=J.pageWidth,fe=J.rotation,Y=J.thumbnailHeight,ee=J.thumbnailWidth,Ee=J.onRenderCompleted,be=O.useContext($.LocalizationContext).l10n,te=O.useRef(),ge=O.useState(""),de=ge[0],Ae=ge[1],Fe=be&&be.thumbnail?be.thumbnail.thumbnailLabel:"Thumbnail of page {{pageIndex}}";return O.useEffect(function(){var ye=te.current;ye&&ye.cancel();var Te=document.createElement("canvas"),Ue=Te.getContext("2d",{alpha:!1}),Be=ee,Ce=Be/(se/re),Qe=Be/se;Te.height=Ce,Te.width=Be,Te.style.height="".concat(Ce,"px"),Te.style.width="".concat(Be,"px");var at=V.getViewport({rotation:fe,scale:Qe});return te.current=V.render({canvasContext:Ue,viewport:at}),te.current.promise.then(function(){Ae(Te.toDataURL()),Ee(ie)},function(){Ee(ie)}),function(){var ft;(ft=te.current)===null||ft===void 0||ft.cancel()}},[fe]),de?O.createElement("img",{"aria-label":Fe.replace("{{pageIndex}}","".concat(ie+1)),src:de,height:"".concat(Y,"px"),width:"".concat(ee,"px")}):O.useContext(ue).renderSpinner()},he=function(J){var V=J.doc,re=J.pageHeight,ie=J.pageIndex,se=J.pageRotation,fe=J.pageWidth,Y=J.rotation,ee=J.shouldRender,Ee=J.thumbnailWidth,be=J.onRenderCompleted,te=J.onVisibilityChanged,ge=$.useIsMounted(),de=O.useState({height:re,page:null,viewportRotation:0,width:fe}),Ae=de[0],Fe=de[1],ye=Ae.page,Te=Ae.height,Ue=Ae.width,Be=Ue/Te,Ce=Math.abs(Y+se)%180==0,Qe=Ce?Ee:Ee/Be,at=Ce?Ee/Be:Ee;O.useEffect(function(){ee&&$.getPage(V,ie).then(function(xe){var q=xe.getViewport({scale:1});ge.current&&Fe({height:q.height,page:xe,viewportRotation:q.rotation,width:q.width})})},[ee]);var ft=(Ae.viewportRotation+Y+se)%360,_t=$.useIntersectionObserver({onVisibilityChanged:function(xe){te(ie,xe)}});return O.createElement("div",{className:"rpv-thumbnail__container","data-testid":"thumbnail__container-".concat(ie),ref:_t,style:{height:"".concat(at,"px"),width:"".concat(Qe,"px")}},ye?O.createElement(ve,{page:ye,pageHeight:Ce?Te:Ue,pageIndex:ie,pageWidth:Ce?Ue:Te,rotation:ft,thumbnailHeight:at,thumbnailWidth:Qe,onRenderCompleted:be}):O.useContext(ue).renderSpinner())},oe=function(J){var V=J.currentPage,re=J.doc,ie=J.labels,se=J.pagesRotation,fe=J.pageHeight,Y=J.pageWidth,ee=J.renderCurrentPageLabel,Ee=J.renderThumbnailItem,be=J.rotatedPage,te=J.rotation,ge=J.thumbnailDirection,de=J.thumbnailWidth,Ae=J.viewMode,Fe=J.onJumpToPage,ye=J.onRotatePage,Te=re.numPages,Ue=re.loadingTask.docId,Be=O.useRef(null),Ce=O.useRef([]),Qe=O.useState(V),at=Qe[0],ft=Qe[1],_t=O.useContext($.ThemeContext).direction===$.TextDirection.RightToLeft,xe=O.useState(-1),q=xe[0],ne=xe[1],X=$.useIsMounted(),le=$.usePrevious(Ae),me=O.useRef(!1),Se=$.useRenderQueue({doc:re}),Pe=O.useMemo(function(){return Array(Te).fill(0).map(function(pt,vt){return vt})},[Ue]),Le=O.useMemo(function(){switch(Ae){case $.ViewMode.DualPage:return $.chunk(Pe,2);case $.ViewMode.DualPageWithCover:return[[Pe[0]]].concat($.chunk(Pe.slice(1),2));case $.ViewMode.SinglePage:default:return $.chunk(Pe,1)}},[Ue,Ae]),Ke=function(){if(Be.current){var pt=Ce.current,vt=at+1;vt<pt.length&&(at>=0&&pt[at].setAttribute("tabindex","-1"),ft(vt))}},Ve=function(){if(Be.current){var pt=Ce.current,vt=at-1;vt>=0&&(at>=0&&pt[at].setAttribute("tabindex","-1"),ft(vt))}},rt=function(){at>=0&&at<Te&&Fe(at)};$.useIsomorphicLayoutEffect(function(){var pt=Be.current;pt&&(Ce.current=Array.from(pt.querySelectorAll(".rpv-thumbnail__item")))},[Ae]),O.useEffect(function(){var pt=Ce.current;if(!(pt.length===0||at<0||at>pt.length)){var vt=pt[at];vt.setAttribute("tabindex","0"),vt.focus()}},[at]),$.useIsomorphicLayoutEffect(function(){var pt=Be.current,vt=Ce.current;if(!(!pt||vt.length===0||V<0||V>vt.length)){var mt=vt[V].closest(".rpv-thumbnail__items");mt&&(ge===A.ThumbnailDirection.Vertical?function(Mt,st){var Xe=Mt.getBoundingClientRect().top-st.getBoundingClientRect().top,qe=Mt.clientHeight,ut=st.clientHeight;Xe<0?st.scrollTop+=Xe:Xe+qe<=ut||(st.scrollTop+=Xe+qe-ut)}(mt,pt):function(Mt,st){var Xe=Mt.getBoundingClientRect().left-st.getBoundingClientRect().left,qe=Mt.clientWidth,ut=st.clientWidth;Xe<0?st.scrollLeft+=Xe:Xe+qe<=ut||(st.scrollLeft+=Xe+qe-ut)}(mt,pt))}},[V,ge]);var lt=O.useCallback(function(pt){X.current&&(Se.markRendered(pt),me.current=!1,dt())},[Ue]),gt=O.useCallback(function(pt,vt){vt.isVisible?Se.setVisibility(pt,vt.ratio):Se.setOutOfRange(pt),dt()},[Ue]),dt=O.useCallback(function(){if(!me.current){var pt=Se.getHighestPriorityPage();pt>-1&&(Se.markRendering(pt),me.current=!0,ne(pt))}},[Ue]);return O.useEffect(function(){be>=0&&(Se.markRendering(be),me.current=!0,ne(be))},[Ue,be]),$.useIsomorphicLayoutEffect(function(){le!==Ae&&(Se.markNotRendered(),dt())},[Ae]),O.createElement("div",{ref:Be,"data-testid":"thumbnail__list",className:$.classNames({"rpv-thumbnail__list":!0,"rpv-thumbnail__list--horizontal":ge===A.ThumbnailDirection.Horizontal,"rpv-thumbnail__list--rtl":_t,"rpv-thumbnail__list--vertical":ge===A.ThumbnailDirection.Vertical}),onKeyDown:function(pt){switch(pt.key){case"ArrowDown":Ke();break;case"ArrowUp":Ve();break;case"Enter":rt()}}},Le.map(function(pt,vt){var mt=!1;switch(Ae){case $.ViewMode.DualPage:mt=V===2*vt||V===2*vt+1;break;case $.ViewMode.DualPageWithCover:mt=V===0&&vt===0||vt>0&&V===2*vt-1||vt>0&&V===2*vt;break;case $.ViewMode.SinglePage:default:mt=V===vt}return O.createElement("div",{className:$.classNames({"rpv-thumbnail__items":!0,"rpv-thumbnail__items--dual":Ae===$.ViewMode.DualPage,"rpv-thumbnail__items--dual-cover":Ae===$.ViewMode.DualPageWithCover,"rpv-thumbnail__items--single":Ae===$.ViewMode.SinglePage,"rpv-thumbnail__items--selected":mt}),key:"".concat(vt,"___").concat(Ae)},pt.map(function(Mt){return function(st){var Xe=Ae===$.ViewMode.DualPageWithCover&&(st===0||Te%2==0&&st===Te-1),qe="".concat(re.loadingTask.docId,"___").concat(st),ut=ie.length===Te?ie[st]:"".concat(st+1),Pt=ee?ee({currentPage:V,pageIndex:st,numPages:Te,pageLabel:ut}):ut,At=se.has(st)?se.get(st):0,Ut=O.createElement(he,{doc:re,pageHeight:fe,pageIndex:st,pageRotation:At,pageWidth:Y,rotation:te,shouldRender:q===st,thumbnailWidth:de,onRenderCompleted:lt,onVisibilityChanged:gt});return Ee?Ee({currentPage:V,key:qe,numPages:Te,pageIndex:st,renderPageLabel:O.createElement(O.Fragment,null,Pt),renderPageThumbnail:Ut,onJumpToPage:function(){return Fe(st)},onRotatePage:function(Xt){return ye(st,Xt)}}):O.createElement("div",{key:qe},O.createElement("div",{className:$.classNames({"rpv-thumbnail__item":!0,"rpv-thumbnail__item--dual-even":Ae===$.ViewMode.DualPage&&st%2==0,"rpv-thumbnail__item--dual-odd":Ae===$.ViewMode.DualPage&&st%2==1,"rpv-thumbnail__item--dual-cover":Xe,"rpv-thumbnail__item--dual-cover-even":Ae===$.ViewMode.DualPageWithCover&&!Xe&&st%2==0,"rpv-thumbnail__item--dual-cover-odd":Ae===$.ViewMode.DualPageWithCover&&!Xe&&st%2==1,"rpv-thumbnail__item--single":Ae===$.ViewMode.SinglePage,"rpv-thumbnail__item--selected":V===st}),role:"button",tabIndex:V===st?0:-1,onClick:function(){return Fe(st)}},Ut),O.createElement("div",{"data-testid":"thumbnail__label-".concat(st),className:"rpv-thumbnail__label"},Pt))}(Mt)}))}))},ae=function(J){var V=J.renderCurrentPageLabel,re=J.renderThumbnailItem,ie=J.store,se=J.thumbnailDirection,fe=J.thumbnailWidth,Y=O.useState(ie.get("doc")),ee=Y[0],Ee=Y[1],be=O.useState(ie.get("currentPage")||0),te=be[0],ge=be[1],de=O.useState(ie.get("pageHeight")||0),Ae=de[0],Fe=de[1],ye=O.useState(ie.get("pageWidth")||0),Te=ye[0],Ue=ye[1],Be=O.useState(ie.get("rotation")||0),Ce=Be[0],Qe=Be[1],at=O.useState(ie.get("pagesRotation")||new Map),ft=at[0],_t=at[1],xe=O.useState(ie.get("rotatedPage")||-1),q=xe[0],ne=xe[1],X=O.useState(ie.get("viewMode")),le=X[0],me=X[1],Se=function(vt){ge(vt)},Pe=function(vt){Ee(vt)},Le=function(vt){Fe(vt)},Ke=function(vt){Ue(vt)},Ve=function(vt){Qe(vt)},rt=function(vt){_t(vt)},lt=function(vt){ne(vt)},gt=function(vt){me(vt)},dt=function(vt){var mt=ie.get("jumpToPage");mt&&mt(vt)},pt=function(vt,mt){ie.get("rotatePage")(vt,mt)};return O.useEffect(function(){return ie.subscribe("doc",Pe),ie.subscribe("pageHeight",Le),ie.subscribe("pageWidth",Ke),ie.subscribe("rotatedPage",lt),ie.subscribe("rotation",Ve),ie.subscribe("pagesRotation",rt),ie.subscribe("viewMode",gt),function(){ie.unsubscribe("doc",Pe),ie.unsubscribe("pageHeight",Le),ie.unsubscribe("pageWidth",Ke),ie.unsubscribe("rotatedPage",lt),ie.unsubscribe("rotation",Ve),ie.unsubscribe("pagesRotation",rt),ie.unsubscribe("viewMode",gt)}},[]),$.useIsomorphicLayoutEffect(function(){return ie.subscribe("currentPage",Se),function(){ie.unsubscribe("currentPage",Se)}},[]),ee?O.createElement($.LazyRender,{testId:"thumbnail__list-container",attrs:{className:"rpv-thumbnail__list-container"}},O.createElement(G,{doc:ee},function(vt){return O.createElement(oe,{currentPage:te,doc:ee,labels:vt,pagesRotation:ft,pageHeight:Ae,pageWidth:Te,renderCurrentPageLabel:V,renderThumbnailItem:re,rotatedPage:q,rotation:Ce,thumbnailDirection:se,thumbnailWidth:fe,viewMode:le,onJumpToPage:dt,onRotatePage:pt})})):O.createElement("div",{"data-testid":"thumbnail-list__loader",className:"rpv-thumbnail__loader"},O.useContext(ue).renderSpinner())};A.thumbnailPlugin=function(J){var V=O.useMemo(function(){return $.createStore({rotatePage:function(){},viewMode:$.ViewMode.SinglePage})},[]),re=O.useState(""),ie=re[0],se=re[1];return{install:function(fe){V.update("jumpToPage",fe.jumpToPage),V.update("rotatePage",fe.rotatePage)},onDocumentLoad:function(fe){se(fe.doc.loadingTask.docId),V.update("doc",fe.doc)},onViewerStateChange:function(fe){return V.update("currentPage",fe.pageIndex),V.update("pagesRotation",fe.pagesRotation),V.update("pageHeight",fe.pageHeight),V.update("pageWidth",fe.pageWidth),V.update("rotation",fe.rotation),V.update("rotatedPage",fe.rotatedPage),V.update("viewMode",fe.viewMode),fe},Cover:function(fe){return O.createElement(pe,H({},fe,{renderSpinner:J==null?void 0:J.renderSpinner,store:V}))},Thumbnails:O.useCallback(function(fe){return O.createElement(ue.Provider,{value:{renderSpinner:(J==null?void 0:J.renderSpinner)||ce}},O.createElement(ae,{renderCurrentPageLabel:J==null?void 0:J.renderCurrentPageLabel,renderThumbnailItem:fe==null?void 0:fe.renderThumbnailItem,store:V,thumbnailDirection:(fe==null?void 0:fe.thumbnailDirection)||A.ThumbnailDirection.Vertical,thumbnailWidth:(J==null?void 0:J.thumbnailWidth)||100}))},[ie])}}})(thumbnail_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$e.exports=thumbnail_min;var libExports$e=lib$e.exports,lib$d={exports:{}},toolbar_min={},lib$c={exports:{}},selectionMode_min={};(function(A){var $=libExports$h;function B(ae){var J=Object.create(null);return ae&&Object.keys(ae).forEach(function(V){if(V!=="default"){var re=Object.getOwnPropertyDescriptor(ae,V);Object.defineProperty(J,V,re.get?re:{enumerable:!0,get:function(){return ae[V]}})}}),J.default=ae,Object.freeze(J)}var R,O=B(reactExports),H=function(){return O.createElement($.Icon,{size:16},O.createElement("path",{d:`M11.5,5.5v-2C11.5,2.672,12.172,2,13,2s1.5,0.672,1.5,1.5v2 M14.5,11.5v-6C14.5,4.672,15.172,4,16,4
            c0.828,0,1.5,0.672,1.5,1.5v3 M17.5,13V8.5C17.5,7.672,18.172,7,19,7s1.5,0.672,1.5,1.5v10c0,2.761-2.239,5-5,5h-3.335
            c-1.712-0.001-3.305-0.876-4.223-2.321C6.22,18.467,4.083,14,4.083,14c-0.378-0.545-0.242-1.292,0.303-1.67
            c0.446-0.309,1.044-0.281,1.458,0.07L8.5,15.5v-10C8.5,4.672,9.172,4,10,4s1.5,0.672,1.5,1.5v6`}))},W=function(){return W=Object.assign||function(ae){for(var J,V=1,re=arguments.length;V<re;V++)for(var ie in J=arguments[V])Object.prototype.hasOwnProperty.call(J,ie)&&(ae[ie]=J[ie]);return ae},W.apply(this,arguments)};A.SelectionMode=void 0,(R=A.SelectionMode||(A.SelectionMode={})).Hand="Hand",R.Text="Text";var pe=function(){return O.createElement($.Icon,{size:16},O.createElement("path",{d:`M13.675,11.671l2.941-2.941c0.195-0.196,0.195-0.512-0.001-0.707C16.563,7.971,16.5,7.931,16.43,7.906
            L4.168,3.527C3.908,3.434,3.622,3.57,3.529,3.83c-0.039,0.109-0.039,0.228,0,0.336l4.379,12.262
            c0.093,0.26,0.379,0.396,0.639,0.303c0.07-0.025,0.133-0.065,0.185-0.117l2.943-2.943l6.146,6.146c0.195,0.195,0.512,0.195,0.707,0
            l1.293-1.293c0.195-0.195,0.195-0.512,0-0.707L13.675,11.671z`}))},ce=function(ae){var J=ae.children,V=ae.mode,re=ae.onClick,ie=O.useContext($.LocalizationContext).l10n,se="",fe=O.createElement(pe,null);switch(V){case A.SelectionMode.Hand:se=ie&&ie.selectionMode?ie.selectionMode.handTool:"Hand tool",fe=O.createElement(H,null);break;case A.SelectionMode.Text:default:se=ie&&ie.selectionMode?ie.selectionMode.textSelectionTool:"Text selection tool",fe=O.createElement(pe,null)}return J({icon:fe,label:se,onClick:re})},ue={left:0,top:8},G=function(ae){var J=ae.isSelected,V=ae.mode,re=ae.onClick,ie="";switch(V){case A.SelectionMode.Hand:ie="selection-mode__hand-button";break;case A.SelectionMode.Text:default:ie="selection-mode__text-button"}return O.createElement(ce,{mode:V,onClick:re},function(se){return O.createElement($.Tooltip,{ariaControlsSuffix:"selection-mode-switch",position:$.Position.BottomCenter,target:O.createElement($.MinimalButton,{ariaLabel:se.label,isSelected:J,testId:ie,onClick:se.onClick},se.icon),content:function(){return se.label},offset:ue})})},ve=function(ae){var J=ae.children,V=ae.mode,re=ae.store,ie=V===re.get("selectionMode");return(J||function(se){return O.createElement(G,{isSelected:ie,mode:se.mode,onClick:se.onClick})})({isSelected:ie,mode:V,onClick:function(){return re.update("selectionMode",V)}})},he=function(ae){var J=ae.isSelected,V=ae.mode,re=ae.onClick,ie="";switch(V){case A.SelectionMode.Hand:ie="selection-mode__hand-menu";break;case A.SelectionMode.Text:default:ie="selection-mode__text-menu"}return O.createElement(ce,{mode:V,onClick:re},function(se){return O.createElement($.MenuItem,{checked:J,icon:se.icon,testId:ie,onClick:se.onClick},se.label)})},oe=function(ae){var J=ae.store,V=O.useRef(null),re=O.useState(A.SelectionMode.Text),ie=re[0],se=re[1],fe=O.useRef({top:0,left:0,x:0,y:0}),Y=function(ge){var de=V.current;de&&(de.scrollTop=fe.current.top-(ge.clientY-fe.current.y),de.scrollLeft=fe.current.left-(ge.clientX-fe.current.x))},ee=function(){var ge=V.current;ge&&(ge.classList.add("rpv-selection-mode__grab"),ge.classList.remove("rpv-selection-mode__grabbing"),document.removeEventListener("mousemove",Y),document.removeEventListener("mouseup",ee))},Ee=function(ge){var de=V.current;de&&ie!==A.SelectionMode.Text&&(de.classList.remove("rpv-selection-mode__grab"),de.classList.add("rpv-selection-mode__grabbing"),ge.preventDefault(),ge.stopPropagation(),fe.current={left:de.scrollLeft,top:de.scrollTop,x:ge.clientX,y:ge.clientY},document.addEventListener("mousemove",Y),document.addEventListener("mouseup",ee))},be=function(ge){V.current=ge()},te=function(ge){se(ge)};return O.useEffect(function(){var ge=V.current;if(ge)return ie===A.SelectionMode.Hand?ge.classList.add("rpv-selection-mode__grab"):ge.classList.remove("rpv-selection-mode__grab"),ge.addEventListener("mousedown",Ee),function(){ge.removeEventListener("mousedown",Ee)}},[ie]),O.useEffect(function(){return J.subscribe("getPagesContainer",be),J.subscribe("selectionMode",te),function(){J.unsubscribe("getPagesContainer",be),J.unsubscribe("selectionMode",te)}},[]),O.createElement(O.Fragment,null)};A.HandToolIcon=H,A.TextSelectionIcon=pe,A.selectionModePlugin=function(ae){var J=O.useMemo(function(){return $.createStore()},[]),V=function(re){return O.createElement(ve,W({},re,{store:J}))};return{install:function(re){J.update("selectionMode",ae&&ae.selectionMode?ae.selectionMode:A.SelectionMode.Text),J.update("getPagesContainer",re.getPagesContainer)},renderViewer:function(re){var ie=re.slot;return ie.subSlot&&ie.subSlot.children&&(ie.subSlot.children=O.createElement(O.Fragment,null,O.createElement(oe,{store:J}),ie.subSlot.children)),ie},SwitchSelectionMode:V,SwitchSelectionModeButton:function(re){return O.createElement(V,{mode:re.mode},function(ie){return O.createElement(G,{isSelected:ie.isSelected,mode:ie.mode,onClick:function(){ie.onClick()}})})},SwitchSelectionModeMenuItem:function(re){return O.createElement(V,{mode:re.mode},function(ie){return O.createElement(he,{isSelected:ie.isSelected,mode:ie.mode,onClick:function(){ie.onClick(),re.onClick()}})})}}}})(selectionMode_min);/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$c.exports=selectionMode_min;var libExports$d=lib$c.exports,lib$b={exports:{}},fullScreen_min={},e$c=libExports$h;function t$c(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(B){if(B!=="default"){var R=Object.getOwnPropertyDescriptor(A,B);Object.defineProperty($,B,R.get?R:{enumerable:!0,get:function(){return A[B]}})}}),$.default=A,Object.freeze($)}var n$c=t$c(reactExports),r$c=function(){return n$c.createElement(e$c.Icon,{size:16},n$c.createElement("path",{d:"M11.5 23.499L11.5 14.499"}),n$c.createElement("path",{d:"M7.5 18.499L11.5 14.499 15.5 18.499"}),n$c.createElement("path",{d:"M11.5 1.499L11.5 10.499"}),n$c.createElement("path",{d:"M7.5 6.499L11.5 10.499 15.5 6.499"}),n$c.createElement("path",{d:"M20.5 12.499L1.5 12.499"}))},l$c=function(){return n$c.createElement(e$c.Icon,{size:16},n$c.createElement("path",{d:"M0.5 12L23.5 12"}),n$c.createElement("path",{d:"M11.5 1L11.5 23"}),n$c.createElement("path",{d:"M8.5 4L11.5 1 14.5 4"}),n$c.createElement("path",{d:"M20.5 9L23.5 12 20.5 15"}),n$c.createElement("path",{d:"M3.5 15L0.5 12 3.5 9"}),n$c.createElement("path",{d:"M14.5 20L11.5 23 8.5 20"}))},c$c=function(){return c$c=Object.assign||function(A){for(var $,B=1,R=arguments.length;B<R;B++)for(var O in $=arguments[B])Object.prototype.hasOwnProperty.call($,O)&&(A[O]=$[O]);return A},c$c.apply(this,arguments)},u$c={left:0,top:8},o$c=function(A){var $=A.enableShortcuts,B=A.onClick,R=n$c.useContext(e$c.LocalizationContext).l10n,O=R&&R.fullScreen?R.fullScreen.enterFullScreen:"Full screen",H=$?e$c.isMac()?"Meta+Ctrl+F":"F11":"";return n$c.createElement(e$c.Tooltip,{ariaControlsSuffix:"full-screen-enter",position:e$c.Position.BottomCenter,target:n$c.createElement(e$c.MinimalButton,{ariaKeyShortcuts:H,ariaLabel:O,isDisabled:!e$c.isFullScreenEnabled(),testId:"full-screen__enter-button",onClick:B},n$c.createElement(l$c,null)),content:function(){return O},offset:u$c})},i$c={left:0,top:8},a$c=function(A){var $=A.onClick,B=n$c.useContext(e$c.LocalizationContext).l10n,R=B&&B.fullScreen?B.fullScreen.exitFullScreen:"Exit full screen";return n$c.createElement(e$c.Tooltip,{ariaControlsSuffix:"full-screen-exit",position:e$c.Position.BottomCenter,target:n$c.createElement(e$c.MinimalButton,{ariaKeyShortcuts:"Esc",ariaLabel:R,testId:"full-screen__exit-button-with-tooltip",onClick:$},n$c.createElement(r$c,null)),content:function(){return R},offset:i$c})},f$9=function(A,$){var B=n$c.useState($.get("fullScreenMode")),R=B[0],O=B[1],H=n$c.useCallback(function(W){O(W)},[]);return n$c.useEffect(function(){return $.subscribe("fullScreenMode",H),function(){$.unsubscribe("fullScreenMode",H)}},[]),{enterFullScreen:function(){var W=$.get("getPagesContainer");if(W){var pe=A(W());$.get("enterFullScreenMode")(pe)}},exitFullScreen:function(){$.get("exitFullScreenMode")()},isFullScreen:R===e$c.FullScreenMode.Entering||R===e$c.FullScreenMode.EnteredCompletely}},s$8=function(A){var $=A.children,B=A.enableShortcuts,R=A.getFullScreenTarget,O=A.store,H=f$9(R,O),W=H.enterFullScreen,pe=H.exitFullScreen,ce=H.isFullScreen;return($||function(ue){return ce?n$c.createElement(a$c,{onClick:ue.onClick}):n$c.createElement(o$c,{enableShortcuts:B,onClick:ue.onClick})})({onClick:ce?pe:W})},S$4=function(A){var $=A.onClick,B=n$c.useContext(e$c.LocalizationContext).l10n,R=B&&B.fullScreen?B.fullScreen.enterFullScreen:"Full screen";return n$c.createElement(e$c.MenuItem,{icon:n$c.createElement(l$c,null),isDisabled:!e$c.isFullScreenEnabled(),testId:"full-screen__enter-menu",onClick:$},R)},d$9=function(A){var $=A.onClick,B=n$c.useContext(e$c.LocalizationContext).l10n,R=n$c.useContext(e$c.ThemeContext).direction===e$c.TextDirection.RightToLeft,O=B&&B.fullScreen?B.fullScreen.exitFullScreen:"Exit full screen";return n$c.createElement("div",{className:e$c.classNames({"rpv-full-screen__exit-button":!0,"rpv-full-screen__exit-button--ltr":!R,"rpv-full-screen__exit-button--rtl":R})},n$c.createElement(e$c.MinimalButton,{ariaLabel:O,testId:"full-screen__exit-button",onClick:$},n$c.createElement(r$c,null)))},m$8=function(A){var $=A.children,B=A.getFullScreenTarget,R=A.store,O=f$9(B,R),H=O.enterFullScreen,W=O.exitFullScreen,pe=O.isFullScreen;return pe&&($||function(ce){return n$c.createElement(d$9,{onClick:ce.onClick})})({onClick:pe?W:H})},E$5=function(A){var $=A.store,B=A.onEnterFullScreen,R=A.onExitFullScreen,O=n$c.useState($.get("fullScreenMode")),H=O[0],W=O[1],pe=n$c.useCallback(function(ce){W(ce)},[]);return n$c.useEffect(function(){switch(H){case e$c.FullScreenMode.EnteredCompletely:B($.get("zoom"));break;case e$c.FullScreenMode.Exited:R($.get("zoom"))}},[H]),n$c.useEffect(function(){return $.subscribe("fullScreenMode",pe),function(){$.unsubscribe("fullScreenMode",pe)}},[]),(H===e$c.FullScreenMode.Entering||H===e$c.FullScreenMode.Entered)&&n$c.createElement("div",{className:"rpv-full-screen__overlay"},n$c.createElement(e$c.Spinner,null))},F=function(A){var $=A.containerRef,B=A.getFullScreenTarget,R=A.store,O=f$9(B,R).enterFullScreen,H=function(W){if(!W.shiftKey&&!W.altKey&&(e$c.isMac()?W.metaKey&&W.ctrlKey&&W.key==="f":W.key==="F11")){var pe=$.current;pe&&document.activeElement&&pe.contains(document.activeElement)&&(W.preventDefault(),O())}};return n$c.useEffect(function(){if($.current)return document.addEventListener("keydown",H),function(){document.removeEventListener("keydown",H)}},[$.current]),n$c.createElement(n$c.Fragment,null)};fullScreen_min.ExitFullScreenIcon=r$c,fullScreen_min.FullScreenIcon=l$c,fullScreen_min.fullScreenPlugin=function(A){var $=(A==null?void 0:A.getFullScreenTarget)||function(W){return W},B=n$c.useMemo(function(){return Object.assign({},{enableShortcuts:!0,onEnterFullScreen:function(){},onExitFullScreen:function(){}},A)},[]),R=n$c.useMemo(function(){return e$c.createStore({enterFullScreenMode:function(){},exitFullScreenMode:function(){},fullScreenMode:e$c.FullScreenMode.Normal,zoom:function(){}})},[]),O=function(W){return n$c.createElement(s$8,c$c({},W,{enableShortcuts:B.enableShortcuts,getFullScreenTarget:$,store:R}))},H=function(){return n$c.createElement(m$8,{getFullScreenTarget:$,store:R},A==null?void 0:A.renderExitFullScreenButton)};return{install:function(W){R.update("enterFullScreenMode",W.enterFullScreenMode),R.update("exitFullScreenMode",W.exitFullScreenMode),R.update("getPagesContainer",W.getPagesContainer),R.update("zoom",W.zoom)},onViewerStateChange:function(W){return R.update("fullScreenMode",W.fullScreenMode),W},renderViewer:function(W){var pe=W.slot;return pe.subSlot&&(pe.subSlot.children=n$c.createElement(n$c.Fragment,null,B.enableShortcuts&&n$c.createElement(F,{containerRef:W.containerRef,getFullScreenTarget:$,store:R}),n$c.createElement(E$5,{store:R,onEnterFullScreen:B.onEnterFullScreen,onExitFullScreen:B.onExitFullScreen}),n$c.createElement(H,null),pe.subSlot.children)),pe},EnterFullScreen:O,EnterFullScreenButton:function(){return n$c.createElement(O,null,function(W){return n$c.createElement(o$c,c$c({enableShortcuts:B.enableShortcuts},W))})},EnterFullScreenMenuItem:function(W){return n$c.createElement(O,null,function(pe){return n$c.createElement(S$4,{onClick:function(){pe.onClick(),W.onClick()}})})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$b.exports=fullScreen_min;var libExports$c=lib$b.exports,lib$a={exports:{}},getFile_min={},e$b=libExports$h;function t$b(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(B){if(B!=="default"){var R=Object.getOwnPropertyDescriptor(A,B);Object.defineProperty($,B,R.get?R:{enumerable:!0,get:function(){return A[B]}})}}),$.default=A,Object.freeze($)}var n$b=t$b(reactExports),o$b=function(){return n$b.createElement(e$b.Icon,{size:16},n$b.createElement("path",{d:"M5.5,11.5c-.275,0-.341.159-.146.354l6.292,6.293a.5.5,0,0,0,.709,0l6.311-6.275c.2-.193.13-.353-.145-.355L15.5,11.5V1.5a1,1,0,0,0-1-1h-5a1,1,0,0,0-1,1V11a.5.5,0,0,1-.5.5Z"}),n$b.createElement("path",{d:"M23.5,18.5v4a1,1,0,0,1-1,1H1.5a1,1,0,0,1-1-1v-4"}))},r$b=function(){return r$b=Object.assign||function(A){for(var $,B=1,R=arguments.length;B<R;B++)for(var O in $=arguments[B])Object.prototype.hasOwnProperty.call($,O)&&(A[O]=$[O]);return A},r$b.apply(this,arguments)},i$b={left:0,top:8},a$b=function(A){var $=A.onClick,B=n$b.useContext(e$b.LocalizationContext).l10n,R=B&&B.download?B.download.download:"Download";return n$b.createElement(e$b.Tooltip,{ariaControlsSuffix:"get-file",position:e$b.Position.BottomCenter,target:n$b.createElement(e$b.MinimalButton,{ariaLabel:R,testId:"get-file__download-button",onClick:$},n$b.createElement(o$b,null)),content:function(){return R},offset:i$b})},c$b=function(A,$){var B=document.createElement("a");B.style.display="none",B.href=A,B.setAttribute("download",$),document.body.appendChild(B),B.click(),document.body.removeChild(B)},l$b=function(A,$,B){var R=URL.createObjectURL(new Blob([A],{type:B}));c$b(R,$),R&&URL.revokeObjectURL(R)},u$b=function(A,$){A.getData().then(function(B){/iphone|ipod|ipad/i.test(navigator.userAgent)&&!/CriOS/i.test(navigator.userAgent)?l$b(B,$,"application/octet-stream"):/iphone|ipod|ipad/i.test(navigator.userAgent)&&/CriOS/i.test(navigator.userAgent)?c$b("data:application/pdf;base64,".concat(function(R){return btoa(Array(R.length).fill("").map(function(O,H){return String.fromCharCode(R[H])}).join(""))}(B)),$):l$b(B,$,"application/pdf")})},f$8=function(A){var $=A.children,B=A.fileNameGenerator,R=A.store,O=n$b.useState(R.get("file")),H=O[0],W=O[1],pe=n$b.useState(R.get("doc")),ce=pe[0],ue=pe[1],G=function(he){ue(he)},ve=function(he){W(he)};return n$b.useEffect(function(){return R.subscribe("doc",G),R.subscribe("file",ve),function(){R.subscribe("doc",G),R.unsubscribe("file",ve)}},[]),($||function(he){return n$b.createElement(a$b,{onClick:he.onClick})})({onClick:function(){ce&&H&&u$b(ce,B(H))}})},d$8=function(A){var $=A.onClick,B=n$b.useContext(e$b.LocalizationContext).l10n,R=B&&B.download?B.download.download:"Download";return n$b.createElement(e$b.MenuItem,{icon:n$b.createElement(o$b,null),testId:"get-file__download-menu",onClick:$},R)};getFile_min.DownloadIcon=o$b,getFile_min.getFilePlugin=function(A){var $=n$b.useMemo(function(){return e$b.createStore({})},[]),B=function(O){return O.name?(H=O.name,(W=H.split("/").pop())?W.split("#")[0].split("?")[0]:H):"document.pdf";var H,W},R=function(O){return n$b.createElement(f$8,r$b({},O,{fileNameGenerator:A&&A.fileNameGenerator||B,store:$}))};return{onDocumentLoad:function(O){$.update("doc",O.doc),$.update("file",O.file)},Download:R,DownloadButton:function(){return n$b.createElement(R,null,function(O){return n$b.createElement(a$b,r$b({},O))})},DownloadMenuItem:function(O){return n$b.createElement(R,null,function(H){return n$b.createElement(d$8,{onClick:function(){H.onClick(),O.onClick()}})})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$a.exports=getFile_min;var libExports$b=lib$a.exports,lib$9={exports:{}},open_min={},e$a=libExports$h;function t$a(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(B){if(B!=="default"){var R=Object.getOwnPropertyDescriptor(A,B);Object.defineProperty($,B,R.get?R:{enumerable:!0,get:function(){return A[B]}})}}),$.default=A,Object.freeze($)}var n$a=t$a(reactExports),r$a=function(){return n$a.createElement(e$a.Icon,{size:16},n$a.createElement("path",{d:"M18.5,7.5c.275,0,.341-.159.146-.354L12.354.854a.5.5,0,0,0-.708,0L5.354,7.147c-.2.195-.129.354.146.354h3v10a1,1,0,0,0,1,1h5a1,1,0,0,0,1-1V7.5Z"}),n$a.createElement("path",{d:"M23.5,18.5v4a1,1,0,0,1-1,1H1.5a1,1,0,0,1-1-1v-4"}))},o$a=function(){return o$a=Object.assign||function(A){for(var $,B=1,R=arguments.length;B<R;B++)for(var O in $=arguments[B])Object.prototype.hasOwnProperty.call($,O)&&(A[O]=$[O]);return A},o$a.apply(this,arguments)},i$a=function(A){var $=n$a.useRef(),B=function(){var O=$.current;O&&(O.click(),A.get("triggerOpenFile")&&A.update("triggerOpenFile",!1))},R=function(O){O&&B()};return n$a.useEffect(function(){return A.subscribe("triggerOpenFile",R),function(){A.unsubscribe("triggerOpenFile",R)}},[]),{inputRef:$,openFile:B}},c$a={left:0,top:8},u$a=function(A){var $=A.enableShortcuts,B=A.store,R=A.onClick,O=n$a.useContext(e$a.LocalizationContext).l10n,H=O&&O.open?O.open.openFile:"Open file",W=i$a(B),pe=W.inputRef,ce=W.openFile,ue=$?e$a.isMac()?"Meta+O":"Ctrl+O":"";return n$a.createElement(e$a.Tooltip,{ariaControlsSuffix:"open",position:e$a.Position.BottomCenter,target:n$a.createElement("div",{className:"rpv-open__input-wrapper"},n$a.createElement("input",{accept:".pdf",ref:pe,className:"rpv-open__input",multiple:!1,tabIndex:-1,title:"",type:"file",onChange:R}),n$a.createElement(e$a.MinimalButton,{ariaKeyShortcuts:ue,ariaLabel:H,testId:"open__button",onClick:ce},n$a.createElement(r$a,null))),content:function(){return H},offset:c$a})},a$a=function(A){var $=A.children,B=A.enableShortcuts,R=A.store;return($||function(O){return n$a.createElement(u$a,{enableShortcuts:B,store:R,onClick:O.onClick})})({onClick:function(O){var H=O.target.files;if(H&&H.length){var W=R.get("openFile");W&&W(H[0])}}})},l$a=function(A){var $=A.store,B=A.onClick,R=n$a.useContext(e$a.LocalizationContext).l10n,O=R&&R.open?R.open.openFile:"Open file",H=i$a($),W=H.inputRef,pe=H.openFile;return n$a.createElement(e$a.MenuItem,{icon:n$a.createElement(r$a,null),testId:"open__menu",onClick:pe},n$a.createElement("div",{className:"rpv-open__input-wrapper"},n$a.createElement("input",{accept:".pdf",ref:W,className:"rpv-open__input",multiple:!1,tabIndex:-1,title:"",type:"file",onChange:B}),O))},p$7=function(A){var $=A.containerRef,B=A.store,R=function(O){if(!O.shiftKey&&!O.altKey&&O.key==="o"&&(e$a.isMac()?O.metaKey:O.ctrlKey)){var H=$.current;H&&document.activeElement&&H.contains(document.activeElement)&&(O.preventDefault(),B.update("triggerOpenFile",!0))}};return n$a.useEffect(function(){if($.current)return document.addEventListener("keydown",R),function(){document.removeEventListener("keydown",R)}},[$.current]),n$a.createElement(n$a.Fragment,null)};open_min.OpenFileIcon=r$a,open_min.openPlugin=function(A){var $=n$a.useMemo(function(){return Object.assign({},{enableShortcuts:!0},A)},[]),B=n$a.useMemo(function(){return e$a.createStore({})},[]),R=function(O){return n$a.createElement(a$a,o$a({enableShortcuts:$.enableShortcuts},O,{store:B}))};return{install:function(O){B.update("openFile",O.openFile)},renderViewer:function(O){var H=O.slot,W={children:n$a.createElement(n$a.Fragment,null,$.enableShortcuts&&n$a.createElement(p$7,{containerRef:O.containerRef,store:B}),H.children)};return o$a(o$a({},H),W)},Open:R,OpenButton:function(){return n$a.createElement(R,null)},OpenMenuItem:function(){return n$a.createElement(R,null,function(O){return n$a.createElement(l$a,{store:B,onClick:O.onClick})})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$9.exports=open_min;var libExports$a=lib$9.exports,lib$8={exports:{}},pageNavigation_min={},e$9=libExports$h;function t$9(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(B){if(B!=="default"){var R=Object.getOwnPropertyDescriptor(A,B);Object.defineProperty($,B,R.get?R:{enumerable:!0,get:function(){return A[B]}})}}),$.default=A,Object.freeze($)}var n$9=t$9(reactExports),a$9=function(){return n$9.createElement(e$9.Icon,{size:16},n$9.createElement("path",{d:`M2.32,2.966h19.452c0.552,0.001,1,0.449,0.999,1.001c0,0.182-0.05,0.36-0.144,0.516L12.9,20.552
            c-0.286,0.472-0.901,0.624-1.373,0.338c-0.138-0.084-0.254-0.2-0.338-0.338L1.465,4.483C1.179,4.01,1.331,3.396,1.804,3.11
            C1.96,3.016,2.138,2.966,2.32,2.966z`}))},r$9=function(){return n$9.createElement(e$9.Icon,{size:16},n$9.createElement("path",{d:`M0.541,5.627L11.666,18.2c0.183,0.207,0.499,0.226,0.706,0.043c0.015-0.014,0.03-0.028,0.043-0.043
            L23.541,5.627`}))},o$9=function(){return o$9=Object.assign||function(A){for(var $,B=1,R=arguments.length;B<R;B++)for(var O in $=arguments[B])Object.prototype.hasOwnProperty.call($,O)&&(A[O]=$[O]);return A},o$9.apply(this,arguments)},i$9=function(A){var $=n$9.useState(A.get("currentPage")||0),B=$[0],R=$[1],O=function(H){R(H)};return e$9.useIsomorphicLayoutEffect(function(){return A.subscribe("currentPage",O),function(){A.unsubscribe("currentPage",O)}},[]),{currentPage:B}},u$9=function(A){var $=n$9.useState(A.get("numberOfPages")||0),B=$[0],R=$[1],O=function(H){R(H)};return n$9.useEffect(function(){return A.subscribe("numberOfPages",O),function(){A.unsubscribe("numberOfPages",O)}},[]),{numberOfPages:B}},c$9=function(A){var $=A.store,B=n$9.useContext(e$9.LocalizationContext).l10n,R=n$9.useState("1"),O=R[0],H=R[1],W=i$9($).currentPage,pe=u$9($).numberOfPages;n$9.useEffect(function(){return H("".concat(W+1))},[W]);var ce=function(G){var ve=$.get("jumpToPage");ve&&ve(G)},ue=B&&B.pageNavigation?B.pageNavigation.enterPageNumber:"Enter a page number";return n$9.createElement("span",{className:"rpv-page-navigation__current-page-input"},n$9.createElement(e$9.TextBox,{ariaLabel:ue,testId:"page-navigation__current-page-input",type:"text",value:O,onChange:H,onKeyDown:function(G){switch(G.key){case"ArrowUp":(oe=W-1)>=0&&(H("".concat(oe+1)),ce(oe));break;case"ArrowDown":(he=W+1)<pe&&(H("".concat(he+1)),ce(he));break;case"Enter":ve=parseInt(O,10),O===""||ve<1||ve>pe?H("".concat(W+1)):ce(ve-1)}var ve,he,oe}}))},l$9=function(A){var $=A.children,B=A.doc,R=e$9.useIsMounted(),O=n$9.useState({loading:!0,labels:[]}),H=O[0],W=O[1];return n$9.useEffect(function(){B.getPageLabels().then(function(pe){R.current&&W({loading:!1,labels:pe||[]})})},[B.loadingTask.docId]),H.loading?n$9.createElement(n$9.Fragment,null):$(H.labels)},s$7=function(A){var $=A.children,B=A.store,R=function(pe){var ce=n$9.useState(pe.get("doc")),ue=ce[0],G=ce[1],ve=function(he){G(he)};return n$9.useEffect(function(){return pe.subscribe("doc",ve),function(){pe.unsubscribe("doc",ve)}},[]),ue}(B),O=i$9(B).currentPage,H=u$9(B).numberOfPages,W=$||function(pe){return n$9.createElement(n$9.Fragment,null,pe.currentPage+1)};return R?n$9.createElement(l$9,{doc:R},function(pe){var ce=pe.length===H&&H>0?pe[O]:"";return W({currentPage:O,numberOfPages:H,pageLabel:ce})}):n$9.createElement(n$9.Fragment,null)},g$5=function(){return n$9.createElement(e$9.Icon,{size:16},n$9.createElement("path",{d:`M21.783,21.034H2.332c-0.552,0-1-0.448-1-1c0-0.182,0.05-0.361,0.144-0.517L11.2,3.448
            c0.286-0.472,0.901-0.624,1.373-0.338c0.138,0.084,0.254,0.2,0.338,0.338l9.726,16.069c0.286,0.473,0.134,1.087-0.339,1.373
            C22.143,20.984,21.965,21.034,21.783,21.034z`}))},f$7={left:0,top:8},m$7=function(A){var $=A.isDisabled,B=A.onClick,R=n$9.useContext(e$9.LocalizationContext).l10n,O=R&&R.pageNavigation?R.pageNavigation.goToFirstPage:"First page";return n$9.createElement(e$9.Tooltip,{ariaControlsSuffix:"page-navigation-first",position:e$9.Position.BottomCenter,target:n$9.createElement(e$9.MinimalButton,{ariaLabel:O,isDisabled:$,testId:"page-navigation__first-button",onClick:B},n$9.createElement(g$5,null)),content:function(){return O},offset:f$7})},p$6=function(A){var $=A.children,B=A.store;return($||function(R){return n$9.createElement(m$7,{isDisabled:R.isDisabled,onClick:R.onClick})})({isDisabled:i$9(B).currentPage===0,onClick:function(){var R=B.get("jumpToPage");R&&R(0)}})},v$5=function(A){var $=A.isDisabled,B=A.onClick,R=n$9.useContext(e$9.LocalizationContext).l10n,O=R&&R.pageNavigation?R.pageNavigation.goToFirstPage:"First page";return n$9.createElement(e$9.MenuItem,{icon:n$9.createElement(g$5,null),isDisabled:$,testId:"page-navigation__first-menu",onClick:B},O)},d$7={left:0,top:8},P$2=function(A){var $=A.isDisabled,B=A.onClick,R=n$9.useContext(e$9.LocalizationContext).l10n,O=R&&R.pageNavigation?R.pageNavigation.goToLastPage:"Last page";return n$9.createElement(e$9.Tooltip,{ariaControlsSuffix:"page-navigation-last",position:e$9.Position.BottomCenter,target:n$9.createElement(e$9.MinimalButton,{ariaLabel:O,isDisabled:$,testId:"page-navigation__last-button",onClick:B},n$9.createElement(a$9,null)),content:function(){return O},offset:d$7})},b$4=function(A){var $=A.children,B=A.store,R=i$9(B).currentPage,O=u$9(B).numberOfPages;return($||function(H){return n$9.createElement(P$2,{isDisabled:H.isDisabled,onClick:H.onClick})})({isDisabled:R+1>=O,onClick:function(){var H=B.get("jumpToPage");H&&H(O-1)}})},E$4=function(A){var $=A.isDisabled,B=A.onClick,R=n$9.useContext(e$9.LocalizationContext).l10n,O=R&&R.pageNavigation?R.pageNavigation.goToLastPage:"Last page";return n$9.createElement(e$9.MenuItem,{icon:n$9.createElement(a$9,null),isDisabled:$,testId:"page-navigation__last-menu",onClick:B},O)},C$3={left:0,top:8},D=function(A){var $=A.isDisabled,B=A.onClick,R=n$9.useContext(e$9.LocalizationContext).l10n,O=R&&R.pageNavigation?R.pageNavigation.goToNextPage:"Next page";return n$9.createElement(e$9.Tooltip,{ariaControlsSuffix:"page-navigation-next",position:e$9.Position.BottomCenter,target:n$9.createElement(e$9.MinimalButton,{ariaLabel:O,isDisabled:$,testId:"page-navigation__next-button",onClick:B},n$9.createElement(r$9,null)),content:function(){return O},offset:C$3})},k$3=function(A){var $=A.children,B=A.store;return($||function(R){return n$9.createElement(D,{onClick:R.onClick,isDisabled:R.isDisabled})})({isDisabled:i$9(B).currentPage+1>=u$9(B).numberOfPages,onClick:function(){var R=B.get("jumpToNextPage");R&&R()}})},T=function(A){var $=A.isDisabled,B=A.onClick,R=n$9.useContext(e$9.LocalizationContext).l10n,O=R&&R.pageNavigation?R.pageNavigation.goToNextPage:"Next page";return n$9.createElement(e$9.MenuItem,{icon:n$9.createElement(r$9,null),isDisabled:$,testId:"page-navigation__next-menu",onClick:B},O)},x$1=function(){return n$9.createElement(e$9.Icon,{size:16},n$9.createElement("path",{d:`M23.535,18.373L12.409,5.8c-0.183-0.207-0.499-0.226-0.706-0.043C11.688,5.77,11.674,5.785,11.66,5.8
            L0.535,18.373`}))},L={left:0,top:8},N=function(A){var $=A.isDisabled,B=A.onClick,R=n$9.useContext(e$9.LocalizationContext).l10n,O=R&&R.pageNavigation?R.pageNavigation.goToPreviousPage:"Previous page";return n$9.createElement(e$9.Tooltip,{ariaControlsSuffix:"page-navigation-previous",position:e$9.Position.BottomCenter,target:n$9.createElement(e$9.MinimalButton,{ariaLabel:O,isDisabled:$,testId:"page-navigation__previous-button",onClick:B},n$9.createElement(x$1,null)),content:function(){return O},offset:L})},j=function(A){var $=A.store;return(A.children||function(B){return n$9.createElement(N,{isDisabled:B.isDisabled,onClick:B.onClick})})({isDisabled:i$9($).currentPage<=0,onClick:function(){var B=$.get("jumpToPreviousPage");B&&B()}})},I$2=function(A){var $=A.isDisabled,B=A.onClick,R=n$9.useContext(e$9.LocalizationContext).l10n,O=R&&R.pageNavigation?R.pageNavigation.goToPreviousPage:"Previous page";return n$9.createElement(e$9.MenuItem,{icon:n$9.createElement(x$1,null),isDisabled:$,testId:"page-navigation__previous-menu",onClick:B},O)},h$5=function(A){var $=A.children,B=A.store,R=u$9(B).numberOfPages;return $?$({numberOfPages:R}):n$9.createElement(n$9.Fragment,null,R)},y$1=function(A){var $=A.containerRef,B=A.numPages,R=A.store,O=i$9(R).currentPage,H=n$9.useRef(O);H.current=O;var W=n$9.useRef(!1),pe=function(){W.current=!0},ce=function(){W.current=!1},ue=function(G){var ve=$.current,he=W.current||document.activeElement&&ve.contains(document.activeElement);if(ve&&he){var oe,ae,J=G.altKey&&G.key==="ArrowDown"||!G.shiftKey&&!G.altKey&&G.key==="PageDown",V=G.altKey&&G.key==="ArrowUp"||!G.shiftKey&&!G.altKey&&G.key==="PageUp";if(J)return G.preventDefault(),oe=R.get("jumpToPage"),ae=H.current+1,void(oe&&ae<B&&oe(ae));if(V)return G.preventDefault(),void function(){var re=R.get("jumpToPage"),ie=H.current-1;re&&ie>=0&&re(ie)}();if(e$9.isMac()?G.metaKey&&!G.ctrlKey:G.altKey)switch(G.key){case"ArrowLeft":G.preventDefault(),function(){var re=R.get("jumpToPreviousDestination");re&&re()}();break;case"ArrowRight":G.preventDefault(),function(){var re=R.get("jumpToNextDestination");re&&re()}()}}};return n$9.useEffect(function(){var G=$.current;if(G)return document.addEventListener("keydown",ue),G.addEventListener("mouseenter",pe),G.addEventListener("mouseleave",ce),function(){document.removeEventListener("keydown",ue),G.removeEventListener("mouseenter",pe),G.removeEventListener("mouseleave",ce)}},[$.current]),n$9.createElement(n$9.Fragment,null)};pageNavigation_min.DownArrowIcon=a$9,pageNavigation_min.NextIcon=r$9,pageNavigation_min.PreviousIcon=x$1,pageNavigation_min.UpArrowIcon=g$5,pageNavigation_min.pageNavigationPlugin=function(A){var $=n$9.useMemo(function(){return Object.assign({},{enableShortcuts:!0},A)},[]),B=n$9.useMemo(function(){return e$9.createStore()},[]),R=function(pe){return n$9.createElement(p$6,o$9({},pe,{store:B}))},O=function(pe){return n$9.createElement(b$4,o$9({},pe,{store:B}))},H=function(pe){return n$9.createElement(k$3,o$9({},pe,{store:B}))},W=function(pe){return n$9.createElement(j,o$9({},pe,{store:B}))};return{install:function(pe){B.update("jumpToDestination",pe.jumpToDestination),B.update("jumpToNextDestination",pe.jumpToNextDestination),B.update("jumpToNextPage",pe.jumpToNextPage),B.update("jumpToPage",pe.jumpToPage),B.update("jumpToPreviousDestination",pe.jumpToPreviousDestination),B.update("jumpToPreviousPage",pe.jumpToPreviousPage)},renderViewer:function(pe){var ce=pe.slot;if(!$.enableShortcuts)return ce;var ue={children:n$9.createElement(n$9.Fragment,null,n$9.createElement(y$1,{containerRef:pe.containerRef,numPages:pe.doc.numPages,store:B}),ce.children)};return o$9(o$9({},ce),ue)},onDocumentLoad:function(pe){B.update("doc",pe.doc),B.update("numberOfPages",pe.doc.numPages)},onViewerStateChange:function(pe){return B.update("currentPage",pe.pageIndex),pe},jumpToNextPage:function(){var pe=B.get("jumpToNextPage");pe&&pe()},jumpToPage:function(pe){var ce=B.get("jumpToPage");ce&&ce(pe)},jumpToPreviousPage:function(){var pe=B.get("jumpToPreviousPage");pe&&pe()},CurrentPageInput:function(){return n$9.createElement(c$9,{store:B})},CurrentPageLabel:function(pe){return n$9.createElement(s$7,o$9({},pe,{store:B}))},GoToFirstPage:R,GoToFirstPageButton:function(){return n$9.createElement(R,null,function(pe){return n$9.createElement(m$7,o$9({},pe))})},GoToFirstPageMenuItem:function(pe){return n$9.createElement(R,null,function(ce){return n$9.createElement(v$5,{isDisabled:ce.isDisabled,onClick:function(){ce.onClick(),pe.onClick()}})})},GoToLastPage:O,GoToLastPageButton:function(){return n$9.createElement(O,null,function(pe){return n$9.createElement(P$2,o$9({},pe))})},GoToLastPageMenuItem:function(pe){return n$9.createElement(O,null,function(ce){return n$9.createElement(E$4,{isDisabled:ce.isDisabled,onClick:function(){ce.onClick(),pe.onClick()}})})},GoToNextPage:H,GoToNextPageButton:function(){return n$9.createElement(H,null,function(pe){return n$9.createElement(D,o$9({},pe))})},GoToNextPageMenuItem:function(pe){return n$9.createElement(H,null,function(ce){return n$9.createElement(T,{isDisabled:ce.isDisabled,onClick:function(){ce.onClick(),pe.onClick()}})})},GoToPreviousPage:W,GoToPreviousPageButton:function(){return n$9.createElement(W,null,function(pe){return n$9.createElement(N,o$9({},pe))})},GoToPreviousPageMenuItem:function(pe){return n$9.createElement(W,null,function(ce){return n$9.createElement(I$2,{isDisabled:ce.isDisabled,onClick:function(){ce.onClick(),pe.onClick()}})})},NumberOfPages:function(pe){return n$9.createElement(h$5,o$9({},pe,{store:B}))}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$8.exports=pageNavigation_min;var libExports$9=lib$8.exports,lib$7={exports:{}},print_min={},define_process_env_default={},e$8=libExports$h,t$8=reactExports,n$8=reactDomExports;function r$8(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(B){if(B!=="default"){var R=Object.getOwnPropertyDescriptor(A,B);Object.defineProperty($,B,R.get?R:{enumerable:!0,get:function(){return A[B]}})}}),$.default=A,Object.freeze($)}var o$8,a$8=r$8(t$8),i$8=function(){return a$8.createElement(e$8.Icon,{size:16},a$8.createElement("path",{d:`M7.5,19.499h9 M7.5,16.499h9 M5.5,16.5h-3c-1.103-0.003-1.997-0.897-2-2v-6c0.003-1.103,0.897-1.997,2-2h19
            c1.103,0.003,1.997,0.897,2,2v6c-0.003,1.103-0.897,1.997-2,2h-3
            M5.5,4.5v-4h9.586c0.265,0,0.52,0.105,0.707,0.293l2.414,2.414
            C18.395,3.394,18.5,3.649,18.5,3.914V4.5
            M18.5,22.5c0,0.552-0.448,1-1,1h-11c-0.552,0-1-0.448-1-1v-9h13V22.5z
            M3.5,8.499
            c0.552,0,1,0.448,1,1s-0.448,1-1,1s-1-0.448-1-1S2.948,8.499,3.5,8.499z
            M14.5,0.499v4h4`}))},c$8=function(){return c$8=Object.assign||function(A){for(var $,B=1,R=arguments.length;B<R;B++)for(var O in $=arguments[B])Object.prototype.hasOwnProperty.call($,O)&&(A[O]=$[O]);return A},c$8.apply(this,arguments)},u$8={left:0,top:8},s$6=function(A){var $=A.enableShortcuts,B=A.onClick,R=a$8.useContext(e$8.LocalizationContext).l10n,O=R&&R.print?R.print.print:"Print",H=$?e$8.isMac()?"Meta+P":"Ctrl+P":"";return a$8.createElement(e$8.Tooltip,{ariaControlsSuffix:"print",position:e$8.Position.BottomCenter,target:a$8.createElement(e$8.MinimalButton,{ariaKeyShortcuts:H,ariaLabel:O,testId:"print__button",onClick:B},a$8.createElement(i$8,null)),content:function(){return O},offset:u$8})};(function(A){A.CheckingPermission="CheckingPermission",A.Inactive="Inactive",A.Preparing="Preparing",A.Cancelled="Cancelled",A.Ready="Ready"})(o$8||(o$8={}));var l$8=function(A){var $=A.children,B=A.enableShortcuts,R=A.store;return($||s$6)({enableShortcuts:B,onClick:function(){R.update("printStatus",o$8.CheckingPermission)}})},p$5=function(A){var $=A.doc,B=A.store,R=a$8.useContext(e$8.LocalizationContext).l10n,O=a$8.useState(!0),H=O[0],W=O[1];return a$8.useEffect(function(){$.getPermissions().then(function(pe){pe===null||pe.includes(4)||pe.includes(2048)?B.update("printStatus",o$8.Preparing):W(!1)})},[]),H?a$8.createElement(a$8.Fragment,null):a$8.createElement(e$8.Modal,{ariaControlsSuffix:"print-permission",closeOnClickOutside:!1,closeOnEscape:!1,content:function(pe){return a$8.createElement(a$8.Fragment,null,a$8.createElement("div",{className:"rpv-print__permission-body"},R&&R.print?R.print.disallowPrint:"The document does not allow to print"),a$8.createElement("div",{className:"rpv-print__permission-footer"},a$8.createElement(e$8.Button,{onClick:function(){pe(),B.update("printStatus",o$8.Cancelled)}},R&&R.print?R.print.close:"Close")))},isOpened:!0})},m$6=function(A){var $=A.numLoadedPages,B=A.numPages,R=A.onCancel,O=a$8.useContext(e$8.LocalizationContext).l10n,H=a$8.useContext(e$8.ThemeContext).direction===e$8.TextDirection.RightToLeft,W=Math.floor(100*$/B);return a$8.createElement("div",{className:"rpv-print__progress"},a$8.createElement("div",{className:e$8.classNames({"rpv-print__progress-body":!0,"rpv-print__progress-body--rtl":H})},a$8.createElement("div",{className:"rpv-print__progress-message"},O&&O.print?O.print.preparingDocument:"Preparing document ..."),a$8.createElement("div",{className:"rpv-print__progress-bar"},a$8.createElement(e$8.ProgressBar,{progress:W})),a$8.createElement(e$8.Button,{onClick:R},O&&O.print?O.print.cancel:"Cancel")))},d$6=function(A){var $=A.canvas,B=A.page,R=A.pageHeight,O=A.pageIndex,H=A.pageWidth,W=A.rotation,pe=A.onLoad,ce=e$8.useIsMounted(),ue=a$8.useRef(),G=a$8.useState(""),ve=G[0],he=G[1],oe=a$8.useMemo(function(){return typeof process<"u"&&define_process_env_default.JEST_WORKER_ID!==void 0},[]);return a$8.useEffect(function(){var ae=ue.current;ae&&ae.cancel();var J=150/72;$.height=Math.floor(R*J),$.width=Math.floor(H*J);var V=$.getContext("2d");V.save(),V.fillStyle="rgb(255, 255, 255)",V.fillRect(0,0,$.width,$.height),V.restore();var re=B.getViewport({rotation:W,scale:1});ue.current=B.render({canvasContext:V,intent:"print",transform:[J,0,0,J,0,0],viewport:re}),ue.current.promise.then(function(){"toBlob"in $&&"createObjectURL"in URL?$.toBlob(function(ie){ce.current&&he(URL.createObjectURL(ie)),oe&&pe()}):(ce.current&&he($.toDataURL()),oe&&pe())},function(){})},[]),ve&&a$8.createElement("div",{className:"rpv-print__page"},a$8.createElement("img",{"data-testid":"print__thumbnail-".concat(O),src:ve,onLoad:function(){oe||pe()}}))},f$6=function(A){var $=A.canvas,B=A.doc,R=A.pageIndex,O=A.pageRotation,H=A.pageSize,W=A.rotation,pe=A.shouldRender,ce=A.onLoad,ue=e$8.useIsMounted(),G=a$8.useState(null),ve=G[0],he=G[1],oe=Math.abs(W+O)%180==0;a$8.useEffect(function(){pe&&e$8.getPage(B,R).then(function(J){ue.current&&he(J)})},[pe]);var ae=(H.rotation+W+O)%360;return ve&&a$8.createElement(d$6,{canvas:$,page:ve,pageHeight:oe?H.pageHeight:H.pageWidth,pageIndex:R,pageWidth:oe?H.pageWidth:H.pageHeight,rotation:ae,onLoad:ce})},g$4=function(A){var $=A.doc,B=A.numLoadedPages,R=A.pagesRotation,O=A.pageSizes,H=A.printPages,W=A.printStatus,pe=A.rotation,ce=A.onCancel,ue=A.onLoad,G=a$8.useMemo(function(){return document.createElement("canvas")},[]),ve=a$8.useMemo(function(){var ae=document.querySelector(".rpv-print__zone");if(ae)return ae;var J=document.createElement("div");return J.classList.add("rpv-print__zone"),J.setAttribute("data-testid","print__zone"),document.body.appendChild(J),J},[]);a$8.useEffect(function(){W===o$8.Ready&&(document.documentElement.classList.add("rpv-print__html-printing"),document.body.classList.add("rpv-print__body-printing"),window.print());var ae=function(){if(W===o$8.Ready){document.documentElement.classList.remove("rpv-print__html-printing"),document.body.classList.remove("rpv-print__body-printing");var J=document.querySelectorAll(".rpv-print__zone");J&&J.forEach(function(V){V.parentElement.removeChild(V)}),G.height=0,G.width=0,document.removeEventListener("mousemove",ae),ce()}};return document.addEventListener("mousemove",ae),function(){return document.removeEventListener("mousemove",ae)}},[W]);var he=O[0].pageHeight,oe=O[0].pageWidth;return n$8.createPortal(a$8.createElement(a$8.Fragment,null,H.map(function(ae,J){return a$8.createElement(f$6,{key:ae,canvas:G,doc:$,pageIndex:ae,pageRotation:R.has(ae)?R.get(ae):0,pageSize:O[ae],rotation:pe,shouldRender:J===B,onLoad:ue})}),a$8.createElement("style",{dangerouslySetInnerHTML:{__html:"@page { size: ".concat(oe,"pt ").concat(he,"pt }")}})),ve)},v$4=function(A){var $=A.doc,B=A.pagesRotation,R=A.pageSizes,O=A.renderProgressBar,H=A.rotation,W=A.setPages,pe=A.store,ce=a$8.useState(o$8.Inactive),ue=ce[0],G=ce[1],ve=a$8.useState(0),he=ve[0],oe=ve[1],ae=a$8.useMemo(function(){var ie=$.numPages;return W($).filter(function(se){return se>=0&&se<ie})},[$,W]),J=ae.length,V=function(){oe(0),G(o$8.Inactive)},re=function(ie){return G(ie)};return a$8.useEffect(function(){return pe.subscribe("printStatus",re),function(){pe.unsubscribe("printStatus",re)}},[]),a$8.createElement(a$8.Fragment,null,ue===o$8.CheckingPermission&&a$8.createElement(p$5,{doc:$,store:pe}),ue===o$8.Preparing&&(O?O(he,J,V):a$8.createElement(m$6,{numLoadedPages:he,numPages:J,onCancel:V})),(ue===o$8.Preparing||ue===o$8.Ready)&&he<=J&&a$8.createElement(g$4,{doc:$,numLoadedPages:he,pagesRotation:B,pageSizes:R,printPages:ae,printStatus:ue,rotation:H,onCancel:V,onLoad:function(){var ie=he+1;ie<=J&&(oe(ie),ie===J&&G(o$8.Ready))}}))},h$4=function(A){var $=A.onClick,B=a$8.useContext(e$8.LocalizationContext).l10n,R=B&&B.print?B.print.print:"Print";return a$8.createElement(e$8.MenuItem,{icon:a$8.createElement(i$8,null),testId:"print__menu",onClick:$},R)},E$3=function(A){var $=A.containerRef,B=A.store,R=function(O){if(!O.shiftKey&&!O.altKey&&O.key==="p"&&(e$8.isMac()?O.metaKey:O.ctrlKey)){var H=$.current;H&&document.activeElement&&H.contains(document.activeElement)&&(O.preventDefault(),B.update("printStatus",o$8.Preparing))}};return a$8.useEffect(function(){if($.current)return document.addEventListener("keydown",R),function(){document.removeEventListener("keydown",R)}},[$.current]),a$8.createElement(a$8.Fragment,null)};print_min.PrintIcon=i$8,print_min.getAllPagesNumbers=function(A){return Array(A.numPages).fill(0).map(function($,B){return B})},print_min.getCustomPagesNumbers=function(A){return function($){var B,R=[];return A.replace(/\s+/g,"").split(",").forEach(function(O){var H,W,pe=O.split("-").map(function(ce){return parseInt(ce,10)}).filter(function(ce){return Number.isInteger(ce)});pe.length===1?R.push(pe[0]-1):pe.length===2&&R.push.apply(R,(H=pe[0]-1,W=pe[1]-1,Array(W-H+1).fill(0).map(function(ce,ue){return H+ue})))}),(B=R,B.filter(function(O){return B.indexOf(O)===B.lastIndexOf(O)})).filter(function(O){return O>=0&&O<$.numPages})}},print_min.getEvenPagesNumbers=function(A){return Array(A.numPages).fill(0).map(function($,B){return B}).filter(function($){return($+1)%2==0})},print_min.getOddPagesNumbers=function(A){return Array(A.numPages).fill(0).map(function($,B){return B}).filter(function($){return($+1)%2==1})},print_min.printPlugin=function(A){var $=a$8.useMemo(function(){return Object.assign({},{enableShortcuts:!0,setPages:function(O){return Array(O.numPages).fill(0).map(function(H,W){return W})}},A)},[]),B=a$8.useMemo(function(){return e$8.createStore({printStatus:o$8.Inactive})},[]),R=function(O){return a$8.createElement(l$8,c$8({enableShortcuts:$.enableShortcuts},O,{store:B}))};return{print:function(){B.update("printStatus",o$8.CheckingPermission)},renderViewer:function(O){var H=O.slot,W={children:a$8.createElement(a$8.Fragment,null,$.enableShortcuts&&a$8.createElement(E$3,{containerRef:O.containerRef,store:B}),a$8.createElement(v$4,{doc:O.doc,pagesRotation:O.pagesRotation,pageSizes:O.pageSizes,renderProgressBar:A==null?void 0:A.renderProgressBar,rotation:O.rotation,setPages:$.setPages,store:B}),H.children)};return c$8(c$8({},H),W)},Print:R,PrintButton:function(){return a$8.createElement(R,null,function(O){return a$8.createElement(s$6,c$8({},O))})},PrintMenuItem:function(O){return a$8.createElement(R,null,function(H){return a$8.createElement(h$4,{onClick:function(){H.onClick(),O.onClick()}})})},setPages:function(O){$.setPages=O}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$7.exports=print_min;var libExports$8=lib$7.exports,lib$6={exports:{}},properties_min={},e$7=libExports$h;function t$7(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(B){if(B!=="default"){var R=Object.getOwnPropertyDescriptor(A,B);Object.defineProperty($,B,R.get?R:{enumerable:!0,get:function(){return A[B]}})}}),$.default=A,Object.freeze($)}var r$7=t$7(reactExports),n$7=function(){return r$7.createElement(e$7.Icon,{size:16},r$7.createElement("path",{d:`M12,1.001c6.075,0,11,4.925,11,11s-4.925,11-11,11s-11-4.925-11-11S5.925,1.001,12,1.001z
            M14.5,17.005H13
            c-0.552,0-1-0.448-1-1v-6.5c0-0.276-0.224-0.5-0.5-0.5H10
            M11.745,6.504L11.745,6.504
            M11.745,6.5c-0.138,0-0.25,0.112-0.25,0.25
            S11.607,7,11.745,7s0.25-0.112,0.25-0.25S11.883,6.5,11.745,6.5`}))},o$7=function(){return o$7=Object.assign||function(A){for(var $,B=1,R=arguments.length;B<R;B++)for(var O in $=arguments[B])Object.prototype.hasOwnProperty.call($,O)&&(A[O]=$[O]);return A},o$7.apply(this,arguments)},a$7=function(A){var $=A.doc,B=A.render,R=r$7.useState(),O=R[0],H=R[1];return r$7.useEffect(function(){$.getMetadata().then(function(W){return Promise.resolve(W)}).then(function(W){return $.getDownloadInfo().then(function(pe){return Promise.resolve({fileName:W.contentDispositionFilename||"",info:W.info,length:pe.length})})}).then(function(W){H(W)})},[]),O?B(O):r$7.createElement("div",{className:"rpv-properties__loader"},r$7.createElement(e$7.Spinner,null))},i$7=function(A){var $=A.label,B=A.value,R=r$7.useContext(e$7.ThemeContext).direction===e$7.TextDirection.RightToLeft;return r$7.createElement("dl",{className:e$7.classNames({"rpv-properties__item":!0,"rpv-properties__item--rtl":R})},r$7.createElement("dt",{className:"rpv-properties__item-label"},$,":"),r$7.createElement("dd",{className:"rpv-properties__item-value"},B||"-"))},l$7=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),c$7=function(A,$,B,R){var O=parseInt(A,10);return O>=$&&O<=B?O:R},p$4=function(A){var $=A.doc,B=A.fileName,R=A.onToggle,O=r$7.useContext(e$7.LocalizationContext).l10n,H=function(W){var pe=function(ce){var ue=l$7.exec(ce);if(!ue)return null;var G=parseInt(ue[1],10),ve=c$7(ue[2],1,12,1)-1,he=c$7(ue[3],1,31,1),oe=c$7(ue[4],0,23,0),ae=c$7(ue[5],0,59,0),J=c$7(ue[6],0,59,0),V=ue[7]||"Z",re=c$7(ue[8],0,23,0),ie=c$7(ue[9],0,59,0);switch(V){case"-":oe+=re,ae+=ie;break;case"+":oe-=re,ae-=ie}return new Date(Date.UTC(G,ve,he,oe,ae,J))}(W);return pe?"".concat(pe.toLocaleDateString(),", ").concat(pe.toLocaleTimeString()):""};return r$7.createElement("div",{className:"rpv-properties__modal"},r$7.createElement(a$7,{doc:$,render:function(W){return r$7.createElement(r$7.Fragment,null,r$7.createElement("div",{className:"rpv-properties__modal-section"},r$7.createElement(i$7,{label:O&&O.properties?O.properties.fileName:"File name",value:W.fileName||(ue=B,G=ue.split("/").pop(),G?G.split("#")[0].split("?")[0]:ue)}),r$7.createElement(i$7,{label:O&&O.properties?O.properties.fileSize:"File size",value:(pe=W.length,ce=Math.floor(Math.log(pe)/Math.log(1024)),"".concat((pe/Math.pow(1024,ce)).toFixed(2)," ").concat(["B","kB","MB","GB","TB"][ce]))})),r$7.createElement(e$7.Separator,null),r$7.createElement("div",{className:"rpv-properties__modal-section"},r$7.createElement(i$7,{label:O&&O.properties?O.properties.title:"Title",value:W.info.Title}),r$7.createElement(i$7,{label:O&&O.properties?O.properties.author:"Author",value:W.info.Author}),r$7.createElement(i$7,{label:O&&O.properties?O.properties.subject:"Subject",value:W.info.Subject}),r$7.createElement(i$7,{label:O&&O.properties?O.properties.keywords:"Keywords",value:W.info.Keywords}),r$7.createElement(i$7,{label:O&&O.properties?O.properties.creator:"Creator",value:W.info.Creator}),r$7.createElement(i$7,{label:O&&O.properties?O.properties.creationDate:"Creation date",value:H(W.info.CreationDate)}),r$7.createElement(i$7,{label:O&&O.properties?O.properties.modificationDate:"Modification date",value:H(W.info.ModDate)})),r$7.createElement(e$7.Separator,null),r$7.createElement("div",{className:"rpv-properties__modal-section"},r$7.createElement(i$7,{label:O&&O.properties?O.properties.pdfProducer:"PDF producer",value:W.info.Producer}),r$7.createElement(i$7,{label:O&&O.properties?O.properties.pdfVersion:"PDF version",value:W.info.PDFFormatVersion}),r$7.createElement(i$7,{label:O&&O.properties?O.properties.pageCount:"Page count",value:"".concat($.numPages)})));var pe,ce,ue,G}}),r$7.createElement("div",{className:"rpv-properties__modal-footer"},r$7.createElement(e$7.Button,{onClick:R},O&&O.properties?O.properties.close:"Close")))},s$5={left:0,top:8},u$7=function(A){var $=A.onClick,B=r$7.useContext(e$7.LocalizationContext).l10n,R=B&&B.properties?B.properties.showProperties:"Show properties";return r$7.createElement(e$7.Tooltip,{ariaControlsSuffix:"properties",position:e$7.Position.BottomCenter,target:r$7.createElement(e$7.MinimalButton,{ariaLabel:R,testId:"properties__button",onClick:$},r$7.createElement(n$7,null)),content:function(){return R},offset:s$5})},m$5=function(A){var $=A.children,B=A.store,R=function(W){var pe=r$7.useState(W.get("doc")),ce=pe[0],ue=pe[1],G=function(ve){ue(ve)};return r$7.useEffect(function(){return W.subscribe("doc",G),function(){W.unsubscribe("doc",G)}},[]),{currentDoc:ce}}(B).currentDoc,O=B.get("fileName")||"",H=$||function(W){return r$7.createElement(u$7,o$7({},W))};return R?r$7.createElement(e$7.Modal,{ariaControlsSuffix:"properties",target:function(W){return H({onClick:W})},content:function(W){return r$7.createElement(p$4,{doc:R,fileName:O,onToggle:W})},closeOnClickOutside:!0,closeOnEscape:!0}):r$7.createElement(r$7.Fragment,null)},f$5=function(A){var $=A.onClick,B=r$7.useContext(e$7.LocalizationContext).l10n,R=B&&B.properties?B.properties.showProperties:"Show properties";return r$7.createElement(e$7.MenuItem,{icon:r$7.createElement(n$7,null),testId:"properties__menu",onClick:$},R)};properties_min.InfoIcon=n$7,properties_min.propertiesPlugin=function(){var A=r$7.useMemo(function(){return e$7.createStore({fileName:""})},[]),$=function(B){return r$7.createElement(m$5,o$7({},B,{store:A}))};return{onDocumentLoad:function(B){A.update("doc",B.doc)},onViewerStateChange:function(B){return A.update("fileName",B.file.name),B},ShowProperties:$,ShowPropertiesButton:function(){return r$7.createElement(m$5,{store:A})},ShowPropertiesMenuItem:function(B){return r$7.createElement($,null,function(R){return r$7.createElement(f$5,o$7({},R))})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$6.exports=properties_min;var libExports$7=lib$6.exports,lib$5={exports:{}},rotate_min={},t$6=libExports$h;function e$6(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(B){if(B!=="default"){var R=Object.getOwnPropertyDescriptor(A,B);Object.defineProperty($,B,R.get?R:{enumerable:!0,get:function(){return A[B]}})}}),$.default=A,Object.freeze($)}var r$6=e$6(reactExports),n$6=function(){return r$6.createElement(t$6.Icon,{ignoreDirection:!0,size:16},r$6.createElement("path",{d:`M3.434,10.537c0.141-0.438,0.316-0.864,0.523-1.274
            M3.069,14.425C3.023,14.053,3,13.679,3,13.305 c0-0.291,0.014-0.579,0.041-0.863
            M4.389,18.111c-0.341-0.539-0.623-1.112-0.843-1.711
            M7.163,20.9 c-0.543-0.345-1.048-0.747-1.506-1.2
            M10.98,22.248c-0.65-0.074-1.29-0.218-1.909-0.431
            M10,4.25h2 c4.987,0.015,9.017,4.069,9.003,9.055c-0.013,4.581-3.456,8.426-8.008,8.945
            M13.5,1.75L10,4.25l3.5,2.5`}))},o$6=function(){return r$6.createElement(t$6.Icon,{ignoreDirection:!0,size:16},r$6.createElement("path",{d:`M20.566,10.537c-0.141-0.438-0.316-0.864-0.523-1.274
            M20.931,14.425C20.977,14.053,21,13.679,21,13.305 c0-0.291-0.014-0.579-0.041-0.863
            M19.611,18.111c0.341-0.539,0.624-1.114,0.843-1.713
            M16.837,20.9 c0.543-0.345,1.048-0.747,1.506-1.2
            M13.02,22.248c0.65-0.074,1.29-0.218,1.909-0.431
            M14,4.25h-2 c-4.987,0.015-9.017,4.069-9.003,9.055c0.013,4.581,3.456,8.426,8.008,8.945
            M10.5,1.75l3.5,2.5l-3.5,2.5`}))},c$6=function(){return c$6=Object.assign||function(A){for(var $,B=1,R=arguments.length;B<R;B++)for(var O in $=arguments[B])Object.prototype.hasOwnProperty.call($,O)&&(A[O]=$[O]);return A},c$6.apply(this,arguments)},a$6={left:0,top:8},i$6=function(A){var $=A.direction,B=A.onClick,R=r$6.useContext(t$6.LocalizationContext).l10n,O=R&&R.rotate?R.rotate.rotateBackward:"Rotate counterclockwise",H=R&&R.rotate?R.rotate.rotateForward:"Rotate clockwise",W=$===t$6.RotateDirection.Backward?O:H,pe=$===t$6.RotateDirection.Backward?r$6.createElement(n$6,null):r$6.createElement(o$6,null);return r$6.createElement(t$6.Tooltip,{ariaControlsSuffix:"rotate",position:t$6.Position.BottomCenter,target:r$6.createElement(t$6.MinimalButton,{ariaLabel:W,testId:$===t$6.RotateDirection.Backward?"rotate__backward-button":"rotate__forward-button",onClick:B},pe),content:function(){return W},offset:a$6})},u$6=function(A){var $=A.children,B=A.direction,R=A.store;return($||function(O){return r$6.createElement(i$6,{direction:O.direction,onClick:O.onClick})})({direction:B,onClick:function(){var O=R.get("rotate");O&&O(B)}})},l$6=function(A){var $=A.direction,B=A.onClick,R=r$6.useContext(t$6.LocalizationContext).l10n,O=R&&R.rotate?R.rotate.rotateBackward:"Rotate counterclockwise",H=R&&R.rotate?R.rotate.rotateForward:"Rotate clockwise",W=$===t$6.RotateDirection.Backward?O:H,pe=$===t$6.RotateDirection.Backward?r$6.createElement(n$6,null):r$6.createElement(o$6,null);return r$6.createElement(t$6.MenuItem,{icon:pe,testId:$===t$6.RotateDirection.Backward?"rotate__backward-menu":"rotate__forward-menu",onClick:B},W)},d$5=function(A){var $=A.children,B=A.store;return $({onRotatePage:function(R,O){var H=B.get("rotatePage");H&&H(R,O)}})};rotate_min.RotateBackwardIcon=n$6,rotate_min.RotateForwardIcon=o$6,rotate_min.rotatePlugin=function(){var A=r$6.useMemo(function(){return t$6.createStore()},[]),$=function(B){return r$6.createElement(u$6,c$6({},B,{store:A}))};return{install:function(B){A.update("rotate",B.rotate),A.update("rotatePage",B.rotatePage)},Rotate:$,RotateBackwardButton:function(){return r$6.createElement($,{direction:t$6.RotateDirection.Backward},function(B){return r$6.createElement(i$6,c$6({},B))})},RotateBackwardMenuItem:function(B){return r$6.createElement($,{direction:t$6.RotateDirection.Backward},function(R){return r$6.createElement(l$6,{direction:R.direction,onClick:function(){R.onClick(),B.onClick()}})})},RotateForwardButton:function(){return r$6.createElement($,{direction:t$6.RotateDirection.Forward},function(B){return r$6.createElement(i$6,c$6({},B))})},RotateForwardMenuItem:function(B){return r$6.createElement($,{direction:t$6.RotateDirection.Forward},function(R){return r$6.createElement(l$6,{direction:R.direction,onClick:function(){R.onClick(),B.onClick()}})})},RotatePage:function(B){return r$6.createElement(d$5,c$6({},B,{store:A}))}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$5.exports=rotate_min;var libExports$6=lib$5.exports,lib$4={exports:{}},scrollMode_min={},e$5=libExports$h;function o$5(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(B){if(B!=="default"){var R=Object.getOwnPropertyDescriptor(A,B);Object.defineProperty($,B,R.get?R:{enumerable:!0,get:function(){return A[B]}})}}),$.default=A,Object.freeze($)}var t$5=o$5(reactExports),l$5=function(){return t$5.createElement(e$5.Icon,{size:16},t$5.createElement("rect",{x:"0.5",y:"0.497",width:"22",height:"22",rx:"1",ry:"1"}),t$5.createElement("line",{x1:"0.5",y1:"6.497",x2:"22.5",y2:"6.497"}),t$5.createElement("line",{x1:"11.5",y1:"6.497",x2:"11.5",y2:"22.497"}))},c$5=function(){return t$5.createElement(e$5.Icon,{size:16},t$5.createElement("rect",{x:"0.5",y:"0.497",width:"22",height:"22",rx:"1",ry:"1"}),t$5.createElement("line",{x1:"11.5",y1:"0.497",x2:"11.5",y2:"22.497"}))},n$5=function(){return t$5.createElement(e$5.Icon,{size:16},t$5.createElement("path",{d:`M6.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z
            M14.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z
            M22.5,21.5 c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z`}))},r$5=function(){return t$5.createElement(e$5.Icon,{size:16},t$5.createElement("rect",{x:"0.5",y:"0.497",width:"22",height:"22",rx:"1",ry:"1"}))},i$5=function(){return i$5=Object.assign||function(A){for(var $,B=1,R=arguments.length;B<R;B++)for(var O in $=arguments[B])Object.prototype.hasOwnProperty.call($,O)&&(A[O]=$[O]);return A},i$5.apply(this,arguments)},a$5=function(A,$){A.get("switchScrollMode")($);var B=A.get("viewMode");$!==e$5.ScrollMode.Horizontal&&$!==e$5.ScrollMode.Wrapped||B===e$5.ViewMode.SinglePage||A.get("switchViewMode")(e$5.ViewMode.SinglePage)},d$4=function(){return t$5.createElement(e$5.Icon,{size:16},t$5.createElement("path",{d:`M23.5,5.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V5.5z
            M23.5,13.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V13.5z
            M23.5,21.5 c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V21.5z`}))},s$4=function(){return t$5.createElement(e$5.Icon,{size:16},t$5.createElement("path",{d:`M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z
            M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z
            M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z
            M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z`}))},u$5=function(A){var $=A.children,B=A.mode,R=A.onClick,O=t$5.useContext(e$5.LocalizationContext).l10n,H="",W=t$5.createElement(d$4,null);switch(B){case e$5.ScrollMode.Horizontal:H=O&&O.scrollMode?O.scrollMode.horizontalScrolling:"Horizontal scrolling",W=t$5.createElement(n$5,null);break;case e$5.ScrollMode.Page:H=O&&O.scrollMode?O.scrollMode.pageScrolling:"Page scrolling",W=t$5.createElement(r$5,null);break;case e$5.ScrollMode.Wrapped:H=O&&O.scrollMode?O.scrollMode.wrappedScrolling:"Wrapped scrolling",W=t$5.createElement(s$4,null);break;case e$5.ScrollMode.Vertical:default:H=O&&O.scrollMode?O.scrollMode.verticalScrolling:"Vertical scrolling",W=t$5.createElement(d$4,null)}return $({icon:W,label:H,onClick:R})},m$4={left:0,top:8},M$2=function(A){var $=A.isDisabled,B=A.isSelected,R=A.mode,O=A.onClick,H="";switch(R){case e$5.ScrollMode.Horizontal:H="scroll-mode__horizontal-button";break;case e$5.ScrollMode.Page:H="scroll-mode__page-button";break;case e$5.ScrollMode.Wrapped:H="scroll-mode__wrapped-button";break;case e$5.ScrollMode.Vertical:default:H="scroll-mode__vertical-button"}return t$5.createElement(u$5,{mode:R,onClick:O},function(W){return t$5.createElement(e$5.Tooltip,{ariaControlsSuffix:"scroll-mode-switch",position:e$5.Position.BottomCenter,target:t$5.createElement(e$5.MinimalButton,{ariaLabel:W.label,isDisabled:$,isSelected:B,testId:H,onClick:W.onClick},W.icon),content:function(){return W.label},offset:m$4})})},f$4=function(A){var $=t$5.useState(A.get("scrollMode")||e$5.ScrollMode.Vertical),B=$[0],R=$[1],O=function(H){R(H)};return t$5.useEffect(function(){return A.subscribe("scrollMode",O),function(){A.unsubscribe("scrollMode",O)}},[]),{scrollMode:B}},w$1=function(A){var $=t$5.useState(A.get("viewMode")||e$5.ViewMode.SinglePage),B=$[0],R=$[1],O=function(H){R(H)};return t$5.useEffect(function(){return A.subscribe("viewMode",O),function(){A.unsubscribe("viewMode",O)}},[]),{viewMode:B}},S$3=function(A){var $=A.children,B=A.mode,R=A.store,O=w$1(R).viewMode,H=f$4(R).scrollMode===B,W=(B===e$5.ScrollMode.Horizontal||B===e$5.ScrollMode.Wrapped)&&O!==e$5.ViewMode.SinglePage;return($||function(pe){return t$5.createElement(M$2,{isDisabled:W,isSelected:H,mode:pe.mode,onClick:pe.onClick})})({isDisabled:W,isSelected:H,mode:B,onClick:function(){a$5(R,B)}})},g$3=function(A){var $=A.isDisabled,B=A.isSelected,R=A.mode,O=A.onClick,H="";switch(R){case e$5.ScrollMode.Horizontal:H="scroll-mode__horizontal-menu";break;case e$5.ScrollMode.Page:H="scroll-mode__page-menu";break;case e$5.ScrollMode.Wrapped:H="scroll-mode__wrapped-menu";break;case e$5.ScrollMode.Vertical:default:H="scroll-mode__vertical-menu"}return t$5.createElement(u$5,{mode:R,onClick:O},function(W){return t$5.createElement(e$5.MenuItem,{checked:B,icon:W.icon,isDisabled:$,testId:H,onClick:W.onClick},W.label)})},h$3=function(A,$){A.get("switchViewMode")($);var B=A.get("scrollMode");B!==e$5.ScrollMode.Horizontal&&B!==e$5.ScrollMode.Wrapped||$===e$5.ViewMode.SinglePage||A.get("switchScrollMode")(e$5.ScrollMode.Vertical)},b$3=function(A){var $=A.children,B=A.mode,R=A.onClick,O=t$5.useContext(e$5.LocalizationContext).l10n,H="",W=t$5.createElement(r$5,null);switch(B){case e$5.ViewMode.DualPage:H=O&&O.scrollMode?O.scrollMode.dualPage:"Dual page",W=t$5.createElement(c$5,null);break;case e$5.ViewMode.DualPageWithCover:H=O&&O.scrollMode?O.scrollMode.dualPageCover:"Dual page with cover",W=t$5.createElement(l$5,null);break;case e$5.ViewMode.SinglePage:default:H=O&&O.scrollMode?O.scrollMode.singlePage:"Single page",W=t$5.createElement(r$5,null)}return $({icon:W,label:H,onClick:R})},p$3={left:0,top:8},v$3=function(A){var $=A.isDisabled,B=A.isSelected,R=A.mode,O=A.onClick,H="";switch(R){case e$5.ViewMode.DualPage:H="view-mode__dual-button";break;case e$5.ViewMode.DualPageWithCover:H="view-mode__dual-cover-button";break;case e$5.ViewMode.SinglePage:default:H="view-mode__single-button"}return t$5.createElement(b$3,{mode:R,onClick:O},function(W){return t$5.createElement(e$5.Tooltip,{ariaControlsSuffix:"view-mode-switch",position:e$5.Position.BottomCenter,target:t$5.createElement(e$5.MinimalButton,{ariaLabel:W.label,isDisabled:$,isSelected:B,testId:H,onClick:W.onClick},W.icon),content:function(){return W.label},offset:p$3})})},k$2=function(A){var $=A.children,B=A.mode,R=A.store,O=w$1(R).viewMode,H=f$4(R).scrollMode,W=O===B,pe=(H===e$5.ScrollMode.Horizontal||H===e$5.ScrollMode.Wrapped)&&B!==e$5.ViewMode.SinglePage;return($||function(ce){return t$5.createElement(v$3,{isDisabled:pe,isSelected:W,mode:ce.mode,onClick:ce.onClick})})({isDisabled:pe,isSelected:W,mode:B,onClick:function(){h$3(R,B)}})},C$2=function(A){var $=A.isDisabled,B=A.isSelected,R=A.mode,O=A.onClick,H="";switch(R){case e$5.ViewMode.DualPage:H="view-mode__dual-menu";break;case e$5.ViewMode.DualPageWithCover:H="view-mode__dual-cover-menu";break;case e$5.ViewMode.SinglePage:default:H="view-mode__single-menu"}return t$5.createElement(b$3,{mode:R,onClick:O},function(W){return t$5.createElement(e$5.MenuItem,{checked:B,icon:W.icon,isDisabled:$,testId:H,onClick:W.onClick},W.label)})};scrollMode_min.DualPageCoverViewModeIcon=l$5,scrollMode_min.DualPageViewModeIcon=c$5,scrollMode_min.HorizontalScrollingIcon=n$5,scrollMode_min.PageScrollingIcon=r$5,scrollMode_min.VerticalScrollingIcon=d$4,scrollMode_min.WrappedScrollingIcon=s$4,scrollMode_min.scrollModePlugin=function(){var A=t$5.useMemo(function(){return e$5.createStore({scrollMode:e$5.ScrollMode.Vertical,viewMode:e$5.ViewMode.SinglePage,switchScrollMode:function(){},switchViewMode:function(){}})},[]),$=function(R){return t$5.createElement(S$3,i$5({},R,{store:A}))},B=function(R){return t$5.createElement(k$2,i$5({},R,{store:A}))};return{install:function(R){A.update("switchScrollMode",R.switchScrollMode),A.update("switchViewMode",R.switchViewMode)},onViewerStateChange:function(R){return A.update("scrollMode",R.scrollMode),A.update("viewMode",R.viewMode),R},switchScrollMode:function(R){a$5(A,R)},switchViewMode:function(R){h$3(A,R)},SwitchScrollMode:$,SwitchScrollModeButton:function(R){return t$5.createElement($,{mode:R.mode},function(O){return t$5.createElement(M$2,{isDisabled:O.isDisabled,isSelected:O.isSelected,mode:O.mode,onClick:function(){O.onClick()}})})},SwitchScrollModeMenuItem:function(R){return t$5.createElement($,{mode:R.mode},function(O){return t$5.createElement(g$3,{isDisabled:O.isDisabled,isSelected:O.isSelected,mode:O.mode,onClick:function(){O.onClick(),R.onClick()}})})},SwitchViewMode:B,SwitchViewModeButton:function(R){return t$5.createElement(B,{mode:R.mode},function(O){return t$5.createElement(v$3,{isDisabled:O.isDisabled,isSelected:O.isSelected,mode:O.mode,onClick:function(){O.onClick()}})})},SwitchViewModeMenuItem:function(R){return t$5.createElement(B,{mode:R.mode},function(O){return t$5.createElement(C$2,{isDisabled:O.isDisabled,isSelected:O.isSelected,mode:O.mode,onClick:function(){O.onClick(),R.onClick()}})})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$4.exports=scrollMode_min;var libExports$5=lib$4.exports,lib$3={exports:{}},search_min={},e$4=libExports$h;function t$4(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(B){if(B!=="default"){var R=Object.getOwnPropertyDescriptor(A,B);Object.defineProperty($,B,R.get?R:{enumerable:!0,get:function(){return A[B]}})}}),$.default=A,Object.freeze($)}var r$4=t$4(reactExports),n$4=function(){return r$4.createElement(e$4.Icon,{size:16},r$4.createElement("path",{d:`M0.541,5.627L11.666,18.2c0.183,0.207,0.499,0.226,0.706,0.043c0.015-0.014,0.03-0.028,0.043-0.043
            L23.541,5.627`}))},o$4=function(){return r$4.createElement(e$4.Icon,{size:16},r$4.createElement("path",{d:`M23.535,18.373L12.409,5.8c-0.183-0.207-0.499-0.226-0.706-0.043C11.688,5.77,11.674,5.785,11.66,5.8
            L0.535,18.373`}))},a$4=function(){return r$4.createElement(e$4.Icon,{ignoreDirection:!0,size:16},r$4.createElement("path",{d:`M10.5,0.5c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.5,10.5,0.5z
            M23.5,23.5
            l-5.929-5.929`}))},c$4=function(){return c$4=Object.assign||function(A){for(var $,B=1,R=arguments.length;B<R;B++)for(var O in $=arguments[B])Object.prototype.hasOwnProperty.call($,O)&&(A[O]=$[O]);return A},c$4.apply(this,arguments)},u$4={keyword:"",regExp:new RegExp(" "),wholeWords:!1},i$4=function(A){return{left:"".concat(A.left,"%"),top:"".concat(A.top,"%"),height:"".concat(A.height,"%"),width:"".concat(A.width,"%")}},s$3=function(A){var $=A.index,B=A.area,R=A.onHighlightKeyword,O=r$4.useRef();return e$4.useIsomorphicLayoutEffect(function(){var H=O.current;R&&H&&R({highlightEle:H,keyword:B.keyword})},[]),r$4.createElement("div",{className:"rpv-search__highlight","data-index":$,ref:O,style:i$4(B),title:B.keywordStr.trim()})},l$4=function(A){var $=A.parentNode;$&&$.removeChild(A)},h$2=function(A){var $=A.parentNode;if($){var B=document.createRange();B.selectNodeContents(A),function(R,O){l$4(R);var H=O.parentNode;H&&H.insertBefore(R,O),l$4(O)}(B.extractContents(),A),$.normalize()}},d$3=function(A,$){return A.top<$.top?-1:A.top>$.top?1:A.left<$.left?-1:A.left>$.left?1:0},f$3=function(A){var $=A.numPages,B=A.pageIndex,R=A.renderHighlights,O=A.store,H=A.onHighlightKeyword,W=r$4.useRef(),pe=r$4.useCallback(function(ye){return r$4.createElement(r$4.Fragment,null,ye.highlightAreas.map(function(Te,Ue){return r$4.createElement(s$3,{index:Ue,key:Ue,area:Te,onHighlightKeyword:H})}))},[]),ce=R||pe,ue=r$4.useState(O.get("matchPosition")),G=ue[0],ve=ue[1],he=r$4.useState(O.get("keyword")||[u$4]),oe=he[0],ae=he[1],J=r$4.useState({pageIndex:B,scale:1,status:e$4.LayerRenderStatus.PreRender}),V=J[0],re=J[1],ie=r$4.useRef(null),se=r$4.useRef([]),fe=r$4.useState([]),Y=fe[0],ee=fe[1],Ee=function(){return!0},be=r$4.useCallback(function(){return O.get("targetPageFilter")||Ee},[O.get("targetPageFilter")]),te=function(ye){var Te=se.current;if(Te.length===0)return[];var Ue=[],Be=[].slice.call(ye.querySelectorAll(".rpv-core__text-layer-text")),Ce=Te.map(function(Qe){return Qe.char}).join("");return oe.forEach(function(Qe){var at=Qe.keyword;if(at.trim()){for(var ft,_t=Qe.regExp.flags.indexOf("g")===-1?new RegExp(Qe.regExp,"".concat(Qe.regExp.flags,"g")):Qe.regExp,xe=[];(ft=_t.exec(Ce))!==null;)xe.push({keyword:_t,startIndex:ft.index,endIndex:_t.lastIndex});xe.map(function(q){return{keyword:q.keyword,indexes:Te.slice(q.startIndex,q.endIndex)}}).forEach(function(q){var ne=q.indexes.reduce(function(X,le){return X[le.spanIndex]=(X[le.spanIndex]||[]).concat([le]),X},{});Object.values(ne).forEach(function(X){if(X.length!==1||X[0].char.trim()!==""){var le=Qe.wholeWords?X.slice(1,-1):X,me=function(Se,Pe,Le,Ke,Ve){var rt=document.createRange(),lt=Ke.firstChild;if(!lt||lt.nodeType!==Node.TEXT_NODE)return null;var gt=lt.textContent.length,dt=Ve[0].charIndexInSpan,pt=Ve.length===1?dt:Ve[Ve.length-1].charIndexInSpan;if(dt>gt||pt+1>gt)return null;rt.setStart(lt,dt),rt.setEnd(lt,pt+1);var vt=document.createElement("span");rt.surroundContents(vt);var mt=vt.getBoundingClientRect(),Mt=Le.getBoundingClientRect(),st=Mt.height,Xe=Mt.width,qe=100*(mt.left-Mt.left)/Xe,ut=100*(mt.top-Mt.top)/st,Pt=100*mt.height/st,At=100*mt.width/Xe;return h$2(vt),{keyword:Pe,keywordStr:Se,numPages:$,pageIndex:B,left:qe,top:ut,height:Pt,width:At,pageHeight:st,pageWidth:Xe}}(at,q.keyword,ye,Be[le[0].spanIndex],le);me&&Ue.push(me)}})})}}),Ue.sort(d$3)},ge=function(ye){ye&&ye.length>0&&ae(ye)},de=function(ye){return ve(ye)},Ae=function(ye){if(ye.has(B)){var Te=ye.get(B);Te&&re({ele:Te.ele,pageIndex:B,scale:Te.scale,status:Te.status})}},Fe=function(){return oe.length===0||oe.length===1&&oe[0].keyword.trim()===""};return r$4.useEffect(function(){if(!Fe()&&V.status===e$4.LayerRenderStatus.DidRender&&!se.current.length){var ye=V.ele,Te=[].slice.call(ye.querySelectorAll(".rpv-core__text-layer-text")).map(function(Ue){return Ue.textContent}).reduce(function(Ue,Be,Ce){return Ue.concat(Be.split("").map(function(Qe,at){return{char:Qe,charIndexInSpan:at,spanIndex:Ce}}))},[{char:"",charIndexInSpan:0,spanIndex:0}]).slice(1);se.current=Te}},[oe,V.status]),r$4.useEffect(function(){if(!Fe()&&V.ele&&V.status===e$4.LayerRenderStatus.DidRender&&be()({pageIndex:B,numPages:$})){var ye=V.ele,Te=te(ye);ee(Te)}},[oe,G,V.status,se.current]),r$4.useEffect(function(){Fe()&&V.ele&&V.status===e$4.LayerRenderStatus.DidRender&&ee([])},[oe,V.status]),r$4.useEffect(function(){if(Y.length!==0){var ye=W.current;if(G.pageIndex===B&&ye&&V.status===e$4.LayerRenderStatus.DidRender){var Te=ye.querySelector('.rpv-search__highlight[data-index="'.concat(G.matchIndex,'"]'));if(Te){var Ue=function(at,ft){for(var _t=at.offsetTop,xe=at.offsetLeft,q=at.parentElement;q&&q!==ft;)_t+=q.offsetTop,xe+=q.offsetLeft,q=q.parentElement;return{left:xe,top:_t}}(Te,ye),Be=Ue.left,Ce=Ue.top,Qe=O.get("jumpToDestination");Qe&&(Qe({pageIndex:B,bottomOffset:(ye.getBoundingClientRect().height-Ce)/V.scale,leftOffset:Be/V.scale,scaleTo:V.scale}),ie.current&&ie.current.classList.remove("rpv-search__highlight--current"),ie.current=Te,Te.classList.add("rpv-search__highlight--current"))}}}},[Y,G]),r$4.useEffect(function(){return O.subscribe("keyword",ge),O.subscribe("matchPosition",de),O.subscribe("renderStatus",Ae),function(){O.unsubscribe("keyword",ge),O.unsubscribe("matchPosition",de),O.unsubscribe("renderStatus",Ae)}},[]),r$4.createElement("div",{className:"rpv-search__highlights","data-testid":"search__highlights-".concat(B),ref:W},ce({getCssProperties:i$4,highlightAreas:Y}))},p$2=function(A){var $,B=A.wholeWords?" ".concat(A.keyword," "):A.keyword,R=A.matchCase?"g":"gi";return{keyword:A.keyword,regExp:new RegExp(($=B,$.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),R),wholeWords:A.wholeWords||!1}},g$2=function(A,$,B){return A instanceof RegExp?{keyword:A.source,regExp:A,wholeWords:B||!1}:typeof A=="string"?A===""?u$4:p$2({keyword:A,matchCase:$||!1,wholeWords:B||!1}):($!==void 0&&(A.matchCase=$),B!==void 0&&(A.wholeWords=B),p$2(A))},m$3=function(A){var $,B=A.get("initialKeyword"),R=r$4.useMemo(function(){if(B&&B.length===1){var de=g$2(B[0]);return{matchCase:de.regExp.flags.indexOf("i")===-1,wholeWords:de.wholeWords}}return{matchCase:!1,wholeWords:!1}},[]),O=function(de){var Ae=r$4.useRef(de.get("doc")),Fe=function(ye){Ae.current=ye};return r$4.useEffect(function(){return de.subscribe("doc",Fe),function(){de.unsubscribe("doc",Fe)}},[]),Ae}(A),H=r$4.useState(B),W=H[0],pe=H[1],ce=r$4.useState([]),ue=ce[0],G=ce[1],ve=r$4.useState(0),he=ve[0],oe=ve[1],ae=r$4.useState(R.matchCase),J=ae[0],V=ae[1],re=r$4.useRef([]),ie=r$4.useState(R.wholeWords),se=ie[0],fe=ie[1],Y=function(){return!0},ee=r$4.useCallback(function(){return A.get("targetPageFilter")||Y},[A.get("targetPageFilter")]),Ee=function(de){var Ae=ue.length;if(W.length===0||Ae===0)return null;var Fe=de===Ae+1?1:Math.max(1,Math.min(Ae,de));return oe(Fe),te(ue[Fe-1])},be=function(de){return pe(de===""?[]:[de])},te=function(de){var Ae=A.get("jumpToPage");return Ae&&Ae(de.pageIndex),A.update("matchPosition",{matchIndex:de.matchIndex,pageIndex:de.pageIndex}),de},ge=function(de,Ae,Fe){var ye=O.current;if(!ye)return Promise.resolve([]);var Te=ye.numPages,Ue=de.map(function(Be){return g$2(Be,Ae,Fe)});return A.update("keyword",Ue),oe(0),G([]),new Promise(function(Be,Ce){var Qe=re.current.length===0?function(){var at=O.current;if(!at)return Promise.resolve([]);var ft=Array(at.numPages).fill(0).map(function(_t,xe){return e$4.getPage(at,xe).then(function(q){return q.getTextContent()}).then(function(q){var ne=q.items.map(function(X){return X.str||""}).join("");return Promise.resolve({pageContent:ne,pageIndex:xe})})});return Promise.all(ft).then(function(_t){return _t.sort(function(xe,q){return xe.pageIndex-q.pageIndex}),Promise.resolve(_t.map(function(xe){return xe.pageContent}))})}().then(function(at){return re.current=at,Promise.resolve(at)}):Promise.resolve(re.current);Qe.then(function(at){var ft=[];at.forEach(function(_t,xe){ee()({pageIndex:xe,numPages:Te})&&Ue.forEach(function(q){for(var ne,X=0;(ne=q.regExp.exec(_t))!==null;)ft.push({keyword:q.regExp,matchIndex:X,pageIndex:xe,pageText:_t,startIndex:ne.index,endIndex:q.regExp.lastIndex}),X++})}),G(ft),ft.length>0&&(oe(1),te(ft[0])),Be(ft)})})};return r$4.useEffect(function(){re.current=[]},[O.current]),{clearKeyword:function(){A.update("keyword",[u$4]),be(""),oe(0),G([]),V(!1),fe(!1)},changeMatchCase:function(de){V(de),W.length>0&&ge(W,de,se)},changeWholeWords:function(de){fe(de),W.length>0&&ge(W,J,de)},currentMatch:he,jumpToMatch:Ee,jumpToNextMatch:function(){return Ee(he+1)},jumpToPreviousMatch:function(){return Ee(he-1)},keywords:W,matchCase:J,numberOfMatches:ue.length,wholeWords:se,search:function(){return ge(W,J,se)},searchFor:ge,setKeywords:pe,keyword:W.length===0?"":($=W[0],$ instanceof RegExp?$.source:typeof $=="string"?$:$.keyword),setKeyword:be,setTargetPages:function(de){A.update("targetPageFilter",de)}}},v$2=function(A){var $=A.children,B=A.store,R=m$3(B),O=r$4.useState(!1),H=O[0],W=O[1],pe=function(ce){return W(!0)};return r$4.useEffect(function(){return B.subscribe("doc",pe),function(){B.unsubscribe("doc",pe)}},[]),$(c$4(c$4({},R),{isDocumentLoaded:H}))},x=function(A){var $=A.containerRef,B=A.store,R=r$4.useRef(!1),O=function(){R.current=!0},H=function(){R.current=!1},W=function(pe){var ce=$.current;ce&&(pe.shiftKey||pe.altKey||pe.key!=="f"||(e$4.isMac()?pe.metaKey&&!pe.ctrlKey:pe.ctrlKey)&&(R.current||document.activeElement&&ce.contains(document.activeElement))&&(pe.preventDefault(),B.update("areShortcutsPressed",!0)))};return r$4.useEffect(function(){var pe=$.current;if(pe)return document.addEventListener("keydown",W),pe.addEventListener("mouseenter",O),pe.addEventListener("mouseleave",H),function(){document.removeEventListener("keydown",W),pe.removeEventListener("mouseenter",O),pe.removeEventListener("mouseleave",H)}},[$.current]),r$4.createElement(r$4.Fragment,null)},y={left:0,top:8},E$2=function(A){var $=A.store,B=A.onToggle,R=r$4.useContext(e$4.LocalizationContext).l10n,O=r$4.useContext(e$4.ThemeContext).direction,H=r$4.useState(!1),W=H[0],pe=H[1],ce=r$4.useState(!1),ue=ce[0],G=ce[1],ve=O===e$4.TextDirection.RightToLeft,he=m$3($),oe=he.clearKeyword,ae=he.changeMatchCase,J=he.changeWholeWords,V=he.currentMatch,re=he.jumpToNextMatch,ie=he.jumpToPreviousMatch,se=he.keyword,fe=he.matchCase,Y=he.numberOfMatches,ee=he.wholeWords,Ee=he.search,be=he.setKeyword,te=function(ye){pe(!0),Ee().then(function(Te){pe(!1),G(!0),ye&&ye()})};r$4.useEffect(function(){var ye=$.get("initialKeyword");ye&&ye.length===1&&se&&te(function(){$.update("initialKeyword",[])})},[]);var ge=R&&R.search?R.search.enterToSearch:"Enter to search",de=R&&R.search?R.search.previousMatch:"Previous match",Ae=R&&R.search?R.search.nextMatch:"Next match",Fe=R&&R.search?R.search.close:"Close";return r$4.createElement("div",{className:"rpv-search__popover"},r$4.createElement("div",{className:"rpv-search__popover-input-counter"},r$4.createElement(e$4.TextBox,{ariaLabel:ge,autoFocus:!0,placeholder:ge,type:"text",value:se,onChange:function(ye){G(!1),be(ye)},onKeyDown:function(ye){ye.key==="Enter"&&se&&(ue?re():te())}}),r$4.createElement("div",{className:e$4.classNames({"rpv-search__popover-counter":!0,"rpv-search__popover-counter--ltr":!ve,"rpv-search__popover-counter--rtl":ve})},W&&r$4.createElement(e$4.Spinner,{testId:"search__popover-searching",size:"1rem"}),!W&&r$4.createElement("span",{"data-testid":"search__popover-num-matches"},V,"/",Y))),r$4.createElement("label",{className:"rpv-search__popover-label"},r$4.createElement("input",{className:"rpv-search__popover-label-checkbox","data-testid":"search__popover-match-case",checked:fe,type:"checkbox",onChange:function(ye){G(!1),ae(ye.target.checked)}})," ",R&&R.search?R.search.matchCase:"Match case"),r$4.createElement("label",{className:"rpv-search__popover-label"},r$4.createElement("input",{className:"rpv-search__popover-label-checkbox",checked:ee,"data-testid":"search__popover-whole-words",type:"checkbox",onChange:function(ye){G(!1),J(ye.target.checked)}})," ",R&&R.search?R.search.wholeWords:"Whole words"),r$4.createElement("div",{className:"rpv-search__popover-footer"},r$4.createElement("div",{className:"rpv-search__popover-footer-item"},r$4.createElement(e$4.Tooltip,{ariaControlsSuffix:"search-previous-match",position:ve?e$4.Position.BottomRight:e$4.Position.BottomCenter,target:r$4.createElement(e$4.MinimalButton,{ariaLabel:de,isDisabled:V<=1,onClick:ie},r$4.createElement(o$4,null)),content:function(){return de},offset:y})),r$4.createElement("div",{className:"rpv-search__popover-footer-item"},r$4.createElement(e$4.Tooltip,{ariaControlsSuffix:"search-next-match",position:e$4.Position.BottomCenter,target:r$4.createElement(e$4.MinimalButton,{ariaLabel:Ae,isDisabled:V>Y-1,onClick:re},r$4.createElement(n$4,null)),content:function(){return Ae},offset:y})),r$4.createElement("div",{className:e$4.classNames({"rpv-search__popover-footer-button":!0,"rpv-search__popover-footer-button--ltr":!ve,"rpv-search__popover-footer-button--rtl":ve})},r$4.createElement(e$4.Button,{onClick:function(){B(),oe()}},Fe))))},w=function(A){var $=A.children,B=A.onClick,R=r$4.useContext(e$4.LocalizationContext).l10n,O=R&&R.search?R.search.search:"Search";return $({icon:r$4.createElement(a$4,null),label:O,onClick:B})},b$2={left:0,top:8},k$1=function(A){var $=A.enableShortcuts,B=A.store,R=A.onClick,O=$?e$4.isMac()?"Meta+F":"Ctrl+F":"",H=function(W){W&&R()};return r$4.useEffect(function(){return B.subscribe("areShortcutsPressed",H),function(){B.unsubscribe("areShortcutsPressed",H)}},[]),r$4.createElement(w,{onClick:R},function(W){return r$4.createElement(e$4.Tooltip,{ariaControlsSuffix:"search-popover",position:e$4.Position.BottomCenter,target:r$4.createElement(e$4.MinimalButton,{ariaKeyShortcuts:O,ariaLabel:W.label,testId:"search__popover-button",onClick:R},W.icon),content:function(){return W.label},offset:b$2})})},S$2={left:0,top:8},C$1=function(A){var $=A.children,B=A.enableShortcuts,R=A.store,O=r$4.useContext(e$4.ThemeContext).direction===e$4.TextDirection.RightToLeft?e$4.Position.BottomRight:e$4.Position.BottomLeft,H=$||function(W){return r$4.createElement(k$1,c$4({enableShortcuts:B,store:R},W))};return r$4.createElement(e$4.Popover,{ariaControlsSuffix:"search",lockScroll:!1,position:O,target:function(W){return H({onClick:W})},content:function(W){return r$4.createElement(E$2,{store:R,onToggle:W})},offset:S$2,closeOnClickOutside:!1,closeOnEscape:!0})},P$1=function(A){return Array.isArray(A)?A.map(function($){return g$2($)}):[g$2(A)]};search_min.NextIcon=n$4,search_min.PreviousIcon=o$4,search_min.SearchIcon=a$4,search_min.searchPlugin=function(A){var $=r$4.useMemo(function(){return Object.assign({},{enableShortcuts:!0,onHighlightKeyword:function(){}},A)},[]),B=r$4.useMemo(function(){return e$4.createStore({initialKeyword:A&&A.keyword?Array.isArray(A.keyword)?A.keyword:[A.keyword]:[],keyword:A&&A.keyword?P$1(A.keyword):[u$4],matchPosition:{matchIndex:-1,pageIndex:-1},renderStatus:new Map})},[]),R=m$3(B),O=R.clearKeyword,H=R.jumpToMatch,W=R.jumpToNextMatch,pe=R.jumpToPreviousMatch,ce=R.searchFor,ue=R.setKeywords,G=R.setTargetPages,ve=function(he){return r$4.createElement(C$1,c$4({enableShortcuts:$.enableShortcuts},he,{store:B}))};return{install:function(he){var oe=A&&A.keyword?Array.isArray(A.keyword)?A.keyword:[A.keyword]:[],ae=A&&A.keyword?P$1(A.keyword):[u$4];B.update("initialKeyword",oe),B.update("jumpToDestination",he.jumpToDestination),B.update("jumpToPage",he.jumpToPage),B.update("keyword",ae)},renderPageLayer:function(he){return r$4.createElement(f$3,{key:he.pageIndex,numPages:he.doc.numPages,pageIndex:he.pageIndex,renderHighlights:A==null?void 0:A.renderHighlights,store:B,onHighlightKeyword:$.onHighlightKeyword})},renderViewer:function(he){var oe=he.slot;return oe.subSlot&&(oe.subSlot.children=r$4.createElement(r$4.Fragment,null,$.enableShortcuts&&r$4.createElement(x,{containerRef:he.containerRef,store:B}),oe.subSlot.children)),oe},uninstall:function(he){var oe=B.get("renderStatus");oe&&oe.clear()},onDocumentLoad:function(he){B.update("doc",he.doc)},onTextLayerRender:function(he){var oe=B.get("renderStatus");oe&&(oe=oe.set(he.pageIndex,he),B.update("renderStatus",oe))},Search:function(he){return r$4.createElement(v$2,c$4({},he,{store:B}))},ShowSearchPopover:ve,ShowSearchPopoverButton:function(){return r$4.createElement(ve,null,function(he){return r$4.createElement(k$1,c$4({enableShortcuts:$.enableShortcuts,store:B},he))})},clearHighlights:function(){O()},highlight:function(he){var oe=Array.isArray(he)?he:[he];return ue(oe),ce(oe)},jumpToMatch:H,jumpToNextMatch:W,jumpToPreviousMatch:pe,setTargetPages:G}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$3.exports=search_min;var libExports$4=lib$3.exports,lib$2={exports:{}},theme_min={},e$3=libExports$h;function t$3(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(B){if(B!=="default"){var R=Object.getOwnPropertyDescriptor(A,B);Object.defineProperty($,B,R.get?R:{enumerable:!0,get:function(){return A[B]}})}}),$.default=A,Object.freeze($)}var n$3=t$3(reactExports),r$3=function(){return n$3.createElement(e$3.Icon,{size:16},n$3.createElement("path",{d:"M19.5,15.106l2.4-2.4a1,1,0,0,0,0-1.414l-2.4-2.4V5.5a1,1,0,0,0-1-1H15.106l-2.4-2.4a1,1,0,0,0-1.414,0l-2.4,2.4H5.5a1,1,0,0,0-1,1V8.894l-2.4,2.4a1,1,0,0,0,0,1.414l2.4,2.4V18.5a1,1,0,0,0,1,1H8.894l2.4,2.4a1,1,0,0,0,1.414,0l2.4-2.4H18.5a1,1,0,0,0,1-1Z"}),n$3.createElement("path",{d:"M10,6.349a6,6,0,0,1,0,11.3,6,6,0,1,0,0-11.3Z"}))},c$3=function(){return n$3.createElement(e$3.Icon,{size:16},n$3.createElement("path",{d:"M19.491,15.106l2.4-2.4a1,1,0,0,0,0-1.414l-2.4-2.4V5.5a1,1,0,0,0-1-1H15.1L12.7,2.1a1,1,0,0,0-1.414,0l-2.4,2.4H5.491a1,1,0,0,0-1,1V8.894l-2.4,2.4a1,1,0,0,0,0,1.414l2.4,2.4V18.5a1,1,0,0,0,1,1H8.885l2.4,2.4a1,1,0,0,0,1.414,0l2.4-2.4h3.394a1,1,0,0,0,1-1Z"}),n$3.createElement("path",{d:"M11.491,6c4,0,6,2.686,6,6s-2,6-6,6Z"}))},o$3=function(){return o$3=Object.assign||function(A){for(var $,B=1,R=arguments.length;B<R;B++)for(var O in $=arguments[B])Object.prototype.hasOwnProperty.call($,O)&&(A[O]=$[O]);return A},o$3.apply(this,arguments)},a$3={left:0,top:8},i$3=function(A){var $=A.onClick,B=n$3.useContext(e$3.ThemeContext),R=n$3.useContext(e$3.LocalizationContext).l10n,O=B.currentTheme==="dark",H=R&&R.theme?O?R.theme.switchLightTheme:R.theme.switchDarkTheme:O?"Switch to the light theme":"Switch to the dark theme";return n$3.createElement(e$3.Tooltip,{ariaControlsSuffix:"theme-switch",position:e$3.Position.BottomCenter,target:n$3.createElement(e$3.MinimalButton,{ariaLabel:H,testId:"theme__switch-button",onClick:$},O?n$3.createElement(c$3,null):n$3.createElement(r$3,null)),content:function(){return H},offset:a$3})},l$3=function(A){var $=A.children,B=n$3.useContext(e$3.ThemeContext);return($||function(R){return n$3.createElement(i$3,{onClick:R.onClick})})({onClick:function(){return B.setCurrentTheme(B.currentTheme==="dark"?"light":"dark")}})},u$3=function(A){var $=A.onClick,B=n$3.useContext(e$3.ThemeContext),R=n$3.useContext(e$3.LocalizationContext).l10n,O=B.currentTheme==="dark",H=R&&R.theme?O?R.theme.switchLightTheme:R.theme.switchDarkTheme:O?"Switch to the light theme":"Switch to the dark theme";return n$3.createElement(e$3.MenuItem,{icon:O?n$3.createElement(c$3,null):n$3.createElement(r$3,null),testId:"theme__switch-menu",onClick:$},H)};theme_min.DarkIcon=r$3,theme_min.LightIcon=c$3,theme_min.themePlugin=function(){var A=function($){return n$3.createElement(l$3,o$3({},$))};return{SwitchTheme:A,SwitchThemeButton:function(){return n$3.createElement(A,null,function($){return n$3.createElement(i$3,o$3({},$))})},SwitchThemeMenuItem:function($){return n$3.createElement(A,null,function(B){return n$3.createElement(u$3,{onClick:function(){B.onClick(),$.onClick()}})})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$2.exports=theme_min;var libExports$3=lib$2.exports,lib$1={exports:{}},zoom_min={},e$2=libExports$h;function t$2(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(B){if(B!=="default"){var R=Object.getOwnPropertyDescriptor(A,B);Object.defineProperty($,B,R.get?R:{enumerable:!0,get:function(){return A[B]}})}}),$.default=A,Object.freeze($)}var n$2=t$2(reactExports),o$2=function(){return n$2.createElement(e$2.Icon,{ignoreDirection:!0,size:16},n$2.createElement("path",{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10
            M10.5,5.499v10`}))},r$2=function(){return n$2.createElement(e$2.Icon,{ignoreDirection:!0,size:16},n$2.createElement("path",{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10`}))},c$2=function(){return c$2=Object.assign||function(A){for(var $,B=1,R=arguments.length;B<R;B++)for(var O in $=arguments[B])Object.prototype.hasOwnProperty.call($,O)&&(A[O]=$[O]);return A},c$2.apply(this,arguments)},a$2=function(A){var $=n$2.useState(A.get("scale")||0),B=$[0],R=$[1],O=function(H){R(H)};return n$2.useEffect(function(){return A.subscribe("scale",O),function(){A.unsubscribe("scale",O)}},[]),{scale:B}},u$2=function(A){var $=A.children,B=A.store;return($||function(R){return n$2.createElement(n$2.Fragment,null,"".concat(Math.round(100*R.scale),"%"))})({scale:a$2(B).scale})},l$2={passive:!1},i$2=null,s$2=function(A){var $=A.pagesContainerRef,B=A.store,R=e$2.useDebounceCallback(function(H){var W=B.get("zoom");W&&W(H)},40),O=function(H){if(H.ctrlKey){H.preventDefault();var W=H.target.getBoundingClientRect(),pe=1-H.deltaY/100,ce=H.clientX-W.left,ue=H.clientY-W.top,G=B.get("scale"),ve=(i$2||(i$2=document.createElementNS("http://www.w3.org/2000/svg","svg"))).createSVGMatrix().translate(ce,ue).scale(pe).translate(-ce,-ue).scale(G);R(ve.a)}};return e$2.useIsomorphicLayoutEffect(function(){var H=$.current;if(H)return H.addEventListener("wheel",O,l$2),function(){H.removeEventListener("wheel",O)}},[]),n$2.createElement(n$2.Fragment,null)},m$2=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],f$2=function(A){return m$2.find(function($){return $>A})||A},v$1=function(A){var $=m$2.findIndex(function(B){return B>=A});return $===-1||$===0?A:m$2[$-1]},p$1=function(A){var $=A.containerRef,B=A.store,R=function(O){if(!O.shiftKey&&!O.altKey&&(e$2.isMac()?O.metaKey:O.ctrlKey)){var H=$.current;if(H&&document.activeElement&&H.contains(document.activeElement)){var W=B.get("zoom");if(W){var pe=B.get("scale")||1,ce=1;switch(O.key){case"-":ce=v$1(pe);break;case"=":ce=f$2(pe);break;case"0":ce=1;break;default:ce=pe}ce!==pe&&(O.preventDefault(),W(ce))}}}};return n$2.useEffect(function(){if($.current)return document.addEventListener("keydown",R),function(){document.removeEventListener("keydown",R)}},[$.current]),n$2.createElement(n$2.Fragment,null)},z=[.5,.75,1,1.25,1.5,2,3,4],E$1={left:0,top:8},d$2=function(A){var $=A.levels,B=$===void 0?z:$,R=A.scale,O=A.onZoom,H=n$2.useContext(e$2.LocalizationContext).l10n,W=n$2.useContext(e$2.ThemeContext).direction===e$2.TextDirection.RightToLeft,pe=H&&H.zoom?H.zoom.zoomDocument:"Zoom document";return n$2.createElement(e$2.Popover,{ariaControlsSuffix:"zoom",ariaHasPopup:"menu",position:e$2.Position.BottomCenter,target:function(ce){return n$2.createElement(e$2.MinimalButton,{ariaLabel:pe,testId:"zoom__popover-target",onClick:function(){ce()}},n$2.createElement("span",{className:"rpv-zoom__popover-target"},n$2.createElement("span",{"data-testid":"zoom__popover-target-scale",className:e$2.classNames({"rpv-zoom__popover-target-scale":!0,"rpv-zoom__popover-target-scale--ltr":!W,"rpv-zoom__popover-target-scale--rtl":W})},Math.round(100*R),"%"),n$2.createElement("span",{className:"rpv-zoom__popover-target-arrow"})))},content:function(ce){return n$2.createElement(e$2.Menu,null,Object.keys(e$2.SpecialZoomLevel).map(function(ue){var G=ue;return n$2.createElement(e$2.MenuItem,{key:G,onClick:function(){ce(),O(G)}},function(ve){switch(ve){case e$2.SpecialZoomLevel.ActualSize:return H&&H.zoom?H.zoom.actualSize:"Actual size";case e$2.SpecialZoomLevel.PageFit:return H&&H.zoom?H.zoom.pageFit:"Page fit";case e$2.SpecialZoomLevel.PageWidth:return H&&H.zoom?H.zoom.pageWidth:"Page width"}}(G))}),n$2.createElement(e$2.MenuDivider,null),B.map(function(ue){return n$2.createElement(e$2.MenuItem,{key:ue,onClick:function(){ce(),O(ue)}},"".concat(Math.round(100*ue),"%"))}))},offset:E$1,closeOnClickOutside:!0,closeOnEscape:!0})},g$1=function(A){var $=A.children,B=A.levels,R=A.store;return($||function(O){return n$2.createElement(d$2,{levels:B,scale:O.scale,onZoom:O.onZoom})})({scale:a$2(R).scale,onZoom:function(O){var H=R.get("zoom");H&&H(O)}})},C={left:0,top:8},h$1=function(A){var $=A.enableShortcuts,B=A.onClick,R=n$2.useContext(e$2.LocalizationContext).l10n,O=R&&R.zoom?R.zoom.zoomIn:"Zoom in",H=$?e$2.isMac()?"Meta+=":"Ctrl+=":"";return n$2.createElement(e$2.Tooltip,{ariaControlsSuffix:"zoom-in",position:e$2.Position.BottomCenter,target:n$2.createElement(e$2.MinimalButton,{ariaKeyShortcuts:H,ariaLabel:O,testId:"zoom__in-button",onClick:B},n$2.createElement(o$2,null)),content:function(){return O},offset:C})},b$1=function(A){var $=A.children,B=A.enableShortcuts,R=A.store,O=a$2(R).scale;return($||h$1)({enableShortcuts:B,onClick:function(){var H=R.get("zoom");H&&H(f$2(O))}})},k=function(A){var $=A.onClick,B=n$2.useContext(e$2.LocalizationContext).l10n,R=B&&B.zoom?B.zoom.zoomIn:"Zoom in";return n$2.createElement(e$2.MenuItem,{icon:n$2.createElement(o$2,null),testId:"zoom__in-menu",onClick:$},R)},S$1={left:0,top:8},M$1=function(A){var $=A.enableShortcuts,B=A.onClick,R=n$2.useContext(e$2.LocalizationContext).l10n,O=R&&R.zoom?R.zoom.zoomOut:"Zoom out",H=$?e$2.isMac()?"Meta+-":"Ctrl+-":"";return n$2.createElement(e$2.Tooltip,{ariaControlsSuffix:"zoom-out",position:e$2.Position.BottomCenter,target:n$2.createElement(e$2.MinimalButton,{ariaKeyShortcuts:H,ariaLabel:O,testId:"zoom__out-button",onClick:B},n$2.createElement(r$2,null)),content:function(){return O},offset:S$1})},I$1=function(A){var $=A.children,B=A.enableShortcuts,R=A.store,O=a$2(R).scale;return($||M$1)({enableShortcuts:B,onClick:function(){var H=R.get("zoom");H&&H(v$1(O))}})},Z=function(A){var $=A.onClick,B=n$2.useContext(e$2.LocalizationContext).l10n,R=B&&B.zoom?B.zoom.zoomOut:"Zoom out";return n$2.createElement(e$2.MenuItem,{icon:n$2.createElement(r$2,null),testId:"zoom__out-menu",onClick:$},R)};zoom_min.ZoomInIcon=o$2,zoom_min.ZoomOutIcon=r$2,zoom_min.zoomPlugin=function(A){var $=n$2.useMemo(function(){return Object.assign({},{enableShortcuts:!0},A)},[]),B=n$2.useMemo(function(){return e$2.createStore({})},[]),R=function(W){return n$2.createElement(b$1,c$2({enableShortcuts:$.enableShortcuts},W,{store:B}))},O=function(W){return n$2.createElement(I$1,c$2({enableShortcuts:$.enableShortcuts},W,{store:B}))},H=function(W){return n$2.createElement(g$1,c$2({},W,{store:B}))};return{renderViewer:function(W){var pe=W.slot;if(!$.enableShortcuts)return pe;var ce={children:n$2.createElement(n$2.Fragment,null,n$2.createElement(p$1,{containerRef:W.containerRef,store:B}),n$2.createElement(s$2,{pagesContainerRef:W.pagesContainerRef,store:B}),pe.children)};return c$2(c$2({},pe),ce)},install:function(W){B.update("zoom",W.zoom)},onViewerStateChange:function(W){return B.update("scale",W.scale),W},zoomTo:function(W){var pe=B.get("zoom");pe&&pe(W)},CurrentScale:function(W){return n$2.createElement(u$2,c$2({},W,{store:B}))},ZoomIn:R,ZoomInButton:function(){return n$2.createElement(R,null,function(W){return n$2.createElement(h$1,c$2({},W))})},ZoomInMenuItem:function(W){return n$2.createElement(R,null,function(pe){return n$2.createElement(k,{onClick:function(){pe.onClick(),W.onClick()}})})},ZoomOut:O,ZoomOutButton:function(){return n$2.createElement(O,null,function(W){return n$2.createElement(M$1,c$2({},W))})},ZoomOutMenuItem:function(W){return n$2.createElement(O,null,function(pe){return n$2.createElement(Z,{onClick:function(){pe.onClick(),W.onClick()}})})},Zoom:H,ZoomPopover:function(W){return n$2.createElement(H,null,function(pe){return n$2.createElement(d$2,c$2({levels:W==null?void 0:W.levels},pe))})}}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$1.exports=zoom_min;var libExports$2=lib$1.exports,e$1=libExports$h,t$1=libExports$d,r$1=reactExports,n$1=libExports$c,o$1=libExports$b,a$1=libExports$a,l$1=libExports$9,i$1=libExports$8,c$1=libExports$7,m$1=libExports$6,u$1=libExports$5,s$1=libExports$4,d$1=libExports$3,p=libExports$2;function v(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(B){if(B!=="default"){var R=Object.getOwnPropertyDescriptor(A,B);Object.defineProperty($,B,R.get?R:{enumerable:!0,get:function(){return A[B]}})}}),$.default=A,Object.freeze($)}var _=v(r$1),E=function(){return _.createElement(e$1.Icon,{size:16},_.createElement("path",{d:`M12,0.5c1.381,0,2.5,1.119,2.5,2.5S13.381,5.5,12,5.5S9.5,4.381,9.5,3S10.619,0.5,12,0.5z
            M12,9.5
            c1.381,0,2.5,1.119,2.5,2.5s-1.119,2.5-2.5,2.5S9.5,13.381,9.5,12S10.619,9.5,12,9.5z
            M12,18.5c1.381,0,2.5,1.119,2.5,2.5
            s-1.119,2.5-2.5,2.5S9.5,22.381,9.5,21S10.619,18.5,12,18.5z`}))},g={left:0,top:8},P=function(A){var $=A.toolbarSlot,B=_.useContext(e$1.LocalizationContext).l10n,R=_.useContext(e$1.ThemeContext).direction===e$1.TextDirection.RightToLeft?e$1.Position.BottomLeft:e$1.Position.BottomRight,O=$.DownloadMenuItem,H=$.EnterFullScreenMenuItem,W=$.GoToFirstPageMenuItem,pe=$.GoToLastPageMenuItem,ce=$.GoToNextPageMenuItem,ue=$.GoToPreviousPageMenuItem,G=$.OpenMenuItem,ve=$.PrintMenuItem,he=$.RotateBackwardMenuItem,oe=$.RotateForwardMenuItem,ae=$.ShowPropertiesMenuItem,J=$.SwitchScrollModeMenuItem,V=$.SwitchSelectionModeMenuItem,re=$.SwitchViewModeMenuItem,ie=$.SwitchThemeMenuItem;return _.createElement(e$1.Popover,{ariaControlsSuffix:"toolbar-more-actions",ariaHasPopup:"menu",position:R,target:function(se,fe){var Y=B&&B.toolbar?B.toolbar.moreActions:"More actions";return _.createElement(e$1.Tooltip,{ariaControlsSuffix:"toolbar-more-actions",position:R,target:_.createElement(e$1.MinimalButton,{ariaLabel:Y,isSelected:fe,testId:"toolbar__more-actions-popover-target",onClick:se},_.createElement(E,null)),content:function(){return Y},offset:g})},content:function(se){return _.createElement(e$1.Menu,null,_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(ie,{onClick:se})),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(H,{onClick:se})),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(G,null)),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(ve,{onClick:se})),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(O,{onClick:se})),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(e$1.MenuDivider,null)),_.createElement(W,{onClick:se}),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(ue,{onClick:se})),_.createElement("div",{className:"rpv-core__display--block rpv-core__display--hidden-medium"},_.createElement(ce,{onClick:se})),_.createElement(pe,{onClick:se}),_.createElement(e$1.MenuDivider,null),_.createElement(oe,{onClick:se}),_.createElement(he,{onClick:se}),_.createElement(e$1.MenuDivider,null),_.createElement(V,{mode:t$1.SelectionMode.Text,onClick:se}),_.createElement(V,{mode:t$1.SelectionMode.Hand,onClick:se}),_.createElement(e$1.MenuDivider,null),_.createElement(J,{mode:e$1.ScrollMode.Page,onClick:se}),_.createElement(J,{mode:e$1.ScrollMode.Vertical,onClick:se}),_.createElement(J,{mode:e$1.ScrollMode.Horizontal,onClick:se}),_.createElement(J,{mode:e$1.ScrollMode.Wrapped,onClick:se}),_.createElement(e$1.MenuDivider,null),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement(re,{mode:e$1.ViewMode.SinglePage,onClick:se})),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement(re,{mode:e$1.ViewMode.DualPage,onClick:se})),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement(re,{mode:e$1.ViewMode.DualPageWithCover,onClick:se})),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement(e$1.MenuDivider,null)),_.createElement(ae,{onClick:se}))},offset:g,closeOnClickOutside:!0,closeOnEscape:!0})},M=function(){return M=Object.assign||function(A){for(var $,B=1,R=arguments.length;B<R;B++)for(var O in $=arguments[B])Object.prototype.hasOwnProperty.call($,O)&&(A[O]=$[O]);return A},M.apply(this,arguments)},h=function(A){return function($){var B=_.useMemo(function(){return A($)},[]),R=_.useContext(e$1.ThemeContext).direction===e$1.TextDirection.RightToLeft,O=B.CurrentPageInput,H=B.Download,W=B.EnterFullScreen,pe=B.GoToNextPage,ce=B.GoToPreviousPage,ue=B.NumberOfPages,G=B.Open,ve=B.Print,he=B.ShowSearchPopover,oe=B.SwitchTheme,ae=B.Zoom,J=B.ZoomIn,V=B.ZoomOut;return _.createElement("div",{"data-testid":"toolbar",className:e$1.classNames({"rpv-toolbar":!0,"rpv-toolbar--rtl":R}),role:"toolbar","aria-orientation":"horizontal"},_.createElement("div",{className:"rpv-toolbar__left"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(he,null)),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(ce,null))),_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(O,null),_.createElement("span",{className:"rpv-toolbar__label"},_.createElement(ue,null))),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(pe,null)))),_.createElement("div",{className:"rpv-toolbar__center"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(V,null)),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-small"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(ae,null))),_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(J,null))),_.createElement("div",{className:"rpv-toolbar__right"},_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(oe,null))),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(W,null))),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(G,null))),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(H,null))),_.createElement("div",{className:"rpv-core__display--hidden rpv-core__display--block-medium"},_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(ve,null))),_.createElement("div",{className:"rpv-toolbar__item"},_.createElement(P,{toolbarSlot:B}))))}},f$1=function(A){var $=A.NumberOfPages;return Object.assign({},A,{NumberOfPages:function(){return _.createElement(_.Fragment,null,"/ ",_.createElement($,null))}})},S=function(A){return h(f$1)(A)},I=function(A){var $=A.children,B=A.slot;return($||S)(B)};toolbar_min.MoreActionsPopover=P,toolbar_min.MoreIcon=E,toolbar_min.toolbarPlugin=function(A){var $=n$1.fullScreenPlugin(A?A.fullScreenPlugin:{}),B=o$1.getFilePlugin(A?A.getFilePlugin:{}),R=a$1.openPlugin(A?A.openPlugin:{}),O=l$1.pageNavigationPlugin(A?A.pageNavigationPlugin:{}),H=i$1.printPlugin(A?A.printPlugin:{}),W=c$1.propertiesPlugin(),pe=m$1.rotatePlugin(),ce=u$1.scrollModePlugin(),ue=s$1.searchPlugin(A?A.searchPlugin:{}),G=t$1.selectionModePlugin(A?A.selectionModePlugin:{}),ve=d$1.themePlugin(),he=p.zoomPlugin(A?A.zoomPlugin:{}),oe=[$,B,R,O,H,W,pe,ce,ue,G,ve,he],ae=_.useCallback(function(J){var V=$.EnterFullScreen,re=$.EnterFullScreenMenuItem,ie=B.Download,se=B.DownloadMenuItem,fe=R.Open,Y=R.OpenMenuItem,ee=O.CurrentPageInput,Ee=O.CurrentPageLabel,be=O.GoToFirstPage,te=O.GoToFirstPageMenuItem,ge=O.GoToLastPage,de=O.GoToLastPageMenuItem,Ae=O.GoToNextPage,Fe=O.GoToNextPageMenuItem,ye=O.GoToPreviousPage,Te=O.GoToPreviousPageMenuItem,Ue=O.NumberOfPages,Be=H.Print,Ce=H.PrintMenuItem,Qe=W.ShowProperties,at=W.ShowPropertiesMenuItem,ft=pe.Rotate,_t=pe.RotateBackwardMenuItem,xe=pe.RotateForwardMenuItem,q=ce.SwitchScrollMode,ne=ce.SwitchScrollModeMenuItem,X=ce.SwitchViewMode,le=ce.SwitchViewModeMenuItem,me=ue.Search,Se=ue.ShowSearchPopover,Pe=G.SwitchSelectionMode,Le=G.SwitchSelectionModeMenuItem,Ke=ve.SwitchTheme,Ve=ve.SwitchThemeMenuItem,rt=he.CurrentScale,lt=he.Zoom,gt=he.ZoomIn,dt=he.ZoomInMenuItem,pt=he.ZoomOut,vt=he.ZoomOutMenuItem;return _.createElement(I,M({},J,{slot:{CurrentPageInput:ee,CurrentPageLabel:Ee,CurrentScale:rt,Download:ie,DownloadMenuItem:se,EnterFullScreen:V,EnterFullScreenMenuItem:re,GoToFirstPage:be,GoToFirstPageMenuItem:te,GoToLastPage:ge,GoToLastPageMenuItem:de,GoToNextPage:Ae,GoToNextPageMenuItem:Fe,GoToPreviousPage:ye,GoToPreviousPageMenuItem:Te,NumberOfPages:Ue,Open:fe,OpenMenuItem:Y,Print:Be,PrintMenuItem:Ce,Rotate:ft,RotateBackwardMenuItem:_t,RotateForwardMenuItem:xe,Search:me,ShowProperties:Qe,ShowPropertiesMenuItem:at,ShowSearchPopover:Se,SwitchScrollMode:q,SwitchScrollModeMenuItem:ne,SwitchSelectionMode:Pe,SwitchSelectionModeMenuItem:Le,SwitchViewMode:X,SwitchViewModeMenuItem:le,SwitchTheme:Ke,SwitchThemeMenuItem:Ve,Zoom:lt,ZoomIn:gt,ZoomInMenuItem:dt,ZoomOut:pt,ZoomOutMenuItem:vt}}))},[]);return{fullScreenPluginInstance:$,getFilePluginInstance:B,openPluginInstance:R,pageNavigationPluginInstance:O,printPluginInstance:H,propertiesPluginInstance:W,rotatePluginInstance:pe,scrollModePluginInstance:ce,searchPluginInstance:ue,selectionModePluginInstance:G,themePluginInstance:ve,zoomPluginInstance:he,install:function(J){oe.forEach(function(V){V.install&&V.install(J)})},renderPageLayer:function(J){return _.createElement(_.Fragment,null,oe.map(function(V,re){return V.renderPageLayer?_.createElement(_.Fragment,{key:re},V.renderPageLayer(J)):_.createElement(_.Fragment,{key:re})}))},renderViewer:function(J){var V=J.slot;return oe.forEach(function(re){re.renderViewer&&(V=re.renderViewer(M(M({},J),{slot:V})))}),V},uninstall:function(J){oe.forEach(function(V){V.uninstall&&V.uninstall(J)})},onDocumentLoad:function(J){oe.forEach(function(V){V.onDocumentLoad&&V.onDocumentLoad(J)})},onAnnotationLayerRender:function(J){oe.forEach(function(V){V.onAnnotationLayerRender&&V.onAnnotationLayerRender(J)})},onTextLayerRender:function(J){oe.forEach(function(V){V.onTextLayerRender&&V.onTextLayerRender(J)})},onViewerStateChange:function(J){var V=J;return oe.forEach(function(re){re.onViewerStateChange&&(V=re.onViewerStateChange(V))}),V},renderDefaultToolbar:h,Toolbar:ae}};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$d.exports=toolbar_min;var libExports$1=lib$d.exports,e=libExports$h,t=reactExports,n=libExports$g,a=libExports$f,r=libExports$e,o=libExports$1;function l(A){var $=Object.create(null);return A&&Object.keys(A).forEach(function(B){if(B!=="default"){var R=Object.getOwnPropertyDescriptor(A,B);Object.defineProperty($,B,R.get?R:{enumerable:!0,get:function(){return A[B]}})}}),$.default=A,Object.freeze($)}var u=l(t),c=function(){return u.createElement(e.Icon,{size:16},u.createElement("path",{d:`M11.5,1.5h11c0.552,0,1,0.448,1,1v20c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h3
            M11.5,10.5c0,0.55-0.3,0.661-0.659,0.248L8,7.5l-2.844,3.246c-0.363,0.414-0.659,0.3-0.659-0.247v-9c0-0.552,0.448-1,1-1h5
            c0.552,0,1,0.448,1,1L11.5,10.5z
            M14.5,6.499h6
            M14.5,10.499h6
            M3.5,14.499h17
            M3.5,18.499h16.497`}))},i=function(){return i=Object.assign||function(A){for(var $,B=1,R=arguments.length;B<R;B++)for(var O in $=arguments[B])Object.prototype.hasOwnProperty.call($,O)&&(A[O]=$[O]);return A},i.apply(this,arguments)},s=function(){return u.createElement(e.Icon,{size:16},u.createElement("path",{d:`M7.618,15.345l8.666-8.666c0.78-0.812,2.071-0.838,2.883-0.058s0.838,2.071,0.058,2.883
            c-0.019,0.02-0.038,0.039-0.058,0.058L7.461,21.305c-1.593,1.593-4.175,1.592-5.767,0s-1.592-4.175,0-5.767c0,0,0,0,0,0
            L13.928,3.305c2.189-2.19,5.739-2.19,7.929-0.001s2.19,5.739,0,7.929l0,0L13.192,19.9`}))},d=function(){return u.createElement(e.Icon,{size:16},u.createElement("path",{d:`M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z
            M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z
            M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z
            M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z`}))},b={left:8,top:0},f={left:-8,top:0},m=function(A){var $=A.attachmentTabContent,B=A.bookmarkTabContent,R=A.store,O=A.thumbnailTabContent,H=A.tabs,W=u.useRef(),pe=u.useContext(e.LocalizationContext).l10n,ce=u.useState(R.get("isCurrentTabOpened")||!1),ue=ce[0],G=ce[1],ve=u.useState(Math.max(R.get("currentTab")||0,0)),he=ve[0],oe=ve[1],ae=u.useContext(e.ThemeContext).direction===e.TextDirection.RightToLeft,J=[{content:O,icon:u.createElement(d,null),title:pe&&pe.defaultLayout?pe.defaultLayout.thumbnail:"Thumbnail"},{content:B,icon:u.createElement(c,null),title:pe&&pe.defaultLayout?pe.defaultLayout.bookmark:"Bookmark"},{content:$,icon:u.createElement(s,null),title:pe&&pe.defaultLayout?pe.defaultLayout.attachment:"Attachment"}],V=H?H(J):J,re=function(se){se>=0&&se<=V.length-1&&(R.update("isCurrentTabOpened",!0),oe(se))},ie=function(se){G(se)};return u.useEffect(function(){return R.subscribe("currentTab",re),R.subscribe("isCurrentTabOpened",ie),function(){R.unsubscribe("currentTab",re),R.unsubscribe("isCurrentTabOpened",ie)}},[]),V.length===0?u.createElement(u.Fragment,null):u.createElement(u.Fragment,null,u.createElement("div",{"data-testid":"default-layout__sidebar",className:e.classNames({"rpv-default-layout__sidebar":!0,"rpv-default-layout__sidebar--opened":ue,"rpv-default-layout__sidebar--ltr":!ae,"rpv-default-layout__sidebar--rtl":ae}),ref:W},u.createElement("div",{className:"rpv-default-layout__sidebar-tabs"},u.createElement("div",{className:"rpv-default-layout__sidebar-headers",role:"tablist","aria-orientation":"vertical"},V.map(function(se,fe){return u.createElement("div",{"aria-controls":"rpv-default-layout__sidebar-content","aria-selected":he===fe,key:fe,className:"rpv-default-layout__sidebar-header",id:"rpv-default-layout__sidebar-tab-".concat(fe),role:"tab"},u.createElement(e.Tooltip,{ariaControlsSuffix:"default-layout-sidebar-tab-".concat(fe),position:ae?e.Position.LeftCenter:e.Position.RightCenter,target:u.createElement(e.MinimalButton,{ariaLabel:se.title,isSelected:he===fe,onClick:function(){return function(Y){if(he===Y){R.update("isCurrentTabOpened",!R.get("isCurrentTabOpened"));var ee=W.current;ee&&ee.style.width&&ee.style.removeProperty("width")}else R.update("currentTab",Y)}(fe)}},se.icon),content:function(){return se.title},offset:ae?f:b}))})),u.createElement("div",{"aria-labelledby":"rpv-default-layout__sidebar-tab-".concat(he),id:"rpv-default-layout__sidebar-content",className:e.classNames({"rpv-default-layout__sidebar-content":!0,"rpv-default-layout__sidebar-content--opened":ue,"rpv-default-layout__sidebar-content--ltr":!ae,"rpv-default-layout__sidebar-content--rtl":ae}),role:"tabpanel",tabIndex:-1},V[he].content))),ue&&u.createElement(e.Splitter,{constrain:function(se){return se.firstHalfPercentage>=20&&se.firstHalfPercentage<=80}}))};defaultLayout_min.BookmarkIcon=c,defaultLayout_min.FileIcon=s,defaultLayout_min.ThumbnailIcon=d,defaultLayout_min.defaultLayoutPlugin=function(A){var $=u.useMemo(function(){return e.createStore({isCurrentTabOpened:!1,currentTab:0})},[]),B=n.attachmentPlugin(),R=a.bookmarkPlugin(),O=r.thumbnailPlugin(A?A.thumbnailPlugin:{}),H=o.toolbarPlugin(A?A.toolbarPlugin:{}),W=B.Attachments,pe=R.Bookmarks,ce=O.Thumbnails,ue=H.Toolbar,G=A?A.sidebarTabs:function(he){return he},ve=[B,R,O,H];return{attachmentPluginInstance:B,bookmarkPluginInstance:R,thumbnailPluginInstance:O,toolbarPluginInstance:H,activateTab:function(he){$.update("currentTab",he)},toggleTab:function(he){var oe=$.get("currentTab");$.update("isCurrentTabOpened",!$.get("isCurrentTabOpened")),oe!==he&&$.update("currentTab",he)},install:function(he){ve.forEach(function(oe){oe.install&&oe.install(he)})},renderPageLayer:function(he){return u.createElement(u.Fragment,null,ve.map(function(oe,ae){return oe.renderPageLayer?u.createElement(u.Fragment,{key:ae},oe.renderPageLayer(he)):u.createElement(u.Fragment,{key:ae},u.createElement(u.Fragment,null))}))},renderViewer:function(he){var oe=he.slot;ve.forEach(function(J){J.renderViewer&&(oe=J.renderViewer(i(i({},he),{slot:oe})))});var ae=oe.subSlot&&oe.subSlot.attrs?{className:oe.subSlot.attrs.className,"data-testid":oe.subSlot.attrs["data-testid"],ref:oe.subSlot.attrs.ref,style:oe.subSlot.attrs.style}:{};return oe.children=u.createElement("div",{className:"rpv-default-layout__container"},u.createElement("div",{"data-testid":"default-layout__main",className:e.classNames({"rpv-default-layout__main":!0,"rpv-default-layout__main--rtl":he.themeContext.direction===e.TextDirection.RightToLeft})},u.createElement(m,{attachmentTabContent:u.createElement(W,null),bookmarkTabContent:u.createElement(pe,null),store:$,thumbnailTabContent:u.createElement(ce,null),tabs:G}),u.createElement("div",{className:"rpv-default-layout__body","data-testid":"default-layout__body"},u.createElement("div",{className:"rpv-default-layout__toolbar"},A&&A.renderToolbar?A.renderToolbar(ue):u.createElement(ue,null)),u.createElement("div",i({},ae),oe.subSlot.children))),oe.children),oe.subSlot.attrs={},oe.subSlot.children=u.createElement(u.Fragment,null),oe},uninstall:function(he){ve.forEach(function(oe){oe.uninstall&&oe.uninstall(he)})},onDocumentLoad:function(he){ve.forEach(function(oe){oe.onDocumentLoad&&oe.onDocumentLoad(he)}),A&&A.setInitialTab&&A.setInitialTab(he.doc).then(function(oe){$.update("currentTab",oe),$.update("isCurrentTabOpened",!0)})},onAnnotationLayerRender:function(he){ve.forEach(function(oe){oe.onAnnotationLayerRender&&oe.onAnnotationLayerRender(he)})},onTextLayerRender:function(he){ve.forEach(function(oe){oe.onTextLayerRender&&oe.onTextLayerRender(he)})},onViewerStateChange:function(he){var oe=he;return ve.forEach(function(ae){ae.onViewerStateChange&&(oe=ae.onViewerStateChange(oe))}),oe}}},defaultLayout_min.setInitialTabFromPageMode=function(A){return new Promise(function($,B){A.getPageMode().then(function(R){if(R)switch(R){case e.PageMode.Attachments:$(2);break;case e.PageMode.Bookmarks:$(1);break;case e.PageMode.Thumbnails:$(0);break;default:$(-1)}else $(-1)})})};/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */lib$h.exports=defaultLayout_min;var libExports=lib$h.exports;const PDFPlayer=({lessonId:A,enrollmentId:$,userId:B,onLessonStatusChange:R})=>{const[O,H]=reactExports.useState(null),[W,pe]=reactExports.useState("completed"),ce=reactExports.useRef(0),ue=reactExports.useRef(null),G=reactExports.useRef(null),{Certificate:ve,handleSaveResponse:he}=useCertificate({enrollmentId:parseInt($,10)}),oe=libExports.defaultLayoutPlugin({renderToolbar:V=>jsxRuntimeExports.jsx(V,{children:re=>{const{CurrentPageInput:ie,GoToNextPage:se,GoToPreviousPage:fe,NumberOfPages:Y,Zoom:ee,ZoomIn:Ee,ZoomOut:be}=re;return jsxRuntimeExports.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsx("div",{style:{padding:"0 2px"},children:jsxRuntimeExports.jsx(fe,{})}),jsxRuntimeExports.jsxs("div",{style:{padding:"0 2px",display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsx(ie,{})," / ",jsxRuntimeExports.jsx(Y,{})]}),jsxRuntimeExports.jsx("div",{style:{padding:"0 2px"},children:jsxRuntimeExports.jsx(se,{})}),jsxRuntimeExports.jsx("div",{style:{padding:"0 2px"},children:jsxRuntimeExports.jsx(be,{})}),jsxRuntimeExports.jsx("div",{style:{padding:"0 2px"},children:jsxRuntimeExports.jsx(ee,{})}),jsxRuntimeExports.jsx("div",{style:{padding:"0 2px"},children:jsxRuntimeExports.jsx(Ee,{})})]})}})}),ae=V=>{const re=Math.floor(V/3600),ie=Math.floor(V%3600/60),se=(V%60).toFixed(2),fe=String(re).padStart(2,"0"),Y=String(ie).padStart(2,"0"),ee=Number(se).toFixed(2).padStart(5,"0");return`${fe}:${Y}:${ee}`};reactExports.useEffect(()=>(ue.current=window.setInterval(()=>{ce.current+=1},1e3),()=>{ue.current&&window.clearInterval(ue.current),J()}),[]),reactExports.useEffect(()=>{if(!A||!$||!B){console.error("Missing required parameters.");return}const V=async()=>{const ie=sessionStorage.getItem("token");if(!ie){console.error("No token found, user is not authenticated.");return}try{const fe=(await axios.get(`https://knowvara.com/api/api/lessons/${A}/${$}`,{headers:{Authorization:`Bearer ${ie}`}})).data;H(fe.contentPath),re(A,$,B)}catch(se){console.error("Error fetching lesson details:",se)}},re=async(ie,se,fe)=>{console.log("Initializing lesson status to 'completed'");const Y=sessionStorage.getItem("token");if(!Y){console.error("No token found, user is not authenticated.");return}try{pe("completed"),await axios.post("https://knowvara.com/api/api/lessons/scorm/save",{lessonId:ie,enrollmentId:se,userId:fe,scormData:{"cmi.core.lesson_status":"completed","cmi.core.session_time":ae(ce.current)}},{headers:{Authorization:`Bearer ${Y}`}}),R(ie,"completed")}catch(ee){console.error("Error initializing lesson status:",ee)}};V()},[A,$,B]);const J=async()=>{if(!A||!$||!B)return;const V=sessionStorage.getItem("token");if(!V){console.error("No token found, user is not authenticated.");return}const re=ae(ce.current);try{const ie={"cmi.core.session_time":re,"cmi.core.lesson_status":W},se=await axios.post("https://knowvara.com/api/api/lessons/scorm/save",{lessonId:A,enrollmentId:$,userId:B,scormData:ie},{headers:{Authorization:`Bearer ${V}`}});he(se.data)}catch(ie){console.error("Error saving lesson status:",ie)}};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full w-full",children:[ve,O?jsxRuntimeExports.jsx("div",{className:"flex-grow flex flex-col p-2",children:jsxRuntimeExports.jsx("div",{className:"flex-grow overflow-auto",ref:G,style:{height:"90vh"},children:jsxRuntimeExports.jsx(libExports$h.Worker,{workerUrl:"/pdf.worker.min.js",children:jsxRuntimeExports.jsx(libExports$h.Viewer,{fileUrl:O,plugins:[oe]})})})}):jsxRuntimeExports.jsx("div",{className:"flex-grow flex items-center justify-center",children:jsxRuntimeExports.jsx("p",{className:"text-white",children:"Loading PDF..."})})]})},NextLessonButton=({nextLessonId:A,nextLessonType:$,courseId:B,enrollmentId:R,userId:O})=>{const H=useNavigate(),W=async()=>{if(A&&$){try{const pe=sessionStorage.getItem("token");if(!pe){console.error("No token found, user is not authenticated.");return}const ce={userId:O,type:"lessonLaunch",enrollmentId:R,courseId:B,lessonId:A};await axios.post("https://knowvara.com/api/api/actions/log",ce,{headers:{Authorization:`Bearer ${pe}`}}),console.log("Action logged successfully for Next Lesson")}catch(pe){console.error("Error logging action:",pe)}H(`/course-player/${A}/${R}/${B}/${O}/${$}`)}else alert("No next lesson found.")};return jsxRuntimeExports.jsx("div",{className:"flex justify-end p-2 text-white text-sm",children:jsxRuntimeExports.jsx("button",{className:"px-3 py-1 lms-button text-xs border border-white",onClick:W,disabled:!A||!$,children:"Next Lesson"})})},XAPIPlayer=({lessonId:A,enrollmentId:$,userId:B,userEmail:R,userName:O,onLessonStatusChange:H})=>{const[W,pe]=reactExports.useState(null),[ce,ue]=reactExports.useState(!0),[G,ve]=reactExports.useState(""),[he,oe]=reactExports.useState(null),ae=reactExports.useRef(null);if(reactExports.useEffect(()=>{(async()=>{ue(!0);const se=sessionStorage.getItem("token");if(!se){console.error("No token found, user is not authenticated."),ue(!1);return}try{const Y=(await axios.get(`https://knowvara.com/api/api/lessons/${A}/${$}`,{headers:{Authorization:`Bearer ${se}`}})).data;pe(Y);const ee=await axios.get(`https://knowvara.com/api/api/lessons/gocstatus/${A}/${B}/${$}`,{headers:{Authorization:`Bearer ${se}`}}),{lessonStatusId:Ee}=ee.data;if(!Ee){console.error("Failed to retrieve lessonStatusId from the response."),ue(!1);return}oe(Ee);const be=`KV${$}U${B}B${Ee}`;ve(be)}catch(fe){console.error("Error fetching lesson or creating lessonStatus:",fe)}finally{ue(!1)}})()},[A,$,B,R,O]),reactExports.useEffect(()=>{if(he){const ie=sessionStorage.getItem("token");if(!ie){console.error("No token found, user is not authenticated.");return}const se=`https://knowvara.com/api/api/sse/lessonStatus?lessonStatusId=${he}`,fe=new EventSource(`${se}&token=${encodeURIComponent(ie)}`);return ae.current=fe,fe.onmessage=Y=>{try{const ee=JSON.parse(Y.data);ee.lessonStatusId===he&&(ee.status==="completed"||ee.status==="passed")&&H(A,ee.status)}catch(ee){console.error("Error parsing SSE data:",ee)}},fe.onerror=Y=>{console.error("SSE error:",Y),fe.close()},()=>{ae.current&&ae.current.close()}}},[he,A,H]),ce)return jsxRuntimeExports.jsx("div",{children:"Loading..."});if(!W)return jsxRuntimeExports.jsx("div",{children:"No lesson found"});if(!G)return jsxRuntimeExports.jsx("div",{children:"Error generating authentication code."});const J={objectType:"Agent",name:O,mbox:`mailto:${R}`},V=encodeURIComponent(JSON.stringify(J)),re=`${W.contentPath}?auth=${encodeURIComponent(G)}&activity_id=${W.Id}&registration=${encodeURIComponent(G)}&endpoint=${encodeURIComponent("https://knowvara.com/api/api/lrs/")}&actor=${V}`;return jsxRuntimeExports.jsx("div",{className:"xapi-player-container",children:jsxRuntimeExports.jsx("iframe",{src:re,title:"xAPI Course",className:"xapi-player",width:"100%",height:"800px",frameBorder:"0",allowFullScreen:!0})})},SCORM2004Player=({lessonId:A,enrollmentId:$,userId:B,onLessonStatusChange:R})=>{const[O,H]=reactExports.useState(null),[W,pe]=reactExports.useState(!0),ce=reactExports.useRef({"cmi.completion_status":"incomplete","cmi.success_status":"","cmi.score.raw":"","cmi.session_time":"","cmi.suspend_data":"","cmi.core.student_name":"Brian"}),ue=reactExports.useRef("incomplete"),G=reactExports.useRef("0"),ve=reactExports.useRef(!1),he=reactExports.useRef(!1);reactExports.useEffect(()=>{(async()=>{var re,ie;pe(!0);const V=sessionStorage.getItem("token");if(!V){console.error("No token found, user is not authenticated."),pe(!1);return}try{const fe=(await axios.get(`https://knowvara.com/api/api/lessons/${A}/${$}`,{headers:{Authorization:`Bearer ${V}`}})).data;H(fe),console.log("Fetched Lesson Data:",fe),fe.suspendData?(ce.current={"cmi.completion_status":fe.status||"incomplete","cmi.success_status":((re=fe.score)==null?void 0:re.toString())||"","cmi.score.raw":((ie=fe.score)==null?void 0:ie.toString())||"","cmi.session_time":fe.timeSpent?oe(fe.timeSpent):"","cmi.suspend_data":fe.suspendData||"","cmi.core.student_name":"Brian"},ue.current=ce.current["cmi.completion_status"]):(ce.current={...ce.current,"cmi.completion_status":"incomplete"},he.current||(R(A,"incomplete"),he.current=!0));const Y={Initialize:ee=>(G.current="0",ve.current=!0,console.log("Initialize called with param:",ee),"true"),Terminate:ee=>(console.log("Terminate called with param:",ee),ae(),"true"),GetValue:ee=>ve.current?(console.log(`GetValue called with key: ${ee}`),ce.current[ee]||""):(G.current="301",""),SetValue:(ee,Ee)=>{if(console.log(`SetValue called with key: ${ee}, value: ${Ee}`),ee==="cmi.completion_status"){const be=ce.current[ee];be!==Ee&&(console.log(`Completion status changed from ${be} to ${Ee}`),R(A,Ee),ue.current=Ee)}return ce.current={...ce.current,[ee]:Ee},"true"},Commit:ee=>(console.log("Commit called with param:",ee),ae(),"true"),GetLastError:()=>G.current,GetErrorString:ee=>(console.log("Error String requested for error code:",ee),"No error"),GetDiagnostic:ee=>(console.log("Diagnostic requested for error code:",ee),"No diagnostic information available")};window.API_1484_11=Y,console.log("SCORM2004 API set up:",window.API_1484_11)}catch(se){console.error("Error fetching lesson:",se)}finally{pe(!1)}})()},[A,$,B]);const oe=J=>{const V=Math.floor(J/3600).toString().padStart(4,"0"),re=Math.floor(J%3600/60).toString().padStart(2,"0"),ie=Math.floor(J%60).toString().padStart(2,"0");return`P${V}H${re}M${ie}S`},ae=async()=>{console.log("Saving SCORM data:",ce.current);const J=sessionStorage.getItem("token");if(!J){console.error("No token found, user is not authenticated.");return}ce.current["cmi.completion_status"]||(ce.current["cmi.completion_status"]="incomplete");try{await axios.post("https://knowvara.com/api/api/lessons/scorm2004/save",{lessonId:A,enrollmentId:$,userId:B,scormData:ce.current},{headers:{Authorization:`Bearer ${J}`}}),console.log("SCORM data saved successfully.")}catch(V){console.error("Error saving SCORM data:",V)}};return reactExports.useEffect(()=>{if(window.API_1484_11&&!ve.current){const J=window.API_1484_11.Initialize("");console.log("SCORM Initialize result:",J)}return()=>{if(window.API_1484_11&&ve.current){const J=window.API_1484_11.Terminate("");console.log("SCORM Terminate result:",J)}}},[]),W?jsxRuntimeExports.jsx("div",{children:"Loading..."}):O?jsxRuntimeExports.jsx("div",{className:"scorm-player-container",children:O&&jsxRuntimeExports.jsx("iframe",{src:O.contentPath,title:"SCORM Course",className:"scorm-player",onLoad:()=>{console.log("SCORM content loaded.")}})}):jsxRuntimeExports.jsx("div",{children:"No lesson found"})},LivePlayer=({lessonId:A,enrollmentId:$,onLessonStatusChange:B})=>{const[R,O]=reactExports.useState(null),[H,W]=reactExports.useState(null),[pe,ce]=reactExports.useState([]),[ue,G]=reactExports.useState(""),[ve,he]=reactExports.useState(""),[oe,ae]=reactExports.useState(void 0),[J,V]=reactExports.useState(!1),[re,ie]=reactExports.useState("calendar"),[se,fe]=reactExports.useState(null),[Y,ee]=reactExports.useState(!1),[Ee,be]=reactExports.useState(!1),te=async()=>{const Be=sessionStorage.getItem("token");if(!Be){console.error("No token found, user is not authenticated.");return}try{V(!0);const Qe=(await axios.get(`https://knowvara.com/api/api/lessons/${A}/${$}`,{headers:{Authorization:`Bearer ${Be}`}})).data;O(Qe)}catch(Ce){console.error("Error fetching lesson:",Ce),O(null)}finally{V(!1)}},ge=async()=>{const Be=sessionStorage.getItem("token");if(!Be){console.error("No token found, user is not authenticated.");return}try{V(!0);const Ce=await axios.get("https://knowvara.com/api/api/events/registrations",{headers:{Authorization:`Bearer ${Be}`},params:{lessonId:A}});if(Ce.data&&Object.keys(Ce.data).length>0){const Qe=Ce.data;W(Qe)}else W(null)}catch(Ce){console.error("Error fetching registered event:",Ce)}finally{V(!1)}},de=async()=>{const Be=sessionStorage.getItem("token");if(!Be){console.error("No token found, user is not authenticated.");return}try{V(!0);const Ce=await axios.get(`https://knowvara.com/api/api/events/lesson/${A}`,{headers:{Authorization:`Bearer ${Be}`},params:{viewAll:!1}});ce(Ce.data)}catch(Ce){console.error("Error fetching upcoming events:",Ce)}finally{V(!1)}};reactExports.useEffect(()=>{(async()=>{await te(),await ge()})()},[A,$]),reactExports.useEffect(()=>{R&&R.status!=="completed"&&(H||de())},[R,H]);const Ae=async Be=>{const Ce=sessionStorage.getItem("token");if(!Ce){console.error("No token found, user is not authenticated.");return}try{V(!0),await axios.post(`https://knowvara.com/api/api/events/${Be}/register`,{},{headers:{Authorization:`Bearer ${Ce}`}}),ge()}catch(Qe){console.error("Error registering for event:",Qe)}finally{V(!1)}},Fe=async()=>{if(!H)return;const Be=sessionStorage.getItem("token");if(!Be){console.error("No token found, user is not authenticated.");return}try{V(!0),await axios.delete(`https://knowvara.com/api/api/events/registrations/${H.RegistrationId}`,{headers:{Authorization:`Bearer ${Be}`}}),W(null),de()}catch(Ce){console.error("Error unregistering from event:",Ce)}finally{V(!1)}},ye=async Be=>{Be.preventDefault();const Ce=sessionStorage.getItem("token");if(!Ce){console.error("No token found, user is not authenticated.");return}try{V(!0),await axios.post("https://knowvara.com/api/api/events/verify-completion",{lessonId:A,enrollmentId:$,completionCode:ue},{headers:{Authorization:`Bearer ${Ce}`}}),he("Lesson marked as completed!"),ae("success"),be(!0),O(Qe=>Qe&&{...Qe,status:"completed"}),B(A,"completed")}catch(Qe){console.error("Error verifying completion code:",Qe),he("Invalid Completion Code"),ae("error")}finally{V(!1)}},Te=Be=>{const Ce=Be.event.extendedProps;fe(Ce),ee(!0)},Ue=async()=>{se&&(await Ae(se.Id),ee(!1))};return J?jsxRuntimeExports.jsx("div",{children:"Loading..."}):R?R.status==="completed"?jsxRuntimeExports.jsxs("div",{className:"bg-indigo-100 min-h-[100%] p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold mb-4",children:"Event Details"}),H?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{className:"text-lg mb-2",children:[jsxRuntimeExports.jsx("strong",{children:"Date & Time:"})," ",new Date(H.DateTime).toLocaleString()]}),jsxRuntimeExports.jsxs("p",{className:"text-md",children:[jsxRuntimeExports.jsx("strong",{children:"Instructor:"})," ",H.InstructorName]}),jsxRuntimeExports.jsxs("p",{className:"text-md mb-4",children:[jsxRuntimeExports.jsx("strong",{children:"Location:"})," ",H.Location]}),ve&&jsxRuntimeExports.jsx("p",{className:`mt-2 text-lg p-4 flex flex-col w-full lg:w-1/2 mx-auto items-center justify-center ${oe==="success"?"text-green-500 bg-white rounded-lg border shadow":"text-red-500"}`,children:ve}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-center text-green-600 font-semibold text-lg",children:"You have successfully completed this event."})]}):jsxRuntimeExports.jsx("p",{className:"mt-4 text-center text-green-600 font-semibold text-lg",children:"You have successfully completed this event."})]}):H?jsxRuntimeExports.jsxs("div",{className:"bg-indigo-100 min-h-[100%] p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold mb-4",children:"Event Details"}),jsxRuntimeExports.jsxs("p",{className:"text-lg mb-2",children:[jsxRuntimeExports.jsx("strong",{children:"Date & Time:"})," ",new Date(H.DateTime).toLocaleString()]}),jsxRuntimeExports.jsxs("p",{className:"text-md",children:[jsxRuntimeExports.jsx("strong",{children:"Instructor:"})," ",H.InstructorName]}),jsxRuntimeExports.jsxs("p",{className:"text-md mb-4",children:[jsxRuntimeExports.jsx("strong",{children:"Location:"})," ",H.Location]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-row mb-8",children:[H.OnlineMeetingLink&&jsxRuntimeExports.jsx("a",{href:H.OnlineMeetingLink,target:"_blank",rel:"noopener noreferrer",className:"lms-button text-white px-4 py-2 rounded mr-2",children:"Join Online Meeting"}),jsxRuntimeExports.jsx("button",{onClick:Fe,className:"lms-button text-white px-4 py-2 rounded",children:"Reschedule"})]}),ve&&jsxRuntimeExports.jsx("p",{className:`mt-2 text-lg p-4 flex flex-col w-full lg:w-1/2 mx-auto items-center justify-center ${oe==="success"?"text-green-500 bg-white rounded-lg border shadow":"text-red-500"}`,children:ve}),H.CompletionCode&&!Ee&&jsxRuntimeExports.jsxs("form",{onSubmit:ye,className:"mt-2 border rounded-lg p-4 bg-white flex flex-col shadow w-full lg:w-1/2 mx-auto",children:[jsxRuntimeExports.jsxs("label",{className:"block text-gray-700 text-md",children:["If you have completed this event and the instructor provided you a"," ",jsxRuntimeExports.jsx("strong",{children:"Completion Code"}),", enter it here:"]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-row mx-auto",children:[jsxRuntimeExports.jsx("input",{type:"text",value:ue,onChange:Be=>G(Be.target.value),className:"w-64 px-3 py-2 border rounded mt-2 mr-2",placeholder:"Completion Code",required:!0}),jsxRuntimeExports.jsx("button",{type:"submit",className:"mt-2 lms-button text-white px-4 py-2 rounded",children:"Submit"})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"bg-indigo-100 min-h-[100%] p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold",children:"Upcoming Events"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("button",{onClick:()=>ie("calendar"),className:"px-4 py-2 rounded mr-2 lms-button",children:"Calendar View"}),jsxRuntimeExports.jsx("button",{onClick:()=>ie("list"),className:`mr-2 px-4 py-2 rounded ${re==="list"?"lms-button text-white":"lms-button"}`,children:"List View"})]})]}),jsxRuntimeExports.jsx("p",{className:"mb-6 text-md",children:"Please choose a live event to attend to complete this Live activity."}),re==="list"?pe.length>0?jsxRuntimeExports.jsxs("table",{className:"min-w-full bg-white",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"py-2 px-4 border-b",children:"Date & Time"}),jsxRuntimeExports.jsx("th",{className:"py-2 px-4 border-b",children:"Instructor"}),jsxRuntimeExports.jsx("th",{className:"py-2 px-4 border-b",children:"Location"}),jsxRuntimeExports.jsx("th",{className:"py-2 px-4 border-b",children:"Capacity"}),jsxRuntimeExports.jsx("th",{className:"py-2 px-4 border-b text-center",children:"Register"})]})}),jsxRuntimeExports.jsx("tbody",{children:pe.map(Be=>jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"py-2 px-4 border-b",children:new Date(Be.DateTime).toLocaleString()}),jsxRuntimeExports.jsx("td",{className:"py-2 px-4 border-b",children:Be.InstructorName}),jsxRuntimeExports.jsx("td",{className:"py-2 px-4 border-b",children:Be.Location}),jsxRuntimeExports.jsx("td",{className:"py-2 px-4 border-b",children:Be.Capacity}),jsxRuntimeExports.jsx("td",{className:"py-2 px-4 border-b text-center",children:jsxRuntimeExports.jsx("button",{onClick:()=>Ae(Be.Id),className:"lms-button text-white px-4 py-2 rounded",children:"Register"})})]},Be.Id))})]}):jsxRuntimeExports.jsx("p",{children:"No upcoming events available at this time."}):pe.length>0?jsxRuntimeExports.jsx("div",{className:"p-8 border rounded-lg bg-white",children:jsxRuntimeExports.jsx(FullCalendar,{plugins:[index,index$1,index$2],initialView:"dayGridMonth",events:pe.map(Be=>({id:Be.Id.toString(),title:` - ${Be.InstructorName}`,start:Be.DateTime,extendedProps:{...Be}})),eventClick:Te,height:"auto"})}):jsxRuntimeExports.jsx("p",{children:"No upcoming events available at this time."}),Y&&se&&jsxRuntimeExports.jsxs(Modal,{title:`Register for ${se.InstructorName}'s Event`,onClose:()=>ee(!1),onConfirm:Ue,confirmText:"Register",widthClassName:"max-w-lg",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Date & Time:"})," ",new Date(se.DateTime).toLocaleString()]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Location:"})," ",se.Location]}),jsxRuntimeExports.jsx("p",{children:"Are you sure you want to register for this event?"})]})]}):jsxRuntimeExports.jsx("div",{children:"No lesson found"})};var loadScript=function A($,B,R){var O=document.head||document.getElementsByTagName("head")[0],H=document.createElement("script");typeof B=="function"&&(R=B,B={}),B=B||{},R=R||function(){},H.type=B.type||"text/javascript",H.charset=B.charset||"utf8",H.async="async"in B?!!B.async:!0,H.src=$,B.attrs&&setAttributes(H,B.attrs),B.text&&(H.text=""+B.text);var W="onload"in H?stdOnEnd:ieOnEnd;W(H,R),H.onload||stdOnEnd(H,R),O.appendChild(H)};function setAttributes(A,$){for(var B in $)A.setAttribute(B,$[B])}function stdOnEnd(A,$){A.onload=function(){this.onerror=this.onload=null,$(null,A)},A.onerror=function(){this.onerror=this.onload=null,$(new Error("Failed to load "+this.src),A)}}function ieOnEnd(A,$){A.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,$(null,A))}}var isMergeableObject=function A($){return isNonNullObject($)&&!isSpecial($)};function isNonNullObject(A){return!!A&&typeof A=="object"}function isSpecial(A){var $=Object.prototype.toString.call(A);return $==="[object RegExp]"||$==="[object Date]"||isReactElement(A)}var canUseSymbol=typeof Symbol=="function"&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(A){return A.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(A){return Array.isArray(A)?[]:{}}function cloneUnlessOtherwiseSpecified(A,$){return $.clone!==!1&&$.isMergeableObject(A)?deepmerge(emptyTarget(A),A,$):A}function defaultArrayMerge(A,$,B){return A.concat($).map(function(R){return cloneUnlessOtherwiseSpecified(R,B)})}function getMergeFunction(A,$){if(!$.customMerge)return deepmerge;var B=$.customMerge(A);return typeof B=="function"?B:deepmerge}function getEnumerableOwnPropertySymbols(A){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(A).filter(function($){return Object.propertyIsEnumerable.call(A,$)}):[]}function getKeys(A){return Object.keys(A).concat(getEnumerableOwnPropertySymbols(A))}function propertyIsOnObject(A,$){try{return $ in A}catch{return!1}}function propertyIsUnsafe(A,$){return propertyIsOnObject(A,$)&&!(Object.hasOwnProperty.call(A,$)&&Object.propertyIsEnumerable.call(A,$))}function mergeObject(A,$,B){var R={};return B.isMergeableObject(A)&&getKeys(A).forEach(function(O){R[O]=cloneUnlessOtherwiseSpecified(A[O],B)}),getKeys($).forEach(function(O){propertyIsUnsafe(A,O)||(propertyIsOnObject(A,O)&&B.isMergeableObject($[O])?R[O]=getMergeFunction(O,B)(A[O],$[O],B):R[O]=cloneUnlessOtherwiseSpecified($[O],B))}),R}function deepmerge(A,$,B){B=B||{},B.arrayMerge=B.arrayMerge||defaultArrayMerge,B.isMergeableObject=B.isMergeableObject||isMergeableObject,B.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var R=Array.isArray($),O=Array.isArray(A),H=R===O;return H?R?B.arrayMerge(A,$,B):mergeObject(A,$,B):cloneUnlessOtherwiseSpecified($,B)}deepmerge.all=function A($,B){if(!Array.isArray($))throw new Error("first argument should be an array");return $.reduce(function(R,O){return deepmerge(R,O,B)},{})};var deepmerge_1=deepmerge,cjs=deepmerge_1,__create$4=Object.create,__defProp$6=Object.defineProperty,__getOwnPropDesc$6=Object.getOwnPropertyDescriptor,__getOwnPropNames$6=Object.getOwnPropertyNames,__getProtoOf$4=Object.getPrototypeOf,__hasOwnProp$6=Object.prototype.hasOwnProperty,__export$6=(A,$)=>{for(var B in $)__defProp$6(A,B,{get:$[B],enumerable:!0})},__copyProps$6=(A,$,B,R)=>{if($&&typeof $=="object"||typeof $=="function")for(let O of __getOwnPropNames$6($))!__hasOwnProp$6.call(A,O)&&O!==B&&__defProp$6(A,O,{get:()=>$[O],enumerable:!(R=__getOwnPropDesc$6($,O))||R.enumerable});return A},__toESM$4=(A,$,B)=>(B=A!=null?__create$4(__getProtoOf$4(A)):{},__copyProps$6(!A||!A.__esModule?__defProp$6(B,"default",{value:A,enumerable:!0}):B,A)),__toCommonJS$6=A=>__copyProps$6(__defProp$6({},"__esModule",{value:!0}),A),utils_exports={};__export$6(utils_exports,{callPlayer:()=>callPlayer,getConfig:()=>getConfig,getSDK:()=>getSDK,isBlobUrl:()=>isBlobUrl,isMediaStream:()=>isMediaStream,lazy:()=>lazy,omit:()=>omit,parseEndTime:()=>parseEndTime,parseStartTime:()=>parseStartTime,queryString:()=>queryString,randomString:()=>randomString,supportsWebKitPresentationMode:()=>supportsWebKitPresentationMode});var utils=__toCommonJS$6(utils_exports),import_react$2=__toESM$4(reactExports),import_load_script=__toESM$4(loadScript),import_deepmerge$1=__toESM$4(cjs);const lazy=A=>import_react$2.default.lazy(async()=>{const $=await A();return typeof $.default=="function"?$:$.default}),MATCH_START_QUERY=/[?&#](?:start|t)=([0-9hms]+)/,MATCH_END_QUERY=/[?&#]end=([0-9hms]+)/,MATCH_START_STAMP=/(\d+)(h|m|s)/g,MATCH_NUMERIC=/^\d+$/;function parseTimeParam(A,$){if(A instanceof Array)return;const B=A.match($);if(B){const R=B[1];if(R.match(MATCH_START_STAMP))return parseTimeString(R);if(MATCH_NUMERIC.test(R))return parseInt(R)}}function parseTimeString(A){let $=0,B=MATCH_START_STAMP.exec(A);for(;B!==null;){const[,R,O]=B;O==="h"&&($+=parseInt(R,10)*60*60),O==="m"&&($+=parseInt(R,10)*60),O==="s"&&($+=parseInt(R,10)),B=MATCH_START_STAMP.exec(A)}return $}function parseStartTime(A){return parseTimeParam(A,MATCH_START_QUERY)}function parseEndTime(A){return parseTimeParam(A,MATCH_END_QUERY)}function randomString(){return Math.random().toString(36).substr(2,5)}function queryString(A){return Object.keys(A).map($=>`${$}=${A[$]}`).join("&")}function getGlobal(A){return window[A]?window[A]:window.exports&&window.exports[A]?window.exports[A]:window.module&&window.module.exports&&window.module.exports[A]?window.module.exports[A]:null}const requests={},getSDK=function A($,B,R=null,O=()=>!0,H=import_load_script.default){const W=getGlobal(B);return W&&O(W)?Promise.resolve(W):new Promise((pe,ce)=>{if(requests[$]){requests[$].push({resolve:pe,reject:ce});return}requests[$]=[{resolve:pe,reject:ce}];const ue=G=>{requests[$].forEach(ve=>ve.resolve(G))};if(R){const G=window[R];window[R]=function(){G&&G(),ue(getGlobal(B))}}H($,G=>{G?(requests[$].forEach(ve=>ve.reject(G)),requests[$]=null):R||ue(getGlobal(B))})})};function getConfig(A,$){return(0,import_deepmerge$1.default)($.config,A.config)}function omit(A,...$){const B=[].concat(...$),R={},O=Object.keys(A);for(const H of O)B.indexOf(H)===-1&&(R[H]=A[H]);return R}function callPlayer(A,...$){if(!this.player||!this.player[A]){let B=`ReactPlayer: ${this.constructor.displayName} player could not call %c${A}%c – `;return this.player?this.player[A]||(B+="The method was not available"):B+="The player was not available",console.warn(B,"font-weight: bold",""),null}return this.player[A](...$)}function isMediaStream(A){return typeof window<"u"&&typeof window.MediaStream<"u"&&A instanceof window.MediaStream}function isBlobUrl(A){return/^blob:/.test(A)}function supportsWebKitPresentationMode(A=document.createElement("video")){const $=/iPhone|iPod/.test(navigator.userAgent)===!1;return A.webkitSupportsPresentationMode&&typeof A.webkitSetPresentationMode=="function"&&$}function enableStubOn(A){return A}var __defProp$5=Object.defineProperty,__getOwnPropDesc$5=Object.getOwnPropertyDescriptor,__getOwnPropNames$5=Object.getOwnPropertyNames,__hasOwnProp$5=Object.prototype.hasOwnProperty,__export$5=(A,$)=>{for(var B in $)__defProp$5(A,B,{get:$[B],enumerable:!0})},__copyProps$5=(A,$,B,R)=>{if($&&typeof $=="object"||typeof $=="function")for(let O of __getOwnPropNames$5($))!__hasOwnProp$5.call(A,O)&&O!==B&&__defProp$5(A,O,{get:()=>$[O],enumerable:!(R=__getOwnPropDesc$5($,O))||R.enumerable});return A},__toCommonJS$5=A=>__copyProps$5(__defProp$5({},"__esModule",{value:!0}),A),patterns_exports={};__export$5(patterns_exports,{AUDIO_EXTENSIONS:()=>AUDIO_EXTENSIONS,DASH_EXTENSIONS:()=>DASH_EXTENSIONS,FLV_EXTENSIONS:()=>FLV_EXTENSIONS,HLS_EXTENSIONS:()=>HLS_EXTENSIONS,MATCH_URL_DAILYMOTION:()=>MATCH_URL_DAILYMOTION,MATCH_URL_FACEBOOK:()=>MATCH_URL_FACEBOOK,MATCH_URL_FACEBOOK_WATCH:()=>MATCH_URL_FACEBOOK_WATCH,MATCH_URL_KALTURA:()=>MATCH_URL_KALTURA,MATCH_URL_MIXCLOUD:()=>MATCH_URL_MIXCLOUD,MATCH_URL_MUX:()=>MATCH_URL_MUX,MATCH_URL_SOUNDCLOUD:()=>MATCH_URL_SOUNDCLOUD,MATCH_URL_STREAMABLE:()=>MATCH_URL_STREAMABLE,MATCH_URL_TWITCH_CHANNEL:()=>MATCH_URL_TWITCH_CHANNEL,MATCH_URL_TWITCH_VIDEO:()=>MATCH_URL_TWITCH_VIDEO,MATCH_URL_VIDYARD:()=>MATCH_URL_VIDYARD,MATCH_URL_VIMEO:()=>MATCH_URL_VIMEO,MATCH_URL_WISTIA:()=>MATCH_URL_WISTIA,MATCH_URL_YOUTUBE:()=>MATCH_URL_YOUTUBE,VIDEO_EXTENSIONS:()=>VIDEO_EXTENSIONS,canPlay:()=>canPlay});var patterns=__toCommonJS$5(patterns_exports),import_utils$3=utils;const MATCH_URL_YOUTUBE=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,MATCH_URL_SOUNDCLOUD=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,MATCH_URL_VIMEO=/vimeo\.com\/(?!progressive_redirect).+/,MATCH_URL_MUX=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,MATCH_URL_FACEBOOK=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,MATCH_URL_FACEBOOK_WATCH=/^https?:\/\/fb\.watch\/.+$/,MATCH_URL_STREAMABLE=/streamable\.com\/([a-z0-9]+)$/,MATCH_URL_WISTIA=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,MATCH_URL_TWITCH_VIDEO=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,MATCH_URL_TWITCH_CHANNEL=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,MATCH_URL_DAILYMOTION=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,MATCH_URL_MIXCLOUD=/mixcloud\.com\/([^/]+\/[^/]+)/,MATCH_URL_VIDYARD=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,MATCH_URL_KALTURA=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,AUDIO_EXTENSIONS=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,VIDEO_EXTENSIONS=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,HLS_EXTENSIONS=/\.(m3u8)($|\?)/i,DASH_EXTENSIONS=/\.(mpd)($|\?)/i,FLV_EXTENSIONS=/\.(flv)($|\?)/i,canPlayFile=A=>{if(A instanceof Array){for(const $ of A)if(typeof $=="string"&&canPlayFile($)||canPlayFile($.src))return!0;return!1}return(0,import_utils$3.isMediaStream)(A)||(0,import_utils$3.isBlobUrl)(A)?!0:AUDIO_EXTENSIONS.test(A)||VIDEO_EXTENSIONS.test(A)||HLS_EXTENSIONS.test(A)||DASH_EXTENSIONS.test(A)||FLV_EXTENSIONS.test(A)},canPlay={youtube:A=>A instanceof Array?A.every($=>MATCH_URL_YOUTUBE.test($)):MATCH_URL_YOUTUBE.test(A),soundcloud:A=>MATCH_URL_SOUNDCLOUD.test(A)&&!AUDIO_EXTENSIONS.test(A),vimeo:A=>MATCH_URL_VIMEO.test(A)&&!VIDEO_EXTENSIONS.test(A)&&!HLS_EXTENSIONS.test(A),mux:A=>MATCH_URL_MUX.test(A),facebook:A=>MATCH_URL_FACEBOOK.test(A)||MATCH_URL_FACEBOOK_WATCH.test(A),streamable:A=>MATCH_URL_STREAMABLE.test(A),wistia:A=>MATCH_URL_WISTIA.test(A),twitch:A=>MATCH_URL_TWITCH_VIDEO.test(A)||MATCH_URL_TWITCH_CHANNEL.test(A),dailymotion:A=>MATCH_URL_DAILYMOTION.test(A),mixcloud:A=>MATCH_URL_MIXCLOUD.test(A),vidyard:A=>MATCH_URL_VIDYARD.test(A),kaltura:A=>MATCH_URL_KALTURA.test(A),file:canPlayFile};var __defProp$4=Object.defineProperty,__getOwnPropDesc$4=Object.getOwnPropertyDescriptor,__getOwnPropNames$4=Object.getOwnPropertyNames,__hasOwnProp$4=Object.prototype.hasOwnProperty,__export$4=(A,$)=>{for(var B in $)__defProp$4(A,B,{get:$[B],enumerable:!0})},__copyProps$4=(A,$,B,R)=>{if($&&typeof $=="object"||typeof $=="function")for(let O of __getOwnPropNames$4($))!__hasOwnProp$4.call(A,O)&&O!==B&&__defProp$4(A,O,{get:()=>$[O],enumerable:!(R=__getOwnPropDesc$4($,O))||R.enumerable});return A},__toCommonJS$4=A=>__copyProps$4(__defProp$4({},"__esModule",{value:!0}),A),players_exports={};__export$4(players_exports,{default:()=>players_default});var players=__toCommonJS$4(players_exports),import_utils$2=utils,import_patterns=patterns,players_default=[{key:"youtube",name:"YouTube",canPlay:import_patterns.canPlay.youtube,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./YouTube-CDL9PNPm.js").then(A=>A.Y),__vite__mapDeps([0,1,2])))},{key:"soundcloud",name:"SoundCloud",canPlay:import_patterns.canPlay.soundcloud,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./SoundCloud-D8U_nBgA.js").then(A=>A.S),__vite__mapDeps([3,1,2])))},{key:"vimeo",name:"Vimeo",canPlay:import_patterns.canPlay.vimeo,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Vimeo-BujsnKOP.js").then(A=>A.V),__vite__mapDeps([4,1,2])))},{key:"mux",name:"Mux",canPlay:import_patterns.canPlay.mux,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Mux-CM_KOxK9.js").then(A=>A.M),__vite__mapDeps([5,1,2])))},{key:"facebook",name:"Facebook",canPlay:import_patterns.canPlay.facebook,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Facebook-C1JErYdk.js").then(A=>A.F),__vite__mapDeps([6,1,2])))},{key:"streamable",name:"Streamable",canPlay:import_patterns.canPlay.streamable,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Streamable-Cb2BiZFk.js").then(A=>A.S),__vite__mapDeps([7,1,2])))},{key:"wistia",name:"Wistia",canPlay:import_patterns.canPlay.wistia,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Wistia-CnrIbLzL.js").then(A=>A.W),__vite__mapDeps([8,1,2])))},{key:"twitch",name:"Twitch",canPlay:import_patterns.canPlay.twitch,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Twitch-W_Cn_ku_.js").then(A=>A.T),__vite__mapDeps([9,1,2])))},{key:"dailymotion",name:"DailyMotion",canPlay:import_patterns.canPlay.dailymotion,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./DailyMotion-DRjWz57S.js").then(A=>A.D),__vite__mapDeps([10,1,2])))},{key:"mixcloud",name:"Mixcloud",canPlay:import_patterns.canPlay.mixcloud,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Mixcloud-BoHfuS7a.js").then(A=>A.M),__vite__mapDeps([11,1,2])))},{key:"vidyard",name:"Vidyard",canPlay:import_patterns.canPlay.vidyard,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Vidyard-pM3O2eZB.js").then(A=>A.V),__vite__mapDeps([12,1,2])))},{key:"kaltura",name:"Kaltura",canPlay:import_patterns.canPlay.kaltura,lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./Kaltura-CNCSVMFh.js").then(A=>A.K),__vite__mapDeps([13,1,2])))},{key:"file",name:"FilePlayer",canPlay:import_patterns.canPlay.file,canEnablePIP:A=>import_patterns.canPlay.file(A)&&(document.pictureInPictureEnabled||(0,import_utils$2.supportsWebKitPresentationMode)())&&!import_patterns.AUDIO_EXTENSIONS.test(A),lazyPlayer:(0,import_utils$2.lazy)(()=>__vitePreload(()=>import("./FilePlayer-BYiASDK5.js").then(A=>A.F),__vite__mapDeps([14,1,2])))}],safeIsNaN=Number.isNaN||function A($){return typeof $=="number"&&$!==$};function isEqual(A,$){return!!(A===$||safeIsNaN(A)&&safeIsNaN($))}function areInputsEqual(A,$){if(A.length!==$.length)return!1;for(var B=0;B<A.length;B++)if(!isEqual(A[B],$[B]))return!1;return!0}function memoizeOne(A,$){$===void 0&&($=areInputsEqual);var B,R=[],O,H=!1;function W(){for(var pe=[],ce=0;ce<arguments.length;ce++)pe[ce]=arguments[ce];return H&&B===this&&$(pe,R)||(O=A.apply(this,pe),H=!0,B=this,R=pe),O}return W}const memoizeOne_esm=Object.freeze(Object.defineProperty({__proto__:null,default:memoizeOne},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(memoizeOne_esm);var hasElementType=typeof Element<"u",hasMap=typeof Map=="function",hasSet=typeof Set=="function",hasArrayBuffer=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function equal(A,$){if(A===$)return!0;if(A&&$&&typeof A=="object"&&typeof $=="object"){if(A.constructor!==$.constructor)return!1;var B,R,O;if(Array.isArray(A)){if(B=A.length,B!=$.length)return!1;for(R=B;R--!==0;)if(!equal(A[R],$[R]))return!1;return!0}var H;if(hasMap&&A instanceof Map&&$ instanceof Map){if(A.size!==$.size)return!1;for(H=A.entries();!(R=H.next()).done;)if(!$.has(R.value[0]))return!1;for(H=A.entries();!(R=H.next()).done;)if(!equal(R.value[1],$.get(R.value[0])))return!1;return!0}if(hasSet&&A instanceof Set&&$ instanceof Set){if(A.size!==$.size)return!1;for(H=A.entries();!(R=H.next()).done;)if(!$.has(R.value[0]))return!1;return!0}if(hasArrayBuffer&&ArrayBuffer.isView(A)&&ArrayBuffer.isView($)){if(B=A.length,B!=$.length)return!1;for(R=B;R--!==0;)if(A[R]!==$[R])return!1;return!0}if(A.constructor===RegExp)return A.source===$.source&&A.flags===$.flags;if(A.valueOf!==Object.prototype.valueOf&&typeof A.valueOf=="function"&&typeof $.valueOf=="function")return A.valueOf()===$.valueOf();if(A.toString!==Object.prototype.toString&&typeof A.toString=="function"&&typeof $.toString=="function")return A.toString()===$.toString();if(O=Object.keys(A),B=O.length,B!==Object.keys($).length)return!1;for(R=B;R--!==0;)if(!Object.prototype.hasOwnProperty.call($,O[R]))return!1;if(hasElementType&&A instanceof Element)return!1;for(R=B;R--!==0;)if(!((O[R]==="_owner"||O[R]==="__v"||O[R]==="__o")&&A.$$typeof)&&!equal(A[O[R]],$[O[R]]))return!1;return!0}return A!==A&&$!==$}var reactFastCompare=function A($,B){try{return equal($,B)}catch(R){if((R.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw R}},__create$3=Object.create,__defProp$3=Object.defineProperty,__getOwnPropDesc$3=Object.getOwnPropertyDescriptor,__getOwnPropNames$3=Object.getOwnPropertyNames,__getProtoOf$3=Object.getPrototypeOf,__hasOwnProp$3=Object.prototype.hasOwnProperty,__export$3=(A,$)=>{for(var B in $)__defProp$3(A,B,{get:$[B],enumerable:!0})},__copyProps$3=(A,$,B,R)=>{if($&&typeof $=="object"||typeof $=="function")for(let O of __getOwnPropNames$3($))!__hasOwnProp$3.call(A,O)&&O!==B&&__defProp$3(A,O,{get:()=>$[O],enumerable:!(R=__getOwnPropDesc$3($,O))||R.enumerable});return A},__toESM$3=(A,$,B)=>(B=A!=null?__create$3(__getProtoOf$3(A)):{},__copyProps$3(!A||!A.__esModule?__defProp$3(B,"default",{value:A,enumerable:!0}):B,A)),__toCommonJS$3=A=>__copyProps$3(__defProp$3({},"__esModule",{value:!0}),A),props_exports={};__export$3(props_exports,{defaultProps:()=>defaultProps,propTypes:()=>propTypes});var props=__toCommonJS$3(props_exports),import_prop_types=__toESM$3(propTypesExports);const{string,bool,number,array,oneOfType,shape,object,func,node}=import_prop_types.default,propTypes={url:oneOfType([string,array,object]),playing:bool,loop:bool,controls:bool,volume:number,muted:bool,playbackRate:number,width:oneOfType([string,number]),height:oneOfType([string,number]),style:object,progressInterval:number,playsinline:bool,pip:bool,stopOnUnmount:bool,light:oneOfType([bool,string,object]),playIcon:node,previewTabIndex:number,previewAriaLabel:string,fallback:node,oEmbedUrl:string,wrapper:oneOfType([string,func,shape({render:func.isRequired})]),config:shape({soundcloud:shape({options:object}),youtube:shape({playerVars:object,embedOptions:object,onUnstarted:func}),facebook:shape({appId:string,version:string,playerId:string,attributes:object}),dailymotion:shape({params:object}),vimeo:shape({playerOptions:object,title:string}),mux:shape({attributes:object,version:string}),file:shape({attributes:object,tracks:array,forceVideo:bool,forceAudio:bool,forceHLS:bool,forceSafariHLS:bool,forceDisableHls:bool,forceDASH:bool,forceFLV:bool,hlsOptions:object,hlsVersion:string,dashVersion:string,flvVersion:string}),wistia:shape({options:object,playerId:string,customControls:array}),mixcloud:shape({options:object}),twitch:shape({options:object,playerId:string}),vidyard:shape({options:object})}),onReady:func,onStart:func,onPlay:func,onPause:func,onBuffer:func,onBufferEnd:func,onEnded:func,onError:func,onDuration:func,onSeek:func,onPlaybackRateChange:func,onPlaybackQualityChange:func,onProgress:func,onClickPreview:func,onEnablePIP:func,onDisablePIP:func},noop=()=>{},defaultProps={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:noop},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:noop,onStart:noop,onPlay:noop,onPause:noop,onBuffer:noop,onBufferEnd:noop,onEnded:noop,onError:noop,onDuration:noop,onSeek:noop,onPlaybackRateChange:noop,onPlaybackQualityChange:noop,onProgress:noop,onClickPreview:noop,onEnablePIP:noop,onDisablePIP:noop};var __create$2=Object.create,__defProp$2=Object.defineProperty,__getOwnPropDesc$2=Object.getOwnPropertyDescriptor,__getOwnPropNames$2=Object.getOwnPropertyNames,__getProtoOf$2=Object.getPrototypeOf,__hasOwnProp$2=Object.prototype.hasOwnProperty,__defNormalProp$1=(A,$,B)=>$ in A?__defProp$2(A,$,{enumerable:!0,configurable:!0,writable:!0,value:B}):A[$]=B,__export$2=(A,$)=>{for(var B in $)__defProp$2(A,B,{get:$[B],enumerable:!0})},__copyProps$2=(A,$,B,R)=>{if($&&typeof $=="object"||typeof $=="function")for(let O of __getOwnPropNames$2($))!__hasOwnProp$2.call(A,O)&&O!==B&&__defProp$2(A,O,{get:()=>$[O],enumerable:!(R=__getOwnPropDesc$2($,O))||R.enumerable});return A},__toESM$2=(A,$,B)=>(B=A!=null?__create$2(__getProtoOf$2(A)):{},__copyProps$2(!A||!A.__esModule?__defProp$2(B,"default",{value:A,enumerable:!0}):B,A)),__toCommonJS$2=A=>__copyProps$2(__defProp$2({},"__esModule",{value:!0}),A),__publicField$1=(A,$,B)=>(__defNormalProp$1(A,typeof $!="symbol"?$+"":$,B),B),Player_exports={};__export$2(Player_exports,{default:()=>Player});var Player_1=__toCommonJS$2(Player_exports),import_react$1=__toESM$2(reactExports),import_react_fast_compare$1=__toESM$2(reactFastCompare),import_props$1=props,import_utils$1=utils;const SEEK_ON_PLAY_EXPIRY=5e3;class Player extends import_react$1.Component{constructor(){super(...arguments),__publicField$1(this,"mounted",!1),__publicField$1(this,"isReady",!1),__publicField$1(this,"isPlaying",!1),__publicField$1(this,"isLoading",!0),__publicField$1(this,"loadOnReady",null),__publicField$1(this,"startOnPlay",!0),__publicField$1(this,"seekOnPlay",null),__publicField$1(this,"onDurationCalled",!1),__publicField$1(this,"handlePlayerMount",$=>{if(this.player){this.progress();return}this.player=$,this.player.load(this.props.url),this.progress()}),__publicField$1(this,"getInternalPlayer",$=>this.player?this.player[$]:null),__publicField$1(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const $=this.getCurrentTime()||0,B=this.getSecondsLoaded(),R=this.getDuration();if(R){const O={playedSeconds:$,played:$/R};B!==null&&(O.loadedSeconds=B,O.loaded=B/R),(O.playedSeconds!==this.prevPlayed||O.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(O),this.prevPlayed=O.playedSeconds,this.prevLoaded=O.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),__publicField$1(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:$,playing:B,volume:R,muted:O}=this.props;$(),!O&&R!==null&&this.player.setVolume(R),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):B&&this.player.play(),this.handleDurationCheck()}),__publicField$1(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:$,onPlay:B,playbackRate:R}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&R!==1&&this.player.setPlaybackRate(R),$(),this.startOnPlay=!1),B(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),__publicField$1(this,"handlePause",$=>{this.isPlaying=!1,this.isLoading||this.props.onPause($)}),__publicField$1(this,"handleEnded",()=>{const{activePlayer:$,loop:B,onEnded:R}=this.props;$.loopOnEnded&&B&&this.seekTo(0),B||(this.isPlaying=!1,R())}),__publicField$1(this,"handleError",(...$)=>{this.isLoading=!1,this.props.onError(...$)}),__publicField$1(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const $=this.getDuration();$?this.onDurationCalled||(this.props.onDuration($),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),__publicField$1(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate($){if(!this.player)return;const{url:B,playing:R,volume:O,muted:H,playbackRate:W,pip:pe,loop:ce,activePlayer:ue,disableDeferredLoading:G}=this.props;if(!(0,import_react_fast_compare$1.default)($.url,B)){if(this.isLoading&&!ue.forceLoad&&!G&&!(0,import_utils$1.isMediaStream)(B)){console.warn(`ReactPlayer: the attempt to load ${B} is being deferred until the player has loaded`),this.loadOnReady=B;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(B,this.isReady)}!$.playing&&R&&!this.isPlaying&&this.player.play(),$.playing&&!R&&this.isPlaying&&this.player.pause(),!$.pip&&pe&&this.player.enablePIP&&this.player.enablePIP(),$.pip&&!pe&&this.player.disablePIP&&this.player.disablePIP(),$.volume!==O&&O!==null&&this.player.setVolume(O),$.muted!==H&&(H?this.player.mute():(this.player.unmute(),O!==null&&setTimeout(()=>this.player.setVolume(O)))),$.playbackRate!==W&&this.player.setPlaybackRate&&this.player.setPlaybackRate(W),$.loop!==ce&&this.player.setLoop&&this.player.setLoop(ce)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo($,B,R){if(!this.isReady){$!==0&&(this.seekOnPlay=$,setTimeout(()=>{this.seekOnPlay=null},SEEK_ON_PLAY_EXPIRY));return}if(B?B==="fraction":$>0&&$<1){const H=this.player.getDuration();if(!H){console.warn("ReactPlayer: could not seek using fraction – duration not yet available");return}this.player.seekTo(H*$,R);return}this.player.seekTo($,R)}render(){const $=this.props.activePlayer;return $?import_react$1.default.createElement($,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}__publicField$1(Player,"displayName","Player");__publicField$1(Player,"propTypes",import_props$1.propTypes);__publicField$1(Player,"defaultProps",import_props$1.defaultProps);var __create$1=Object.create,__defProp$1=Object.defineProperty,__getOwnPropDesc$1=Object.getOwnPropertyDescriptor,__getOwnPropNames$1=Object.getOwnPropertyNames,__getProtoOf$1=Object.getPrototypeOf,__hasOwnProp$1=Object.prototype.hasOwnProperty,__defNormalProp=(A,$,B)=>$ in A?__defProp$1(A,$,{enumerable:!0,configurable:!0,writable:!0,value:B}):A[$]=B,__export$1=(A,$)=>{for(var B in $)__defProp$1(A,B,{get:$[B],enumerable:!0})},__copyProps$1=(A,$,B,R)=>{if($&&typeof $=="object"||typeof $=="function")for(let O of __getOwnPropNames$1($))!__hasOwnProp$1.call(A,O)&&O!==B&&__defProp$1(A,O,{get:()=>$[O],enumerable:!(R=__getOwnPropDesc$1($,O))||R.enumerable});return A},__toESM$1=(A,$,B)=>(B=A!=null?__create$1(__getProtoOf$1(A)):{},__copyProps$1(!A||!A.__esModule?__defProp$1(B,"default",{value:A,enumerable:!0}):B,A)),__toCommonJS$1=A=>__copyProps$1(__defProp$1({},"__esModule",{value:!0}),A),__publicField=(A,$,B)=>(__defNormalProp(A,typeof $!="symbol"?$+"":$,B),B),ReactPlayer_exports={};__export$1(ReactPlayer_exports,{createReactPlayer:()=>createReactPlayer});var ReactPlayer$1=__toCommonJS$1(ReactPlayer_exports),import_react=__toESM$1(reactExports),import_deepmerge=__toESM$1(cjs),import_memoize_one=__toESM$1(require$$2),import_react_fast_compare=__toESM$1(reactFastCompare),import_props=props,import_utils=utils,import_Player=__toESM$1(Player_1);const Preview=(0,import_utils.lazy)(()=>__vitePreload(()=>import("./Preview-DOWQeFSv.js").then(A=>A.P),__vite__mapDeps([15,1,2]))),IS_BROWSER=typeof window<"u"&&window.document&&typeof document<"u",IS_GLOBAL=typeof commonjsGlobal<"u"&&commonjsGlobal.window&&commonjsGlobal.window.document,SUPPORTED_PROPS=Object.keys(import_props.propTypes),UniversalSuspense=IS_BROWSER||IS_GLOBAL?import_react.Suspense:()=>null,customPlayers=[],createReactPlayer=(A,$)=>{var B;return B=class extends import_react.Component{constructor(){super(...arguments),__publicField(this,"state",{showPreview:!!this.props.light}),__publicField(this,"references",{wrapper:R=>{this.wrapper=R},player:R=>{this.player=R}}),__publicField(this,"handleClickPreview",R=>{this.setState({showPreview:!1}),this.props.onClickPreview(R)}),__publicField(this,"showPreview",()=>{this.setState({showPreview:!0})}),__publicField(this,"getDuration",()=>this.player?this.player.getDuration():null),__publicField(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),__publicField(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),__publicField(this,"getInternalPlayer",(R="player")=>this.player?this.player.getInternalPlayer(R):null),__publicField(this,"seekTo",(R,O,H)=>{if(!this.player)return null;this.player.seekTo(R,O,H)}),__publicField(this,"handleReady",()=>{this.props.onReady(this)}),__publicField(this,"getActivePlayer",(0,import_memoize_one.default)(R=>{for(const O of[...customPlayers,...A])if(O.canPlay(R))return O;return $||null})),__publicField(this,"getConfig",(0,import_memoize_one.default)((R,O)=>{const{config:H}=this.props;return import_deepmerge.default.all([import_props.defaultProps.config,import_props.defaultProps.config[O]||{},H,H[O]||{}])})),__publicField(this,"getAttributes",(0,import_memoize_one.default)(R=>(0,import_utils.omit)(this.props,SUPPORTED_PROPS))),__publicField(this,"renderActivePlayer",R=>{if(!R)return null;const O=this.getActivePlayer(R);if(!O)return null;const H=this.getConfig(R,O.key);return import_react.default.createElement(import_Player.default,{...this.props,key:O.key,ref:this.references.player,config:H,activePlayer:O.lazyPlayer||O,onReady:this.handleReady})})}shouldComponentUpdate(R,O){return!(0,import_react_fast_compare.default)(this.props,R)||!(0,import_react_fast_compare.default)(this.state,O)}componentDidUpdate(R){const{light:O}=this.props;!R.light&&O&&this.setState({showPreview:!0}),R.light&&!O&&this.setState({showPreview:!1})}renderPreview(R){if(!R)return null;const{light:O,playIcon:H,previewTabIndex:W,oEmbedUrl:pe,previewAriaLabel:ce}=this.props;return import_react.default.createElement(Preview,{url:R,light:O,playIcon:H,previewTabIndex:W,previewAriaLabel:ce,oEmbedUrl:pe,onClick:this.handleClickPreview})}render(){const{url:R,style:O,width:H,height:W,fallback:pe,wrapper:ce}=this.props,{showPreview:ue}=this.state,G=this.getAttributes(R),ve=typeof ce=="string"?this.references.wrapper:void 0;return import_react.default.createElement(ce,{ref:ve,style:{...O,width:H,height:W},...G},import_react.default.createElement(UniversalSuspense,{fallback:pe},ue?this.renderPreview(R):this.renderActivePlayer(R)))}},__publicField(B,"displayName","ReactPlayer"),__publicField(B,"propTypes",import_props.propTypes),__publicField(B,"defaultProps",import_props.defaultProps),__publicField(B,"addCustomPlayer",R=>{customPlayers.push(R)}),__publicField(B,"removeCustomPlayers",()=>{customPlayers.length=0}),__publicField(B,"canPlay",R=>{for(const O of[...customPlayers,...A])if(O.canPlay(R))return!0;return!1}),__publicField(B,"canEnablePIP",R=>{for(const O of[...customPlayers,...A])if(O.canEnablePIP&&O.canEnablePIP(R))return!0;return!1}),B};var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__export=(A,$)=>{for(var B in $)__defProp(A,B,{get:$[B],enumerable:!0})},__copyProps=(A,$,B,R)=>{if($&&typeof $=="object"||typeof $=="function")for(let O of __getOwnPropNames($))!__hasOwnProp.call(A,O)&&O!==B&&__defProp(A,O,{get:()=>$[O],enumerable:!(R=__getOwnPropDesc($,O))||R.enumerable});return A},__toESM=(A,$,B)=>(B=A!=null?__create(__getProtoOf(A)):{},__copyProps(!A||!A.__esModule?__defProp(B,"default",{value:A,enumerable:!0}):B,A)),__toCommonJS=A=>__copyProps(__defProp({},"__esModule",{value:!0}),A),src_exports={};__export(src_exports,{default:()=>src_default});var lib=__toCommonJS(src_exports),import_players=__toESM(players),import_ReactPlayer=ReactPlayer$1;const fallback=import_players.default[import_players.default.length-1];var src_default=(0,import_ReactPlayer.createReactPlayer)(import_players.default,fallback);const ReactPlayer=getDefaultExportFromCjs(lib),LinkPlayer=({lessonId:A,enrollmentId:$,userId:B,onLessonStatusChange:R})=>{const O=reactExports.useRef(null),[H,W]=reactExports.useState(0),[pe,ce]=reactExports.useState(null),[ue,G]=reactExports.useState(!1),[ve,he]=reactExports.useState(!1),[oe,ae]=reactExports.useState(0),{Certificate:J,handleSaveResponse:V}=useCertificate({enrollmentId:parseInt($,10)}),re=ee=>{const Ee=Math.floor(ee/3600),be=Math.floor(ee%3600/60),te=(ee%60).toFixed(2),ge=String(Ee).padStart(2,"0"),de=String(be).padStart(2,"0"),Ae=Number(te).toFixed(2).padStart(5,"0");return`${ge}:${de}:${Ae}`};reactExports.useEffect(()=>{W(0),G(!1),he(!1),ae(0),ce(null);const ee=async()=>{if(!A||!$||!B){console.error("Missing required parameters.");return}const te=sessionStorage.getItem("token");if(!te){console.error("No token found, user is not authenticated.");return}try{const de=(await axios.get(`https://knowvara.com/api/api/lessons/${A}/${$}`,{headers:{Authorization:`Bearer ${te}`}})).data;ce({Launch:de.Launch,Type:de.Type,Name:de.Name,savedPlaybackTime:de.savedPlaybackTime}),ReactPlayer.canPlay(de.Launch)?(he(!0),Ee(),de.savedPlaybackTime&&(W(de.savedPlaybackTime),setTimeout(()=>{var Ae;(Ae=O.current)==null||Ae.seekTo(de.savedPlaybackTime,"seconds")},500))):(he(!1),be())}catch(ge){console.error("Error fetching lesson details:",ge)}},Ee=async()=>{console.log("Initializing lesson status");const te=sessionStorage.getItem("token");if(!te){console.error("No token found, user is not authenticated.");return}try{const ge=await axios.post("https://knowvara.com/api/api/lessons/scorm/save",{lessonId:A,enrollmentId:$,userId:B,scormData:{"cmi.core.lesson_status":"incomplete","cmi.core.session_time":"00:00:00.00"}},{headers:{Authorization:`Bearer ${te}`}});V(ge.data),R(A,"incomplete")}catch(ge){console.error("Error initializing lesson status:",ge)}},be=async()=>{if(!A||!$||!B||ue)return;G(!0);const te=sessionStorage.getItem("token");if(!te){console.error("No token found, user is not authenticated.");return}const ge=re(H);console.log("Sending completed status");try{await axios.post("https://knowvara.com/api/api/lessons/scorm/save",{lessonId:A,enrollmentId:$,userId:B,scormData:{"cmi.core.lesson_status":"completed","cmi.core.session_time":ge}},{headers:{Authorization:`Bearer ${te}`}}),R(A,"completed")}catch(de){console.error("Error saving lesson status:",de)}};ee()},[A,$,B]);const ie=()=>{console.log("in handle media end"),ue||(G(!0),console.log("in handle media end, calling setlessonstatuscomplete"),Y())},se=ee=>{console.log("In handle progress"),W(Math.floor(ee.playedSeconds)),!ue&&oe&&ee.playedSeconds>=oe-8&&(console.log(`Playback within 8 seconds of end: ${ee.playedSeconds} >= ${oe-8}`),Y())},fe=ee=>{console.log("in handle duration"),isFinite(ee)||Y(),ae(ee)},Y=async()=>{if(!A||!$||!B||ue)return;G(!0);const ee=sessionStorage.getItem("token");if(!ee){console.error("No token found, user is not authenticated.");return}const Ee=re(H);console.log("In set lesson as completed");try{await axios.post("https://knowvara.com/api/api/lessons/scorm/save",{lessonId:A,enrollmentId:$,userId:B,scormData:{"cmi.core.lesson_status":"completed","cmi.core.session_time":Ee}},{headers:{Authorization:`Bearer ${ee}`}}),R(A,"completed")}catch(be){console.error("Error saving lesson status:",be)}};return pe?jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full w-full",children:[J," ",ve&&pe.Launch?jsxRuntimeExports.jsx("div",{className:"flex-grow flex flex-col items-center justify-center p-2 h-full lg:h-auto",children:jsxRuntimeExports.jsx(ReactPlayer,{ref:O,url:pe.Launch,controls:!0,playing:!0,width:"100%",height:"100%",onEnded:ie,onProgress:se,onDuration:fe,onError:ee=>{console.error("Error playing media:",ee),Y()}})}):jsxRuntimeExports.jsx("div",{className:"flex-grow flex items-center justify-center p-2 h-full lg:h-auto",children:jsxRuntimeExports.jsx("iframe",{src:pe.Launch,title:pe.Name,className:"w-full h-full border-0",allowFullScreen:!0,onLoad:()=>{Y()}})})]}):jsxRuntimeExports.jsx("div",{children:"Loading..."})},CoursePlayer=()=>{const{lessonId:A,courseId:$,enrollmentId:B,userId:R,type:O}=useParams(),H=useNavigate(),{user:W}=useAuth(),[pe,ce]=reactExports.useState(null),[ue,G]=reactExports.useState(!1),[ve,he]=reactExports.useState(!1),[oe,ae]=reactExports.useState(null),[J,V]=reactExports.useState(""),[re,ie]=reactExports.useState([]),[se,fe]=reactExports.useState("");reactExports.useEffect(()=>{(async()=>{if(!(W!=null&&W.OrgID)||!$){console.error("Missing OrgID or courseId.");return}const ge=sessionStorage.getItem("token");if(!ge){console.error("No token found, user is not authenticated.");return}try{const de=await axios.get(`https://knowvara.com/api/api/courses/${W.OrgID}/${$}`,{headers:{Authorization:`Bearer ${ge}`}});G(de.data.orderLessons),he(de.data.hideLaunchButtons),fe(de.data.Name),V(de.data.ImageURL)}catch(de){console.error("Error fetching course properties:",de)}})()},[$,W==null?void 0:W.OrgID]),reactExports.useEffect(()=>{(async()=>{if(!$||!B||!(W!=null&&W.Id)){console.error("Missing courseId, enrollmentId, or user Id.");return}const ge=sessionStorage.getItem("token");if(!ge){console.error("No token found, user is not authenticated.");return}try{const de=await axios.get(`https://knowvara.com/api/api/lessons/status/${$}/${W.Id}/${B}`,{headers:{Authorization:`Bearer ${ge}`}});ie(de.data)}catch(de){console.error("Error fetching lessons:",de)}})()},[$,B,W==null?void 0:W.Id]),reactExports.useEffect(()=>{A&&$&&B&&R&&(async()=>{const ge=sessionStorage.getItem("token");if(!ge){console.error("No token found, user is not authenticated.");return}try{const de=await axios.get(`https://knowvara.com/api/api/lessons/${A}/${B}`,{headers:{Authorization:`Bearer ${ge}`}});console.log("Got current lesson status: "+de.data.status),ae(de.data.status)}catch(de){console.error("Error fetching current lesson status:",de)}})()},[A,$,B,R]);const Y=(te,ge)=>{console.log(`Lesson ${te} status changed to: ${ge}`),ce({lessonId:te,status:ge}),te===te&&ae(ge)},ee=reactExports.useMemo(()=>{if(!re||re.length===0)return!1;const te=re.filter(de=>de.Type!=="header");if(te.length===0)return!1;const ge=te[te.length-1];return Number(A)===ge.Id},[re,A]),Ee=reactExports.useMemo(()=>{if(!re||re.length===0)return null;const te=re.filter(Ae=>Ae.Type!=="header"),ge=te.findIndex(Ae=>Ae.Id===Number(A));if(ge===-1||ge===te.length-1)return null;const de=te[ge+1];return{nextLessonId:de.Id.toString(),nextLessonType:de.Type}},[re,A]),be=()=>{if(!A||!$||!B||!R)return jsxRuntimeExports.jsx("div",{children:"Missing required parameters."});switch(O){case"SCORM12":return jsxRuntimeExports.jsx(SCORMPlayer,{lessonId:A,courseId:$,enrollmentId:B,userId:R,onLessonStatusChange:Y});case"SCORM2004":return jsxRuntimeExports.jsx(SCORM2004Player,{lessonId:A,courseId:$,enrollmentId:B,userId:R,onLessonStatusChange:Y});case"xAPI":return jsxRuntimeExports.jsx(XAPIPlayer,{lessonId:A,enrollmentId:B,courseId:$,userId:R,onLessonStatusChange:Y,userEmail:(W==null?void 0:W.Email)||"Email",userName:(W==null?void 0:W.FirstName)+" "+(W==null?void 0:W.LastName)});case"Internal":return jsxRuntimeExports.jsx(LessonPlayer,{lessonId:A,courseId:$,enrollmentId:B,userId:R,onLessonStatusChange:Y});case"mp4":return jsxRuntimeExports.jsx(VideoPlayer,{lessonId:A,courseId:$,enrollmentId:B,userId:R,onLessonStatusChange:Y});case"pdf":return jsxRuntimeExports.jsx(PDFPlayer,{lessonId:A,courseId:$,enrollmentId:B,userId:R,onLessonStatusChange:Y});case"Live":return jsxRuntimeExports.jsx(LivePlayer,{lessonId:A,courseId:$,enrollmentId:B,onLessonStatusChange:Y});case"Link":return jsxRuntimeExports.jsx(LinkPlayer,{lessonId:A,courseId:$,enrollmentId:B,userId:R,onLessonStatusChange:Y});default:return jsxRuntimeExports.jsx("div",{children:"Invalid lesson type."})}};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col bg-white h-screen",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center p-1 subnav-gradient course-player-bar",children:[jsxRuntimeExports.jsx("button",{className:"px-3 py-1 lms-button text-xs border border-white ml-2",onClick:()=>H(`/student/course/${$}`),children:"Return To Course"}),A&&$&&B&&R&&oe&&(oe==="completed"||oe==="passed")&&!ee&&jsxRuntimeExports.jsx(NextLessonButton,{nextLessonId:Ee==null?void 0:Ee.nextLessonId,nextLessonType:Ee==null?void 0:Ee.nextLessonType,courseId:$,enrollmentId:B,userId:R})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-grow",children:[jsxRuntimeExports.jsx("div",{className:"w-1/4 hidden lg:block",children:jsxRuntimeExports.jsx(CourseLessons,{courseId:Number($),enrollmentId:Number(B),inPlayer:!0,updatedLesson:pe,currentLessonId:A,orderLessons:ue,hideLaunchButtons:ve,courseName:se,imageURL:J})}),jsxRuntimeExports.jsx("div",{className:"w-full lg:w-3/4",children:be()})]})]})},CoursePlayer$1=Object.freeze(Object.defineProperty({__proto__:null,default:CoursePlayer},Symbol.toStringTag,{value:"Module"}));export{CoursePlayer$1 as C,patterns as p,utils as u};
