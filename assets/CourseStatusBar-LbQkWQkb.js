import{c as p,r as a,j as e,z as h,f as x}from"./index-JlNpboNx.js";const N=({courseId:i,userId:m,lessonsUpdated:d})=>{const{user:r}=p(),[s,f]=a.useState(null),[g,t]=a.useState(!0),[c,n]=a.useState(""),o=m||(r==null?void 0:r.Id);return a.useEffect(()=>{(async()=>{if(!o){console.log("User ID is missing. Please log in."),n("User ID is missing. Please log in."),t(!1);return}if(!i){console.log("Course ID is missing."),n("Course ID is missing."),t(!1);return}const u=sessionStorage.getItem("token");if(!u){console.log("Authentication token is missing. Please log in again."),n("Authentication token is missing. Please log in again."),t(!1);return}try{const l=await x.get("https://knowvara.com/api/api/courses/completionPercent",{params:{courseId:i,userId:o},headers:{Authorization:`Bearer ${u}`}});f(l.data.completionPercent)}catch(l){console.error("Error fetching completion percent:",l),n("Failed to fetch completion percent.")}finally{t(!1)}})()},[o,i,d]),g?e.jsxs("div",{className:"flex items-center py-2 w-full",children:[e.jsx("div",{className:"w-full h-2 bg-gray-300 rounded animate-pulse"}),e.jsx("div",{className:"ml-2 w-4 h-4 bg-gray-300 rounded-full animate-pulse"})]}):c?e.jsx("div",{className:"text-red-500 text-xs",children:c}):e.jsxs("div",{className:"py-2 w-full flex items-center",children:[s!==null&&s>0?e.jsx("div",{className:"relative w-full h-2 bg-gray-300 rounded",children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-green-500 rounded",style:{width:`${s}%`}})}):e.jsx("div",{className:"w-full h-2"}),s===100?e.jsx(h,{className:"ml-2 text-green-500",size:16}):e.jsx("div",{className:"h-4"})]})};export{N as C};
