import{at as g,r as u,an as yr,d as tr,j as n,M as Pe,B as I,f as re,A as Ke}from"./index-BEzWJCG4.js";import{g as xe}from"./handleError-WbdgpjcS.js";function te(e,r,t,s){function o(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function p(b){try{c(s.next(b))}catch(y){l(y)}}function m(b){try{c(s.throw(b))}catch(y){l(y)}}function c(b){b.done?a(b.value):o(b.value).then(p,m)}c((s=s.apply(e,r||[])).next())})}function ne(e,r){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,o,a,l;return l={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function p(c){return function(b){return m([c,b])}}function m(c){if(s)throw new TypeError("Generator is already executing.");for(;l&&(l=0,c[0]&&(t=0)),t;)try{if(s=1,o&&(a=c[0]&2?o.return:c[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,c[1])).done)return a;switch(o=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,o=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){t.label=c[1];break}if(c[0]===6&&t.label<a[1]){t.label=a[1],a=c;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(c);break}a[2]&&t.ops.pop(),t.trys.pop();continue}c=r.call(e,t)}catch(b){c=[6,b],o=0}finally{s=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function He(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var s=t.call(e),o,a=[],l;try{for(;(r===void 0||r-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(p){l={error:p}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return a}function We(e,r,t){if(t||arguments.length===2)for(var s=0,o=r.length,a;s<o;s++)(a||!(s in r))&&(a||(a=Array.prototype.slice.call(r,0,s)),a[s]=r[s]);return e.concat(a||Array.prototype.slice.call(r))}var xr=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function ce(e,r){var t=vr(e);if(typeof t.path!="string"){var s=e.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof r=="string"?r:typeof s=="string"&&s.length>0?s:e.name,writable:!1,configurable:!1,enumerable:!0})}return t}function vr(e){var r=e.name,t=r&&r.lastIndexOf(".")!==-1;if(t&&!e.type){var s=r.split(".").pop().toLowerCase(),o=xr.get(s);o&&Object.defineProperty(e,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return e}var jr=[".DS_Store","Thumbs.db"];function wr(e){return te(this,void 0,void 0,function(){return ne(this,function(r){return ve(e)&&Dr(e.dataTransfer)?[2,Or(e.dataTransfer,e.type)]:Er(e)?[2,Ar(e)]:Array.isArray(e)&&e.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,Sr(e)]:[2,[]]})})}function Dr(e){return ve(e)}function Er(e){return ve(e)&&ve(e.target)}function ve(e){return typeof e=="object"&&e!==null}function Ar(e){return Ie(e.target.files).map(function(r){return ce(r)})}function Sr(e){return te(this,void 0,void 0,function(){var r;return ne(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(s){return s.getFile()}))];case 1:return r=t.sent(),[2,r.map(function(s){return ce(s)})]}})})}function Or(e,r){return te(this,void 0,void 0,function(){var t,s;return ne(this,function(o){switch(o.label){case 0:return e.items?(t=Ie(e.items).filter(function(a){return a.kind==="file"}),r!=="drop"?[2,t]:[4,Promise.all(t.map(Cr))]):[3,2];case 1:return s=o.sent(),[2,qe(nr(s))];case 2:return[2,qe(Ie(e.files).map(function(a){return ce(a)}))]}})})}function qe(e){return e.filter(function(r){return jr.indexOf(r.name)===-1})}function Ie(e){if(e===null)return[];for(var r=[],t=0;t<e.length;t++){var s=e[t];r.push(s)}return r}function Cr(e){if(typeof e.webkitGetAsEntry!="function")return Ge(e);var r=e.webkitGetAsEntry();return r&&r.isDirectory?sr(r):Ge(e)}function nr(e){return e.reduce(function(r,t){return We(We([],He(r),!1),He(Array.isArray(t)?nr(t):[t]),!1)},[])}function Ge(e){var r=e.getAsFile();if(!r)return Promise.reject("".concat(e," is not a File"));var t=ce(r);return Promise.resolve(t)}function Fr(e){return te(this,void 0,void 0,function(){return ne(this,function(r){return[2,e.isDirectory?sr(e):Nr(e)]})})}function sr(e){var r=e.createReader();return new Promise(function(t,s){var o=[];function a(){var l=this;r.readEntries(function(p){return te(l,void 0,void 0,function(){var m,c,b;return ne(this,function(y){switch(y.label){case 0:if(p.length)return[3,5];y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all(o)];case 2:return m=y.sent(),t(m),[3,4];case 3:return c=y.sent(),s(c),[3,4];case 4:return[3,6];case 5:b=Promise.all(p.map(Fr)),o.push(b),a(),y.label=6;case 6:return[2]}})})},function(p){s(p)})}a()})}function Nr(e){return te(this,void 0,void 0,function(){return ne(this,function(r){return[2,new Promise(function(t,s){e.file(function(o){var a=ce(o,e.fullPath);t(a)},function(o){s(o)})})]})})}var kr=function(e,r){if(e&&r){var t=Array.isArray(r)?r:r.split(","),s=e.name||"",o=(e.type||"").toLowerCase(),a=o.replace(/\/.*$/,"");return t.some(function(l){var p=l.trim().toLowerCase();return p.charAt(0)==="."?s.toLowerCase().endsWith(p):p.endsWith("/*")?a===p.replace(/\/.*$/,""):o===p})}return!0};function Ye(e){return Tr(e)||Ir(e)||or(e)||Pr()}function Pr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ir(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Tr(e){if(Array.isArray(e))return Te(e)}function Je(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,s)}return t}function Ve(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Je(Object(t),!0).forEach(function(s){ar(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Je(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function ar(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function le(e,r){return Mr(e)||Rr(e,r)||or(e,r)||_r()}function _r(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function or(e,r){if(e){if(typeof e=="string")return Te(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Te(e,r)}}function Te(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function Rr(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],o=!0,a=!1,l,p;try{for(t=t.call(e);!(o=(l=t.next()).done)&&(s.push(l.value),!(r&&s.length===r));o=!0);}catch(m){a=!0,p=m}finally{try{!o&&t.return!=null&&t.return()}finally{if(a)throw p}}return s}}function Mr(e){if(Array.isArray(e))return e}var Lr="file-invalid-type",zr="file-too-large",Ur="file-too-small",Br="too-many-files",$r=function(r){r=Array.isArray(r)&&r.length===1?r[0]:r;var t=Array.isArray(r)?"one of ".concat(r.join(", ")):r;return{code:Lr,message:"File type must be ".concat(t)}},Ze=function(r){return{code:zr,message:"File is larger than ".concat(r," ").concat(r===1?"byte":"bytes")}},Qe=function(r){return{code:Ur,message:"File is smaller than ".concat(r," ").concat(r===1?"byte":"bytes")}},Kr={code:Br,message:"Too many files"};function ir(e,r){var t=e.type==="application/x-moz-file"||kr(e,r);return[t,t?null:$r(r)]}function lr(e,r,t){if(G(e.size))if(G(r)&&G(t)){if(e.size>t)return[!1,Ze(t)];if(e.size<r)return[!1,Qe(r)]}else{if(G(r)&&e.size<r)return[!1,Qe(r)];if(G(t)&&e.size>t)return[!1,Ze(t)]}return[!0,null]}function G(e){return e!=null}function Hr(e){var r=e.files,t=e.accept,s=e.minSize,o=e.maxSize,a=e.multiple,l=e.maxFiles,p=e.validator;return!a&&r.length>1||a&&l>=1&&r.length>l?!1:r.every(function(m){var c=ir(m,t),b=le(c,1),y=b[0],L=lr(m,s,o),B=le(L,1),$=B[0],z=p?p(m):null;return y&&$&&!z})}function je(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function ye(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(r){return r==="Files"||r==="application/x-moz-file"}):!!e.target&&!!e.target.files}function Xe(e){e.preventDefault()}function Wr(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function qr(e){return e.indexOf("Edge/")!==-1}function Gr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Wr(e)||qr(e)}function U(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(s){for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r.some(function(p){return!je(s)&&p&&p.apply(void 0,[s].concat(a)),je(s)})}}function Yr(){return"showOpenFilePicker"in window}function Jr(e){if(G(e)){var r=Object.entries(e).filter(function(t){var s=le(t,2),o=s[0],a=s[1],l=!0;return cr(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),l=!1),(!Array.isArray(a)||!a.every(ur))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),l=!1),l}).reduce(function(t,s){var o=le(s,2),a=o[0],l=o[1];return Ve(Ve({},t),{},ar({},a,l))},{});return[{description:"Files",accept:r}]}return e}function Vr(e){if(G(e))return Object.entries(e).reduce(function(r,t){var s=le(t,2),o=s[0],a=s[1];return[].concat(Ye(r),[o],Ye(a))},[]).filter(function(r){return cr(r)||ur(r)}).join(",")}function Zr(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function Qr(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function cr(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function ur(e){return/^.*\.[\w]+$/.test(e)}var Xr=["children"],et=["open"],rt=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],tt=["refKey","onChange","onClick"];function nt(e){return ot(e)||at(e)||dr(e)||st()}function st(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function at(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ot(e){if(Array.isArray(e))return _e(e)}function ke(e,r){return ct(e)||lt(e,r)||dr(e,r)||it()}function it(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dr(e,r){if(e){if(typeof e=="string")return _e(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _e(e,r)}}function _e(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,s=new Array(r);t<r;t++)s[t]=e[t];return s}function lt(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var s=[],o=!0,a=!1,l,p;try{for(t=t.call(e);!(o=(l=t.next()).done)&&(s.push(l.value),!(r&&s.length===r));o=!0);}catch(m){a=!0,p=m}finally{try{!o&&t.return!=null&&t.return()}finally{if(a)throw p}}return s}}function ct(e){if(Array.isArray(e))return e}function er(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,s)}return t}function x(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?er(Object(t),!0).forEach(function(s){Re(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):er(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}function Re(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function we(e,r){if(e==null)return{};var t=ut(e,r),s,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)s=a[o],!(r.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(t[s]=e[s])}return t}function ut(e,r){if(e==null)return{};var t={},s=Object.keys(e),o,a;for(a=0;a<s.length;a++)o=s[a],!(r.indexOf(o)>=0)&&(t[o]=e[o]);return t}var Le=u.forwardRef(function(e,r){var t=e.children,s=we(e,Xr),o=fr(s),a=o.open,l=we(o,et);return u.useImperativeHandle(r,function(){return{open:a}},[a]),yr.createElement(u.Fragment,null,t(x(x({},l),{},{open:a})))});Le.displayName="Dropzone";var pr={disabled:!1,getFilesFromEvent:wr,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Le.defaultProps=pr;Le.propTypes={children:g.func,accept:g.objectOf(g.arrayOf(g.string)),multiple:g.bool,preventDropOnDocument:g.bool,noClick:g.bool,noKeyboard:g.bool,noDrag:g.bool,noDragEventsBubbling:g.bool,minSize:g.number,maxSize:g.number,maxFiles:g.number,disabled:g.bool,getFilesFromEvent:g.func,onFileDialogCancel:g.func,onFileDialogOpen:g.func,useFsAccessApi:g.bool,autoFocus:g.bool,onDragEnter:g.func,onDragLeave:g.func,onDragOver:g.func,onDrop:g.func,onDropAccepted:g.func,onDropRejected:g.func,onError:g.func,validator:g.func};var Me={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function fr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=x(x({},pr),e),t=r.accept,s=r.disabled,o=r.getFilesFromEvent,a=r.maxSize,l=r.minSize,p=r.multiple,m=r.maxFiles,c=r.onDragEnter,b=r.onDragLeave,y=r.onDragOver,L=r.onDrop,B=r.onDropAccepted,$=r.onDropRejected,z=r.onFileDialogCancel,F=r.onFileDialogOpen,_=r.useFsAccessApi,N=r.autoFocus,O=r.preventDropOnDocument,E=r.noClick,T=r.noKeyboard,Y=r.noDrag,K=r.noDragEventsBubbling,se=r.onError,W=r.validator,H=u.useMemo(function(){return Vr(t)},[t]),ae=u.useMemo(function(){return Jr(t)},[t]),J=u.useMemo(function(){return typeof F=="function"?F:rr},[F]),V=u.useMemo(function(){return typeof z=="function"?z:rr},[z]),w=u.useRef(null),C=u.useRef(null),ue=u.useReducer(dt,Me),de=ke(ue,2),oe=de[0],A=de[1],f=oe.isFocused,S=oe.isFileDialogActive,v=u.useRef(typeof window<"u"&&window.isSecureContext&&_&&Yr()),R=function(){!v.current&&S&&setTimeout(function(){if(C.current){var d=C.current.files;d.length||(A({type:"closeDialog"}),V())}},300)};u.useEffect(function(){return window.addEventListener("focus",R,!1),function(){window.removeEventListener("focus",R,!1)}},[C,S,V,v]);var h=u.useRef([]),M=function(d){w.current&&w.current.contains(d.target)||(d.preventDefault(),h.current=[])};u.useEffect(function(){return O&&(document.addEventListener("dragover",Xe,!1),document.addEventListener("drop",M,!1)),function(){O&&(document.removeEventListener("dragover",Xe),document.removeEventListener("drop",M))}},[w,O]),u.useEffect(function(){return!s&&N&&w.current&&w.current.focus(),function(){}},[w,N,s]);var k=u.useCallback(function(i){se?se(i):console.error(i)},[se]),q=u.useCallback(function(i){i.preventDefault(),i.persist(),ge(i),h.current=[].concat(nt(h.current),[i.target]),ye(i)&&Promise.resolve(o(i)).then(function(d){if(!(je(i)&&!K)){var j=d.length,D=j>0&&Hr({files:d,accept:H,minSize:l,maxSize:a,multiple:p,maxFiles:m,validator:W}),P=j>0&&!D;A({isDragAccept:D,isDragReject:P,isDragActive:!0,type:"setDraggedFiles"}),c&&c(i)}}).catch(function(d){return k(d)})},[o,c,k,K,H,l,a,p,m,W]),Z=u.useCallback(function(i){i.preventDefault(),i.persist(),ge(i);var d=ye(i);if(d&&i.dataTransfer)try{i.dataTransfer.dropEffect="copy"}catch{}return d&&y&&y(i),!1},[y,K]),pe=u.useCallback(function(i){i.preventDefault(),i.persist(),ge(i);var d=h.current.filter(function(D){return w.current&&w.current.contains(D)}),j=d.indexOf(i.target);j!==-1&&d.splice(j,1),h.current=d,!(d.length>0)&&(A({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),ye(i)&&b&&b(i))},[w,b,K]),fe=u.useCallback(function(i,d){var j=[],D=[];i.forEach(function(P){var ie=ir(P,H),ee=ke(ie,2),Ee=ee[0],Ae=ee[1],Se=lr(P,l,a),be=ke(Se,2),Oe=be[0],Ce=be[1],Fe=W?W(P):null;if(Ee&&Oe&&!Fe)j.push(P);else{var Ne=[Ae,Ce];Fe&&(Ne=Ne.concat(Fe)),D.push({file:P,errors:Ne.filter(function(br){return br})})}}),(!p&&j.length>1||p&&m>=1&&j.length>m)&&(j.forEach(function(P){D.push({file:P,errors:[Kr]})}),j.splice(0)),A({acceptedFiles:j,fileRejections:D,type:"setFiles"}),L&&L(j,D,d),D.length>0&&$&&$(D,d),j.length>0&&B&&B(j,d)},[A,p,H,l,a,m,L,B,$,W]),me=u.useCallback(function(i){i.preventDefault(),i.persist(),ge(i),h.current=[],ye(i)&&Promise.resolve(o(i)).then(function(d){je(i)&&!K||fe(d,i)}).catch(function(d){return k(d)}),A({type:"reset"})},[o,fe,k,K]),Q=u.useCallback(function(){if(v.current){A({type:"openDialog"}),J();var i={multiple:p,types:ae};window.showOpenFilePicker(i).then(function(d){return o(d)}).then(function(d){fe(d,null),A({type:"closeDialog"})}).catch(function(d){Zr(d)?(V(d),A({type:"closeDialog"})):Qr(d)?(v.current=!1,C.current?(C.current.value=null,C.current.click()):k(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):k(d)});return}C.current&&(A({type:"openDialog"}),J(),C.current.value=null,C.current.click())},[A,J,V,_,fe,k,ae,p]),ze=u.useCallback(function(i){!w.current||!w.current.isEqualNode(i.target)||(i.key===" "||i.key==="Enter"||i.keyCode===32||i.keyCode===13)&&(i.preventDefault(),Q())},[w,Q]),Ue=u.useCallback(function(){A({type:"focus"})},[]),Be=u.useCallback(function(){A({type:"blur"})},[]),$e=u.useCallback(function(){E||(Gr()?setTimeout(Q,0):Q())},[E,Q]),X=function(d){return s?null:d},De=function(d){return T?null:X(d)},he=function(d){return Y?null:X(d)},ge=function(d){K&&d.stopPropagation()},mr=u.useMemo(function(){return function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=i.refKey,j=d===void 0?"ref":d,D=i.role,P=i.onKeyDown,ie=i.onFocus,ee=i.onBlur,Ee=i.onClick,Ae=i.onDragEnter,Se=i.onDragOver,be=i.onDragLeave,Oe=i.onDrop,Ce=we(i,rt);return x(x(Re({onKeyDown:De(U(P,ze)),onFocus:De(U(ie,Ue)),onBlur:De(U(ee,Be)),onClick:X(U(Ee,$e)),onDragEnter:he(U(Ae,q)),onDragOver:he(U(Se,Z)),onDragLeave:he(U(be,pe)),onDrop:he(U(Oe,me)),role:typeof D=="string"&&D!==""?D:"presentation"},j,w),!s&&!T?{tabIndex:0}:{}),Ce)}},[w,ze,Ue,Be,$e,q,Z,pe,me,T,Y,s]),hr=u.useCallback(function(i){i.stopPropagation()},[]),gr=u.useMemo(function(){return function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=i.refKey,j=d===void 0?"ref":d,D=i.onChange,P=i.onClick,ie=we(i,tt),ee=Re({accept:H,multiple:p,type:"file",style:{display:"none"},onChange:X(U(D,me)),onClick:X(U(P,hr)),tabIndex:-1},j,C);return x(x({},ee),ie)}},[C,t,p,me,s]);return x(x({},oe),{},{isFocused:f&&!s,getRootProps:mr,getInputProps:gr,rootRef:w,inputRef:C,open:X(Q)})}function dt(e,r){switch(r.type){case"focus":return x(x({},e),{},{isFocused:!0});case"blur":return x(x({},e),{},{isFocused:!1});case"openDialog":return x(x({},Me),{},{isFileDialogActive:!0});case"closeDialog":return x(x({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return x(x({},e),{},{isDragActive:r.isDragActive,isDragAccept:r.isDragAccept,isDragReject:r.isDragReject});case"setFiles":return x(x({},e),{},{acceptedFiles:r.acceptedFiles,fileRejections:r.fileRejections});case"reset":return x({},Me);default:return e}}function rr(){}const pt=({emailTemplate:e,setEmailTemplate:r,onClose:t,users:s})=>{const[o,a]=u.useState(e.subject),[l,p]=u.useState(e.body),[m,c]=u.useState("editing"),[b,y]=u.useState(""),L=tr(),B=async()=>{if(!o.trim()){y("Subject cannot be empty."),I.error("Subject cannot be empty.");return}if(!l.trim()){y("Body cannot be empty."),I.error("Body cannot be empty.");return}c("sending"),y("");try{const E=sessionStorage.getItem("token");if(!E)throw new Error("User is not authenticated.");r({subject:o,body:l});const T={users:s,emailTemplate:{subject:o,body:l}},Y=await re.post("https://knowvara.com/api/api/import/send-emails",T,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`}});c("success"),I.success(Y.data.message||"Emails sent successfully!")}catch(E){console.error("Error sending emails:",E);const T=xe(E);y(T),c("error"),I.error(T)}},$=()=>{c("editing"),y("")},z=()=>{t(),L("/admin/people")},F=()=>{m!=="sending"&&t()};let _,N,O=!1;switch(m){case"editing":_=B,N="Send Invitations",O=!1;break;case"sending":_=()=>{},N="Sending...",O=!0;break;case"success":_=z,N="Close",O=!0;break;case"error":_=$,N="Retry",O=!1;break;default:_=()=>{},N="Confirm",O=!1}return n.jsxs(Pe,{title:"Edit Email Template",onClose:F,onConfirm:_,confirmText:N,singleButton:O,widthClassName:"max-w-lg",children:[m==="editing"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Subject:"}),n.jsx("input",{type:"text",value:o,onChange:E=>a(E.target.value),className:"w-full border px-3 py-2 rounded",placeholder:"Enter email subject"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-gray-700 font-bold mb-2",children:"Body:"}),n.jsx("textarea",{value:l,onChange:E=>p(E.target.value),rows:10,className:"w-full border px-3 py-2 rounded",placeholder:"Enter email body"})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Use placeholders like ",n.jsx("code",{children:"{firstName}"}),","," ",n.jsx("code",{children:"{passwordLink}"})," to personalize the emails."]})]}),m==="sending"&&n.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[n.jsx("p",{className:"text-gray-700 mb-4",children:"Sending welcome email to new users. This may take a few moments. Please wait..."}),n.jsx("div",{className:"loader"})," "]}),m==="success"&&n.jsx("div",{className:"flex flex-col items-center justify-center p-4",children:n.jsx("p",{className:"text-green-600 mb-4",children:"Success! All user emails have been sent."})}),m==="error"&&n.jsx("div",{className:"flex flex-col items-center justify-center p-4",children:n.jsx("p",{className:"text-red-600 mb-4",children:b})})]})},ht=()=>{const e=tr(),[r,t]=u.useState([]),[s,o]=u.useState(new Set),[a,l]=u.useState(!1),[p,m]=u.useState(!1),[c,b]=u.useState({subject:"Welcome to the Learning Management System",body:`Hello {FirstName},

A new user account has been created for you in the Learning Management System. Please set your password using the following link: {PasswordLink}

Best regards,
LMS Team`}),[y,L]=u.useState(!1),[B,$]=u.useState([]),[z,F]=u.useState(""),[_,N]=u.useState(!1),[O,E]=u.useState(0),[T,Y]=u.useState(0),[K,se]=u.useState(0),[W,H]=u.useState(!1),[ae,J]=u.useState(!1);u.useEffect(()=>{(async()=>{J(!0);try{const S=sessionStorage.getItem("token");if(!S)throw new Error("User is not authenticated.");const v=await re.get("https://knowvara.com/api/api/import/info",{headers:{Authorization:`Bearer ${S}`}});E(v.data.currentUserCount),Y(v.data.usersLimit)}catch(S){console.error("Error fetching organization info:",S);const v=xe(S);F(v),I.error(v)}finally{J(!1)}})()},[]);const V=u.useCallback(async f=>{if(f.length===0){I.error("Please upload a valid Excel file.");return}const S=f[0],v=new FormData;v.append("userFile",S),l(!0),F("");try{const R=sessionStorage.getItem("token");if(!R)throw new Error("User is not authenticated.");const h=await re.post("https://knowvara.com/api/api/import/preview",v,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${R}`}});t(h.data.preview),o(new Set(h.data.preview.map(k=>k.id)));const M=h.data.preview.filter(k=>!k.isExistingUser).length;if(se(M),O+M>T){H(!0),t([]),o(new Set);return}}catch(R){console.error("Error uploading file:",R);const h=xe(R);F(h),I.error(h)}finally{l(!1)}},[O,T]),{getRootProps:w,getInputProps:C,isDragActive:ue}=fr({onDrop:V,accept:{"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"],"application/vnd.ms-excel":[".xls"]},multiple:!1}),de=f=>{o(S=>{const v=new Set(S);return v.has(f)?v.delete(f):v.add(f),v})},oe=()=>{e("/admin/people")},A=async()=>{var f,S,v,R;if(s.size===0){I.error("No users selected for import.");return}m(!0),F("");try{const h=sessionStorage.getItem("token");if(!h)throw new Error("User is not authenticated.");const k={selectedUsersData:r.filter(Z=>s.has(Z.id))},q=await re.post("https://knowvara.com/api/api/import/process",k,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`}});if("importedUsers"in q.data&&q.data.importedUsers.length>0){$(q.data.importedUsers),L(!0),I.success("Import processed successfully. Emails will be sent to new users.");const Z=q.data.importedUsers.length;E(pe=>pe+Z)}else I.success("Import processed successfully. All users already existed and were updated."),e("/admin/people")}catch(h){if(console.error("Error processing import:",h),re.isAxiosError(h)&&((S=(f=h.response)==null?void 0:f.data)!=null&&S.errors))F(h.response.data.errors.join(`
`)),h.response.data.errors.forEach(M=>I.error(M));else if(re.isAxiosError(h)&&((R=(v=h.response)==null?void 0:v.data)!=null&&R.message))F(h.response.data.message),I.error(h.response.data.message);else{const M=xe(h);F(M),I.error(M)}}finally{m(!1)}};return n.jsxs("div",{className:"flex flex-col md:flex-row h-auto min-h-[100%]",children:[n.jsxs("div",{className:"flex flex-col items-start w-full md:w-1/5 border-r border-gray-300 p-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Bulk User Import"}),n.jsxs("div",{...w(),className:`w-full mb-4 p-6 border-2 border-dashed rounded-lg text-center cursor-pointer ${ue?"border-green-600":"border-gray-400"}`,children:[n.jsx("input",{...C()}),ue?n.jsx("p",{children:"Drop the file here ..."}):n.jsxs("p",{children:["Drag & drop an Excel file here,",n.jsx("br",{}),"or click to select a file",n.jsx("br",{}),"(Supported formats: .xlsx, .xls)"]})]}),a&&n.jsx("p",{className:"mt-4",children:"Uploading and parsing the file..."}),z&&n.jsx("p",{className:"mt-4 text-red-500",children:z}),n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"mb-2",children:"Use the bulk import feature to add new users or update existing user information. Fill in the required fields and assign teams, courses, bundles, and learning plans as needed."}),n.jsxs("p",{children:["Click",n.jsx("a",{href:"/SampleUserImport.xlsx",download:!0,className:"text-blue-500 underline ml-1",children:"here"})," ","to download the import template. For more information, click"," ",n.jsx("button",{onClick:()=>N(!0),className:"text-blue-500 underline",children:"here"})]}),n.jsx("button",{onClick:oe,className:"px-4 py-2 lms-cancel-button mr-2 mt-4",children:"Return"})]})]}),n.jsxs("div",{className:"w-full md:w-4/5 p-4",children:[ae&&n.jsx("p",{className:"text-center",children:"Fetching organization information..."}),!ae&&r.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mt-6 overflow-auto",children:[n.jsx("h3",{className:"text-xl mb-2",children:"Preview Imported Users"}),n.jsxs("table",{className:"min-w-full bg-white border",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2 border",children:"Select"}),n.jsx("th",{className:"px-4 py-2 border",children:"First Name"}),n.jsx("th",{className:"px-4 py-2 border",children:"Last Name"}),n.jsx("th",{className:"px-4 py-2 border",children:"Email"}),n.jsx("th",{className:"px-4 py-2 border",children:"Job Title"}),n.jsx("th",{className:"px-4 py-2 border",children:"Department"}),n.jsx("th",{className:"px-4 py-2 border",children:"Date of Birth"}),n.jsx("th",{className:"px-4 py-2 border",children:"Address"}),n.jsx("th",{className:"px-4 py-2 border",children:"City"}),n.jsx("th",{className:"px-4 py-2 border",children:"State"}),n.jsx("th",{className:"px-4 py-2 border",children:"Zip"}),n.jsx("th",{className:"px-4 py-2 border",children:"Phone Number"}),n.jsx("th",{className:"px-4 py-2 border",children:"Teams"}),n.jsx("th",{className:"px-4 py-2 border",children:"Courses"}),n.jsx("th",{className:"px-4 py-2 border",children:"Bundles"}),n.jsx("th",{className:"px-4 py-2 border",children:"Learning Plans"})]})}),n.jsx("tbody",{children:r.map(f=>n.jsxs("tr",{children:[n.jsx("td",{className:"px-4 py-2 border text-center",children:n.jsx("input",{type:"checkbox",checked:s.has(f.id),onChange:()=>de(f.id)})}),n.jsx("td",{className:"px-4 py-2 border",children:f.firstName}),n.jsx("td",{className:"px-4 py-2 border",children:f.lastName}),n.jsx("td",{className:"px-4 py-2 border",children:f.email}),n.jsx("td",{className:"px-4 py-2 border",children:f.jobTitle||"-"}),n.jsx("td",{className:"px-4 py-2 border",children:f.department||"-"}),n.jsx("td",{className:"px-4 py-2 border",children:f.dateOfBirth||"-"}),n.jsx("td",{className:"px-4 py-2 border",children:f.address||"-"}),n.jsx("td",{className:"px-4 py-2 border",children:f.city||"-"}),n.jsx("td",{className:"px-4 py-2 border",children:f.state||"-"}),n.jsx("td",{className:"px-4 py-2 border",children:f.zip||"-"}),n.jsx("td",{className:"px-4 py-2 border",children:f.phoneNumber||"-"}),n.jsx("td",{className:"px-4 py-2 border",children:f.teams.length>0?f.teams.join(", "):"-"}),n.jsx("td",{className:"px-4 py-2 border",children:f.courses.length>0?f.courses.join(", "):"-"}),n.jsx("td",{className:"px-4 py-2 border",children:f.bundles.length>0?f.bundles.join(", "):"-"}),n.jsx("td",{className:"px-4 py-2 border",children:f.learningPlans.length>0?f.learningPlans.join(", "):"-"})]},f.id))})]})]}),n.jsx("div",{className:"mt-4 flex justify-end",children:n.jsx("button",{onClick:A,disabled:p,className:`bg-blue-500 text-white px-4 py-2 rounded ${p?"opacity-50 cursor-not-allowed":"hover:bg-blue-600"}`,children:p?"Processing...":"Process Import"})})]}),y&&n.jsx(pt,{emailTemplate:c,setEmailTemplate:b,onClose:()=>L(!1),users:B}),n.jsx(Ke,{children:_&&n.jsxs(Pe,{title:"How to Use Bulk User Import",onClose:()=>N(!1),onConfirm:()=>N(!1),singleButton:!0,confirmText:"Close",widthClassName:"max-w-2xl",children:[n.jsx("h4",{className:"font-semibold",children:"1. Fields Overview:"}),n.jsxs("ul",{className:"list-disc list-inside mb-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"First Name, Last Name, Email:"}),"Provide the basic information for each user. The email address is used to identify existing users and determine whether to create a new account or update an existing one."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Job Title, Department, Date of Birth, Address, City, State, Zip, Phone Number:"}),"These optional fields capture additional user details to build comprehensive profiles."]})]}),n.jsx("h4",{className:"font-semibold",children:"2. Assignments:"}),n.jsxs("ul",{className:"list-disc list-inside mb-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Teams:"}),'Assign users to one or more teams by filling in the "Team" columns. Each "Team" column corresponds to a different team the user belongs to.']}),n.jsxs("li",{children:[n.jsx("strong",{children:"Courses:"}),'Enroll users in specific courses by populating the "Course" columns. Multiple "Course" columns allow users to be enrolled in multiple courses simultaneously.']}),n.jsxs("li",{children:[n.jsx("strong",{children:"Bundles:"}),'Assign users to course bundles using the "Bundle" columns. Bundles are groups of courses that users can be enrolled in together.']}),n.jsxs("li",{children:[n.jsx("strong",{children:"Learning Plans:"}),'Allocate learning plans to users through the "Learning Plan" column. Learning plans guide users through a structured learning path.']})]}),n.jsx("h4",{className:"font-semibold",children:"3. Import Modes:"}),n.jsxs("ul",{className:"list-disc list-inside mb-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Creating New Users:"}),"If the email address in the import file does not exist in the system, a new user account will be created with the provided information and assignments."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Updating Existing Users:"}),"If the email address matches an existing user, their information will be updated based on the import file. This includes updating personal details and managing team memberships, course enrollments, bundle assignments, and learning plan allocations."]})]}),n.jsx("h4",{className:"font-semibold",children:"4. Best Practices:"}),n.jsxs("ul",{className:"list-disc list-inside mb-4",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Consistency:"}),"Ensure that team names, course titles, bundle names, and learning plan identifiers match exactly with those already present in the system to prevent duplication or assignment errors."]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Data Validation:"}),"Verify that all required fields are filled out correctly and that there are no typos in the names of teams, courses, bundles, or learning plans."]})]})]})}),n.jsx(Ke,{children:W&&n.jsx(Pe,{title:"User Limit Exceeded",onClose:()=>H(!1),onConfirm:()=>e("/admin/settings"),confirmText:"Go to Settings",singleButton:!1,widthClassName:"max-w-lg",children:n.jsxs("p",{className:"mb-4",children:["This import will result in"," ",O+K-T," more users than allowed in your organization. Please"," ",n.jsx("a",{href:"/admin/settings",className:"text-blue-500 underline",children:"go to the settings"})," ","page to increase your subscription plan to process this import."]})})})]})]})};export{ht as default};
