import{d as v,r as $,j as e,m as D,a4 as k,a2 as F}from"./index-JlNpboNx.js";import{C as I}from"./CourseStatusBar-LbQkWQkb.js";const L=t=>{if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},P=t=>{const a=new Date(t),r={month:"long"},o=new Intl.DateTimeFormat("en-US",r).format(a),n=a.getDate(),s=L(n);return`${o} ${n}${s}`},E=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),p=(t,a)=>{if(!a)return t;const r=E(a),o=new RegExp(`(${r})`,"gi"),n=t.split(o);return e.jsx(e.Fragment,{children:n.map((s,m)=>o.test(s)?e.jsx("span",{className:"bg-yellow-200",children:s},m):s)})},U=({course:t,enrolled:a,searchTerm:r,isEcomm:o})=>{const{Id:n,Name:s,ImageURL:m,Price:l,ShortDescription:u,certificateURL:i,dueDate:d}=t,j=v(),[f,g]=$.useState(!1),w=l!=null?l.toFixed(2):"N/A",h=()=>{j(`/student/course/${n}`)},N=c=>{c.stopPropagation(),h()},b=c=>{if(c.stopPropagation(),i){const x=i.startsWith("http")?i:`/content/${i}`;window.open(x,"_blank")}},y=m||"/GenericCourseIcon.webp",C=d?new Date(d).getTime()<new Date().setHours(0,0,0,0):!1;return e.jsxs(D.div,{className:`relative p-0 shadow cursor-pointer courseCard card-bg courseCardBorder rounded-lg ${a?"courseCardBorderEnrolled":""} flex flex-col`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.25},whileHover:{scale:1.05},onClick:h,children:[e.jsxs("div",{className:"relative w-full h-64 md:h-48 flex-shrink-0 overflow-hidden shadow-sm rounded-t-lg bg-gray-200",children:[!f&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"loader"})}),e.jsx("img",{src:y,alt:`Course image for ${s}`,loading:"lazy",className:`w-full h-full object-cover transition-opacity duration-500 ${f?"opacity-100":"opacity-0"}`,onLoad:()=>g(!0),onError:c=>{const x=c.target;x.src="/FallbackImage.webp",g(!0)}})]}),e.jsxs("div",{className:"flex flex-col flex-grow mt-1 px-3 py-2 pb-3",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"text-gray-700 font-bold monster",children:r?p(s,r):s}),e.jsx("p",{className:"text-gray-700 courseCardDescription mt-1 text-sm",children:r?p(u,r):u})]}),e.jsx(I,{courseId:n}),e.jsxs("div",{className:"flex justify-between items-center mt-1 h-6",children:[e.jsxs("div",{className:"flex items-center",children:[i&&e.jsx("button",{onClick:b,className:"lms-icon mr-2","aria-label":"View Certificate",children:e.jsx(k,{size:20})}),d&&e.jsxs("span",{className:`text-xs ${C?"font-bold text-red-700":"text-gray-700"}`,children:["Due: ",P(d)]})]}),e.jsxs("div",{className:"flex items-center",children:[l!==0&&o&&!a&&e.jsxs("div",{className:"mr-2 text-sm font-bold text-gray-700",children:["$",w]}),e.jsx("button",{onClick:N,className:"w-7 h-7 flex items-center justify-center rounded-full text-white bg-gray-300","aria-label":"Play Course",children:e.jsx(F,{size:12,className:"text-white",style:{marginLeft:"1px"}})})]})]})]})]})};export{U as C};
